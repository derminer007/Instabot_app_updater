const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');function quoteIdent(_0x489f45){if(_0x489f45===undefined||_0x489f45===null)throw new Error('Invalid\x20identifier');const _0x467d63=String(_0x489f45),_0x17213e=_0x467d63['replace'](/"/g,'\x22\x22');return'\x22'+_0x17213e+'\x22';}async function extractFirstName(_0x27776a,_0x5368e3){try{const _0x4dfbdc=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x5368e3},'body':JSON['stringify']({'clearname':_0x27776a})});if(!_0x4dfbdc['ok']){const _0x1bbd63=await _0x4dfbdc['text']();throw new Error(_0x4dfbdc['status']+':\x20'+_0x1bbd63);}const _0x5bef9b=await _0x4dfbdc['json']();return _0x5bef9b;}catch(_0x54364a){console['error']('Error\x20in\x20extractFirstName:',_0x54364a);throw _0x54364a;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_ACCOUNT_PRIVAT_LABEL='//span[contains(.,\x20\x27private\x27)]',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_SEE_ALL_FOLLOWERS_TEXT='//span[contains(.,\x20\x27Only\x27)\x20and\x20contains(.,\x20\x27all\x20followers.\x27)]',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x18cfd3=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x18cfd3['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x18cfd3['webContents']['openDevTools']();}app['whenReady']()['then'](async()=>{try{await initOptionsDb(),console['log']('[OptionsDB]\x20initialisiert:',path['join'](SqlDataDirectory,'options.db'));}catch(_0x12c332){console['error']('[OptionsDB]\x20Initialisierung\x20fehlgeschlagen:',_0x12c332);}})['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0xb81e40){var _0x39f3a4=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2e82fb){console['log']('window\x20id:'+_0x2e82fb['id']),_0x2e82fb['id']>0x1&&(_0x39f3a4=!![]);}),console['log']('child\x20opened\x20='+_0x39f3a4);if(!_0x39f3a4){const _0x9e213e=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x9e213e['loadFile'](_0xb81e40['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));try{optionsDb&&(optionsDb['close'](),optionsDb=null,console['log']('[OptionsDB]\x20geschlossen.'));}catch(_0x201577){console['warn']('[OptionsDB]\x20Fehler\x20beim\x20Schließen:',_0x201577?.['message']||_0x201577);}if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x1e7d5b=require('fs'),_0xdc5a97=path['join'](app['getPath']('userData'),'data'),_0x79c43e=['campaign.db','crm.db','igaccounts.db'],_0x1f5ece=[];try{_0x1e7d5b['mkdirSync'](_0xdc5a97,{'recursive':!![]});for(const _0x46020a of _0x79c43e){const _0x3e9049=path['join'](process['resourcesPath'],'app','build','data',_0x46020a),_0x5eb66c=path['join'](_0xdc5a97,_0x46020a);!_0x1e7d5b['existsSync'](_0x5eb66c)?(_0x1e7d5b['copyFileSync'](_0x3e9049,_0x5eb66c),console['log']('[InitDB]\x20Kopiert\x20'+_0x46020a+'\x20nach:\x20'+_0x5eb66c)):console['log']('[InitDB]\x20'+_0x46020a+'\x20existiert\x20bereits:\x20'+_0x5eb66c),_0x1f5ece['push'](_0x5eb66c);}}catch(_0x33e265){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x33e265);}return _0x1f5ece;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x2f6d2e,AppUpdate:_0x390ad0}=require('electron-updater');_0x2f6d2e['autoDownload']=![],_0x2f6d2e['autoInstallOnAppQuit']=!![],_0x2f6d2e['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x2f6d2e['on']('update-available',_0x2edd20=>{console['log']('Update\x20verfügbar:',_0x2edd20),_0x2f6d2e['downloadUpdate']();}),_0x2f6d2e['on']('update-downloaded',_0x5104d8=>{console['log']('Update\x20heruntergeladen:',_0x5104d8),_0x2f6d2e['quitAndInstall']();}),_0x2f6d2e['on']('error',_0x761599=>{console['error']('Fehler\x20beim\x20Updaten:',_0x761599);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x487650,AppUpdate:_0x5485d3}=require('electron-updater');_0x487650['autoDownload']=![],_0x487650['autoInstallOnAppQuit']=!![],_0x487650['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x487650['on']('update-available',_0x2d53b4=>{console['log']('Update\x20verfügbar:',_0x2d53b4),_0x487650['downloadUpdate']();}),_0x487650['on']('update-downloaded',_0x22e6b=>{console['log']('Update\x20heruntergeladen:',_0x22e6b),console['log']('Neustarten\x20zum\x20Updaten');}),_0x487650['on']('error',_0x41ca63=>{console['error']('Fehler\x20beim\x20Updaten:',_0x41ca63);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let optionsDb,optionsDbPath;function ensureDirSync(_0x4a6b50){try{fs_no_promise['mkdirSync'](_0x4a6b50,{'recursive':!![]});}catch(_0x5d8399){}}function initOptionsDb(){return new Promise((_0x4cb976,_0x383437)=>{try{ensureDirSync(SqlDataDirectory),optionsDbPath=path['join'](SqlDataDirectory,'options.db'),optionsDb=new sqlite3['Database'](optionsDbPath,_0x23b6f9=>{if(_0x23b6f9)return _0x383437(_0x23b6f9);optionsDb['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20options\x20(key\x20TEXT\x20PRIMARY\x20KEY,\x20value\x20TEXT\x20NOT\x20NULL)',_0x42beaa=>{if(_0x42beaa)return _0x383437(_0x42beaa);optionsDb['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)',['isHeadless','1'],_0x245b2d=>{if(_0x245b2d)return _0x383437(_0x245b2d);_0x4cb976();});});});}catch(_0x38a9b5){_0x383437(_0x38a9b5);}});}function setOption(_0x41ef82,_0x55a7dd){return new Promise((_0x11ac33,_0x315890)=>{if(!optionsDb)return _0x315890(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['run']('INSERT\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)\x20ON\x20CONFLICT(key)\x20DO\x20UPDATE\x20SET\x20value\x20=\x20excluded.value',[_0x41ef82,String(_0x55a7dd)],_0x40f10e=>{if(_0x40f10e)return _0x315890(_0x40f10e);_0x11ac33();});});}function getOption(_0x13332d){return new Promise((_0x31bfd5,_0x5efceb)=>{if(!optionsDb)return _0x5efceb(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['get']('SELECT\x20value\x20FROM\x20options\x20WHERE\x20key\x20=\x20?',[_0x13332d],(_0x12a3f1,_0x237575)=>{if(_0x12a3f1)return _0x5efceb(_0x12a3f1);_0x31bfd5(_0x237575?_0x237575['value']:null);});});}async function getIsHeadless(){try{const _0x55295b=await getOption('isHeadless');if(_0x55295b===null||_0x55295b===undefined)return!![];if(_0x55295b==='1'||_0x55295b==='true'||_0x55295b===!![])return!![];if(_0x55295b==='0'||_0x55295b==='false'||_0x55295b===![])return![];return console['log']('[OptionsDB]\x20getIsHeadless\x20unerwarteter\x20Wert:',_0x55295b),Boolean(_0x55295b);}catch(_0x196563){return console['warn']('[OptionsDB]\x20getIsHeadless\x20Fehler,\x20fallback=true:',_0x196563?.['message']||_0x196563),!![];}}function setGlobalDelay(_0x4d3558){return new Promise(async(_0x486e64,_0x16b1d2)=>{try{if(!optionsDb)return _0x16b1d2(new Error('Options-DB\x20nicht\x20initialisiert'));const _0x51d401=_0x4d3558===null||_0x4d3558===undefined||_0x4d3558===''?'':String(Number(_0x4d3558));await setOption('zeitabstand_global',_0x51d401),_0x486e64();}catch(_0x317eeb){_0x16b1d2(_0x317eeb);}});}function getGlobalDelay(){return new Promise(async(_0x315f22,_0x5a040d)=>{try{if(!optionsDb)return _0x5a040d(new Error('Options-DB\x20nicht\x20initialisiert'));const _0xb421f7=await getOption('zeitabstand_global');if(_0xb421f7===null||_0xb421f7===undefined||_0xb421f7==='')return _0x315f22(null);const _0x8ba2d0=Number(_0xb421f7);if(Number['isFinite'](_0x8ba2d0))return _0x315f22(_0x8ba2d0);optionsDb['get']('SELECT\x20zeitabstand_global\x20FROM\x20options\x20WHERE\x20key\x20=\x20?\x20LIMIT\x201',['__global__'],(_0x59c657,_0x3086dd)=>{if(_0x59c657)return _0x5a040d(_0x59c657);if(_0x3086dd&&(_0x3086dd['zeitabstand_global']||_0x3086dd['zeitabstand_global']===0x0)){const _0x357342=Number(_0x3086dd['zeitabstand_global']);return _0x315f22(Number['isFinite'](_0x357342)?_0x357342:null);}return _0x315f22(null);});}catch(_0x167e49){_0x5a040d(_0x167e49);}});}let browser_login=null;async function getBrowserPageLogin(){let _0x446e3f='',_0x13c444=null;if(process['platform']==='darwin')_0x446e3f=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x446e3f=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x446e3f}),_0x13c444=await browser_login['newPage'](),_0x13c444['setDefaultNavigationTimeout'](0x3a98),_0x13c444['setDefaultTimeout'](0x3a98),await _0x13c444['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x13c444;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x1ec5f9=0x1,_0x57fc98=0x0){try{let _0x15b034='',_0x518b7b=null;const _0xb2f8c0=await getIsHeadless();if(process['platform']==='darwin')_0x15b034=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x15b034=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}_0x1ec5f9===0x0&&!pageStack[_0x57fc98]&&(browser=await puppeteer['launch']({'headless':_0xb2f8c0,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x15b034}),_0x518b7b=await browser['newPage'](),_0x518b7b['setDefaultNavigationTimeout'](0x3a98),_0x518b7b['setDefaultTimeout'](0x3a98),await _0x518b7b['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57fc98]=_0x518b7b);(browser===null||pageStack[_0x57fc98]===null||pageStack[_0x57fc98]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0xb2f8c0,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x15b034}));(pageStack[_0x57fc98]===null||pageStack[_0x57fc98]['isClosed']())&&(_0x518b7b=await browser['newPage'](),_0x518b7b['setDefaultNavigationTimeout'](0x3a98),_0x518b7b['setDefaultTimeout'](0x3a98),await _0x518b7b['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57fc98]=_0x518b7b);try{await pageStack[_0x57fc98]['evaluate'](()=>!![]);}catch(_0x1e64e2){const _0x1d473b=String(_0x1e64e2&&_0x1e64e2['message']?_0x1e64e2['message']:_0x1e64e2),_0x387ed7=/(detached\s*frame|Session closed|Target closed|Execution context was destroyed|Cannot find context)/i['test'](_0x1d473b);if(_0x387ed7){try{if(pageStack[_0x57fc98])await pageStack[_0x57fc98]['close']()['catch'](()=>{});}catch(_0x4b34cb){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x477099){}browser=await puppeteer['launch']({'headless':_0xb2f8c0,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x15b034});const _0x50b97d=await browser['newPage']();_0x50b97d['setDefaultNavigationTimeout'](0x3a98),_0x50b97d['setDefaultTimeout'](0x3a98),await _0x50b97d['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57fc98]=_0x50b97d;}else{try{if(pageStack[_0x57fc98])await pageStack[_0x57fc98]['close']()['catch'](()=>{});}catch(_0xb9fb08){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x2abdcb){}browser=await puppeteer['launch']({'headless':_0xb2f8c0,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x15b034});const _0x29deb1=await browser['newPage']();_0x29deb1['setDefaultNavigationTimeout'](0x3a98),_0x29deb1['setDefaultTimeout'](0x3a98),await _0x29deb1['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57fc98]=_0x29deb1;}}return pageStack[_0x57fc98];}catch(_0xb6b94e){console['error']('Failed\x20to\x20launch\x20browser:',_0xb6b94e);const _0x1dadfe=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0xb6b94e);throw _0x1dadfe;}}ipcMain['on']('login',async(_0x1965ed,_0x4edfb5)=>{const _0x216a95=await getBrowserPageLogin();await _0x216a95['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x216a95,_0x4edfb5),ipcMain['on']('setLoginCookies',async(_0x28e77f,_0x124231)=>{try{await set_login_cookies(_0x216a95,_0x124231);}catch(_0x39c989){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x39c989);}});}),ipcMain['handle']('set-headless',async(_0x47ce1e,_0x3a70e6)=>{const _0xb1acba=!!_0x3a70e6;if(!optionsDb)try{await initOptionsDb();}catch(_0x19daca){console['error']('[OptionsDB]\x20Init\x20on\x20set-headless\x20fehlgeschlagen:',_0x19daca);}return await setOption('isHeadless',_0xb1acba?'1':'0'),console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20(DB)\x20auf:',_0xb1acba),{'ok':!![],'headless':_0xb1acba};}),ipcMain['handle']('get-headless',async()=>{const _0x12a32c=await getIsHeadless();return{'headless':_0x12a32c};}),ipcMain['handle']('set-global-delay',async(_0xf70559,_0xa061e7)=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x23fcf0){console['error']('[OptionsDB]\x20Init\x20on\x20set-global-delay\x20fehlgeschlagen:',_0x23fcf0);}return await setGlobalDelay(_0xa061e7),{'ok':!![]};}),ipcMain['handle']('get-global-delay',async()=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x3022e0){console['error']('[OptionsDB]\x20Init\x20on\x20get-global-delay\x20fehlgeschlagen:',_0x3022e0);}const _0x4ecc15=await getGlobalDelay();return{'value':_0x4ecc15};}),ipcMain['on']('export-relation',async(_0x46f721,_0x589120)=>{try{await exportDatabase(_0x589120),_0x46f721['reply']('export-relation-response',{'success':!![]});}catch(_0x260e03){console['error'](_0x260e03),_0x46f721['reply']('export-relation-response',{'success':![],'message':_0x260e03['message']});}}),ipcMain['handle']('sendMessage',async(_0xd08216,_0x47d397,_0x5f037c,_0x3a69c0,_0x2f174d,_0x41c0f3,_0x2ce038,_0x5be022,_0x5416ea,_0x3fbf7e,_0x451c74,_0x403fa9,_0x420030)=>{isStopping=![];let _0x26e1bf=null;return _0x2ce038?_0x26e1bf=await getBrowserPage(_0x2f174d,_0x5be022):_0x26e1bf=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x47d397),send_message(_0x26e1bf,_0x47d397,_0x5f037c,_0x3a69c0,_0x2f174d,_0x41c0f3,_0x5416ea,_0x3fbf7e,_0x451c74,_0x403fa9,_0x420030);}),ipcMain['handle']('stop-action',async(_0xf91516,_0x3a46ee)=>{isStopping=!![];const _0x1b3c4c=await getBrowserPage(0x1,_0x3a46ee);await _0x1b3c4c['close']();}),ipcMain['handle']('fetch_followers',async(_0x35947c,_0x1cdca9,_0x26bf7b,_0x5452a3,_0x5ac9ac,_0x173412,_0xce2a7d)=>{isStopping=![];const _0x5f1628=await getBrowserPage();return fetch_followers_from_account(_0x35947c,_0x5f1628,_0x1cdca9,_0x26bf7b,_0x5452a3,_0x5ac9ac,_0x173412,_0xce2a7d);}),ipcMain['handle']('get-account-details',async(_0x5ab652,_0x20a24a,_0x3e04be,_0x104ae0)=>{isStopping=![];const _0x436401=await getBrowserPage();return fetch_account_details(_0x436401,_0x20a24a,_0x3e04be,_0x104ae0);}),ipcMain['handle']('fetch_likes',async(_0x4a7cb5,_0xdf0d4f,_0x26c1b1,_0x327643,_0x370edb,_0x136907,_0x351f7a)=>{isStopping=![];const _0x4cab93=await getBrowserPage();return fetch_likers_from_post(_0x4a7cb5,_0x4cab93,_0xdf0d4f,_0x26c1b1,_0x327643,_0x370edb,_0x136907,_0x351f7a);}),ipcMain['handle']('fetch_comments',async(_0x2564b7,_0x22beb2,_0x330994,_0x396c95,_0xa50dc,_0xfbc685,_0x158db0)=>{isStopping=![];const _0x5b798f=await getBrowserPage();return fetch_comments_from_post(_0x2564b7,_0x5b798f,_0x22beb2,_0x330994,_0x396c95,_0xa50dc,_0xfbc685,_0x158db0);});async function updateAppSilent(){const {spawn:_0x9b4b42}=require('child_process'),_0x5dffa6=require('path'),_0x5de241=require('electron-log');return _0x5de241['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5741e6,_0xb5aafb)=>{const {updateElectronApp:_0x4ce0b9,UpdateSourceType:_0x1ab271}=require('update-electron-app');_0x4ce0b9({'updateSource':{'type':_0x1ab271['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x5de241}),_0x5741e6('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x1f8a8c,_0x3f3cb2)=>{doFullElectronUpdateSilent(),_0x1f8a8c('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x4ebf2b}=require('child_process'),_0x3b4a6f=require('path'),_0xd23b71=require('electron-log');return _0xd23b71['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x39ebc9,_0x2286f2)=>{const {updateElectronApp:_0x34a858,UpdateSourceType:_0x4bcc80}=require('update-electron-app');_0x34a858({'updateSource':{'type':_0x4bcc80['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xd23b71}),_0x39ebc9('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x33dece,_0x2b6004)=>{doFullElectronUpdate(),_0x33dece('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x41ebb4,_0x4daca7)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x41ebb4('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x4c2f01=path['join'](__dirname,'mac-updater-intern.sh'),_0x1009bd=spawn('/bin/bash',[_0x4c2f01],{'detached':!![],'stdio':'ignore'});_0x1009bd['unref'](),setTimeout(()=>{_0x41ebb4('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x4daca7(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x3df488=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0xe6e53b,_0x2b172a)=>{console['log']('Update\x20Silent:\x20'+_0x2b172a);if(_0x2b172a){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x4c684e,_0xbd7361){return Math['random']()*(_0xbd7361-_0x4c684e+0x1)+_0x4c684e;}function delay(_0x2f45f6,_0x53c3c9){let _0x258df3=getRnd(_0x2f45f6,_0x53c3c9);return new Promise(function(_0x379e88){setTimeout(_0x379e88,_0x258df3);});}async function scroll(_0x52ea85,_0x1c92c5,_0xaf4958=0x2,_0x598129){const _0x1b6327=await _0x52ea85['waitForSelector'](_0x1c92c5);for(let _0x4bdc76=0x0;_0x4bdc76<_0xaf4958;_0x4bdc76++){console['log']('Scrolling\x20'+_0x4bdc76),await _0x52ea85['evaluate'](_0x271ec0=>{const _0x562cf8=document['querySelector'](_0x271ec0);_0x562cf8&&_0x562cf8['scrollBy'](0x0,0x190);},_0x1c92c5),await delay(0x320,0x5dc),_0x598129();}}async function saveCookies(_0x40bab7){let _0x456065=await _0x40bab7['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x456065,null,0x2));}async function notificationClear(_0x2d6b2f){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x2d6b2f['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x2d6b2f['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x56049c){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x56049c);}}async function getTargetProfiles(_0x100a24){return new Promise((_0x311ecb,_0x2c0e1e)=>{const _0xf130c=quoteIdent(_0x100a24);db['all']('SELECT\x20*\x20FROM\x20'+_0xf130c,(_0x508ca7,_0x35193d)=>{_0x508ca7?_0x2c0e1e(_0x508ca7):_0x311ecb(_0x35193d);});});}async function login_legacy(_0x224d77,_0x3ec79c,_0x280eb6){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x224d77,_0x3ec79c),await createUserIfNotExists(_0x3ec79c,_0x280eb6);}catch(_0x311097){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x311097);}try{await _0x224d77['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x224d77['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x224d77['click']('button._a9--._ap36._a9_0');}catch(_0x424f94){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x224d77['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x224d77['type']('input[name=\x27username\x27]',_0x3ec79c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x224d77['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x224d77['type']('input[name=\x27password\x27]',_0x280eb6,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x224d77['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x224d77['click']('button[type=\x27submit\x27]');}catch(_0x10f814){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x224d77),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x224d77,_0x3ec79c);}catch(_0x179f16){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x179f16);}}catch(_0x21e436){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x21e436);}}async function login(_0x45ae4f,_0x2c8b0d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x45ae4f,_0x2c8b0d),await createUserIfNotExists(_0x2c8b0d);}catch(_0x29a57b){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x29a57b);}try{await _0x45ae4f['goto']('https://www.instagram.com/accounts/login/');}catch(_0x2f10d9){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2f10d9);}}async function set_login_cookies(_0x281dcf,_0x4a6833){try{await saveCookiesForUser(_0x281dcf,_0x4a6833);}catch(_0x23af2e){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x23af2e);}}async function waitForXPath(_0x5abb4c,_0x5490ad,_0x471dd4={}){return await _0x5abb4c['waitForFunction'](_0x259fb0=>{return document['evaluate'](_0x259fb0,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x471dd4,_0x5490ad),_0x5abb4c['evaluateHandle'](_0x1c01ad=>document['evaluate'](_0x1c01ad,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x5490ad);}async function waitForSelectorWithFallbacks(_0x370cb6,_0x596164,_0x3cfa87={}){!Array['isArray'](_0x596164)&&(_0x596164=[_0x596164]);for(let _0x73ac8f=0x0;_0x73ac8f<_0x596164['length'];_0x73ac8f++){const _0x4ee04f=_0x596164[_0x73ac8f],_0x2e7abf=_0x4ee04f['startsWith']('//')||_0x4ee04f['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x2e7abf?'XPath':'Selector')+'\x20'+(_0x73ac8f+0x1)+'/'+_0x596164['length']+':\x20'+_0x4ee04f['substring'](0x0,0x32)+'...');const _0x1419e7=_0x73ac8f===0x0?_0x3cfa87['timeout']||0x1388:0x7d0;let _0x610259;if(_0x2e7abf){const _0x36014c=await waitForXPath(_0x370cb6,_0x4ee04f,{..._0x3cfa87,'timeout':_0x1419e7});if(!_0x36014c)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x610259=_0x36014c;}else _0x610259=await _0x370cb6['waitForSelector'](_0x4ee04f,{..._0x3cfa87,'timeout':_0x1419e7});return console['log']((_0x2e7abf?'XPath':'Selector')+'\x20'+(_0x73ac8f+0x1)+'\x20gefunden!'),_0x610259;}catch(_0x41e14b){console['log']((_0x2e7abf?'XPath':'Selector')+'\x20'+(_0x73ac8f+0x1)+'\x20nicht\x20gefunden:\x20'+_0x41e14b['message']);if(_0x73ac8f===_0x596164['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x596164['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x41e14b['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x251835,_0x438638,_0x14577c={}){return await _0x251835['waitForFunction'](_0x34e9fc=>{return document['evaluate'](_0x34e9fc,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x14577c,_0x438638),_0x251835['evaluateHandle'](_0x624262=>{const _0xa1d47a=document['evaluate'](_0x624262,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x53110f=[];for(let _0x5f22f3=0x0;_0x5f22f3<_0xa1d47a['snapshotLength'];_0x5f22f3++){_0x53110f['push'](_0xa1d47a['snapshotItem'](_0x5f22f3));}return _0x53110f;},_0x438638)['then'](_0x16eabd=>_0x16eabd['getProperties']());}ipcMain['handle']('check-login',async(_0x21b088,_0x1730df)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x334b37){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x13490a){}browser=null;}const _0x135acf=await getBrowserPage(0x0,0x0),_0x3d07e4=await checkCookiesSession(_0x135acf,_0x1730df);return _0x3d07e4;});async function checkCookiesSession(_0x46eb18,_0x43042a){try{await setCookiesForUser(_0x46eb18,_0x43042a),console['log']('Cookies\x20für\x20'+_0x43042a+'\x20erfolgreich\x20geladen');}catch(_0x31f27e){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x43042a+':',_0x31f27e),![];}try{await _0x46eb18['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x112be0){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x112be0);}await delay(0x6a4,0x7d0);try{const _0x13b540=await checkLoginStatus(_0x46eb18);return console['log']('Login-Status\x20für\x20'+_0x43042a+':\x20'+_0x13b540),_0x13b540;}catch(_0x15a659){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x43042a+':',_0x15a659['message']),![];}}async function checkLoginStatus(_0x1a9531){const _0xed5454=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//a[@role=\x27link\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0xf0b8d2=null;try{_0xf0b8d2=await waitForSelectorWithFallbacks(_0x1a9531,_0xed5454,{'timeout':0x7d0});}catch(_0x194f2){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x194f2),!![];}if(_0xf0b8d2){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x3b993c){const _0x2e19c0=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x1bcf7f=null;try{_0x1bcf7f=await waitForSelectorWithFallbacks(_0x3b993c,_0x2e19c0,{'timeout':0x7d0});}catch(_0x39d617){return console['log']('Seite\x20existiert:\x20'+_0x39d617),!![];}if(_0x1bcf7f){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x278c27){try{const _0x4fa985=await _0x278c27['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x4fa985['length']);if(_0x4fa985&&_0x4fa985['length']>0x0){const _0x1d82ed=_0x4fa985[0x0];await _0x1d82ed['click'](),await delay(0xaf0,0xbb8);const _0x256e69=await _0x278c27['evaluate'](()=>{const _0x67ca1d=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x67ca1d;});if(_0x256e69){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x4189bf=await _0x278c27['$$'](K_BEITRAG_LIKE_BUTTON),_0x159962=_0x4189bf[0x0];await delay(0x514,0x5dc),await _0x278c27['evaluate'](_0xd3d439=>{_0xd3d439['click']();},_0x159962);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x278c27['goBack'](),await delay(0x7d0,0x898);}}catch(_0x51bc68){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x51bc68);throw new Error('Like_Posts:\x20'+_0x51bc68);}}async function likeFirstStory(_0x3181f8){try{const _0x4d765a=await _0x3181f8['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x4d765a['length']);if(_0x4d765a&&_0x4d765a['length']>0x0){const _0x183656=_0x4d765a[0x0];await _0x183656['click'](),await delay(0xaf0,0xbb8);const _0x5cf18d=await _0x3181f8['evaluate'](()=>{const _0x508e9a=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x508e9a;});if(_0x5cf18d){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x3f1f3d=await _0x3181f8['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x3181f8['click'](_0x3f1f3d);}catch(_0x5963f9){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x5963f9);try{const _0x323e42=await _0x3181f8['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x3181f8['evaluateHandle'](_0x40f9f9=>{_0x40f9f9['click']();},_0x323e42);}catch(_0x355e16){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x355e16),await _0x3181f8['evaluate'](()=>{const _0x1fd001=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x1fd001)_0x1fd001['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x3181f8['goBack'](),await delay(0x7d0,0x898);}}catch(_0x49299c){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x49299c);throw new Error('Like_Storys:\x20'+_0x49299c);}}async function send_message(_0x3e2e27,_0x5cf2d8,_0x53a1a2,_0x1f01f1,_0x1c4634,_0x32e60c,_0x490060,_0x100e20,_0x362fcf,_0x46dc2e,_0x5bf8d1){return new Promise(async(_0x25cec2,_0x82d800)=>{_0x32e60c=_0x32e60c['split'](';'),console['log'](_0x32e60c[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x1c4634);if(_0x1f01f1===null||_0x1f01f1===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x82d800('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x3e2e27,_0x32e60c[0x0]);}catch(_0x596479){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x596479),_0x25cec2({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x596479});return;}await delay(0x6a4,0x7d0);try{await _0x3e2e27['goto']('https://www.instagram.com/'+_0x5cf2d8+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x3e2e27);}catch(_0x79e8fd){_0x25cec2({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x79e8fd});return;}try{await checkLoginStatus(_0x3e2e27);}catch(_0xdef3be){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0xdef3be),_0x82d800('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x362fcf==0x1)try{await likeFirstPost(_0x3e2e27);}catch(_0x36bf15){_0x82d800(_0x36bf15);}if(_0x46dc2e==0x1)try{await likeFirstStory(_0x3e2e27);}catch(_0x3952e7){_0x82d800(_0x3952e7);}console['log']('UserSkip:\x20'+_0x490060);if(_0x490060==0x1)try{const _0x4b506a=await _0x3e2e27['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x1c1140=>_0x1c1140['textContent']['trim']());console['log'](_0x4b506a);if(_0x4b506a==='Following'||_0x4b506a==='Folge\x20ich')return _0x25cec2({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x143b28){}await delay(0x6a4,0x7d0);try{const _0x1443f5=await waitForSelectorWithFallbacks(_0x3e2e27,K_DIRECT_MSG_BUTTON);await _0x1443f5['click'](),await delay(0xa8c,0xdac);try{const _0x3bbac5=await waitForSelectorWithFallbacks(_0x3e2e27,K_EXPAND_MSG_BUTTON);await _0x3bbac5['click']();}catch(_0x79f45d){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x79f45d);}}catch(_0x4ca626){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x4ca626);try{await delay(0xa8c,0xbb8);try{const _0x4ee6a3=await waitForSelectorWithFallbacks(_0x3e2e27,K_OPTIONS_BUTTON);await _0x4ee6a3['click']();}catch(_0x59c28e){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x59c28e),_0x25cec2({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x59c28e});return;}await delay(0xa8c,0xbb8);const _0x59b69e=await waitForXPath(_0x3e2e27,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x59b69e['click']();}catch(_0x4b6c4f){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x4b6c4f),_0x25cec2({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x3e2e27);}catch(_0x1c63f7){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x1c63f7);}try{await delay(0xaf0,0xdac);const _0x3e3a91=await waitForSelectorWithFallbacks(_0x3e2e27,K_CHAT_INPUT_FIELD,{'timeout':0x3a98});if(_0x100e20){const _0x3c4276=await _0x3e2e27['$'](K_ALREADY_CHATTED);if(_0x3c4276)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x5cf2d8),_0x25cec2({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x27eebf=await _0x3e2e27['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x27eebf),_0x1f01f1=_0x1f01f1['replace']('{USERNAME}',_0x5cf2d8);let _0x5c5557;if(_0x1f01f1['includes']('{NAME}')||_0x1f01f1['includes']('{name}'))try{const _0x51e9ca=await extractFirstName(_0x27eebf,_0x5bf8d1);console['log']('Response\x20Clearname\x20valid:\x20'+_0x51e9ca['valid']),_0x51e9ca['valid']?(_0x1f01f1=_0x1f01f1['replaceAll'](/{NAME}|{name}/g,_0x51e9ca['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x51e9ca['name']),_0x5c5557=_0x51e9ca['name']):(_0x1f01f1=_0x1f01f1['replaceAll'](/ ?({NAME}|{name})/g,''),_0x5c5557='UNKNOWN_NAME');}catch(_0xe14f9d){console['log'](_0xe14f9d['message']),_0x5c5557=_0xe14f9d['message'];const _0x4a141c=_0x27eebf?_0x27eebf['replace'](/[^\p{L}\s]/gu,''):'',_0x5a6881=_0x4a141c['split']('\x20')[0x0]||'';_0x5a6881['length']>0x2&&!_0x5a6881['includes']('Instagram')?_0x1f01f1=_0x1f01f1['replaceAll'](/{NAME}|{name}/g,_0x5a6881):_0x1f01f1=_0x1f01f1['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x1f01f1);const _0x3fcc6b=_0x1f01f1['split']('\x0a');await _0x3e3a91['type'](_0x3fcc6b[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x5a3f3b=0x1;_0x5a3f3b<_0x3fcc6b['length'];_0x5a3f3b++){await _0x3e2e27['keyboard']['down']('Shift'),await _0x3e2e27['keyboard']['press']('Enter'),await _0x3e2e27['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x3fcc6b[_0x5a3f3b]['length']>0x0&&await _0x3e3a91['type'](_0x3fcc6b[_0x5a3f3b],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x5af03d=await waitForSelectorWithFallbacks(_0x3e2e27,K_SEND_MSG_BUTTON);await _0x5af03d['click']();}catch(_0xed6feb){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0xed6feb),_0x25cec2({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x5cf2d8+'\x20überspringen.','error':_0xed6feb['message']});}await delay(0x320,0x3e8),_0x25cec2({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x27eebf,'extracted_clearname':_0x5c5557});}catch(_0x58be55){let _0x112189=_0x58be55;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x112189),_0x25cec2({'status':0x1f4,'message':'Error\x20500:\x20'+_0x112189});}});}function handle_fail(_0x402a01){if(isStopping)return new Promise(_0x1ea139=>{_0x1ea139('Scraper\x20gestoppt.');});else{let _0x416278='';switch(_0x402a01){case 0x0:_0x416278='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x416278='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x416278='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x416278='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0xd9733b,_0x581495)=>{_0x581495(_0x416278);});}}async function fetch_account_details(_0x1c860c,_0x50e93d,_0x205123,_0xb2f912){try{await setCookiesForUser(_0x1c860c,_0x205123['username']);}catch(_0x4f6c25){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4f6c25);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4f6c25);return handle_fail(0x0);}_0x1c860c['setDefaultNavigationTimeout'](0x7530),await _0x1c860c['goto']('https://www.instagram.com/'+_0x50e93d+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x1c860c);const _0x4dfd66=await _0x1c860c['evaluate'](()=>{const _0x135af6=document['querySelector']('meta[property=\x22og:image\x22]');return _0x135af6?_0x135af6['getAttribute']('content'):null;});await _0x1c860c['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x3206eb=await _0x1c860c['evaluate'](()=>{const _0x534087=document['querySelector']('meta[name=\x22description\x22]');if(!_0x534087)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x5148f1=_0x534087['getAttribute']('content');if(!_0x5148f1)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x5148f1);const _0xa369d8=/\s*[–-]\s*/,_0x2e1d68=_0x5148f1['split'](_0xa369d8);if(_0x2e1d68['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x1340fd=_0x2e1d68[0x0],_0x57b395=_0x2e1d68[0x1],_0x1c8f5b=_0x1340fd['split'](',\x20');if(_0x1c8f5b['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x356d4e=_0x1c8f5b[0x0]['split']('\x20')[0x0],_0x43e317=_0x1c8f5b[0x1]['split']('\x20')[0x0],_0x3c717c=_0x1c8f5b[0x2]['split']('\x20')[0x0];let _0x418f6f='',_0x47897e='';const _0xd809d='\x20on\x20Instagram:\x20',_0x2d41ad=_0x57b395['split'](_0xd809d);return _0x418f6f=_0x2d41ad[0x0]['trim'](),_0x418f6f=_0x418f6f['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x2d41ad['length']>0x1&&(_0x47897e=_0x2d41ad[0x1]['trim'](),_0x47897e['startsWith']('\x22')&&_0x47897e['endsWith']('\x22')&&(_0x47897e=_0x47897e['substring'](0x1,_0x47897e['length']-0x1)['trim']()),_0x47897e=_0x47897e['replace'](/&quot;/g,'')['trim']()),{'followers':_0x356d4e,'following':_0x43e317,'posts':_0x3c717c,'nameText':_0x418f6f,'bio':_0x47897e};});console['log']('Extracted\x20profile\x20data:',_0x3206eb);const _0x5f4e03=_0x3206eb['nameText'],_0x2c984c=_0x4dfd66,_0x345a63=_0x3206eb['bio'],_0x499bf4=_0x3206eb['followers'],_0xc41421=_0x3206eb['following'],_0x4ab366=_0x3206eb['posts'],_0x358083=![],_0x39cb13=![],_0x1d3f3c=![],_0x524b67='\x0a\x20\x20INSERT\x20INTO\x20'+quoteIdent(_0xb2f912)+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x524b67,[_0x50e93d,_0x5f4e03,_0x2c984c,_0x345a63,_0x499bf4,_0xc41421,_0x4ab366,_0x358083,_0x39cb13,_0x1d3f3c],function(_0x3cf911){_0x3cf911?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x3cf911['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x57a85a,_0x51d2ca,_0x1d34a0,_0x7818d1,_0x2e2afd,_0x9dccb5,_0x5a8071,_0x43467d){let _0x54de28=0x4,_0x560090=0x0,_0x5a913e=0x0;try{await setCookiesForUser(_0x51d2ca,_0x9dccb5['username']);}catch(_0x586b23){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x586b23);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x586b23);return handle_fail(0x0);}let _0xa22738=0x0;try{await _0x51d2ca['goto']('https://www.instagram.com/'+_0x1d34a0+'/'),await notificationClear(_0x51d2ca);try{await checkLoginStatus(_0x51d2ca);}catch(_0x334b70){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x334b70);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x51d2ca);}catch(_0x520bd0){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x520bd0);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}let _0x5f4467=null;try{_0x5f4467=await waitForSelectorWithFallbacks(_0x51d2ca,FOLLOWER_ACCOUNT_PRIVAT_LABEL,{'timeout':0x1388});if(_0x5f4467)throw new Error('Angegebener\x20Account\x20ist\x20privat');}catch(_0x144734){if(_0x5f4467)throw new Error('Angegebener\x20Account\x20ist\x20privat');console['log']('Privat-Label\x20nicht\x20gefunden\x20(fortfahren):\x20'+(_0x144734?.['message']||_0x144734));}try{if(_0x7818d1<=0x0){const _0x12e112=await _0x51d2ca['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x335469=await _0x51d2ca['evaluate'](_0x3353ba=>_0x3353ba['innerHTML'],_0x12e112);_0xa22738=Math['ceil'](_0x335469/0x4);}else _0xa22738=Math['ceil'](_0x7818d1/0x4);_0x54de28+=_0xa22738,_0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]);let _0x4f1e51=await _0x51d2ca['waitForSelector']('a[href=\x22/'+_0x1d34a0+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x51d2ca['evaluate'](_0x20a8f8=>{_0x20a8f8['click']();},_0x4f1e51),console['log']('Follower\x20Liste\x20von\x20'+_0x1d34a0+'\x20gesichtet'),_0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]);}catch(_0x11a4f7){console['log']('Follower\x20Liste\x20von\x20'+_0x1d34a0+'\x20nicht\x20gefunden:'+_0x11a4f7);throw new Error('Follower\x20Liste\x20von\x20'+_0x1d34a0+'\x20nicht\x20gefunden:'+_0x11a4f7);return handle_fail(0x0);}}catch(_0x37b05f){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x37b05f);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x37b05f);return handle_fail(0x0);}let _0x4ab0ca=null;try{_0x4ab0ca=await waitForSelectorWithFallbacks(_0x51d2ca,FOLLOWER_SEE_ALL_FOLLOWERS_TEXT,{'timeout':0x1388});}catch(_0x5525a2){console['log']('Hinweis-Label\x20(Only\x20see\x20all\x20followers)\x20nicht\x20gefunden:\x20'+_0x5525a2);}try{await delay(0x12c0,0x1388),_0x4ab0ca&&(_0x57a85a['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':'Nicht\x20alle\x20Follower\x20können\x20bei\x20diesem\x20Account\x20eingesehen\x20werden'}),_0xa22738=0xa);}catch(_0x3ea0ac){console['warn']('Snackbar\x20Sendeversuch\x20fehlgeschlagen:',_0x3ea0ac?.['message']||_0x3ea0ac);}try{await delay(0x12c,0x1f4),console['log']('Auto-scrolls:\x20'+_0xa22738);try{await scroll(_0x51d2ca,FOLLOWER_FENSTER,_0xa22738,_0x31eba1=>{_0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]);});}catch{console['log']('Fallback\x20div:has\x20ausgelöst'),await scroll(_0x51d2ca,'div.x6nl9eh.x1a5l9x9.x7vuprf.x1mg3h75.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',_0xa22738,_0x1ba6a2=>{});}_0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]),await _0x51d2ca['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x2dc1fa=await _0x51d2ca['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x3edb8b=await _0x51d2ca['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]);_0x7818d1<=0x0&&(_0x7818d1=_0x2dc1fa['length']);let _0x923a0b=[];for(let _0xf52669=0x0;_0xf52669<_0x2dc1fa['length']&&_0xf52669<_0x7818d1;_0xf52669++){const _0x19912c=await _0x2dc1fa[_0xf52669]['evaluate'](_0x11dcda=>_0x11dcda['textContent']),_0x3fbeb6=await _0x3edb8b[_0xf52669]['evaluate'](_0x3686fb=>_0x3686fb['textContent']);if(_0x43467d){const _0x13d92f=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x9dccb5['username'],_0x19912c]);if(_0x13d92f){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x19912c);continue;}}_0x923a0b['push'](_0x19912c);const _0x5e6104='INSERT\x20INTO\x20'+quoteIdent(_0x2e2afd)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x5e6104,[_0x19912c,_0x3fbeb6],function(_0x2c58ad){_0x2c58ad?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x2e2afd+'\x27:',_0x2c58ad['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x5a913e=Math['round'](++_0x560090/_0x54de28*0x64),_0x57a85a['sender']['send']('fetch-progress',_0x5a913e,!![]),_0x5a8071&&(_0x57a85a['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x57a85a,_0x51d2ca,_0x9dccb5,_0x2e2afd,_0x923a0b)),_0x4ab0ca&&_0x57a85a['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':'Nicht\x20alle\x20Follower\x20konnten\x20bei\x20diesem\x20Account\x20eingesehen\x20werden:\x20Es\x20wurden\x20'+_0x2dc1fa['length']+'\x20Follower\x20gesammelt'}),new Promise(_0x2c957e=>{_0x2c957e('Scraping\x20finished!');});}catch(_0x59779f){if(_0x5a8071)throw new Error(_0x59779f);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x1d34a0+'\x20nicht\x20gefunden:\x20'+_0x59779f);return handle_fail(0x0);}}async function fetch_details_from_list(_0x201f57,_0x76938b,_0x30bc1c,_0x332317,_0x5c49a){let _0x455aff=0x0,_0x3f0f63=0x0;for(let _0x56f32d=0x0;_0x56f32d<_0x5c49a['length'];_0x56f32d++){console['log']('Processing\x20profile:',_0x5c49a[_0x56f32d]);try{await fetch_account_details(_0x76938b,_0x5c49a[_0x56f32d],_0x30bc1c,_0x332317);}catch(_0x1dafac){console['error']('Detailed\x20Scraping\x20von:\x20',_0x5c49a[_0x56f32d],_0x1dafac);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x5c49a[_0x56f32d]+'\x20'+_0x1dafac);}_0x3f0f63=Math['round'](++_0x455aff/_0x5c49a['length']*0x64),_0x201f57['sender']['send']('fetch-progress',_0x3f0f63,!![],!![]);}}async function fetch_likers_from_post(_0x1bc5ac,_0x62d678,_0x1e6aa7,_0x15b89d,_0x38cebd,_0x2261e1,_0x1a337f,_0x450c5f){let _0x2cab4d=0x4,_0x145506=0x0,_0x273dad=0x0;try{await setCookiesForUser(_0x62d678,_0x2261e1['username']);}catch(_0x21affd){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x21affd);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x21affd);return handle_fail(0x1);}_0x273dad=Math['round'](++_0x145506/_0x2cab4d*0x64),_0x1bc5ac['sender']['send']('fetch-progress',_0x273dad,!![]);try{let _0x6d3f=_0x1e6aa7['substring'](0x0,_0x1e6aa7['lastIndexOf']('/'));_0x6d3f['includes']('/reel/')&&(_0x6d3f=_0x6d3f['replace']('/reel/','/p/'));let _0x194d0d=_0x6d3f+'/liked_by';console['log'](_0x194d0d),await _0x62d678['goto'](_0x194d0d),await delay(0x7d0,0xfa0),await notificationClear(_0x62d678),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x62d678);}catch(_0x98170c){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x98170c);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x62d678);}catch(_0xa4880a){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0xa4880a);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x273dad=Math['round'](++_0x145506/_0x2cab4d*0x64),_0x1bc5ac['sender']['send']('fetch-progress',_0x273dad,!![]),await _0x62d678['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x5ab4c7=await _0x62d678['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x1706e5=await _0x62d678['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x5ab4c7['length']);let _0x21f1f2=path['join'](__dirname,'/likers.csv');_0x273dad=Math['round'](++_0x145506/_0x2cab4d*0x64),_0x1bc5ac['sender']['send']('fetch-progress',_0x273dad,!![]);_0x15b89d<=0x0&&(_0x15b89d=_0x5ab4c7['length']);try{let _0x2e1135=[];for(let _0x2aa051=0x0;_0x2aa051<_0x5ab4c7['length']&&_0x2aa051<_0x15b89d;_0x2aa051++){const _0x32b90e=await _0x5ab4c7[_0x2aa051]['evaluate'](_0x68598=>_0x68598['textContent']),_0xf1afab=await _0x1706e5[_0x2aa051]['evaluate'](_0x268672=>_0x268672['textContent']);if(_0x450c5f){const _0x422262=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x2261e1['username'],_0x32b90e]);if(_0x422262){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x32b90e);continue;}}_0x2e1135['push'](_0x32b90e);const _0x32b518='INSERT\x20INTO\x20'+quoteIdent(_0x38cebd)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x32b518,[_0x32b90e,_0xf1afab],function(_0x229519){_0x229519?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x38cebd+'\x27:',_0x229519['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x273dad=Math['round'](++_0x145506/_0x2cab4d*0x64),_0x1bc5ac['sender']['send']('fetch-progress',_0x273dad,!![]),_0x1a337f&&(_0x1bc5ac['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x1bc5ac,_0x62d678,_0x2261e1,_0x38cebd,_0x2e1135)),new Promise(_0x2162ba=>{_0x2162ba('Scraping\x20finished!');});}catch(_0x30aaf3){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x30aaf3);return handle_fail(0x1);}}catch(_0x397858){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x397858);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x397858);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x571d5f,_0x3ef4cd,_0x37254c,_0x595c3f,_0x180d5e,_0x2de78d,_0x3fe768,_0x3ef7cc){let _0x3ba9ae=0x3,_0x475afb=0x0,_0x211387=0x0;try{await setCookiesForUser(_0x3ef4cd,_0x2de78d['username']);}catch(_0x112821){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x112821);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x112821);return handle_fail(0x2);}try{console['log'](_0x37254c),await _0x3ef4cd['goto'](_0x37254c),await delay(0x7d0,0xfa0),await notificationClear(_0x3ef4cd),await delay(0xc8,0x1f4);const _0x598de6=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x3ef4cd);}catch(_0x4f80db){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x4f80db);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x3ef4cd);}catch(_0x1bd8af){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x1bd8af);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0xa650da;const _0x15d631=await _0x3ef4cd['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x22840e=await _0x3ef4cd['evaluate'](_0x5b2882=>_0x5b2882['innerHTML'],_0x15d631),_0x4e7390=String(_0x22840e)['replace'](/[^0-9]/g,''),_0x39cb44=Number(_0x4e7390)/0x14;_0x595c3f<=0x0?_0xa650da=Math['ceil'](_0x39cb44/0x3):_0xa650da=Math['ceil'](_0x595c3f/0x3);_0x3ba9ae+=_0xa650da,_0x211387=Math['round'](++_0x475afb/_0x3ba9ae*0x64),_0x571d5f['sender']['send']('fetch-progress',_0x211387,!![]),console['log']('Auto-scrolls:\x20'+_0xa650da),await scroll(_0x3ef4cd,_0x598de6,_0xa650da,_0x19560b=>{_0x211387=Math['round'](++_0x475afb/_0x3ba9ae*0x64),_0x571d5f['sender']['send']('fetch-progress',_0x211387,!![]);});try{const _0x4a2120=COM_REPLY_BUTTON_SPAN,_0xedbb2f=await waitForXPathAll(_0x3ef4cd,_0x4a2120);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0xedbb2f['size']),await delay(0x1f4,0x320);let _0x560589=_0xedbb2f['size'],_0x1ddbe8=[];for(const [_0x44ffea,_0x4c5557]of _0xedbb2f){_0x1ddbe8['push'](_0x4c5557);}console['log']('Alle\x20Reply-Buttons:',_0x1ddbe8['length']);try{for(let _0x4dc062=0x0;_0x4dc062<_0x560589;_0x4dc062++){await _0x1ddbe8[_0x4dc062]['click'](),await delay(0x320,0x5dc);}}catch(_0x21694f){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x21694f);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x21694f);return handle_fail(0x2);}}catch(_0x3a8a0d){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x1f6ea6=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x3ef4cd['waitForSelector'](_0x1f6ea6),await delay(0x1f4,0x320),_0x211387=Math['round'](++_0x475afb/_0x3ba9ae*0x64),_0x571d5f['sender']['send']('fetch-progress',_0x211387,!![]);const _0x5b7b22=await _0x3ef4cd['$$'](_0x1f6ea6);let _0xfd206b=path['join'](__dirname,'/comments.csv');_0x595c3f<=0x0&&(_0x595c3f=_0x5b7b22['length']);console['log']('fetch_limit:\x20'+_0x595c3f),console['log']('comments_len:\x20'+_0x5b7b22['length']),_0x595c3f++;try{let _0xeb3a85=[];for(let _0x2d5660=0x1;_0x2d5660<_0x5b7b22['length']&&_0x2d5660<_0x595c3f;_0x2d5660++){const _0x53532f=await _0x5b7b22[_0x2d5660]['evaluate'](_0x5c01ce=>_0x5c01ce['textContent']);if(_0x3ef7cc){const _0x5c7003=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x2de78d['username'],_0x53532f]);if(_0x5c7003){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x53532f);continue;}}try{_0xeb3a85['push'](_0x53532f);const _0x39afc5='INSERT\x20INTO\x20'+quoteIdent(_0x180d5e)+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x39afc5,[_0x53532f],function(_0x54bf0d){_0x54bf0d&&console['log']('error\x20in\x20add-user:'+_0x54bf0d);});}catch(_0x54edb6){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2d5660+'\x20:\x20'+_0x54edb6);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2d5660+'\x20:\x20'+_0x54edb6);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x211387=Math['round'](++_0x475afb/_0x3ba9ae*0x64),_0x571d5f['sender']['send']('fetch-progress',_0x211387,!![]),_0x571d5f['sender']['send']('fetch-progress',0x64,!![]),_0x3fe768&&(_0x571d5f['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x571d5f,_0x3ef4cd,_0x2de78d,_0x180d5e,_0xeb3a85)),_0x571d5f['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x59ecbe=>{_0x59ecbe('Scraping\x20finished!');});}catch(_0x51edb6){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x51edb6);return handle_fail(0x2);}}catch(_0x1976a6){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x1976a6);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x1976a6);return handle_fail(0x2);}}async function set_clearname_from_username(_0x42ca1,_0x52b4e8,_0x5b834b=null){try{let _0x1b0a6e,_0x226a89;const _0x2d66c4='SELECT\x20username\x20FROM\x20'+quoteIdent(_0x52b4e8)+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x2d66c4,[],(_0x9baaf9,_0x1b5b12)=>{_0x9baaf9&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x9baaf9['message']),_0x1b5b12['length']===0x0&&(_0x226a89=_0x1b5b12['length']),_0x1b0a6e=_0x1b5b12['map'](_0x3b3a11=>_0x3b3a11['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x226a89);if(_0x226a89===0x0){console['log']('Leave');return;}const _0x301e74=await _0x42ca1['waitForSelector'](IG_SEARCH_BUTTON);await _0x301e74['click'](),await delay(0x4b0,0x7d0);for(let _0x5de87f of _0x1b0a6e){const _0x52149f=await _0x42ca1['waitForSelector'](IG_SEARCH_INPUT);await _0x52149f['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x42ca1['type'](IG_SEARCH_INPUT,_0x5de87f,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x393bb9=0x1;while(_0x393bb9!=0x14){console['log']('Schleife');try{let _0x2575c8=IG_NAME_SPAN_PART1+_0x393bb9+IG_USERNAME_SPAN_PART2;const _0x36fbff=await _0x42ca1['waitForSelector'](_0x2575c8),_0x4e47a5=await _0x42ca1['evaluate'](_0x34c111=>_0x34c111['innerHTML'],_0x36fbff);await delay(0xc8,0x1f4);if(_0x4e47a5==_0x5de87f){let _0x465ebd=IG_NAME_SPAN_PART1+_0x393bb9+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x247e6a=await _0x42ca1['waitForSelector'](_0x465ebd);let _0x1cb54d=await _0x42ca1['evaluate'](_0x52a0bb=>_0x52a0bb['innerHTML'],_0x247e6a);const _0x3b0af4=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x12f5f7=_0x1cb54d['match'](_0x3b0af4);_0x12f5f7?_0x1cb54d=_0x12f5f7[0x1]['trim']():_0x1cb54d=_0x1cb54d['trim']();_0x1cb54d['includes']('•')&&(_0x1cb54d=_0x1cb54d['substring'](0x0,_0x1cb54d['indexOf']('•')-0x1));const _0x5c4700='UPDATE\x20'+quoteIdent(_0x52b4e8)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x5c4700,[_0x1cb54d,_0x4e47a5],function(_0x174404){_0x174404&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x174404['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x393bb9++;}catch(_0x3c8fee){const _0x4459a1='UPDATE\x20'+quoteIdent(_0x52b4e8)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x4459a1,['',_0x5de87f],function(_0xd7dc83){_0xd7dc83&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0xd7dc83['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x3c8fee);break;}}_0x5b834b&&_0x5b834b();}await _0x301e74['click']();}catch(_0x5a21b8){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x5a21b8);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0xbdc16d,_0x46a928)=>{const _0xa764b5='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0xa764b5,[],(_0x595359,_0xaf29b9)=>{_0x595359?_0x46a928(_0x595359):_0xbdc16d(_0xaf29b9);});});});const sqlGet=(_0x3b83ca,_0x26f273,_0x3623d7=[])=>new Promise((_0x4116d1,_0x330dfe)=>_0x3b83ca['get'](_0x26f273,_0x3623d7,(_0x4d7fc1,_0x5321d6)=>_0x4d7fc1?_0x330dfe(_0x4d7fc1):_0x4116d1(_0x5321d6))),sqlAll=(_0x5746ba,_0x2b0128,_0x4eb4c4=[])=>new Promise((_0x2246e8,_0x2af597)=>_0x5746ba['all'](_0x2b0128,_0x4eb4c4,(_0x43cff9,_0x2eb2fc)=>_0x43cff9?_0x2af597(_0x43cff9):_0x2246e8(_0x2eb2fc)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x2ae9e9=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x54260c=await Promise['all'](_0x2ae9e9['map'](async _0xa8566b=>{const _0x4eea08=[];if(!_0xa8566b['list_id'])_0x4eea08['push']('Liste');if(!_0xa8566b['zeitabstand'])_0x4eea08['push']('Zeitabstand');if(!_0xa8566b['account'])_0x4eea08['push']('Instagram\x20Account');if(_0xa8566b['account'])try{const _0x2d5357=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0xa8566b['account']]);if(!_0x2d5357)_0x4eea08['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x1667ba=_0x2d5357['cookie']&&_0x2d5357['cookie']['trim']()!==''&&_0x2d5357['cookie']['trim']()!=='[]';if(!_0x1667ba)_0x4eea08['push']('Instagram\x20Login');}}catch(_0x468ddf){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x468ddf['message']),_0x4eea08['push']('Instagram\x20Account');}let _0x5c2000='N/A',_0x3c43d6='N/A';if(!_0x4eea08['includes']('Liste')){try{const _0x5588f6=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+quoteIdent(_0xa8566b['list_id']));_0x5c2000=_0x5588f6?.['lead_count']??0x0;}catch(_0x29b601){if(/no such table/i['test'](_0x29b601['message']))_0x4eea08['push']('Liste\x20nicht\x20vorhanden');}try{const _0x24b0dd=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0xa8566b['list_id']]);_0x3c43d6=_0x24b0dd?.['contacted_count']??0x0;}catch(_0x5e949b){}}return{'campaign_name':_0xa8566b['campaign_name'],'lead_count':_0x5c2000,'contacted_count':_0x3c43d6,'status':_0x4eea08['length']===0x0?'Positiv':'Fehler:\x20'+_0x4eea08['join'](',\x20')};}));return{'status':'success','campaigns':_0x54260c};}catch(_0x2d5ef7){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x2d5ef7['message']),{'status':'error','message':_0x2d5ef7['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x5b6bea,_0x4e9c3b)=>{return new Promise((_0x59ea13,_0x48804c)=>{const _0x47c65c='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x47c65c,[_0x4e9c3b],(_0x353efa,_0x36fcfb)=>{_0x353efa?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x353efa),_0x48804c(_0x353efa)):(console['log']('ROWS'),console['log'](_0x36fcfb),debugDatabaseContents(),_0x59ea13(_0x36fcfb));});});});const showTableContents=_0x242929=>{return new Promise((_0x2bfd1e,_0x241642)=>{const _0x5de186='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x242929)+';';campaignDB['all'](_0x5de186,(_0x493fa9,_0x4e4421)=>{_0x493fa9?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x242929+':',_0x493fa9),_0x241642(_0x493fa9)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x242929+':',_0x4e4421),_0x2bfd1e({'status':'success','message':_0x4e4421}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x5c24d3){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x5c24d3);}}ipcMain['handle']('create-campaign',async(_0x232c36,_0x465f15)=>{return new Promise((_0x8d5ee0,_0x4e23be)=>{const _0x1aadbd='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x1aadbd,[String(_0x465f15)],function(_0x5987d3){_0x5987d3?_0x4e23be(_0x5987d3):_0x8d5ee0({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x599b3c,_0x4f3664)=>{return new Promise((_0x2744f9,_0x5bb633)=>{const _0x31fbbd='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x31fbbd,[_0x4f3664],function(_0x3c276d){_0x3c276d?_0x5bb633(_0x3c276d):_0x2744f9({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x23fc04,_0x43979f,_0x1d98b6,_0x134aa6,_0x384148,_0x1990d7,_0x1e7d51,_0x4231bd,_0x3baa3b,_0x48e393)=>{const _0x53e9f3=await createMessageID(_0x384148);return new Promise((_0x1838b4,_0x317019)=>{console['log']('ZEITABSTAND:\x20'+_0x134aa6);if(!_0x43979f||!_0x1d98b6||_0x134aa6===undefined||_0x134aa6===null||_0x134aa6===''||!_0x53e9f3||!_0x1990d7)return _0x317019({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x53e9f3);const _0x106885='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x106885,[_0x1d98b6,_0x134aa6,_0x53e9f3,_0x1990d7,_0x1e7d51,_0x4231bd,_0x3baa3b,_0x48e393,_0x43979f],function(_0x3b844c){if(_0x3b844c)_0x317019({'status':'error','message':_0x3b844c['message']});else this['changes']===0x0?_0x317019({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x1838b4({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x590875,_0x116f23,_0x21673c,_0x33deb6,_0x291a63)=>{return new Promise((_0x5a97e1,_0x10c442)=>{const _0x4126a3='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4126a3,[_0x116f23,_0x21673c,_0x33deb6,_0x291a63],function(_0x11027c){return _0x11027c?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x11027c['message']),_0x10c442('insert-dm-response',{'success':![],'message':_0x11027c['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x5a97e1('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x3c333b=>{return new Promise((_0xfa2778,_0x5d95fb)=>{const _0x20cd62='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x20cd62,[_0x3c333b],(_0x3afde4,_0x27b567)=>{if(_0x3afde4)_0x5d95fb({'status':'error','message':_0x3afde4['message']});else{if(_0x27b567)_0xfa2778(_0x27b567['message_id']);else{const _0xb70617='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0xb70617,[_0x3c333b],function(_0x33d23d){_0x33d23d?_0x5d95fb({'status':'error','message':_0x33d23d['message']}):_0xfa2778(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x3e356a,_0x41e909)=>{return new Promise((_0x10e544,_0xa4ba8d)=>{const _0x298fbc='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+quoteIdent(_0x41e909);db['get'](_0x298fbc,(_0x3a1544,_0x350ec3)=>{_0x3a1544?_0xa4ba8d({'status':'error','message':_0x3a1544['message']}):_0x10e544({'status':'success','count':_0x350ec3['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x25e160,_0x383333){try{const _0x10d9e7=await new Promise((_0x2abc71,_0x3d5eef)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x383333],(_0x7be55b,_0x2ddee4)=>{if(_0x7be55b)_0x3d5eef(_0x7be55b);else{if(_0x2ddee4['length']>0x0){let _0x53b396=JSON['parse'](_0x2ddee4[0x0]['cookie']);console['log'](_0x53b396),_0x2abc71(_0x53b396);}else _0x3d5eef(new Error('User\x20with\x20username\x20'+_0x383333+'\x20does\x20not\x20exist.'));}});});await _0x25e160['setCookie'](..._0x10d9e7),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x279738){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x279738);}}async function saveCookiesForUser(_0x1f11ad,_0x15bfd7){try{const _0x437f54=await _0x1f11ad['cookies']();if(!_0x437f54||_0x437f54['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x15bfd7);const _0x27d631=JSON['stringify'](_0x437f54);if(_0x27d631['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x15bfd7);return new Promise((_0x47a209,_0x6193f)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x15bfd7],(_0x4345cd,_0x2f7cd2)=>{if(_0x4345cd)return console['error']('Error\x20checking\x20user\x20existence:',_0x4345cd),_0x6193f(_0x4345cd);if(_0x2f7cd2){const _0x580587=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x580587['run'](_0x27d631,_0x15bfd7,function(_0x51d5c7){return _0x51d5c7?(console['error']('Error\x20updating\x20cookies:',_0x51d5c7),_0x6193f(_0x51d5c7)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x15bfd7),_0x47a209());});}else{const _0x1ae7a1=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x1ae7a1['run'](_0x15bfd7,_0x27d631,function(_0x584868){return _0x584868?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x584868),_0x6193f(_0x584868)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x15bfd7),_0x47a209());});}});});}catch(_0x2d25e7){console['error']('Error\x20fetching\x20cookies:',_0x2d25e7);throw _0x2d25e7;}}async function createUserIfNotExists(_0xcda7b8){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0xcda7b8],(_0x278125,_0x2632d9)=>{if(_0x278125){console['error']('Error\x20checking\x20user\x20existence:',_0x278125);throw _0x278125;}else{if(!_0x2632d9){const _0x409ee2=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x409ee2['run'](_0xcda7b8,function(_0x5d5581){_0x5d5581?console['error']('Error\x20inserting\x20new\x20user:',_0x5d5581):console['log']('New\x20user\x20created:',_0xcda7b8);});}else console['log']('User\x20already\x20exists:',_0xcda7b8);}});}catch(_0x14e903){console['error']('Error\x20creating\x20user:',_0x14e903);throw _0x14e903;}}ipcMain['handle']('create-relation',async(_0xd86192,_0x537c9b)=>{return new Promise((_0x1c3c48,_0x375651)=>{const _0x9ffed5='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+quoteIdent(_0x537c9b)+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x9ffed5,function(_0x346791){_0x346791?_0x375651(_0x346791):_0x1c3c48({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x334003,_0x4f8e49)=>{return console['log']('droping\x20table'+_0x4f8e49),new Promise((_0x231b8b,_0x2d2a4a)=>{const _0x5769cf='DROP\x20TABLE\x20IF\x20EXISTS\x20'+quoteIdent(_0x4f8e49);console['log']('droping\x20table'+_0x4f8e49),db['run'](_0x5769cf,function(_0x439ecb){_0x439ecb?_0x2d2a4a(_0x439ecb):_0x231b8b({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x4d757d=>{return new Promise((_0x3a74f0,_0x10105b)=>{const _0x38c98a='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x38c98a,[],(_0x5c8053,_0x3f321e)=>{_0x5c8053?_0x10105b(_0x5c8053):_0x3a74f0(_0x3f321e['map'](_0x2d8c1f=>_0x2d8c1f['name']));});});}),ipcMain['handle']('add-user',async(_0x998a16,_0x3026ea,_0x36d9dd)=>{return new Promise(_0x1635a5=>{const _0x588e61=db['prepare']('INSERT\x20INTO\x20'+quoteIdent(_0x36d9dd)+'\x20(username)\x20VALUES\x20(?)');_0x588e61['run'](_0x3026ea,function(_0x1aaec7){_0x1aaec7?console['log']('error\x20in\x20add-user:'+_0x1aaec7):_0x1635a5({'status':'success','id':this['lastID']});}),_0x588e61['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x4aafab,_0x577c94)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x466905,_0x2f8b28)=>{if(_0x466905)_0x577c94(_0x466905);else{_0x4aafab({'status':'success','users':_0x2f8b28});for(_0x2f8b28 of _0x2f8b28){console['log'](_0x2f8b28['username']);}}});});}),ipcMain['handle']('get-data',async(_0x998675,_0x38fd23)=>{return new Promise((_0x23892e,_0x3f7fe2)=>{const _0x19344b='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x38fd23);console['log'](_0x19344b),db['all'](_0x19344b,[],(_0x54cc4d,_0x1ca233)=>{_0x54cc4d?_0x3f7fe2(_0x54cc4d):_0x23892e(_0x1ca233);});});}),ipcMain['handle']('get-accounts',async _0x14e954=>{return new Promise((_0xd047d0,_0x3a427)=>{const _0x320cc4='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x320cc4),igaccountsDB['all'](_0x320cc4,[],(_0xb664f0,_0x35e4c4)=>{_0xb664f0?_0x3a427(_0xb664f0):_0xd047d0(_0x35e4c4);});});}),ipcMain['handle']('get-targets',async(_0x3ac60a,_0x4db8ca)=>{return getTargetProfiles(_0x4db8ca);}),ipcMain['handle']('delete-user',async(_0xde9d4,_0x5981ab,_0x37302a)=>{return new Promise((_0x1883ad,_0x438334)=>{const _0x51d5df=db['prepare']('DELETE\x20FROM\x20'+quoteIdent(_0x37302a)+'\x20WHERE\x20username\x20=\x20?');_0x51d5df['run'](_0x5981ab,function(_0x4f9199){_0x4f9199?_0x438334(_0x4f9199):_0x1883ad({'status':'success','changes':this['changes']});}),_0x51d5df['finalize']();});}),ipcMain['handle']('delete-account',async(_0x500bce,_0x412744)=>{const _0x1e98b5=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x1e98b5['run'](_0x412744,function(_0x1eb7ff){_0x1eb7ff&&console['log'](_0x1eb7ff);}),_0x1e98b5['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x2aee03,_0x59d9d6)=>{const _0x44ade5='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x44ade5,[],(_0x41edc7,_0x5706f2)=>{_0x41edc7?_0x59d9d6({'status':'error','message':_0x41edc7['message']}):_0x2aee03({'status':'success','contactedCount':_0x5706f2['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x5edbd2,_0x1afdf0)=>{const _0x3eeefc='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x3eeefc,[],(_0x5b9260,_0x5b4b0b)=>{_0x5b9260?_0x1afdf0({'status':'error','message':_0x5b9260['message']}):_0x5edbd2({'status':'success','contactedCount':_0x5b4b0b['contactedCount']});});});});function exportDatabase(_0x1ce497){return new Promise((_0x1de05a,_0x4a7c37)=>{const _0x29c383='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+quoteIdent(_0x1ce497)+'\x0a\x20\x20\x20\x20';db['all'](_0x29c383,[],async(_0x44217b,_0x4a2c2b)=>{if(_0x44217b){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x44217b['message']),_0x4a7c37(_0x44217b);return;}if(!_0x4a2c2b||_0x4a2c2b['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x1de05a();return;}const _0x2bbe98=XLSX['utils']['json_to_sheet'](_0x4a2c2b),_0xe2f40f=XLSX['utils']['sheet_to_csv'](_0x2bbe98);try{const {canceled:_0x56ec28,filePath:_0x58c7d6}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x1ce497+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x56ec28||!_0x58c7d6){console['log']('Speichern\x20abgebrochen.'),_0x1de05a();return;}fs['writeFile'](_0x58c7d6,_0xe2f40f,'utf8',_0x5bc303=>{_0x5bc303?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x5bc303['message']),_0x4a7c37(_0x5bc303)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x58c7d6),_0x1de05a());});}catch(_0x24fd4f){console['error']('Fehler\x20im\x20Speicherdialog:',_0x24fd4f),_0x4a7c37(_0x24fd4f);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x4bfc4b,_0x372e85)=>{shell['openExternal'](_0x372e85);});