const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x48e8f0,_0x3bbb2d){try{const _0x29bc60=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x3bbb2d},'body':JSON['stringify']({'clearname':_0x48e8f0})});if(!_0x29bc60['ok']){const _0x2f23a5=await _0x29bc60['text']();throw new Error(_0x29bc60['status']+':\x20'+_0x2f23a5);}const _0x2cc2db=await _0x29bc60['json']();return _0x2cc2db;}catch(_0x3f46d5){console['error']('Error\x20in\x20extractFirstName:',_0x3f46d5);throw _0x3f46d5;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x175653=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x175653['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x175653['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x3cd673){var _0x2df127=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xbde958){console['log']('window\x20id:'+_0xbde958['id']),_0xbde958['id']>0x1&&(_0x2df127=!![]);}),console['log']('child\x20opened\x20='+_0x2df127);if(!_0x2df127){const _0x23451f=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x23451f['loadFile'](_0x3cd673['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));});function initializeDatabase(){const _0x4cb72d=require('fs'),_0xa248ce=path['join'](app['getPath']('userData'),'data'),_0x1252d0=['campaign.db','crm.db','igaccounts.db'],_0x752630=[];try{_0x4cb72d['mkdirSync'](_0xa248ce,{'recursive':!![]});for(const _0x73d21c of _0x1252d0){const _0x5b21a6=path['join'](process['resourcesPath'],'app','build','data',_0x73d21c),_0x4c1ed5=path['join'](_0xa248ce,_0x73d21c);!_0x4cb72d['existsSync'](_0x4c1ed5)?(_0x4cb72d['copyFileSync'](_0x5b21a6,_0x4c1ed5),console['log']('[InitDB]\x20Kopiert\x20'+_0x73d21c+'\x20nach:\x20'+_0x4c1ed5)):console['log']('[InitDB]\x20'+_0x73d21c+'\x20existiert\x20bereits:\x20'+_0x4c1ed5),_0x752630['push'](_0x4c1ed5);}}catch(_0x54b705){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x54b705);}return _0x752630;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x43692a,AppUpdate:_0x5abea1}=require('electron-updater');_0x43692a['autoDownload']=![],_0x43692a['autoInstallOnAppQuit']=!![],_0x43692a['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x43692a['on']('update-available',_0x2c60dd=>{console['log']('Update\x20verfügbar:',_0x2c60dd),_0x43692a['downloadUpdate']();}),_0x43692a['on']('update-downloaded',_0x5b7eff=>{console['log']('Update\x20heruntergeladen:',_0x5b7eff),_0x43692a['quitAndInstall']();}),_0x43692a['on']('error',_0xc61c40=>{console['error']('Fehler\x20beim\x20Updaten:',_0xc61c40);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x413ff,AppUpdate:_0x1a3f38}=require('electron-updater');_0x413ff['autoDownload']=![],_0x413ff['autoInstallOnAppQuit']=!![],_0x413ff['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x413ff['on']('update-available',_0x1c3a1d=>{console['log']('Update\x20verfügbar:',_0x1c3a1d),_0x413ff['downloadUpdate']();}),_0x413ff['on']('update-downloaded',_0xec5f94=>{console['log']('Update\x20heruntergeladen:',_0xec5f94),console['log']('Neustarten\x20zum\x20Updaten');}),_0x413ff['on']('error',_0x28bb37=>{console['error']('Fehler\x20beim\x20Updaten:',_0x28bb37);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x593e78='',_0x3bd001=null;if(process['platform']==='darwin')_0x593e78=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x593e78=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x593e78}),_0x3bd001=await browser_login['newPage'](),_0x3bd001['setDefaultNavigationTimeout'](0x1d4c),_0x3bd001['setDefaultTimeout'](0x1d4c),await _0x3bd001['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x3bd001;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x2f54c1=0x1,_0x1bf343=0x0){let _0x4464a6='',_0x5eb3d9=null;const _0x4bd6c2=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x4464a6=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x4464a6=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x2f54c1===0x0&&!pageStack[_0x1bf343])return browser=await puppeteer['launch']({'headless':_0x4bd6c2,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4464a6}),_0x5eb3d9=await browser['newPage'](),_0x5eb3d9['setDefaultNavigationTimeout'](0x1d4c),_0x5eb3d9['setDefaultTimeout'](0x1d4c),await _0x5eb3d9['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1bf343]=_0x5eb3d9,_0x5eb3d9;return(browser===null||pageStack[_0x1bf343]===null||pageStack[_0x1bf343]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x4bd6c2,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4464a6})),(pageStack[_0x1bf343]===null||pageStack[_0x1bf343]['isClosed']())&&(_0x5eb3d9=await browser['newPage'](),_0x5eb3d9['setDefaultNavigationTimeout'](0x1d4c),_0x5eb3d9['setDefaultTimeout'](0x1d4c),await _0x5eb3d9['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1bf343]=_0x5eb3d9),pageStack[_0x1bf343];}ipcMain['on']('login',async(_0x4b9ab1,_0x4487df)=>{const _0x1dd4ea=await getBrowserPageLogin();await _0x1dd4ea['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x1dd4ea,_0x4487df),ipcMain['on']('setLoginCookies',async(_0xf002fd,_0x357908)=>{try{await set_login_cookies(_0x1dd4ea,_0x357908);}catch(_0xd89dbe){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xd89dbe);}});}),ipcMain['on']('export-relation',async(_0xab3a7c,_0x2f0bb3)=>{try{await exportDatabase(_0x2f0bb3),_0xab3a7c['reply']('export-relation-response',{'success':!![]});}catch(_0x333a47){console['error'](_0x333a47),_0xab3a7c['reply']('export-relation-response',{'success':![],'message':_0x333a47['message']});}}),ipcMain['handle']('sendMessage',async(_0xaa4dee,_0x558ae0,_0xd16cdf,_0x1d3a00,_0x55fc23,_0x18191d,_0x1dc310,_0x292561,_0x51146e,_0x146bbf,_0x552938)=>{isStopping=![];let _0x3e403e=null;return _0x1dc310?_0x3e403e=await getBrowserPage(_0x55fc23,_0x292561):_0x3e403e=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x558ae0),send_message(_0x3e403e,_0x558ae0,_0xd16cdf,_0x1d3a00,_0x55fc23,_0x18191d,_0x51146e,_0x146bbf,_0x552938);}),ipcMain['handle']('stop-action',async(_0x5b1bc4,_0x8ea637)=>{isStopping=!![];const _0x125b02=await getBrowserPage(0x1,_0x8ea637);await _0x125b02['close']();}),ipcMain['handle']('fetch_followers',async(_0x145d76,_0x2003b0,_0x3e37a6,_0x51a05a,_0x22f177,_0x37c2b5)=>{isStopping=![];const _0x96fdec=await getBrowserPage();return fetch_followers_from_account(_0x145d76,_0x96fdec,_0x2003b0,_0x3e37a6,_0x51a05a,_0x22f177,_0x37c2b5);}),ipcMain['handle']('get-account-details',async(_0x44801b,_0x253bf6,_0x378cc8,_0x3e38bd)=>{isStopping=![];const _0x371e6d=await getBrowserPage();return fetch_account_details(_0x371e6d,_0x253bf6,_0x378cc8,_0x3e38bd);}),ipcMain['handle']('fetch_likes',async(_0x1e9a5a,_0x4cacfb,_0x18d045,_0x14b738,_0xd7bfb6,_0x37dd96)=>{isStopping=![];const _0x426e4b=await getBrowserPage();return fetch_likers_from_post(_0x1e9a5a,_0x426e4b,_0x4cacfb,_0x18d045,_0x14b738,_0xd7bfb6,_0x37dd96);}),ipcMain['handle']('fetch_comments',async(_0x1819eb,_0x2f755d,_0x4fd0f0,_0x3e263e,_0x29be30,_0x42dfb6)=>{isStopping=![];const _0x5c8384=await getBrowserPage();return fetch_comments_from_post(_0x1819eb,_0x5c8384,_0x2f755d,_0x4fd0f0,_0x3e263e,_0x29be30,_0x42dfb6);});async function updateAppSilent(){const {spawn:_0x4c0562}=require('child_process'),_0x3f065b=require('path'),_0xa109f6=require('electron-log');return _0xa109f6['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x309198,_0x13885a)=>{const {updateElectronApp:_0x5e608a,UpdateSourceType:_0x3fd19f}=require('update-electron-app');_0x5e608a({'updateSource':{'type':_0x3fd19f['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xa109f6}),_0x309198('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x1d4cf4,_0x25223f)=>{doFullElectronUpdateSilent(),_0x1d4cf4('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x37e837}=require('child_process'),_0x303b0d=require('path'),_0x59da96=require('electron-log');return _0x59da96['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x20251a,_0x48e410)=>{const {updateElectronApp:_0x5900cc,UpdateSourceType:_0x5d3a9d}=require('update-electron-app');_0x5900cc({'updateSource':{'type':_0x5d3a9d['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x59da96}),_0x20251a('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2e66d8,_0x53e6d2)=>{doFullElectronUpdate(),_0x2e66d8('Update\x20erfolgreich\x20abgeschlossen.');});}ipcMain['handle']('update-app',async(_0x453e0c,_0x52d7cd)=>{console['log']('Update\x20Silent:\x20'+_0x52d7cd);if(_0x52d7cd)!(process['platform']==='darwin')&&(await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet'));else{if(!(process['platform']==='darwin'))await updateApp();else return new Promise((_0x3b60c6,_0x2971b0)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x3b60c6('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x34d5fa=path['join'](__dirname,'mac-updater-intern.sh'),_0x9d4a76=spawn('/bin/bash',[_0x34d5fa]);_0x9d4a76['stdout']['on']('data',_0x2f26c6=>{console['log']('stdout:\x20'+_0x2f26c6);}),_0x9d4a76['stderr']['on']('data',_0x34c4c2=>{console['error']('stderr:\x20'+_0x34c4c2);}),_0x9d4a76['on']('close',_0x515912=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x515912),_0x515912===0x0?_0x3b60c6('Update\x20erfolgreich\x20abgeschlossen.'):_0x2971b0(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x515912));});}else{if(process['platform']==='win32'){const _0x57c66e=path['join'](__dirname,'../','../','../');process['chdir'](_0x57c66e),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x39ed15='soft-ui-updater-windows.ps1',_0x5bc9a7=spawn('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x39ed15]);_0x5bc9a7['stdout']['on']('data',_0x4f6e79=>{console['log']('stdout:\x20'+_0x4f6e79);}),_0x5bc9a7['stderr']['on']('data',_0x13a1aa=>{console['error']('stderr:\x20'+_0x13a1aa);}),_0x5bc9a7['on']('close',_0x19fe91=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x19fe91),_0x19fe91===0x0?_0x3b60c6('Update\x20erfolgreich\x20abgeschlossen.'):_0x2971b0(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x19fe91));});}else _0x2971b0(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}});function getRnd(_0x3e43a9,_0x3ec7bd){return Math['random']()*(_0x3ec7bd-_0x3e43a9+0x1)+_0x3e43a9;}function delay(_0x639d75,_0x207b4a){let _0x3c0609=getRnd(_0x639d75,_0x207b4a);return new Promise(function(_0x4bad79){setTimeout(_0x4bad79,_0x3c0609);});}async function scroll(_0x1cf91a,_0x45b874,_0x46c1b2=0x2,_0xef93a8){const _0x58dfc9=await _0x1cf91a['waitForSelector'](_0x45b874);for(let _0xba307d=0x0;_0xba307d<_0x46c1b2;_0xba307d++){console['log']('Scrolling\x20'+_0xba307d),await _0x1cf91a['evaluate'](_0x22e6f3=>{const _0x2cac48=document['querySelector'](_0x22e6f3);_0x2cac48&&_0x2cac48['scrollBy'](0x0,0x190);},_0x45b874),await delay(0x320,0x5dc),_0xef93a8();}}async function saveCookies(_0xe48f8d){let _0x1d41be=await _0xe48f8d['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x1d41be,null,0x2));}async function notificationClear(_0x2fbc17){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x2fbc17['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x2fbc17['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x1078fa){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x1078fa);}}async function getTargetProfiles(_0x3e5a0c){return new Promise((_0x42d79d,_0x548e44)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x3e5a0c,(_0x36428c,_0x4cffe9)=>{_0x36428c?_0x548e44(_0x36428c):_0x42d79d(_0x4cffe9);});});}async function login_legacy(_0x235b1f,_0x5e8098,_0x41b80d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x235b1f,_0x5e8098),await createUserIfNotExists(_0x5e8098,_0x41b80d);}catch(_0x32a67d){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x32a67d);}try{await _0x235b1f['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x235b1f['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x235b1f['click']('button._a9--._ap36._a9_0');}catch(_0x4b54b2){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x235b1f['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x235b1f['type']('input[name=\x27username\x27]',_0x5e8098,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x235b1f['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x235b1f['type']('input[name=\x27password\x27]',_0x41b80d,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x235b1f['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x235b1f['click']('button[type=\x27submit\x27]');}catch(_0x25f7f0){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x235b1f),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x235b1f,_0x5e8098);}catch(_0x186059){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x186059);}}catch(_0x2640fb){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2640fb);}}async function login(_0x43d9f4,_0x1a912f){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x43d9f4,_0x1a912f),await createUserIfNotExists(_0x1a912f);}catch(_0xd65e8c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xd65e8c);}try{await _0x43d9f4['goto']('https://www.instagram.com/accounts/login/');}catch(_0x3e5f84){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x3e5f84);}}async function set_login_cookies(_0x30f95d,_0x4c99ea){try{await saveCookiesForUser(_0x30f95d,_0x4c99ea);}catch(_0x5f4e84){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x5f4e84);}}async function waitForXPath(_0x4594b7,_0x396e86,_0x24607c={}){return await _0x4594b7['waitForFunction'](_0x90af7e=>{return document['evaluate'](_0x90af7e,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x24607c,_0x396e86),_0x4594b7['evaluateHandle'](_0x430797=>document['evaluate'](_0x430797,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x396e86);}async function send_message(_0x4270ab,_0x34aa66,_0x171a97,_0x246811,_0x41fb23,_0x41b5fd,_0x15ce36,_0x151502,_0x2427bf){return new Promise(async(_0x43e8d0,_0x59c273)=>{_0x41b5fd=_0x41b5fd['split'](';'),console['log'](_0x41b5fd[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x41fb23);try{await setCookiesForUser(_0x4270ab,_0x41b5fd[0x0]);}catch(_0x49aef2){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x49aef2),_0x59c273({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x49aef2});return;}try{await _0x4270ab['goto']('https://www.instagram.com/'+_0x34aa66+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x4270ab);}catch(_0x36ac0e){_0x59c273({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x36ac0e});return;}console['log']('UserSkip:\x20'+_0x15ce36);if(_0x15ce36==0x1)try{const _0x2b4b64=await _0x4270ab['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x2e88be=>_0x2e88be['textContent']['trim']());console['log'](_0x2b4b64);if(_0x2b4b64==='Following'||_0x2b4b64==='Folge\x20ich')return _0x43e8d0({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x391c59){}try{await _0x4270ab['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x4270ab['click'](K_DIRECT_MSG_BUTTON);}catch(_0x34fb1c){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x34fb1c);try{await _0x4270ab['waitForSelector'](K_OPTIONS_BUTTON),await _0x4270ab['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x31da16=await waitForXPath(_0x4270ab,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x31da16['click']();}catch(_0x508a0d){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x508a0d),_0x43e8d0({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x4270ab);}catch(_0xdd95f7){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0xdd95f7);}try{const _0x4963c2=await _0x4270ab['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x151502){const _0x371709=await _0x4270ab['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x371709)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x34aa66),_0x43e8d0({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x1c34f0=await _0x4270ab['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x1c34f0),_0x246811=_0x246811['replace']('{USERNAME}',_0x34aa66);let _0x28d342;if(_0x246811['includes']('{NAME}')||_0x246811['includes']('{name}'))try{const _0x207664=await extractFirstName(_0x1c34f0,_0x2427bf);console['log']('Response\x20Clearname\x20valid:\x20'+_0x207664['valid']),_0x207664['valid']?(_0x246811=_0x246811['replaceAll'](/{NAME}|{name}/g,_0x207664['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x207664['name']),_0x28d342=_0x207664['name']):(_0x246811=_0x246811['replaceAll'](/ ?({NAME}|{name})/g,''),_0x28d342='UNKNOWN_NAME');}catch(_0x2d8ee8){console['log'](_0x2d8ee8['message']),_0x28d342=_0x2d8ee8['message'];let _0x2d30f6=_0x1c34f0['replace'](/[^\p{L}\s]/gu,''),_0x19ab96=_0x2d30f6['split']('\x20')[0x0];_0x19ab96['length']>0x2&&!_0x19ab96['includes']('Instagram')?_0x246811=_0x246811['replaceAll'](/{NAME}|{name}/g,_0x19ab96):_0x246811=_0x246811['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x4963c2['type'](_0x246811,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x4f53de=await _0x4270ab['waitForSelector'](K_SEND_MSG_BUTTON);await _0x4f53de['click'](),await delay(0x320,0x3e8),_0x43e8d0({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x1c34f0,'extracted_clearname':_0x28d342});}catch(_0x286481){try{await _0x4270ab['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x2fdf38=await _0x4270ab['evaluate'](_0x140e20=>{return document['querySelector'](_0x140e20)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x2fdf38),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x286481),_0x43e8d0({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x34aa66+'\x20überspringen.'});}catch(_0x39b02d){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x39b02d),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x34aa66+'\x20:\x20'+_0x39b02d),_0x43e8d0({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x34aa66+'\x20:\x20'+_0x39b02d});}}});}function handle_fail(_0x28be09){if(isStopping)return new Promise(_0x433ef8=>{_0x433ef8('Scraper\x20gestoppt.');});else{let _0x2ae0f5='';switch(_0x28be09){case 0x0:_0x2ae0f5='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x2ae0f5='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x2ae0f5='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x2ae0f5='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x447d1d,_0x37a3b9)=>{_0x37a3b9(_0x2ae0f5);});}}async function fetch_account_details(_0x462fe1,_0x384350,_0x98ef22,_0x7127bd){try{await setCookiesForUser(_0x462fe1,_0x98ef22['username']);}catch(_0x41d636){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x41d636);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x41d636);return handle_fail(0x0);}_0x462fe1['setDefaultNavigationTimeout'](0x7530),await _0x462fe1['goto']('https://www.instagram.com/'+_0x384350+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x462fe1);const _0x58ae4a=await _0x462fe1['evaluate'](()=>{const _0x43844d=document['querySelector']('meta[property=\x22og:image\x22]');return _0x43844d?_0x43844d['getAttribute']('content'):null;});await _0x462fe1['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0xeed627=await _0x462fe1['evaluate'](()=>{const _0x486ca0=document['querySelector']('meta[name=\x22description\x22]');if(!_0x486ca0)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x37b5ca=_0x486ca0['getAttribute']('content');if(!_0x37b5ca)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x37b5ca);const _0x25693b=/\s*[–-]\s*/,_0x22f30d=_0x37b5ca['split'](_0x25693b);if(_0x22f30d['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x20b474=_0x22f30d[0x0],_0x18f152=_0x22f30d[0x1],_0x4fd682=_0x20b474['split'](',\x20');if(_0x4fd682['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x5cd201=_0x4fd682[0x0]['split']('\x20')[0x0],_0x5e23c1=_0x4fd682[0x1]['split']('\x20')[0x0],_0x4dac6a=_0x4fd682[0x2]['split']('\x20')[0x0];let _0x501219='',_0x486f62='';const _0x2dd9ab='\x20on\x20Instagram:\x20',_0x130760=_0x18f152['split'](_0x2dd9ab);return _0x501219=_0x130760[0x0]['trim'](),_0x501219=_0x501219['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x130760['length']>0x1&&(_0x486f62=_0x130760[0x1]['trim'](),_0x486f62['startsWith']('\x22')&&_0x486f62['endsWith']('\x22')&&(_0x486f62=_0x486f62['substring'](0x1,_0x486f62['length']-0x1)['trim']()),_0x486f62=_0x486f62['replace'](/&quot;/g,'')['trim']()),{'followers':_0x5cd201,'following':_0x5e23c1,'posts':_0x4dac6a,'nameText':_0x501219,'bio':_0x486f62};});console['log']('Extracted\x20profile\x20data:',_0xeed627);const _0x3712e3=_0xeed627['nameText'],_0x1f6e4c=_0x58ae4a,_0x30b429=_0xeed627['bio'],_0x4a7d30=_0xeed627['followers'],_0xd90d48=_0xeed627['following'],_0x12c5f7=_0xeed627['posts'],_0x268da2=![],_0x25e0dd=![],_0x20c836=![],_0xbca550='\x0a\x20\x20INSERT\x20INTO\x20'+_0x7127bd+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0xbca550,[_0x384350,_0x3712e3,_0x1f6e4c,_0x30b429,_0x4a7d30,_0xd90d48,_0x12c5f7,_0x268da2,_0x25e0dd,_0x20c836],function(_0x230b1f){_0x230b1f?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x230b1f['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x2da469,_0x3cad6c,_0x59c77e,_0x210d9a,_0x59f469,_0x11e603,_0x215191){let _0x302353=0x4,_0x40e775=0x0,_0x31d87c=0x0;try{await setCookiesForUser(_0x3cad6c,_0x11e603['username']);}catch(_0x520e41){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x520e41);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x520e41);return handle_fail(0x0);}let _0x1a51ea=0x0;try{await _0x3cad6c['goto']('https://www.instagram.com/'+_0x59c77e+'/'),await notificationClear(_0x3cad6c);try{if(_0x210d9a<=0x0){const _0x196a64=await _0x3cad6c['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x270fe7=await _0x3cad6c['evaluate'](_0x201216=>_0x201216['innerHTML'],_0x196a64);_0x1a51ea=Math['ceil'](_0x270fe7/0x4);}else _0x1a51ea=Math['ceil'](_0x210d9a/0x4);_0x302353+=_0x1a51ea,_0x31d87c=Math['round'](++_0x40e775/_0x302353*0x64),_0x2da469['sender']['send']('fetch-progress',_0x31d87c,!![]);let _0x1c0691=await _0x3cad6c['waitForSelector']('a[href=\x22/'+_0x59c77e+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x1c0691['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x59c77e+'\x20gesichtet'),_0x31d87c=Math['round'](++_0x40e775/_0x302353*0x64),_0x2da469['sender']['send']('fetch-progress',_0x31d87c,!![]);}catch(_0x56b348){console['log']('Follower\x20Liste\x20von\x20'+_0x59c77e+'\x20nicht\x20gefunden:'+_0x56b348);throw new Error('Follower\x20Liste\x20von\x20'+_0x59c77e+'\x20nicht\x20gefunden:'+_0x56b348);return handle_fail(0x0);}}catch(_0x3fb449){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x3fb449);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x3fb449);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x1a51ea),await scroll(_0x3cad6c,FOLLOWER_FENSTER,_0x1a51ea,_0x4ea74e=>{_0x31d87c=Math['round'](++_0x40e775/_0x302353*0x64),_0x2da469['sender']['send']('fetch-progress',_0x31d87c,!![]);}),await _0x3cad6c['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x32dcea=await _0x3cad6c['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x3815e3=await _0x3cad6c['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x31d87c=Math['round'](++_0x40e775/_0x302353*0x64),_0x2da469['sender']['send']('fetch-progress',_0x31d87c,!![]);_0x210d9a<=0x0&&(_0x210d9a=_0x32dcea['length']);let _0x3f21ba=[];for(let _0x367159=0x0;_0x367159<_0x32dcea['length']&&_0x367159<_0x210d9a;_0x367159++){_0x3f21ba['push'](await _0x32dcea[_0x367159]['evaluate'](_0x4eda48=>_0x4eda48['textContent']));const _0x422b7d='INSERT\x20INTO\x20'+_0x59f469+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x422b7d,[await _0x32dcea[_0x367159]['evaluate'](_0x28db5f=>_0x28db5f['textContent']),await _0x3815e3[_0x367159]['evaluate'](_0xf0365b=>_0xf0365b['textContent'])],function(_0x2a6cf8){_0x2a6cf8?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x59f469+'\x27:',_0x2a6cf8['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x31d87c=Math['round'](++_0x40e775/_0x302353*0x64),_0x2da469['sender']['send']('fetch-progress',_0x31d87c,!![]),_0x215191&&(_0x2da469['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2da469,_0x3cad6c,_0x11e603,_0x59f469,_0x3f21ba)),new Promise(_0x24392b=>{_0x24392b('Scraping\x20finished!');});}catch(_0x5958fe){if(_0x215191)throw new Error(_0x5958fe);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x59c77e+'\x20nicht\x20gefunden:\x20'+_0x5958fe);return handle_fail(0x0);}}async function fetch_details_from_list(_0x47f727,_0x242354,_0x19eb55,_0xb927cf,_0x2d85df){let _0x23f830=0x0,_0x1565a3=0x0;for(let _0x5f5210=0x0;_0x5f5210<_0x2d85df['length'];_0x5f5210++){console['log']('Processing\x20profile:',_0x2d85df[_0x5f5210]);try{await fetch_account_details(_0x242354,_0x2d85df[_0x5f5210],_0x19eb55,_0xb927cf);}catch(_0x5866f4){console['error']('Detailed\x20Scraping\x20von:\x20',_0x2d85df[_0x5f5210],_0x5866f4);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x2d85df[_0x5f5210]+'\x20'+_0x5866f4);}_0x1565a3=Math['round'](++_0x23f830/_0x2d85df['length']*0x64),_0x47f727['sender']['send']('fetch-progress',_0x1565a3,!![],!![]);}}async function fetch_likers_from_post(_0x544cea,_0x37cbfb,_0x4947e8,_0x3cd0a6,_0x278bba,_0x8f1b13,_0x2d789e){let _0x374d2d=0x4,_0x1044bd=0x0,_0x31e6b5=0x0;try{await setCookiesForUser(_0x37cbfb,_0x8f1b13['username']);}catch(_0x5c0bc5){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5c0bc5);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5c0bc5);return handle_fail(0x1);return;}_0x31e6b5=Math['round'](++_0x1044bd/_0x374d2d*0x64),_0x544cea['sender']['send']('fetch-progress',_0x31e6b5,!![]);try{let _0x27855b=_0x4947e8['substring'](0x0,_0x4947e8['lastIndexOf']('/')),_0x103d3f=_0x27855b+'/liked_by';console['log'](_0x103d3f),await _0x37cbfb['goto'](_0x103d3f),await delay(0x7d0,0xfa0),await notificationClear(_0x37cbfb),await delay(0xc8,0x1f4),_0x31e6b5=Math['round'](++_0x1044bd/_0x374d2d*0x64),_0x544cea['sender']['send']('fetch-progress',_0x31e6b5,!![]),await _0x37cbfb['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x4fc01d=await _0x37cbfb['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0xb66e5=await _0x37cbfb['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x4fc01d['length']);let _0x28b261=path['join'](__dirname,'/likers.csv');_0x31e6b5=Math['round'](++_0x1044bd/_0x374d2d*0x64),_0x544cea['sender']['send']('fetch-progress',_0x31e6b5,!![]);_0x3cd0a6<=0x0&&(_0x3cd0a6=_0x4fc01d['length']);try{let _0x491073=[];for(let _0x21fa5e=0x0;_0x21fa5e<_0x4fc01d['length']&&_0x21fa5e<_0x3cd0a6;_0x21fa5e++){_0x491073['push'](await _0x4fc01d[_0x21fa5e]['evaluate'](_0x3d71c2=>_0x3d71c2['textContent']));try{const _0x29102b='INSERT\x20INTO\x20'+_0x278bba+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x29102b,[await _0x4fc01d[_0x21fa5e]['evaluate'](_0x3b70d4=>_0x3b70d4['textContent']),await _0xb66e5[_0x21fa5e]['evaluate'](_0x2701cc=>_0x2701cc['textContent'])],function(_0x226282){_0x226282?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x278bba+'\x27:',_0x226282['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x444492){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x21fa5e+'\x20:\x20'+_0x444492);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x21fa5e+'\x20:\x20'+_0x444492);return handle_fail(0x1);}}return _0x31e6b5=Math['round'](++_0x1044bd/_0x374d2d*0x64),_0x544cea['sender']['send']('fetch-progress',_0x31e6b5,!![]),_0x2d789e&&(_0x544cea['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x544cea,_0x37cbfb,_0x8f1b13,_0x278bba,_0x491073)),new Promise(_0x4ec333=>{_0x4ec333('Scraping\x20finished!');});}catch(_0x141feb){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x141feb);return handle_fail(0x1);}}catch(_0xe60d4d){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0xe60d4d);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0xe60d4d);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x19018f,_0x4bb681,_0x215e60,_0x553359,_0x5026fc,_0x53bdaa,_0x2e3a43){let _0x5e30c8=0x3,_0x5c319d=0x0,_0x32d1a0=0x0;try{await setCookiesForUser(_0x4bb681,_0x53bdaa['username']);}catch(_0x1cb756){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1cb756);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1cb756);return handle_fail(0x2);}try{console['log'](_0x215e60),await _0x4bb681['goto'](_0x215e60),await delay(0x7d0,0xfa0),await notificationClear(_0x4bb681),await delay(0xc8,0x1f4);const _0x1f2ea1=COM_COMMENTS_BOX_BODY_DIV;let _0x5b12be;const _0x2136e1=await _0x4bb681['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x1eef65=await _0x4bb681['evaluate'](_0x9deed3=>_0x9deed3['innerHTML'],_0x2136e1),_0x3f451a=String(_0x1eef65)['replace'](/[^0-9]/g,''),_0x3d3e6d=Number(_0x3f451a)/0x14;_0x553359<=0x0?_0x5b12be=Math['ceil'](_0x3d3e6d/0x3):_0x5b12be=Math['ceil'](_0x553359/0x3);_0x5e30c8+=_0x5b12be,_0x32d1a0=Math['round'](++_0x5c319d/_0x5e30c8*0x64),_0x19018f['sender']['send']('fetch-progress',_0x32d1a0,!![]),console['log']('Auto-scrolls:\x20'+_0x5b12be),await scroll(_0x4bb681,_0x1f2ea1,_0x5b12be,_0xb16f1c=>{_0x32d1a0=Math['round'](++_0x5c319d/_0x5e30c8*0x64),_0x19018f['sender']['send']('fetch-progress',_0x32d1a0,!![]);});try{const _0x1babba=COM_REPLY_BUTTON_SPAN;await _0x4bb681['waitForSelector'](_0x1babba),await delay(0x1f4,0x320);const _0x2824a7=await _0x4bb681['$$'](_0x1babba);console['log'](_0x2824a7);let _0x353c93=_0x2824a7['length'];await delay(0xc8,0x1f4);try{for(let _0x540324=0x0;_0x540324<_0x353c93;_0x540324++){_0x2824a7[_0x540324]['click'](),await delay(0x320,0x5dc);}}catch(_0xfba9d9){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xfba9d9);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xfba9d9);return handle_fail(0x2);}}catch(_0xa593d1){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x3e98b5=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x4bb681['waitForSelector'](_0x3e98b5),await delay(0x1f4,0x320),_0x32d1a0=Math['round'](++_0x5c319d/_0x5e30c8*0x64),_0x19018f['sender']['send']('fetch-progress',_0x32d1a0,!![]);const _0x3e8c8e=await _0x4bb681['$$'](_0x3e98b5);let _0x7f11c1=path['join'](__dirname,'/comments.csv');_0x553359<=0x0&&(_0x553359=_0x3e8c8e['length']);console['log']('fetch_limit:\x20'+_0x553359),console['log']('comments_len:\x20'+_0x3e8c8e['length']),_0x553359++;try{let _0x1d65f5=[];for(let _0x1e5a21=0x1;_0x1e5a21<_0x3e8c8e['length']&&_0x1e5a21<_0x553359;_0x1e5a21++){try{_0x1d65f5['push'](await _0x3e8c8e[_0x1e5a21]['evaluate'](_0x4b8bb2=>_0x4b8bb2['textContent']));const _0xe465ea=await db['prepare']('INSERT\x20INTO\x20'+_0x5026fc+'\x20(username)\x20VALUES\x20(?)');await _0xe465ea['run'](await _0x3e8c8e[_0x1e5a21]['evaluate'](_0x3a165f=>_0x3a165f['textContent']),function(_0x45f31b){_0x45f31b&&console['log']('error\x20in\x20add-user:'+_0x45f31b);}),await _0xe465ea['finalize']();}catch(_0x1f4f66){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1e5a21+'\x20:\x20'+_0x1f4f66);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1e5a21+'\x20:\x20'+_0x1f4f66);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x32d1a0=Math['round'](++_0x5c319d/_0x5e30c8*0x64),_0x19018f['sender']['send']('fetch-progress',_0x32d1a0,!![]),_0x19018f['sender']['send']('fetch-progress',0x64,!![]),_0x2e3a43&&(_0x19018f['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x19018f,_0x4bb681,_0x53bdaa,_0x5026fc,_0x1d65f5)),_0x19018f['sender']['send']('fetch-progress',0x64,![]),new Promise(_0xe9b85f=>{_0xe9b85f('Scraping\x20finished!');});}catch(_0x35bca0){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x35bca0);return handle_fail(0x2);}}catch(_0x284a57){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x284a57);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x284a57);return handle_fail(0x2);}}async function set_clearname_from_username(_0x50dc78,_0x1ee1dc,_0x5af6b2=null){try{let _0x23c710,_0x244346;const _0x28b2d9='SELECT\x20username\x20FROM\x20'+_0x1ee1dc+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x28b2d9,[],(_0x4e9c2a,_0x36152f)=>{_0x4e9c2a&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x4e9c2a['message']),_0x36152f['length']===0x0&&(_0x244346=_0x36152f['length']),_0x23c710=_0x36152f['map'](_0x2c6186=>_0x2c6186['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x244346);if(_0x244346===0x0){console['log']('Leave');return;}const _0x58ec5b=await _0x50dc78['waitForSelector'](IG_SEARCH_BUTTON);await _0x58ec5b['click'](),await delay(0x4b0,0x7d0);for(let _0x73e41a of _0x23c710){const _0x5841f9=await _0x50dc78['waitForSelector'](IG_SEARCH_INPUT);await _0x5841f9['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x50dc78['type'](IG_SEARCH_INPUT,_0x73e41a,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x13ec91=0x1;while(_0x13ec91!=0x14){console['log']('Schleife');try{let _0x56f54b=IG_NAME_SPAN_PART1+_0x13ec91+IG_USERNAME_SPAN_PART2;const _0xfe01f1=await _0x50dc78['waitForSelector'](_0x56f54b),_0x3ca4aa=await _0x50dc78['evaluate'](_0x298beb=>_0x298beb['innerHTML'],_0xfe01f1);await delay(0xc8,0x1f4);if(_0x3ca4aa==_0x73e41a){let _0x3833fb=IG_NAME_SPAN_PART1+_0x13ec91+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x45df91=await _0x50dc78['waitForSelector'](_0x3833fb);let _0x1b6d1d=await _0x50dc78['evaluate'](_0xdaffdc=>_0xdaffdc['innerHTML'],_0x45df91);const _0x3f18a9=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x5d13a8=_0x1b6d1d['match'](_0x3f18a9);_0x5d13a8?_0x1b6d1d=_0x5d13a8[0x1]['trim']():_0x1b6d1d=_0x1b6d1d['trim']();_0x1b6d1d['includes']('•')&&(_0x1b6d1d=_0x1b6d1d['substring'](0x0,_0x1b6d1d['indexOf']('•')-0x1));const _0x1be8bc='UPDATE\x20'+_0x1ee1dc+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x1be8bc,[_0x1b6d1d,_0x3ca4aa],function(_0x138c1a){_0x138c1a&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x138c1a['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x13ec91++;}catch(_0x44a677){const _0x42a1c3='UPDATE\x20'+_0x1ee1dc+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x42a1c3,['',_0x73e41a],function(_0x33dfd2){_0x33dfd2&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x33dfd2['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x44a677);break;}}_0x5af6b2&&_0x5af6b2();}await _0x58ec5b['click']();}catch(_0x7d20bd){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x7d20bd);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x143a4e,_0x23c7ae)=>{const _0x19e9f6='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x19e9f6,[],(_0x18bd0e,_0x47f2ff)=>{_0x18bd0e?_0x23c7ae(_0x18bd0e):_0x143a4e(_0x47f2ff);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x5bccff,_0x2ee3bd)=>{const _0x11da72='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x11da72,[],async(_0x4e9746,_0x206fb3)=>{if(_0x4e9746)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x4e9746['message']),_0x2ee3bd({'status':'error','message':_0x4e9746['message']});else try{const _0x41bc52=await Promise['all'](_0x206fb3['map'](_0xeb185f=>{return new Promise(_0x49fee9=>{if(!_0xeb185f['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0xeb185f['campaign_name']),_0x49fee9({'campaign_name':_0xeb185f['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x210d5e='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0xeb185f['list_id'],_0x3a9f4c='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0xeb185f['list_id']+'\x22';db['get'](_0x210d5e,[],(_0x2669d7,_0x42fb36)=>{_0x2669d7?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0xeb185f['campaign_name']+':',_0x2669d7['message']),_0x49fee9({'campaign_name':_0xeb185f['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x3a9f4c,[],(_0x2bfd77,_0x161662)=>{_0x2bfd77?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0xeb185f['campaign_name']+':',_0x2bfd77['message']),_0x49fee9({'campaign_name':_0xeb185f['campaign_name'],'lead_count':_0x42fb36?_0x42fb36['lead_count']:0x0,'contacted_count':'N/A'})):_0x49fee9({'campaign_name':_0xeb185f['campaign_name'],'lead_count':_0x42fb36?_0x42fb36['lead_count']:0x0,'contacted_count':_0x161662?_0x161662['contacted_count']:0x0});});});});}));_0x5bccff({'status':'success','campaigns':_0x41bc52});}catch(_0x385d3f){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x385d3f),_0x2ee3bd({'status':'error','message':_0x385d3f['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x45ddd1,_0x25d918)=>{return new Promise((_0x4de615,_0xbde295)=>{const _0x59f0e7='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x59f0e7,[_0x25d918],(_0x4aa2ae,_0x251495)=>{_0x4aa2ae?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x4aa2ae),_0xbde295(_0x4aa2ae)):(console['log']('ROWS'),console['log'](_0x251495),debugDatabaseContents(),_0x4de615(_0x251495));});});});const showTableContents=_0x52ed22=>{return new Promise((_0x4f1c1d,_0x385227)=>{const _0x567850='SELECT\x20*\x20FROM\x20'+_0x52ed22+';';campaignDB['all'](_0x567850,(_0x4826ba,_0x1258f6)=>{_0x4826ba?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x52ed22+':',_0x4826ba),_0x385227(_0x4826ba)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x52ed22+':',_0x1258f6),_0x4f1c1d({'status':'success','message':_0x1258f6}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x13b4d5){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x13b4d5);}}ipcMain['handle']('create-campaign',async(_0x5816a4,_0x3a491e)=>{return new Promise((_0x5e6ada,_0x5d5b5d)=>{const _0x27fffa='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x27fffa,[String(_0x3a491e)],function(_0x4cc931){_0x4cc931?_0x5d5b5d(_0x4cc931):_0x5e6ada({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x34caf6,_0x3e9bf0)=>{return new Promise((_0x40f6d4,_0x354758)=>{const _0x4e0f25='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x4e0f25,[_0x3e9bf0],function(_0x551462){_0x551462?_0x354758(_0x551462):_0x40f6d4({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x42508a,_0x3dd460,_0x362792,_0x35c9a0,_0x1652e1,_0xa53838,_0x450916,_0x1f3da5)=>{const _0x14e634=await createMessageID(_0x1652e1);return new Promise((_0x12fd5d,_0x3fbce7)=>{if(!_0x3dd460||!_0x362792||!_0x35c9a0||!_0x14e634||!_0xa53838)return _0x3fbce7({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x14e634);const _0x3562fa='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x3562fa,[_0x362792,_0x35c9a0,_0x14e634,_0xa53838,_0x450916,_0x1f3da5,_0x3dd460],function(_0x4fd019){if(_0x4fd019)_0x3fbce7({'status':'error','message':_0x4fd019['message']});else this['changes']===0x0?_0x3fbce7({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x12fd5d({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x574ab4,_0xaffe70,_0x1a1c3b,_0x26f277,_0x361e62)=>{return new Promise((_0x33fa41,_0x4e23c9)=>{const _0x18ca44='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x18ca44,[_0xaffe70,_0x1a1c3b,_0x26f277,_0x361e62],function(_0x26e30a){return _0x26e30a?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x26e30a['message']),_0x4e23c9('insert-dm-response',{'success':![],'message':_0x26e30a['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x33fa41('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x3f73db=>{return new Promise((_0x39cc48,_0x21a19f)=>{const _0x5b58a4='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x5b58a4,[_0x3f73db],(_0xcbac5a,_0x4114b2)=>{if(_0xcbac5a)_0x21a19f({'status':'error','message':_0xcbac5a['message']});else{if(_0x4114b2)_0x39cc48(_0x4114b2['message_id']);else{const _0x1a225a='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x1a225a,[_0x3f73db],function(_0x5d77ca){_0x5d77ca?_0x21a19f({'status':'error','message':_0x5d77ca['message']}):_0x39cc48(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x184803,_0x1d82c5)=>{return new Promise((_0x4fa7ee,_0x5e062d)=>{const _0x2dedfe='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x1d82c5;db['get'](_0x2dedfe,(_0x5aa583,_0x7d222c)=>{_0x5aa583?_0x5e062d({'status':'error','message':_0x5aa583['message']}):_0x4fa7ee({'status':'success','count':_0x7d222c['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x34b6bd,_0x5f3fb8){try{const _0x12fcaf=await new Promise((_0x41a300,_0x2874c5)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5f3fb8],(_0x33f07e,_0x1f05da)=>{if(_0x33f07e)_0x2874c5(_0x33f07e);else{if(_0x1f05da['length']>0x0){let _0x33a9f1=JSON['parse'](_0x1f05da[0x0]['cookie']);console['log'](_0x33a9f1),_0x41a300(_0x33a9f1);}else _0x2874c5(new Error('User\x20with\x20username\x20'+_0x5f3fb8+'\x20does\x20not\x20exist.'));}});});await _0x34b6bd['setCookie'](..._0x12fcaf),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x26edae){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x26edae);}}async function saveCookiesForUser(_0x131632,_0xbefd09){try{const _0x13353c=await _0x131632['cookies']();if(!_0x13353c||_0x13353c['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0xbefd09);const _0x4457d5=JSON['stringify'](_0x13353c);if(_0x4457d5['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0xbefd09);return new Promise((_0x2da740,_0x3ce947)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0xbefd09],(_0x3899a7,_0x1c9872)=>{if(_0x3899a7)return console['error']('Error\x20checking\x20user\x20existence:',_0x3899a7),_0x3ce947(_0x3899a7);if(_0x1c9872){const _0x8a29e3=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x8a29e3['run'](_0x4457d5,_0xbefd09,function(_0xb00863){return _0xb00863?(console['error']('Error\x20updating\x20cookies:',_0xb00863),_0x3ce947(_0xb00863)):(console['log']('Cookies\x20updated\x20for\x20user:',_0xbefd09),_0x2da740());});}else{const _0x44d1d4=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x44d1d4['run'](_0xbefd09,_0x4457d5,function(_0x8b4ad4){return _0x8b4ad4?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x8b4ad4),_0x3ce947(_0x8b4ad4)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0xbefd09),_0x2da740());});}});});}catch(_0x9bb689){console['error']('Error\x20fetching\x20cookies:',_0x9bb689);throw _0x9bb689;}}async function createUserIfNotExists(_0xfc6097){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0xfc6097],(_0x386c15,_0xed2213)=>{if(_0x386c15){console['error']('Error\x20checking\x20user\x20existence:',_0x386c15);throw _0x386c15;}else{if(!_0xed2213){const _0x46cfe1=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x46cfe1['run'](_0xfc6097,function(_0x221961){_0x221961?console['error']('Error\x20inserting\x20new\x20user:',_0x221961):console['log']('New\x20user\x20created:',_0xfc6097);});}else console['log']('User\x20already\x20exists:',_0xfc6097);}});}catch(_0x590f0b){console['error']('Error\x20creating\x20user:',_0x590f0b);throw _0x590f0b;}}ipcMain['handle']('create-relation',async(_0x39ddd9,_0x212819)=>{return new Promise((_0x59073f,_0x5819be)=>{const _0x3b845e='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x212819+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x3b845e,function(_0x577bfe){_0x577bfe?_0x5819be(_0x577bfe):_0x59073f({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x2f836c,_0x2f3359)=>{return console['log']('droping\x20table'+_0x2f3359),new Promise((_0x33dd0f,_0x209526)=>{const _0x91aab7='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x2f3359;console['log']('droping\x20table'+_0x2f3359),db['run'](_0x91aab7,function(_0x2e0498){_0x2e0498?_0x209526(_0x2e0498):_0x33dd0f({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x1ae393=>{return new Promise((_0x104667,_0x3b04f4)=>{const _0x19adfe='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x19adfe,[],(_0x423c49,_0x46037d)=>{_0x423c49?_0x3b04f4(_0x423c49):_0x104667(_0x46037d['map'](_0x2fed0c=>_0x2fed0c['name']));});});}),ipcMain['handle']('add-user',async(_0x5c9204,_0x1400e4,_0x1178e6)=>{return new Promise(_0x1e082d=>{const _0x7cb6e0=db['prepare']('INSERT\x20INTO\x20'+_0x1178e6+'\x20(username)\x20VALUES\x20(?)');_0x7cb6e0['run'](_0x1400e4,function(_0x79e449){_0x79e449?console['log']('error\x20in\x20add-user:'+_0x79e449):_0x1e082d({'status':'success','id':this['lastID']});}),_0x7cb6e0['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x3ece9c,_0x483937)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x6ff4b3,_0x5b6333)=>{if(_0x6ff4b3)_0x483937(_0x6ff4b3);else{_0x3ece9c({'status':'success','users':_0x5b6333});for(_0x5b6333 of _0x5b6333){console['log'](_0x5b6333['username']);}}});});}),ipcMain['handle']('get-data',async(_0xb030c,_0x2a1bac)=>{return new Promise((_0xb8dc44,_0x303ea2)=>{const _0x359f17='SELECT\x20*\x20FROM\x20'+_0x2a1bac;console['log'](_0x359f17),db['all'](_0x359f17,[],(_0xd185a5,_0x3d8ab0)=>{_0xd185a5?_0x303ea2(_0xd185a5):_0xb8dc44(_0x3d8ab0);});});}),ipcMain['handle']('get-accounts',async _0x2e0607=>{return new Promise((_0x5ef7a0,_0x5b6ccc)=>{const _0x1ee08e='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x1ee08e),igaccountsDB['all'](_0x1ee08e,[],(_0x2cccba,_0x41d290)=>{_0x2cccba?_0x5b6ccc(_0x2cccba):_0x5ef7a0(_0x41d290);});});}),ipcMain['handle']('get-targets',async(_0x5aa510,_0x2213cd)=>{return getTargetProfiles(_0x2213cd);}),ipcMain['handle']('delete-user',async(_0x5c42c0,_0x7c384a,_0x34340e)=>{return new Promise((_0x503e6b,_0x5916d7)=>{const _0x20cbab=db['prepare']('DELETE\x20FROM\x20'+_0x34340e+'\x20WHERE\x20username\x20=\x20?');_0x20cbab['run'](_0x7c384a,function(_0x249be7){_0x249be7?_0x5916d7(_0x249be7):_0x503e6b({'status':'success','changes':this['changes']});}),_0x20cbab['finalize']();});}),ipcMain['handle']('delete-account',async(_0x5bb229,_0x2b9a3f)=>{const _0x39bff3=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x39bff3['run'](_0x2b9a3f,function(_0x2de177){_0x2de177&&console['log'](_0x2de177);}),_0x39bff3['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x9c80d5,_0x4ad7b9)=>{const _0x242945='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x242945,[],(_0x20347f,_0x537eca)=>{_0x20347f?_0x4ad7b9({'status':'error','message':_0x20347f['message']}):_0x9c80d5({'status':'success','contactedCount':_0x537eca['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x4e5f4e,_0x2404a8)=>{const _0x116ad0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x116ad0,[],(_0x301b01,_0x5a0201)=>{_0x301b01?_0x2404a8({'status':'error','message':_0x301b01['message']}):_0x4e5f4e({'status':'success','contactedCount':_0x5a0201['contactedCount']});});});});function exportDatabase(_0x378fc0){return new Promise((_0x67bd32,_0x29cae6)=>{const _0x59dde6='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x378fc0+'\x0a\x20\x20\x20\x20';db['all'](_0x59dde6,[],async(_0x4db04e,_0x1b9026)=>{if(_0x4db04e){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x4db04e['message']),_0x29cae6(_0x4db04e);return;}if(!_0x1b9026||_0x1b9026['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x67bd32();return;}const _0x37d730=XLSX['utils']['json_to_sheet'](_0x1b9026),_0x445beb=XLSX['utils']['sheet_to_csv'](_0x37d730);try{const {canceled:_0x2e2678,filePath:_0x4d0805}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x378fc0+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x2e2678||!_0x4d0805){console['log']('Speichern\x20abgebrochen.'),_0x67bd32();return;}fs['writeFile'](_0x4d0805,_0x445beb,'utf8',_0x2946e6=>{_0x2946e6?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x2946e6['message']),_0x29cae6(_0x2946e6)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x4d0805),_0x67bd32());});}catch(_0x452df0){console['error']('Fehler\x20im\x20Speicherdialog:',_0x452df0),_0x29cae6(_0x452df0);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x1d0ce0,_0x3da7b3)=>{shell['openExternal'](_0x3da7b3);});