const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x21f156,_0x41d1ad){try{const _0x34f931=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x41d1ad},'body':JSON['stringify']({'clearname':_0x21f156})});if(!_0x34f931['ok']){const _0x31529f=await _0x34f931['text']();throw new Error(_0x34f931['status']+':\x20'+_0x31529f);}const _0x17d419=await _0x34f931['json']();return _0x17d419;}catch(_0x231750){console['error']('Error\x20in\x20extractFirstName:',_0x231750);throw _0x231750;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x1eb63a=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x1eb63a['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x1eb63a['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0xa30e1){var _0x2c92e3=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x562aff){console['log']('window\x20id:'+_0x562aff['id']),_0x562aff['id']>0x1&&(_0x2c92e3=!![]);}),console['log']('child\x20opened\x20='+_0x2c92e3);if(!_0x2c92e3){const _0x4f62a7=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x4f62a7['loadFile'](_0xa30e1['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x5057fe=require('fs'),_0x29f7c3=path['join'](app['getPath']('userData'),'data'),_0x56e5f8=['campaign.db','crm.db','igaccounts.db'],_0x582648=[];try{_0x5057fe['mkdirSync'](_0x29f7c3,{'recursive':!![]});for(const _0x594c2c of _0x56e5f8){const _0x3a207d=path['join'](process['resourcesPath'],'app','build','data',_0x594c2c),_0x51e785=path['join'](_0x29f7c3,_0x594c2c);!_0x5057fe['existsSync'](_0x51e785)?(_0x5057fe['copyFileSync'](_0x3a207d,_0x51e785),console['log']('[InitDB]\x20Kopiert\x20'+_0x594c2c+'\x20nach:\x20'+_0x51e785)):console['log']('[InitDB]\x20'+_0x594c2c+'\x20existiert\x20bereits:\x20'+_0x51e785),_0x582648['push'](_0x51e785);}}catch(_0x35a1c1){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x35a1c1);}return _0x582648;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x29e61d,AppUpdate:_0x4fdcf5}=require('electron-updater');_0x29e61d['autoDownload']=![],_0x29e61d['autoInstallOnAppQuit']=!![],_0x29e61d['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x29e61d['on']('update-available',_0x168dfc=>{console['log']('Update\x20verfügbar:',_0x168dfc),_0x29e61d['downloadUpdate']();}),_0x29e61d['on']('update-downloaded',_0x48eb89=>{console['log']('Update\x20heruntergeladen:',_0x48eb89),_0x29e61d['quitAndInstall']();}),_0x29e61d['on']('error',_0x132859=>{console['error']('Fehler\x20beim\x20Updaten:',_0x132859);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x2ec18e,AppUpdate:_0x4a1228}=require('electron-updater');_0x2ec18e['autoDownload']=![],_0x2ec18e['autoInstallOnAppQuit']=!![],_0x2ec18e['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x2ec18e['on']('update-available',_0x1119dc=>{console['log']('Update\x20verfügbar:',_0x1119dc),_0x2ec18e['downloadUpdate']();}),_0x2ec18e['on']('update-downloaded',_0xc1cb0e=>{console['log']('Update\x20heruntergeladen:',_0xc1cb0e),console['log']('Neustarten\x20zum\x20Updaten');}),_0x2ec18e['on']('error',_0x47a52c=>{console['error']('Fehler\x20beim\x20Updaten:',_0x47a52c);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x3d975f='',_0x4563f1=null;if(process['platform']==='darwin')_0x3d975f=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x3d975f=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3d975f}),_0x4563f1=await browser_login['newPage'](),_0x4563f1['setDefaultNavigationTimeout'](0x1d4c),_0x4563f1['setDefaultTimeout'](0x1d4c),await _0x4563f1['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x4563f1;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x1829c8=0x1,_0x5f1287=0x0){try{let _0x207706='',_0x39dee2=null;const _0x5341b3=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x207706=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x207706=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x1829c8===0x0&&!pageStack[_0x5f1287])return browser=await puppeteer['launch']({'headless':_0x5341b3,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x207706}),_0x39dee2=await browser['newPage'](),_0x39dee2['setDefaultNavigationTimeout'](0x1d4c),_0x39dee2['setDefaultTimeout'](0x1d4c),await _0x39dee2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x5f1287]=_0x39dee2,_0x39dee2;return(browser===null||pageStack[_0x5f1287]===null||pageStack[_0x5f1287]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x5341b3,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x207706})),(pageStack[_0x5f1287]===null||pageStack[_0x5f1287]['isClosed']())&&(_0x39dee2=await browser['newPage'](),_0x39dee2['setDefaultNavigationTimeout'](0x1d4c),_0x39dee2['setDefaultTimeout'](0x1d4c),await _0x39dee2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x5f1287]=_0x39dee2),pageStack[_0x5f1287];}catch(_0x2dbbf9){console['error']('Failed\x20to\x20launch\x20browser:',_0x2dbbf9);const _0x28f023=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x2dbbf9);throw _0x28f023;}}ipcMain['on']('login',async(_0x9b5948,_0x16afcb)=>{const _0x1bfca7=await getBrowserPageLogin();await _0x1bfca7['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x1bfca7,_0x16afcb),ipcMain['on']('setLoginCookies',async(_0x195e5b,_0x4a7edb)=>{try{await set_login_cookies(_0x1bfca7,_0x4a7edb);}catch(_0x5d8a2f){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x5d8a2f);}});}),ipcMain['on']('export-relation',async(_0x401283,_0x344974)=>{try{await exportDatabase(_0x344974),_0x401283['reply']('export-relation-response',{'success':!![]});}catch(_0x251a9b){console['error'](_0x251a9b),_0x401283['reply']('export-relation-response',{'success':![],'message':_0x251a9b['message']});}}),ipcMain['handle']('sendMessage',async(_0x29f106,_0x38e300,_0x134e2c,_0x434b72,_0x4726a0,_0x1b5fb4,_0x2e431c,_0xcfd86d,_0x40972d,_0x8360f0,_0x10c009,_0x43d653,_0x36e143)=>{isStopping=![];let _0x1f3e35=null;return _0x2e431c?_0x1f3e35=await getBrowserPage(_0x4726a0,_0xcfd86d):_0x1f3e35=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x38e300),send_message(_0x1f3e35,_0x38e300,_0x134e2c,_0x434b72,_0x4726a0,_0x1b5fb4,_0x40972d,_0x8360f0,_0x10c009,_0x43d653,_0x36e143);}),ipcMain['handle']('stop-action',async(_0x1217c5,_0x23cadb)=>{isStopping=!![];const _0x579b3f=await getBrowserPage(0x1,_0x23cadb);await _0x579b3f['close']();}),ipcMain['handle']('fetch_followers',async(_0x3291a4,_0x10a2ed,_0x580739,_0x518cc9,_0x541ac6,_0xe5b5d8,_0x2613fa)=>{isStopping=![];const _0x378b37=await getBrowserPage();return fetch_followers_from_account(_0x3291a4,_0x378b37,_0x10a2ed,_0x580739,_0x518cc9,_0x541ac6,_0xe5b5d8,_0x2613fa);}),ipcMain['handle']('get-account-details',async(_0x11fc64,_0x4af764,_0x4cfb84,_0x270d54)=>{isStopping=![];const _0x33608d=await getBrowserPage();return fetch_account_details(_0x33608d,_0x4af764,_0x4cfb84,_0x270d54);}),ipcMain['handle']('fetch_likes',async(_0x274aec,_0x554c41,_0x1d8a06,_0x3b542c,_0x11cc04,_0x2a3102,_0x10fc2a)=>{isStopping=![];const _0x280eb5=await getBrowserPage();return fetch_likers_from_post(_0x274aec,_0x280eb5,_0x554c41,_0x1d8a06,_0x3b542c,_0x11cc04,_0x2a3102,_0x10fc2a);}),ipcMain['handle']('fetch_comments',async(_0x34dc55,_0x2e285d,_0x46387d,_0x43d3ca,_0x396460,_0xd3aaa1,_0x2246aa)=>{isStopping=![];const _0x4a41a8=await getBrowserPage();return fetch_comments_from_post(_0x34dc55,_0x4a41a8,_0x2e285d,_0x46387d,_0x43d3ca,_0x396460,_0xd3aaa1,_0x2246aa);});async function updateAppSilent(){const {spawn:_0x518065}=require('child_process'),_0x37c088=require('path'),_0x3c36e6=require('electron-log');return _0x3c36e6['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x56f92c,_0x5c44a6)=>{const {updateElectronApp:_0x9d87c9,UpdateSourceType:_0x1ed693}=require('update-electron-app');_0x9d87c9({'updateSource':{'type':_0x1ed693['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x3c36e6}),_0x56f92c('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x53823e,_0x4e5de8)=>{doFullElectronUpdateSilent(),_0x53823e('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x543df1}=require('child_process'),_0x32929c=require('path'),_0x1a3b96=require('electron-log');return _0x1a3b96['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x399ce3,_0x2f09de)=>{const {updateElectronApp:_0x508770,UpdateSourceType:_0x38e77c}=require('update-electron-app');_0x508770({'updateSource':{'type':_0x38e77c['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x1a3b96}),_0x399ce3('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2a3bb7,_0x42311b)=>{doFullElectronUpdate(),_0x2a3bb7('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x50c4a5,_0x4e8d43)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x50c4a5('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x49cd61=path['join'](__dirname,'mac-updater-intern.sh'),_0x452b62=spawn('/bin/bash',[_0x49cd61],{'detached':!![],'stdio':'ignore'});_0x452b62['unref'](),setTimeout(()=>{_0x50c4a5('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x4e8d43(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x2162ed=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x534266,_0x3f6f22)=>{console['log']('Update\x20Silent:\x20'+_0x3f6f22);if(_0x3f6f22){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0xd30427,_0x167bd4){return Math['random']()*(_0x167bd4-_0xd30427+0x1)+_0xd30427;}function delay(_0x38d54f,_0x3c32a6){let _0x4878f2=getRnd(_0x38d54f,_0x3c32a6);return new Promise(function(_0x4f39cd){setTimeout(_0x4f39cd,_0x4878f2);});}async function scroll(_0x35a06e,_0x4ef192,_0x1703e4=0x2,_0x1becac){const _0x45639d=await _0x35a06e['waitForSelector'](_0x4ef192);for(let _0x1b1fd5=0x0;_0x1b1fd5<_0x1703e4;_0x1b1fd5++){console['log']('Scrolling\x20'+_0x1b1fd5),await _0x35a06e['evaluate'](_0x29788a=>{const _0x1057aa=document['querySelector'](_0x29788a);_0x1057aa&&_0x1057aa['scrollBy'](0x0,0x190);},_0x4ef192),await delay(0x320,0x5dc),_0x1becac();}}async function saveCookies(_0x28db2c){let _0x4ec011=await _0x28db2c['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x4ec011,null,0x2));}async function notificationClear(_0x34bc7a){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x34bc7a['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x34bc7a['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x1cdab4){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x1cdab4);}}async function getTargetProfiles(_0x393bc8){return new Promise((_0x92df5a,_0x545aea)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x393bc8,(_0xf5f1ad,_0x483e97)=>{_0xf5f1ad?_0x545aea(_0xf5f1ad):_0x92df5a(_0x483e97);});});}async function login_legacy(_0x4a9455,_0x1e90e9,_0x3e9c19){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4a9455,_0x1e90e9),await createUserIfNotExists(_0x1e90e9,_0x3e9c19);}catch(_0x8cff5f){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x8cff5f);}try{await _0x4a9455['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x4a9455['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x4a9455['click']('button._a9--._ap36._a9_0');}catch(_0x10045d){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x4a9455['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x4a9455['type']('input[name=\x27username\x27]',_0x1e90e9,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4a9455['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x4a9455['type']('input[name=\x27password\x27]',_0x3e9c19,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4a9455['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x4a9455['click']('button[type=\x27submit\x27]');}catch(_0x1dc164){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x4a9455),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x4a9455,_0x1e90e9);}catch(_0x22066b){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x22066b);}}catch(_0x1322a6){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1322a6);}}async function login(_0x3ac67b,_0x5a70df){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x3ac67b,_0x5a70df),await createUserIfNotExists(_0x5a70df);}catch(_0x466005){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x466005);}try{await _0x3ac67b['goto']('https://www.instagram.com/accounts/login/');}catch(_0x35bae5){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x35bae5);}}async function set_login_cookies(_0x52526d,_0x1d0bef){try{await saveCookiesForUser(_0x52526d,_0x1d0bef);}catch(_0x14f957){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x14f957);}}async function waitForXPath(_0x324b26,_0x90f4d3,_0x53530c={}){return await _0x324b26['waitForFunction'](_0x3e8d61=>{return document['evaluate'](_0x3e8d61,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x53530c,_0x90f4d3),_0x324b26['evaluateHandle'](_0x33d4a8=>document['evaluate'](_0x33d4a8,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x90f4d3);}async function waitForSelectorWithFallbacks(_0x1491d7,_0x203a21,_0x58b7f1={}){!Array['isArray'](_0x203a21)&&(_0x203a21=[_0x203a21]);for(let _0x3f081f=0x0;_0x3f081f<_0x203a21['length'];_0x3f081f++){const _0xb0e55c=_0x203a21[_0x3f081f],_0x4da7e1=_0xb0e55c['startsWith']('//')||_0xb0e55c['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x4da7e1?'XPath':'Selector')+'\x20'+(_0x3f081f+0x1)+'/'+_0x203a21['length']+':\x20'+_0xb0e55c['substring'](0x0,0x32)+'...');const _0x5909f9=_0x3f081f===0x0?_0x58b7f1['timeout']||0x1388:0x7d0;let _0x383e00;if(_0x4da7e1){const _0x27285b=await waitForXPath(_0x1491d7,_0xb0e55c,{..._0x58b7f1,'timeout':_0x5909f9});if(!_0x27285b)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x383e00=_0x27285b;}else _0x383e00=await _0x1491d7['waitForSelector'](_0xb0e55c,{..._0x58b7f1,'timeout':_0x5909f9});return console['log']((_0x4da7e1?'XPath':'Selector')+'\x20'+(_0x3f081f+0x1)+'\x20gefunden!'),_0x383e00;}catch(_0x371c7d){console['log']((_0x4da7e1?'XPath':'Selector')+'\x20'+(_0x3f081f+0x1)+'\x20nicht\x20gefunden:\x20'+_0x371c7d['message']);if(_0x3f081f===_0x203a21['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x203a21['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x371c7d['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x109ec4,_0x5eb089,_0x1b8c8c={}){return await _0x109ec4['waitForFunction'](_0x971c50=>{return document['evaluate'](_0x971c50,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x1b8c8c,_0x5eb089),_0x109ec4['evaluateHandle'](_0x32317d=>{const _0x58c6e1=document['evaluate'](_0x32317d,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x256f86=[];for(let _0x5b852d=0x0;_0x5b852d<_0x58c6e1['snapshotLength'];_0x5b852d++){_0x256f86['push'](_0x58c6e1['snapshotItem'](_0x5b852d));}return _0x256f86;},_0x5eb089)['then'](_0x5cf65a=>_0x5cf65a['getProperties']());}ipcMain['handle']('check-login',async(_0x27892a,_0xdf4a82)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x49da5e){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x4bbe41){}browser=null;}const _0x57fd6a=await getBrowserPage(0x0,0x0),_0x10280d=await checkCookiesSession(_0x57fd6a,_0xdf4a82);return _0x10280d;});async function checkCookiesSession(_0x2cd119,_0x337f34){try{await setCookiesForUser(_0x2cd119,_0x337f34),console['log']('Cookies\x20für\x20'+_0x337f34+'\x20erfolgreich\x20geladen');}catch(_0x1b6277){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x337f34+':',_0x1b6277),![];}try{await _0x2cd119['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x974692){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x974692);}await delay(0x6a4,0x7d0);try{const _0x54a45a=await checkLoginStatus(_0x2cd119);return console['log']('Login-Status\x20für\x20'+_0x337f34+':\x20'+_0x54a45a),_0x54a45a;}catch(_0x18b01e){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x337f34+':',_0x18b01e['message']),![];}}async function checkLoginStatus(_0x52dc66){const _0x3684ff=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x3445ee=null;try{_0x3445ee=await waitForSelectorWithFallbacks(_0x52dc66,_0x3684ff,{'timeout':0x7d0});}catch(_0x45d154){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x45d154),!![];}if(_0x3445ee){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x2d8866){const _0x45440a=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x4b9bdf=null;try{_0x4b9bdf=await waitForSelectorWithFallbacks(_0x2d8866,_0x45440a,{'timeout':0x7d0});}catch(_0x579a8f){return console['log']('Seite\x20existiert:\x20'+_0x579a8f),!![];}if(_0x4b9bdf){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x4fa0bd){try{const _0x18e9db=await _0x4fa0bd['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x18e9db['length']);if(_0x18e9db&&_0x18e9db['length']>0x0){const _0x4caf79=_0x18e9db[0x0];await _0x4caf79['click'](),await delay(0xaf0,0xbb8);const _0x1136b5=await _0x4fa0bd['evaluate'](()=>{const _0x2fde85=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x2fde85;});if(_0x1136b5){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x4fdf24=await _0x4fa0bd['$$'](K_BEITRAG_LIKE_BUTTON),_0x58402f=_0x4fdf24[0x0];await delay(0x514,0x5dc),await _0x4fa0bd['evaluate'](_0x4164b2=>{_0x4164b2['click']();},_0x58402f);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x4fa0bd['goBack'](),await delay(0x7d0,0x898);}}catch(_0x571c72){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x571c72);throw new Error('Like_Posts:\x20'+_0x571c72);}}async function likeFirstStory(_0x52d38c){try{const _0x2c78e6=await _0x52d38c['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x2c78e6['length']);if(_0x2c78e6&&_0x2c78e6['length']>0x0){const _0x2532c1=_0x2c78e6[0x0];await _0x2532c1['click'](),await delay(0xaf0,0xbb8);const _0x1f7569=await _0x52d38c['evaluate'](()=>{const _0x16f449=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x16f449;});if(_0x1f7569){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x4b7491=await _0x52d38c['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x52d38c['click'](_0x4b7491);}catch(_0x19d2d7){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x19d2d7);try{const _0x49c31e=await _0x52d38c['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x52d38c['evaluateHandle'](_0x2e59c3=>{_0x2e59c3['click']();},_0x49c31e);}catch(_0x335772){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x335772),await _0x52d38c['evaluate'](()=>{const _0x5bf09d=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x5bf09d)_0x5bf09d['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x52d38c['goBack'](),await delay(0x7d0,0x898);}}catch(_0x59ecde){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x59ecde);throw new Error('Like_Storys:\x20'+_0x59ecde);}}async function send_message(_0x122e31,_0x293229,_0x281180,_0x2ac209,_0x10687a,_0xb6cd76,_0x2df07f,_0x50b6bd,_0x425e45,_0x33b11c,_0x305dee){return new Promise(async(_0x3ba6d8,_0x490660)=>{_0xb6cd76=_0xb6cd76['split'](';'),console['log'](_0xb6cd76[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x10687a);if(_0x2ac209===null||_0x2ac209===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x490660('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x122e31,_0xb6cd76[0x0]);}catch(_0x471a3f){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x471a3f),_0x3ba6d8({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x471a3f});return;}await delay(0x6a4,0x7d0);try{await _0x122e31['goto']('https://www.instagram.com/'+_0x293229+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x122e31);}catch(_0x1aed7b){_0x3ba6d8({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x1aed7b});return;}try{await checkLoginStatus(_0x122e31);}catch(_0x191a5c){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x191a5c),_0x490660('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x425e45==0x1)try{await likeFirstPost(_0x122e31);}catch(_0x266cc8){_0x490660(_0x266cc8);}if(_0x33b11c==0x1)try{await likeFirstStory(_0x122e31);}catch(_0x30f2c5){_0x490660(_0x30f2c5);}console['log']('UserSkip:\x20'+_0x2df07f);if(_0x2df07f==0x1)try{const _0x43cfb7=await _0x122e31['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4cacdf=>_0x4cacdf['textContent']['trim']());console['log'](_0x43cfb7);if(_0x43cfb7==='Following'||_0x43cfb7==='Folge\x20ich')return _0x3ba6d8({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x4f5a68){}try{const _0x367974=await waitForSelectorWithFallbacks(_0x122e31,K_DIRECT_MSG_BUTTON);await _0x367974['click'](),await delay(0x6a4,0x7d0);try{const _0x40ee65=await waitForSelectorWithFallbacks(_0x122e31,K_EXPAND_MSG_BUTTON);await _0x40ee65['click']();}catch(_0x28a28e){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x28a28e);}}catch(_0x31ba5a){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x31ba5a);try{await delay(0x6a4,0x7d0);try{const _0x437c00=await waitForSelectorWithFallbacks(_0x122e31,K_OPTIONS_BUTTON);await _0x437c00['click']();}catch(_0x16cfc4){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x16cfc4),_0x3ba6d8({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x16cfc4});return;}await delay(0x3e8,0x44c);const _0x492102=await waitForXPath(_0x122e31,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x492102['click']();}catch(_0x438ce1){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x438ce1),_0x3ba6d8({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x122e31);}catch(_0x4b8fa4){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x4b8fa4);}try{const _0x10a0b8=await waitForSelectorWithFallbacks(_0x122e31,K_CHAT_INPUT_FIELD);if(_0x50b6bd){const _0x2c65f4=await _0x122e31['$'](K_ALREADY_CHATTED);if(_0x2c65f4)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x293229),_0x3ba6d8({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x304908=await _0x122e31['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x304908),_0x2ac209=_0x2ac209['replace']('{USERNAME}',_0x293229);let _0x28fb51;if(_0x2ac209['includes']('{NAME}')||_0x2ac209['includes']('{name}'))try{const _0x178bec=await extractFirstName(_0x304908,_0x305dee);console['log']('Response\x20Clearname\x20valid:\x20'+_0x178bec['valid']),_0x178bec['valid']?(_0x2ac209=_0x2ac209['replaceAll'](/{NAME}|{name}/g,_0x178bec['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x178bec['name']),_0x28fb51=_0x178bec['name']):(_0x2ac209=_0x2ac209['replaceAll'](/ ?({NAME}|{name})/g,''),_0x28fb51='UNKNOWN_NAME');}catch(_0x4a073b){console['log'](_0x4a073b['message']),_0x28fb51=_0x4a073b['message'];const _0x396c6c=_0x304908?_0x304908['replace'](/[^\p{L}\s]/gu,''):'',_0x3170fc=_0x396c6c['split']('\x20')[0x0]||'';_0x3170fc['length']>0x2&&!_0x3170fc['includes']('Instagram')?_0x2ac209=_0x2ac209['replaceAll'](/{NAME}|{name}/g,_0x3170fc):_0x2ac209=_0x2ac209['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x2ac209);const _0x46c74f=_0x2ac209['split']('\x0a');await _0x10a0b8['type'](_0x46c74f[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x640643=0x1;_0x640643<_0x46c74f['length'];_0x640643++){await _0x122e31['keyboard']['down']('Shift'),await _0x122e31['keyboard']['press']('Enter'),await _0x122e31['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x46c74f[_0x640643]['length']>0x0&&await _0x10a0b8['type'](_0x46c74f[_0x640643],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x544f93=await waitForSelectorWithFallbacks(_0x122e31,K_SEND_MSG_BUTTON);await _0x544f93['click']();}catch(_0x4ce84a){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x4ce84a),_0x3ba6d8({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x293229+'\x20überspringen.','error':_0x4ce84a['message']});}await delay(0x320,0x3e8),_0x3ba6d8({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x304908,'extracted_clearname':_0x28fb51});}catch(_0x5519cf){let _0x3454be=_0x5519cf;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x3454be),_0x3ba6d8({'status':0x1f4,'message':'Error\x20500:\x20'+_0x3454be});}});}function handle_fail(_0x519c16){if(isStopping)return new Promise(_0x20e35c=>{_0x20e35c('Scraper\x20gestoppt.');});else{let _0x6db630='';switch(_0x519c16){case 0x0:_0x6db630='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x6db630='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x6db630='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x6db630='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x41b2d1,_0x27ff03)=>{_0x27ff03(_0x6db630);});}}async function fetch_account_details(_0x3c19ca,_0x1837ba,_0x3d8d32,_0x4ebab6){try{await setCookiesForUser(_0x3c19ca,_0x3d8d32['username']);}catch(_0x536d39){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x536d39);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x536d39);return handle_fail(0x0);}_0x3c19ca['setDefaultNavigationTimeout'](0x7530),await _0x3c19ca['goto']('https://www.instagram.com/'+_0x1837ba+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x3c19ca);const _0x10f42b=await _0x3c19ca['evaluate'](()=>{const _0x10a939=document['querySelector']('meta[property=\x22og:image\x22]');return _0x10a939?_0x10a939['getAttribute']('content'):null;});await _0x3c19ca['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x18b9d0=await _0x3c19ca['evaluate'](()=>{const _0x559654=document['querySelector']('meta[name=\x22description\x22]');if(!_0x559654)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x1c2567=_0x559654['getAttribute']('content');if(!_0x1c2567)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x1c2567);const _0x2a56af=/\s*[–-]\s*/,_0x38e699=_0x1c2567['split'](_0x2a56af);if(_0x38e699['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x5e662f=_0x38e699[0x0],_0x115cf0=_0x38e699[0x1],_0x3e600c=_0x5e662f['split'](',\x20');if(_0x3e600c['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x462aec=_0x3e600c[0x0]['split']('\x20')[0x0],_0x5f0df7=_0x3e600c[0x1]['split']('\x20')[0x0],_0x5b1870=_0x3e600c[0x2]['split']('\x20')[0x0];let _0x290ba3='',_0x41854b='';const _0x11acd8='\x20on\x20Instagram:\x20',_0x108eca=_0x115cf0['split'](_0x11acd8);return _0x290ba3=_0x108eca[0x0]['trim'](),_0x290ba3=_0x290ba3['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x108eca['length']>0x1&&(_0x41854b=_0x108eca[0x1]['trim'](),_0x41854b['startsWith']('\x22')&&_0x41854b['endsWith']('\x22')&&(_0x41854b=_0x41854b['substring'](0x1,_0x41854b['length']-0x1)['trim']()),_0x41854b=_0x41854b['replace'](/&quot;/g,'')['trim']()),{'followers':_0x462aec,'following':_0x5f0df7,'posts':_0x5b1870,'nameText':_0x290ba3,'bio':_0x41854b};});console['log']('Extracted\x20profile\x20data:',_0x18b9d0);const _0x3d9789=_0x18b9d0['nameText'],_0x51f8b7=_0x10f42b,_0x191806=_0x18b9d0['bio'],_0x299daf=_0x18b9d0['followers'],_0x201014=_0x18b9d0['following'],_0x48458d=_0x18b9d0['posts'],_0x32851b=![],_0x14cea2=![],_0x4123b4=![],_0x1c3d42='\x0a\x20\x20INSERT\x20INTO\x20'+_0x4ebab6+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x1c3d42,[_0x1837ba,_0x3d9789,_0x51f8b7,_0x191806,_0x299daf,_0x201014,_0x48458d,_0x32851b,_0x14cea2,_0x4123b4],function(_0x3298b3){_0x3298b3?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x3298b3['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x3606d4,_0x8d6204,_0x2f2ab8,_0x3f779e,_0x2df665,_0x3a68d0,_0x53eac5,_0x1c4662){let _0x3edded=0x4,_0x57c5ba=0x0,_0x56c556=0x0;try{await setCookiesForUser(_0x8d6204,_0x3a68d0['username']);}catch(_0x46c2a0){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x46c2a0);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x46c2a0);return handle_fail(0x0);}let _0x1f026c=0x0;try{await _0x8d6204['goto']('https://www.instagram.com/'+_0x2f2ab8+'/'),await notificationClear(_0x8d6204);try{await checkLoginStatus(_0x8d6204);}catch(_0x418c1a){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x418c1a);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x8d6204);}catch(_0x55858a){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x55858a);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x3f779e<=0x0){const _0x275019=await _0x8d6204['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0xc9b733=await _0x8d6204['evaluate'](_0x26bf31=>_0x26bf31['innerHTML'],_0x275019);_0x1f026c=Math['ceil'](_0xc9b733/0x4);}else _0x1f026c=Math['ceil'](_0x3f779e/0x4);_0x3edded+=_0x1f026c,_0x56c556=Math['round'](++_0x57c5ba/_0x3edded*0x64),_0x3606d4['sender']['send']('fetch-progress',_0x56c556,!![]);let _0x117d43=await _0x8d6204['waitForSelector']('a[href=\x22/'+_0x2f2ab8+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x117d43['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x2f2ab8+'\x20gesichtet'),_0x56c556=Math['round'](++_0x57c5ba/_0x3edded*0x64),_0x3606d4['sender']['send']('fetch-progress',_0x56c556,!![]);}catch(_0x20e2e7){console['log']('Follower\x20Liste\x20von\x20'+_0x2f2ab8+'\x20nicht\x20gefunden:'+_0x20e2e7);throw new Error('Follower\x20Liste\x20von\x20'+_0x2f2ab8+'\x20nicht\x20gefunden:'+_0x20e2e7);return handle_fail(0x0);}}catch(_0x59783e){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x59783e);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x59783e);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x1f026c),await scroll(_0x8d6204,FOLLOWER_FENSTER,_0x1f026c,_0x5111a6=>{_0x56c556=Math['round'](++_0x57c5ba/_0x3edded*0x64),_0x3606d4['sender']['send']('fetch-progress',_0x56c556,!![]);}),await _0x8d6204['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x162144=await _0x8d6204['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x3888cf=await _0x8d6204['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x56c556=Math['round'](++_0x57c5ba/_0x3edded*0x64),_0x3606d4['sender']['send']('fetch-progress',_0x56c556,!![]);_0x3f779e<=0x0&&(_0x3f779e=_0x162144['length']);let _0x4600b0=[];for(let _0x443dc5=0x0;_0x443dc5<_0x162144['length']&&_0x443dc5<_0x3f779e;_0x443dc5++){const _0x1d96f7=await _0x162144[_0x443dc5]['evaluate'](_0x27f705=>_0x27f705['textContent']),_0x1d21f4=await _0x3888cf[_0x443dc5]['evaluate'](_0x146601=>_0x146601['textContent']);if(_0x1c4662){const _0x269bd9=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3a68d0['username'],_0x1d96f7]);if(_0x269bd9){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x1d96f7);continue;}}_0x4600b0['push'](_0x1d96f7);const _0x2f3159='INSERT\x20INTO\x20'+_0x2df665+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x2f3159,[_0x1d96f7,_0x1d21f4],function(_0x4221c7){_0x4221c7?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x2df665+'\x27:',_0x4221c7['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x56c556=Math['round'](++_0x57c5ba/_0x3edded*0x64),_0x3606d4['sender']['send']('fetch-progress',_0x56c556,!![]),_0x53eac5&&(_0x3606d4['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3606d4,_0x8d6204,_0x3a68d0,_0x2df665,_0x4600b0)),new Promise(_0x4374d5=>{_0x4374d5('Scraping\x20finished!');});}catch(_0x29a5a1){if(_0x53eac5)throw new Error(_0x29a5a1);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x2f2ab8+'\x20nicht\x20gefunden:\x20'+_0x29a5a1);return handle_fail(0x0);}}async function fetch_details_from_list(_0x50b244,_0x59939b,_0xeae6f6,_0x134c36,_0x384294){let _0x45688c=0x0,_0x3d5fd1=0x0;for(let _0x2c96ac=0x0;_0x2c96ac<_0x384294['length'];_0x2c96ac++){console['log']('Processing\x20profile:',_0x384294[_0x2c96ac]);try{await fetch_account_details(_0x59939b,_0x384294[_0x2c96ac],_0xeae6f6,_0x134c36);}catch(_0x1a3e2f){console['error']('Detailed\x20Scraping\x20von:\x20',_0x384294[_0x2c96ac],_0x1a3e2f);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x384294[_0x2c96ac]+'\x20'+_0x1a3e2f);}_0x3d5fd1=Math['round'](++_0x45688c/_0x384294['length']*0x64),_0x50b244['sender']['send']('fetch-progress',_0x3d5fd1,!![],!![]);}}async function fetch_likers_from_post(_0x5040fa,_0x3dce3a,_0x325ee5,_0x4d6b98,_0x4093c8,_0x202ebf,_0x5828a1,_0x13c1f8){let _0x5d0448=0x4,_0x4588fe=0x0,_0x16198f=0x0;try{await setCookiesForUser(_0x3dce3a,_0x202ebf['username']);}catch(_0x4dd176){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4dd176);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4dd176);return handle_fail(0x1);}_0x16198f=Math['round'](++_0x4588fe/_0x5d0448*0x64),_0x5040fa['sender']['send']('fetch-progress',_0x16198f,!![]);try{let _0x447cf2=_0x325ee5['substring'](0x0,_0x325ee5['lastIndexOf']('/'));_0x447cf2['includes']('/reel/')&&(_0x447cf2=_0x447cf2['replace']('/reel/','/p/'));let _0x2038e5=_0x447cf2+'/liked_by';console['log'](_0x2038e5),await _0x3dce3a['goto'](_0x2038e5),await delay(0x7d0,0xfa0),await notificationClear(_0x3dce3a),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x3dce3a);}catch(_0xb9b880){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0xb9b880);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x3dce3a);}catch(_0x3d9950){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x3d9950);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x16198f=Math['round'](++_0x4588fe/_0x5d0448*0x64),_0x5040fa['sender']['send']('fetch-progress',_0x16198f,!![]),await _0x3dce3a['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x2e8dd3=await _0x3dce3a['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x16e3dd=await _0x3dce3a['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x2e8dd3['length']);let _0x1050b9=path['join'](__dirname,'/likers.csv');_0x16198f=Math['round'](++_0x4588fe/_0x5d0448*0x64),_0x5040fa['sender']['send']('fetch-progress',_0x16198f,!![]);_0x4d6b98<=0x0&&(_0x4d6b98=_0x2e8dd3['length']);try{let _0x1099a5=[];for(let _0x55d3db=0x0;_0x55d3db<_0x2e8dd3['length']&&_0x55d3db<_0x4d6b98;_0x55d3db++){const _0x248629=await _0x2e8dd3[_0x55d3db]['evaluate'](_0x54cd5a=>_0x54cd5a['textContent']),_0x1a831f=await _0x16e3dd[_0x55d3db]['evaluate'](_0x269284=>_0x269284['textContent']);if(_0x13c1f8){const _0x83f566=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x202ebf['username'],_0x248629]);if(_0x83f566){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x248629);continue;}}_0x1099a5['push'](_0x248629);const _0x2723b8='INSERT\x20INTO\x20'+_0x4093c8+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x2723b8,[_0x248629,_0x1a831f],function(_0x115d95){_0x115d95?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4093c8+'\x27:',_0x115d95['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x16198f=Math['round'](++_0x4588fe/_0x5d0448*0x64),_0x5040fa['sender']['send']('fetch-progress',_0x16198f,!![]),_0x5828a1&&(_0x5040fa['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5040fa,_0x3dce3a,_0x202ebf,_0x4093c8,_0x1099a5)),new Promise(_0x4cae4b=>{_0x4cae4b('Scraping\x20finished!');});}catch(_0x5a42e1){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x5a42e1);return handle_fail(0x1);}}catch(_0x550df0){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x550df0);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x550df0);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x34ca32,_0x103075,_0x16d563,_0x31da4c,_0x88a5f9,_0x2da6f1,_0x47c256,_0x3161f7){let _0x34a215=0x3,_0x492d95=0x0,_0x4852d0=0x0;try{await setCookiesForUser(_0x103075,_0x2da6f1['username']);}catch(_0x3d2dd){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3d2dd);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3d2dd);return handle_fail(0x2);}try{console['log'](_0x16d563),await _0x103075['goto'](_0x16d563),await delay(0x7d0,0xfa0),await notificationClear(_0x103075),await delay(0xc8,0x1f4);const _0x3bb3ff=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x103075);}catch(_0x28ea6c){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x28ea6c);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x103075);}catch(_0x24e7c9){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x24e7c9);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x2ca32d;const _0xd0e2dc=await _0x103075['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x452d82=await _0x103075['evaluate'](_0x59145a=>_0x59145a['innerHTML'],_0xd0e2dc),_0x47a7ac=String(_0x452d82)['replace'](/[^0-9]/g,''),_0x2b300d=Number(_0x47a7ac)/0x14;_0x31da4c<=0x0?_0x2ca32d=Math['ceil'](_0x2b300d/0x3):_0x2ca32d=Math['ceil'](_0x31da4c/0x3);_0x34a215+=_0x2ca32d,_0x4852d0=Math['round'](++_0x492d95/_0x34a215*0x64),_0x34ca32['sender']['send']('fetch-progress',_0x4852d0,!![]),console['log']('Auto-scrolls:\x20'+_0x2ca32d),await scroll(_0x103075,_0x3bb3ff,_0x2ca32d,_0x54f04f=>{_0x4852d0=Math['round'](++_0x492d95/_0x34a215*0x64),_0x34ca32['sender']['send']('fetch-progress',_0x4852d0,!![]);});try{const _0x273b69=COM_REPLY_BUTTON_SPAN,_0x2e021a=await waitForXPathAll(_0x103075,_0x273b69);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x2e021a['size']),await delay(0x1f4,0x320);let _0x38d7ca=_0x2e021a['size'],_0x41f8c9=[];for(const [_0x3c6e8b,_0x5dca0a]of _0x2e021a){_0x41f8c9['push'](_0x5dca0a);}console['log']('Alle\x20Reply-Buttons:',_0x41f8c9['length']);try{for(let _0x264aab=0x0;_0x264aab<_0x38d7ca;_0x264aab++){await _0x41f8c9[_0x264aab]['click'](),await delay(0x320,0x5dc);}}catch(_0x5f2e15){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x5f2e15);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x5f2e15);return handle_fail(0x2);}}catch(_0xd5000f){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x2d2b43=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x103075['waitForSelector'](_0x2d2b43),await delay(0x1f4,0x320),_0x4852d0=Math['round'](++_0x492d95/_0x34a215*0x64),_0x34ca32['sender']['send']('fetch-progress',_0x4852d0,!![]);const _0x334bf1=await _0x103075['$$'](_0x2d2b43);let _0xac8489=path['join'](__dirname,'/comments.csv');_0x31da4c<=0x0&&(_0x31da4c=_0x334bf1['length']);console['log']('fetch_limit:\x20'+_0x31da4c),console['log']('comments_len:\x20'+_0x334bf1['length']),_0x31da4c++;try{let _0x43320c=[];for(let _0x30fe01=0x1;_0x30fe01<_0x334bf1['length']&&_0x30fe01<_0x31da4c;_0x30fe01++){const _0x40e6cd=await _0x334bf1[_0x30fe01]['evaluate'](_0x1ab020=>_0x1ab020['textContent']);if(_0x3161f7){const _0x11a03f=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x2da6f1['username'],_0x40e6cd]);if(_0x11a03f){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x40e6cd);continue;}}try{_0x43320c['push'](_0x40e6cd);const _0x1be968='INSERT\x20INTO\x20'+_0x88a5f9+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x1be968,[_0x40e6cd],function(_0x3807a3){_0x3807a3&&console['log']('error\x20in\x20add-user:'+_0x3807a3);});}catch(_0x978892){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x30fe01+'\x20:\x20'+_0x978892);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x30fe01+'\x20:\x20'+_0x978892);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x4852d0=Math['round'](++_0x492d95/_0x34a215*0x64),_0x34ca32['sender']['send']('fetch-progress',_0x4852d0,!![]),_0x34ca32['sender']['send']('fetch-progress',0x64,!![]),_0x47c256&&(_0x34ca32['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x34ca32,_0x103075,_0x2da6f1,_0x88a5f9,_0x43320c)),_0x34ca32['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x6462b1=>{_0x6462b1('Scraping\x20finished!');});}catch(_0x5bbbad){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x5bbbad);return handle_fail(0x2);}}catch(_0x5aac4b){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x5aac4b);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x5aac4b);return handle_fail(0x2);}}async function set_clearname_from_username(_0x17cd7b,_0x337ede,_0x4b0870=null){try{let _0x1d6021,_0x4765d1;const _0x546fab='SELECT\x20username\x20FROM\x20'+_0x337ede+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x546fab,[],(_0x294995,_0x91a32f)=>{_0x294995&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x294995['message']),_0x91a32f['length']===0x0&&(_0x4765d1=_0x91a32f['length']),_0x1d6021=_0x91a32f['map'](_0xbc70d2=>_0xbc70d2['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x4765d1);if(_0x4765d1===0x0){console['log']('Leave');return;}const _0x15a370=await _0x17cd7b['waitForSelector'](IG_SEARCH_BUTTON);await _0x15a370['click'](),await delay(0x4b0,0x7d0);for(let _0x4d980c of _0x1d6021){const _0x409ff0=await _0x17cd7b['waitForSelector'](IG_SEARCH_INPUT);await _0x409ff0['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x17cd7b['type'](IG_SEARCH_INPUT,_0x4d980c,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x5ace5=0x1;while(_0x5ace5!=0x14){console['log']('Schleife');try{let _0x238a59=IG_NAME_SPAN_PART1+_0x5ace5+IG_USERNAME_SPAN_PART2;const _0x5118b7=await _0x17cd7b['waitForSelector'](_0x238a59),_0x481147=await _0x17cd7b['evaluate'](_0x3a7d8f=>_0x3a7d8f['innerHTML'],_0x5118b7);await delay(0xc8,0x1f4);if(_0x481147==_0x4d980c){let _0x43fa17=IG_NAME_SPAN_PART1+_0x5ace5+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x1e940f=await _0x17cd7b['waitForSelector'](_0x43fa17);let _0x2d706c=await _0x17cd7b['evaluate'](_0x435888=>_0x435888['innerHTML'],_0x1e940f);const _0x3c0ef6=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x333e8e=_0x2d706c['match'](_0x3c0ef6);_0x333e8e?_0x2d706c=_0x333e8e[0x1]['trim']():_0x2d706c=_0x2d706c['trim']();_0x2d706c['includes']('•')&&(_0x2d706c=_0x2d706c['substring'](0x0,_0x2d706c['indexOf']('•')-0x1));const _0x3a3044='UPDATE\x20'+_0x337ede+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x3a3044,[_0x2d706c,_0x481147],function(_0x185268){_0x185268&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x185268['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x5ace5++;}catch(_0x5ed118){const _0x5abb88='UPDATE\x20'+_0x337ede+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x5abb88,['',_0x4d980c],function(_0xaedfc8){_0xaedfc8&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0xaedfc8['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x5ed118);break;}}_0x4b0870&&_0x4b0870();}await _0x15a370['click']();}catch(_0xd7c554){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0xd7c554);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x567f57,_0x225b22)=>{const _0x4032f7='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x4032f7,[],(_0x2898a8,_0x13c1f1)=>{_0x2898a8?_0x225b22(_0x2898a8):_0x567f57(_0x13c1f1);});});});const sqlGet=(_0x50ff66,_0x4b387f,_0x93302d=[])=>new Promise((_0x270094,_0x5f2ee1)=>_0x50ff66['get'](_0x4b387f,_0x93302d,(_0x44fad2,_0x3c2b71)=>_0x44fad2?_0x5f2ee1(_0x44fad2):_0x270094(_0x3c2b71))),sqlAll=(_0x30fc96,_0x1fa1bb,_0x3cea56=[])=>new Promise((_0x320fd2,_0x3ca906)=>_0x30fc96['all'](_0x1fa1bb,_0x3cea56,(_0xd14474,_0xb09a96)=>_0xd14474?_0x3ca906(_0xd14474):_0x320fd2(_0xb09a96)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x57730c=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x588c84=await Promise['all'](_0x57730c['map'](async _0x4ff72e=>{const _0x257c8e=[];if(!_0x4ff72e['list_id'])_0x257c8e['push']('Liste');if(!_0x4ff72e['zeitabstand'])_0x257c8e['push']('Zeitabstand');if(!_0x4ff72e['account'])_0x257c8e['push']('Instagram\x20Account');if(_0x4ff72e['account'])try{const _0x136369=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x4ff72e['account']]);if(!_0x136369)_0x257c8e['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x3e8b9c=_0x136369['cookie']&&_0x136369['cookie']['trim']()!==''&&_0x136369['cookie']['trim']()!=='[]';if(!_0x3e8b9c)_0x257c8e['push']('Instagram\x20Login');}}catch(_0x4fca1e){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x4fca1e['message']),_0x257c8e['push']('Instagram\x20Account');}let _0x252e1c='N/A',_0x46d41c='N/A';if(!_0x257c8e['includes']('Liste')){try{const _0x7f1c18=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x4ff72e['list_id']);_0x252e1c=_0x7f1c18?.['lead_count']??0x0;}catch(_0x2ac289){if(/no such table/i['test'](_0x2ac289['message']))_0x257c8e['push']('Liste\x20nicht\x20vorhanden');}try{const _0x40d1ee=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x4ff72e['list_id']]);_0x46d41c=_0x40d1ee?.['contacted_count']??0x0;}catch(_0x5ec57e){}}return{'campaign_name':_0x4ff72e['campaign_name'],'lead_count':_0x252e1c,'contacted_count':_0x46d41c,'status':_0x257c8e['length']===0x0?'Positiv':'Fehler:\x20'+_0x257c8e['join'](',\x20')};}));return{'status':'success','campaigns':_0x588c84};}catch(_0x4a3a22){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x4a3a22['message']),{'status':'error','message':_0x4a3a22['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x116f76,_0x33d120)=>{return new Promise((_0x106fac,_0x52b4f1)=>{const _0x5627f2='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x5627f2,[_0x33d120],(_0x26293a,_0x4a88b2)=>{_0x26293a?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x26293a),_0x52b4f1(_0x26293a)):(console['log']('ROWS'),console['log'](_0x4a88b2),debugDatabaseContents(),_0x106fac(_0x4a88b2));});});});const showTableContents=_0x29a1d9=>{return new Promise((_0x581d7f,_0xba9cce)=>{const _0x465c22='SELECT\x20*\x20FROM\x20'+_0x29a1d9+';';campaignDB['all'](_0x465c22,(_0x4b56a3,_0x152688)=>{_0x4b56a3?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x29a1d9+':',_0x4b56a3),_0xba9cce(_0x4b56a3)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x29a1d9+':',_0x152688),_0x581d7f({'status':'success','message':_0x152688}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0xa2267b){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0xa2267b);}}ipcMain['handle']('create-campaign',async(_0x3f2d98,_0x48ca4c)=>{return new Promise((_0x176d8c,_0x594c19)=>{const _0x44d3f6='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x44d3f6,[String(_0x48ca4c)],function(_0x5a0756){_0x5a0756?_0x594c19(_0x5a0756):_0x176d8c({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x276076,_0x1d3f5b)=>{return new Promise((_0x322c14,_0x1d42a9)=>{const _0x551c2f='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x551c2f,[_0x1d3f5b],function(_0x3aecc7){_0x3aecc7?_0x1d42a9(_0x3aecc7):_0x322c14({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x5a4eff,_0x286b90,_0x39bc01,_0x5134f8,_0x4b0f44,_0x3c681b,_0xe96c2d,_0x1ae3ec,_0x5500c5,_0x37272b)=>{const _0x449e16=await createMessageID(_0x4b0f44);return new Promise((_0x19da42,_0x5e9a2d)=>{console['log']('ZEITABSTAND:\x20'+_0x5134f8);if(!_0x286b90||!_0x39bc01||_0x5134f8===undefined||_0x5134f8===null||_0x5134f8===''||!_0x449e16||!_0x3c681b)return _0x5e9a2d({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x449e16);const _0x29e3a8='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x29e3a8,[_0x39bc01,_0x5134f8,_0x449e16,_0x3c681b,_0xe96c2d,_0x1ae3ec,_0x5500c5,_0x37272b,_0x286b90],function(_0x14c1da){if(_0x14c1da)_0x5e9a2d({'status':'error','message':_0x14c1da['message']});else this['changes']===0x0?_0x5e9a2d({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x19da42({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x42991,_0x2921be,_0x409710,_0x4fecbd,_0x40b35e)=>{return new Promise((_0x5d069d,_0x436573)=>{const _0x4ce0ab='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4ce0ab,[_0x2921be,_0x409710,_0x4fecbd,_0x40b35e],function(_0x565de7){return _0x565de7?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x565de7['message']),_0x436573('insert-dm-response',{'success':![],'message':_0x565de7['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x5d069d('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x3e0f50=>{return new Promise((_0x50d3f8,_0x42589d)=>{const _0x400dc6='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x400dc6,[_0x3e0f50],(_0xc08eb8,_0x29a80e)=>{if(_0xc08eb8)_0x42589d({'status':'error','message':_0xc08eb8['message']});else{if(_0x29a80e)_0x50d3f8(_0x29a80e['message_id']);else{const _0x300ce1='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x300ce1,[_0x3e0f50],function(_0x3bb5da){_0x3bb5da?_0x42589d({'status':'error','message':_0x3bb5da['message']}):_0x50d3f8(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x10d233,_0xe25239)=>{return new Promise((_0x4d3972,_0xaca728)=>{const _0x3378b3='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0xe25239;db['get'](_0x3378b3,(_0x1e3011,_0x4bc95f)=>{_0x1e3011?_0xaca728({'status':'error','message':_0x1e3011['message']}):_0x4d3972({'status':'success','count':_0x4bc95f['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x29268a,_0x30e991){try{const _0x37398d=await new Promise((_0x4ed9da,_0xdd5dce)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x30e991],(_0x1216a2,_0x394056)=>{if(_0x1216a2)_0xdd5dce(_0x1216a2);else{if(_0x394056['length']>0x0){let _0x3a63c9=JSON['parse'](_0x394056[0x0]['cookie']);console['log'](_0x3a63c9),_0x4ed9da(_0x3a63c9);}else _0xdd5dce(new Error('User\x20with\x20username\x20'+_0x30e991+'\x20does\x20not\x20exist.'));}});});await _0x29268a['setCookie'](..._0x37398d),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x59f135){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x59f135);}}async function saveCookiesForUser(_0x2fe9c0,_0x3644ed){try{const _0x40613b=await _0x2fe9c0['cookies']();if(!_0x40613b||_0x40613b['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x3644ed);const _0x1738a0=JSON['stringify'](_0x40613b);if(_0x1738a0['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x3644ed);return new Promise((_0x2b31ce,_0x433ccd)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x3644ed],(_0x2ed9d5,_0x423192)=>{if(_0x2ed9d5)return console['error']('Error\x20checking\x20user\x20existence:',_0x2ed9d5),_0x433ccd(_0x2ed9d5);if(_0x423192){const _0x5e7552=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x5e7552['run'](_0x1738a0,_0x3644ed,function(_0x2ae3b1){return _0x2ae3b1?(console['error']('Error\x20updating\x20cookies:',_0x2ae3b1),_0x433ccd(_0x2ae3b1)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x3644ed),_0x2b31ce());});}else{const _0x4dcbb0=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x4dcbb0['run'](_0x3644ed,_0x1738a0,function(_0x37364d){return _0x37364d?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x37364d),_0x433ccd(_0x37364d)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x3644ed),_0x2b31ce());});}});});}catch(_0x5dccd2){console['error']('Error\x20fetching\x20cookies:',_0x5dccd2);throw _0x5dccd2;}}async function createUserIfNotExists(_0x16e84f){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x16e84f],(_0x4ac900,_0x562733)=>{if(_0x4ac900){console['error']('Error\x20checking\x20user\x20existence:',_0x4ac900);throw _0x4ac900;}else{if(!_0x562733){const _0x2808a8=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x2808a8['run'](_0x16e84f,function(_0x27a7cb){_0x27a7cb?console['error']('Error\x20inserting\x20new\x20user:',_0x27a7cb):console['log']('New\x20user\x20created:',_0x16e84f);});}else console['log']('User\x20already\x20exists:',_0x16e84f);}});}catch(_0x381f84){console['error']('Error\x20creating\x20user:',_0x381f84);throw _0x381f84;}}ipcMain['handle']('create-relation',async(_0x5ecd68,_0x26dc58)=>{return new Promise((_0x1da68d,_0x2175e8)=>{const _0x41ed4e='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x26dc58+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x41ed4e,function(_0x3db4ad){_0x3db4ad?_0x2175e8(_0x3db4ad):_0x1da68d({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x4e0558,_0x2b8472)=>{return console['log']('droping\x20table'+_0x2b8472),new Promise((_0x111403,_0x4fbf6a)=>{const _0x314851='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x2b8472;console['log']('droping\x20table'+_0x2b8472),db['run'](_0x314851,function(_0x4cd193){_0x4cd193?_0x4fbf6a(_0x4cd193):_0x111403({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x55c2f3=>{return new Promise((_0x1fca33,_0x595b2d)=>{const _0x1a7d4a='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x1a7d4a,[],(_0xa79511,_0x1c4ec5)=>{_0xa79511?_0x595b2d(_0xa79511):_0x1fca33(_0x1c4ec5['map'](_0x235282=>_0x235282['name']));});});}),ipcMain['handle']('add-user',async(_0x4d63f6,_0x22e22c,_0x3bd7c3)=>{return new Promise(_0x51cfbb=>{const _0x211f15=db['prepare']('INSERT\x20INTO\x20'+_0x3bd7c3+'\x20(username)\x20VALUES\x20(?)');_0x211f15['run'](_0x22e22c,function(_0x2a3237){_0x2a3237?console['log']('error\x20in\x20add-user:'+_0x2a3237):_0x51cfbb({'status':'success','id':this['lastID']});}),_0x211f15['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x443580,_0x5296a5)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x3eaf99,_0x3936c6)=>{if(_0x3eaf99)_0x5296a5(_0x3eaf99);else{_0x443580({'status':'success','users':_0x3936c6});for(_0x3936c6 of _0x3936c6){console['log'](_0x3936c6['username']);}}});});}),ipcMain['handle']('get-data',async(_0x705987,_0x5c45e8)=>{return new Promise((_0x45b016,_0xfba555)=>{const _0xcbe722='SELECT\x20*\x20FROM\x20'+_0x5c45e8;console['log'](_0xcbe722),db['all'](_0xcbe722,[],(_0x32e377,_0x4fb4e9)=>{_0x32e377?_0xfba555(_0x32e377):_0x45b016(_0x4fb4e9);});});}),ipcMain['handle']('get-accounts',async _0x21db49=>{return new Promise((_0x1a5c2e,_0x49664f)=>{const _0x39e13d='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x39e13d),igaccountsDB['all'](_0x39e13d,[],(_0x4bc61a,_0xa2d557)=>{_0x4bc61a?_0x49664f(_0x4bc61a):_0x1a5c2e(_0xa2d557);});});}),ipcMain['handle']('get-targets',async(_0x4f29da,_0xdf04cb)=>{return getTargetProfiles(_0xdf04cb);}),ipcMain['handle']('delete-user',async(_0x3e00ec,_0x16bf55,_0x34a39b)=>{return new Promise((_0x3ead4f,_0xc73122)=>{const _0x4c42e1=db['prepare']('DELETE\x20FROM\x20'+_0x34a39b+'\x20WHERE\x20username\x20=\x20?');_0x4c42e1['run'](_0x16bf55,function(_0x46442d){_0x46442d?_0xc73122(_0x46442d):_0x3ead4f({'status':'success','changes':this['changes']});}),_0x4c42e1['finalize']();});}),ipcMain['handle']('delete-account',async(_0x489493,_0xf3d5e5)=>{const _0x2978f0=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x2978f0['run'](_0xf3d5e5,function(_0xc7e65c){_0xc7e65c&&console['log'](_0xc7e65c);}),_0x2978f0['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x162561,_0x357439)=>{const _0x55b3cf='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x55b3cf,[],(_0x347383,_0x46d17b)=>{_0x347383?_0x357439({'status':'error','message':_0x347383['message']}):_0x162561({'status':'success','contactedCount':_0x46d17b['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x5e1c62,_0x4fb2f7)=>{const _0xceb765='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0xceb765,[],(_0x1bbc72,_0x435a4f)=>{_0x1bbc72?_0x4fb2f7({'status':'error','message':_0x1bbc72['message']}):_0x5e1c62({'status':'success','contactedCount':_0x435a4f['contactedCount']});});});});function exportDatabase(_0xd7ae0){return new Promise((_0xf78594,_0x2314a4)=>{const _0x4d6510='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0xd7ae0+'\x0a\x20\x20\x20\x20';db['all'](_0x4d6510,[],async(_0x46477b,_0x2b7594)=>{if(_0x46477b){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x46477b['message']),_0x2314a4(_0x46477b);return;}if(!_0x2b7594||_0x2b7594['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0xf78594();return;}const _0x59bb6e=XLSX['utils']['json_to_sheet'](_0x2b7594),_0x1367e5=XLSX['utils']['sheet_to_csv'](_0x59bb6e);try{const {canceled:_0x9bf530,filePath:_0x2a4faf}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0xd7ae0+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x9bf530||!_0x2a4faf){console['log']('Speichern\x20abgebrochen.'),_0xf78594();return;}fs['writeFile'](_0x2a4faf,_0x1367e5,'utf8',_0x2fbe34=>{_0x2fbe34?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x2fbe34['message']),_0x2314a4(_0x2fbe34)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2a4faf),_0xf78594());});}catch(_0x3a8e4c){console['error']('Fehler\x20im\x20Speicherdialog:',_0x3a8e4c),_0x2314a4(_0x3a8e4c);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x330e8a,_0x36a633)=>{shell['openExternal'](_0x36a633);});