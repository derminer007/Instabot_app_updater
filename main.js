const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x1068f5,_0x37af34){try{const _0xd17c47=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x37af34},'body':JSON['stringify']({'clearname':_0x1068f5})});if(!_0xd17c47['ok']){const _0x44e08d=await _0xd17c47['text']();throw new Error(_0xd17c47['status']+':\x20'+_0x44e08d);}const _0xabba73=await _0xd17c47['json']();return _0xabba73;}catch(_0x2a7a92){console['error']('Error\x20in\x20extractFirstName:',_0x2a7a92);throw _0x2a7a92;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Double\x20tap\x20to\x20like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x1d18f3=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x1d18f3['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x1d18f3['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x232b43){var _0x486807=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xc7f0d8){console['log']('window\x20id:'+_0xc7f0d8['id']),_0xc7f0d8['id']>0x1&&(_0x486807=!![]);}),console['log']('child\x20opened\x20='+_0x486807);if(!_0x486807){const _0x4cb081=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x4cb081['loadFile'](_0x232b43['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x5bf1f4=require('fs'),_0x51df7e=path['join'](app['getPath']('userData'),'data'),_0x312927=['campaign.db','crm.db','igaccounts.db'],_0x106ee3=[];try{_0x5bf1f4['mkdirSync'](_0x51df7e,{'recursive':!![]});for(const _0x13346c of _0x312927){const _0xe0600f=path['join'](process['resourcesPath'],'app','build','data',_0x13346c),_0x3cf27c=path['join'](_0x51df7e,_0x13346c);!_0x5bf1f4['existsSync'](_0x3cf27c)?(_0x5bf1f4['copyFileSync'](_0xe0600f,_0x3cf27c),console['log']('[InitDB]\x20Kopiert\x20'+_0x13346c+'\x20nach:\x20'+_0x3cf27c)):console['log']('[InitDB]\x20'+_0x13346c+'\x20existiert\x20bereits:\x20'+_0x3cf27c),_0x106ee3['push'](_0x3cf27c);}}catch(_0x1adf83){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x1adf83);}return _0x106ee3;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x11eef5,AppUpdate:_0x1a8b44}=require('electron-updater');_0x11eef5['autoDownload']=![],_0x11eef5['autoInstallOnAppQuit']=!![],_0x11eef5['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x11eef5['on']('update-available',_0x5e3e4f=>{console['log']('Update\x20verfügbar:',_0x5e3e4f),_0x11eef5['downloadUpdate']();}),_0x11eef5['on']('update-downloaded',_0xc57c66=>{console['log']('Update\x20heruntergeladen:',_0xc57c66),_0x11eef5['quitAndInstall']();}),_0x11eef5['on']('error',_0x2e64ee=>{console['error']('Fehler\x20beim\x20Updaten:',_0x2e64ee);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x4b24e2,AppUpdate:_0x1323b6}=require('electron-updater');_0x4b24e2['autoDownload']=![],_0x4b24e2['autoInstallOnAppQuit']=!![],_0x4b24e2['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x4b24e2['on']('update-available',_0x5e59a6=>{console['log']('Update\x20verfügbar:',_0x5e59a6),_0x4b24e2['downloadUpdate']();}),_0x4b24e2['on']('update-downloaded',_0x4f3367=>{console['log']('Update\x20heruntergeladen:',_0x4f3367),console['log']('Neustarten\x20zum\x20Updaten');}),_0x4b24e2['on']('error',_0x216266=>{console['error']('Fehler\x20beim\x20Updaten:',_0x216266);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x4ed95f='',_0x3a5766=null;if(process['platform']==='darwin')_0x4ed95f=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x4ed95f=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4ed95f}),_0x3a5766=await browser_login['newPage'](),_0x3a5766['setDefaultNavigationTimeout'](0x1d4c),_0x3a5766['setDefaultTimeout'](0x1d4c),await _0x3a5766['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x3a5766;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x2ed015=0x1,_0x485467=0x0){try{let _0x26699a='',_0x20b64f=null;const _0x3053ee=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x26699a=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x26699a=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x2ed015===0x0&&!pageStack[_0x485467])return browser=await puppeteer['launch']({'headless':_0x3053ee,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x26699a}),_0x20b64f=await browser['newPage'](),_0x20b64f['setDefaultNavigationTimeout'](0x1d4c),_0x20b64f['setDefaultTimeout'](0x1d4c),await _0x20b64f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x485467]=_0x20b64f,_0x20b64f;return(browser===null||pageStack[_0x485467]===null||pageStack[_0x485467]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x3053ee,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x26699a})),(pageStack[_0x485467]===null||pageStack[_0x485467]['isClosed']())&&(_0x20b64f=await browser['newPage'](),_0x20b64f['setDefaultNavigationTimeout'](0x1d4c),_0x20b64f['setDefaultTimeout'](0x1d4c),await _0x20b64f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x485467]=_0x20b64f),pageStack[_0x485467];}catch(_0xa73df7){console['error']('Failed\x20to\x20launch\x20browser:',_0xa73df7);const _0x57d53f=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0xa73df7);throw _0x57d53f;}}ipcMain['on']('login',async(_0x257c00,_0x317170)=>{const _0x2be5a9=await getBrowserPageLogin();await _0x2be5a9['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x2be5a9,_0x317170),ipcMain['on']('setLoginCookies',async(_0x199d7b,_0x3c2660)=>{try{await set_login_cookies(_0x2be5a9,_0x3c2660);}catch(_0x3ca7be){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x3ca7be);}});}),ipcMain['on']('export-relation',async(_0x5e8ae7,_0x3ae77b)=>{try{await exportDatabase(_0x3ae77b),_0x5e8ae7['reply']('export-relation-response',{'success':!![]});}catch(_0x3fb751){console['error'](_0x3fb751),_0x5e8ae7['reply']('export-relation-response',{'success':![],'message':_0x3fb751['message']});}}),ipcMain['handle']('sendMessage',async(_0x4d5174,_0x26cd2e,_0x44eab2,_0x4d357a,_0x4b1682,_0x2d9e9f,_0x2df4ff,_0x13121a,_0x9a879,_0xf7906b,_0x4d3898,_0x304a65)=>{isStopping=![];let _0x4db36f=null;return _0x2df4ff?_0x4db36f=await getBrowserPage(_0x4b1682,_0x13121a):_0x4db36f=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x26cd2e),send_message(_0x4db36f,_0x26cd2e,_0x44eab2,_0x4d357a,_0x4b1682,_0x2d9e9f,_0x9a879,_0xf7906b,_0x4d3898,_0x304a65);}),ipcMain['handle']('stop-action',async(_0x51b84c,_0xdbc6b4)=>{isStopping=!![];const _0x4e7091=await getBrowserPage(0x1,_0xdbc6b4);await _0x4e7091['close']();}),ipcMain['handle']('fetch_followers',async(_0x1961b4,_0x3bbaa7,_0x4258fb,_0x1e4244,_0xa48cb5,_0x520ee7)=>{isStopping=![];const _0x20313a=await getBrowserPage();return fetch_followers_from_account(_0x1961b4,_0x20313a,_0x3bbaa7,_0x4258fb,_0x1e4244,_0xa48cb5,_0x520ee7);}),ipcMain['handle']('get-account-details',async(_0x1e94c9,_0x2cc681,_0x218ab2,_0x1b705f)=>{isStopping=![];const _0x329c6a=await getBrowserPage();return fetch_account_details(_0x329c6a,_0x2cc681,_0x218ab2,_0x1b705f);}),ipcMain['handle']('fetch_likes',async(_0x47ef76,_0x18d6bc,_0x273553,_0x37c83f,_0x31b6a5,_0x502356)=>{isStopping=![];const _0x3994d8=await getBrowserPage();return fetch_likers_from_post(_0x47ef76,_0x3994d8,_0x18d6bc,_0x273553,_0x37c83f,_0x31b6a5,_0x502356);}),ipcMain['handle']('fetch_comments',async(_0x388922,_0x30a9bf,_0x5d1bd9,_0x313863,_0x2c0113,_0x22a0f1)=>{isStopping=![];const _0x38403c=await getBrowserPage();return fetch_comments_from_post(_0x388922,_0x38403c,_0x30a9bf,_0x5d1bd9,_0x313863,_0x2c0113,_0x22a0f1);});async function updateAppSilent(){const {spawn:_0x142fbe}=require('child_process'),_0x53fdfd=require('path'),_0x11a827=require('electron-log');return _0x11a827['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2746f7,_0x524bdf)=>{const {updateElectronApp:_0x1be15b,UpdateSourceType:_0x4101c8}=require('update-electron-app');_0x1be15b({'updateSource':{'type':_0x4101c8['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x11a827}),_0x2746f7('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2fd71e,_0x53910f)=>{doFullElectronUpdateSilent(),_0x2fd71e('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x56612e}=require('child_process'),_0x3ba8fc=require('path'),_0x53b15f=require('electron-log');return _0x53b15f['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5f57f6,_0x19cd60)=>{const {updateElectronApp:_0x47a222,UpdateSourceType:_0x57570f}=require('update-electron-app');_0x47a222({'updateSource':{'type':_0x57570f['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x53b15f}),_0x5f57f6('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0xacfad8,_0x829983)=>{doFullElectronUpdate(),_0xacfad8('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x30e9a5,_0x500990)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x30e9a5('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x18484d=path['join'](__dirname,'mac-updater-intern.sh'),_0x43a1dc=spawn('/bin/bash',[_0x18484d],{'detached':!![],'stdio':'ignore'});_0x43a1dc['unref'](),setTimeout(()=>{_0x30e9a5('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x500990(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x1eccc1=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0xb96a30,_0x1ace47)=>{console['log']('Update\x20Silent:\x20'+_0x1ace47);if(_0x1ace47){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x6adea1,_0x62b3d){return Math['random']()*(_0x62b3d-_0x6adea1+0x1)+_0x6adea1;}function delay(_0x379cb2,_0x19860f){let _0x4d853f=getRnd(_0x379cb2,_0x19860f);return new Promise(function(_0x1ff185){setTimeout(_0x1ff185,_0x4d853f);});}async function scroll(_0xe5ebce,_0x55deb9,_0x259272=0x2,_0x239c6d){const _0x549819=await _0xe5ebce['waitForSelector'](_0x55deb9);for(let _0x4cac80=0x0;_0x4cac80<_0x259272;_0x4cac80++){console['log']('Scrolling\x20'+_0x4cac80),await _0xe5ebce['evaluate'](_0xa5ce25=>{const _0x21cab0=document['querySelector'](_0xa5ce25);_0x21cab0&&_0x21cab0['scrollBy'](0x0,0x190);},_0x55deb9),await delay(0x320,0x5dc),_0x239c6d();}}async function saveCookies(_0x5e200b){let _0x276e0a=await _0x5e200b['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x276e0a,null,0x2));}async function notificationClear(_0x144121){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x144121['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x144121['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x398a00){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x398a00);}}async function getTargetProfiles(_0x183bca){return new Promise((_0x42fa40,_0x5ea114)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x183bca,(_0x126444,_0x10bc43)=>{_0x126444?_0x5ea114(_0x126444):_0x42fa40(_0x10bc43);});});}async function login_legacy(_0x31f99c,_0x516a14,_0x3a3cfe){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x31f99c,_0x516a14),await createUserIfNotExists(_0x516a14,_0x3a3cfe);}catch(_0x236a85){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x236a85);}try{await _0x31f99c['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x31f99c['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x31f99c['click']('button._a9--._ap36._a9_0');}catch(_0x4dec90){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x31f99c['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x31f99c['type']('input[name=\x27username\x27]',_0x516a14,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x31f99c['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x31f99c['type']('input[name=\x27password\x27]',_0x3a3cfe,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x31f99c['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x31f99c['click']('button[type=\x27submit\x27]');}catch(_0x318afe){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x31f99c),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x31f99c,_0x516a14);}catch(_0xbb55ed){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xbb55ed);}}catch(_0xe85ffc){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0xe85ffc);}}async function login(_0x4e3d3e,_0x42f2b6){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4e3d3e,_0x42f2b6),await createUserIfNotExists(_0x42f2b6);}catch(_0x4d9604){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4d9604);}try{await _0x4e3d3e['goto']('https://www.instagram.com/accounts/login/');}catch(_0x47d3fd){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x47d3fd);}}async function set_login_cookies(_0x66db0e,_0x1a59a0){try{await saveCookiesForUser(_0x66db0e,_0x1a59a0);}catch(_0x408682){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x408682);}}async function waitForXPath(_0x3e58ce,_0x49ce8d,_0x59b43f={}){return await _0x3e58ce['waitForFunction'](_0x2b706e=>{return document['evaluate'](_0x2b706e,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x59b43f,_0x49ce8d),_0x3e58ce['evaluateHandle'](_0x553ab9=>document['evaluate'](_0x553ab9,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x49ce8d);}async function waitForSelectorWithFallbacks(_0xede8aa,_0x211081,_0x84f259={}){!Array['isArray'](_0x211081)&&(_0x211081=[_0x211081]);for(let _0x4b872f=0x0;_0x4b872f<_0x211081['length'];_0x4b872f++){const _0x35250d=_0x211081[_0x4b872f],_0x3dbdab=_0x35250d['startsWith']('//')||_0x35250d['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x3dbdab?'XPath':'Selector')+'\x20'+(_0x4b872f+0x1)+'/'+_0x211081['length']+':\x20'+_0x35250d['substring'](0x0,0x32)+'...');const _0x4b3ef7=_0x4b872f===0x0?_0x84f259['timeout']||0x1388:0x7d0;let _0x1a7c31;if(_0x3dbdab){const _0x3d56b3=await waitForXPath(_0xede8aa,_0x35250d,{..._0x84f259,'timeout':_0x4b3ef7});if(!_0x3d56b3)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x1a7c31=_0x3d56b3;}else _0x1a7c31=await _0xede8aa['waitForSelector'](_0x35250d,{..._0x84f259,'timeout':_0x4b3ef7});return console['log']((_0x3dbdab?'XPath':'Selector')+'\x20'+(_0x4b872f+0x1)+'\x20gefunden!'),_0x1a7c31;}catch(_0x4d323e){console['log']((_0x3dbdab?'XPath':'Selector')+'\x20'+(_0x4b872f+0x1)+'\x20nicht\x20gefunden:\x20'+_0x4d323e['message']);if(_0x4b872f===_0x211081['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x211081['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x4d323e['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0xb29d9e,_0xfcac75,_0x204552={}){return await _0xb29d9e['waitForFunction'](_0x10644e=>{return document['evaluate'](_0x10644e,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x204552,_0xfcac75),_0xb29d9e['evaluateHandle'](_0xb64f4c=>{const _0x562994=document['evaluate'](_0xb64f4c,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0xb3c4e0=[];for(let _0x5dfcb9=0x0;_0x5dfcb9<_0x562994['snapshotLength'];_0x5dfcb9++){_0xb3c4e0['push'](_0x562994['snapshotItem'](_0x5dfcb9));}return _0xb3c4e0;},_0xfcac75)['then'](_0x31c433=>_0x31c433['getProperties']());}async function checkLoginStatus(_0x4a576d){const _0x47a553=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x2a633e=null;try{_0x2a633e=await waitForSelectorWithFallbacks(_0x4a576d,_0x47a553,{'timeout':0x7d0});}catch(_0x43210f){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x43210f),!![];}if(_0x2a633e){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0xc65dff){const _0x6ba512=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x44af32=null;try{_0x44af32=await waitForSelectorWithFallbacks(_0xc65dff,_0x6ba512,{'timeout':0x7d0});}catch(_0x444de2){return console['log']('Seite\x20existiert:\x20'+_0x444de2),!![];}if(_0x44af32){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x366d12){try{const _0x2b3302=await _0x366d12['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x2b3302['length']);if(_0x2b3302&&_0x2b3302['length']>0x0){const _0x595b48=_0x2b3302[0x0];await _0x595b48['click'](),await delay(0xaf0,0xbb8);const _0xf1a650=await _0x366d12['evaluate'](()=>{const _0x17d51e=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x17d51e;});if(_0xf1a650){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0xba0f57=await _0x366d12['$$'](K_BEITRAG_LIKE_BUTTON),_0x1b5b7e=_0xba0f57[0x0];await delay(0x514,0x5dc),await _0x366d12['evaluate'](_0xe93989=>{_0xe93989['click']();},_0x1b5b7e);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x366d12['goBack'](),await delay(0x7d0,0x898);}}catch(_0xb79de9){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0xb79de9);throw new Error('Like_Posts:\x20'+_0xb79de9);}}async function send_message(_0x4a1aac,_0x19960e,_0x18675a,_0x438a19,_0x22170f,_0xf1d1d1,_0x22ba53,_0x134537,_0x20642b,_0x2bcc55){return new Promise(async(_0x3237c0,_0x216232)=>{_0xf1d1d1=_0xf1d1d1['split'](';'),console['log'](_0xf1d1d1[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x22170f);if(_0x438a19===null||_0x438a19===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x216232('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x4a1aac,_0xf1d1d1[0x0]);}catch(_0x438468){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x438468),_0x3237c0({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x438468});return;}await delay(0x6a4,0x7d0);try{await _0x4a1aac['goto']('https://www.instagram.com/'+_0x19960e+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x4a1aac);}catch(_0x3abd62){_0x3237c0({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x3abd62});return;}try{await checkLoginStatus(_0x4a1aac);}catch(_0x5f64fd){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x5f64fd),_0x216232('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x20642b==0x1)try{await likeFirstPost(_0x4a1aac);}catch(_0x54eb08){_0x216232(_0x54eb08);}console['log']('UserSkip:\x20'+_0x22ba53);if(_0x22ba53==0x1)try{const _0xb04e85=await _0x4a1aac['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x2c40f7=>_0x2c40f7['textContent']['trim']());console['log'](_0xb04e85);if(_0xb04e85==='Following'||_0xb04e85==='Folge\x20ich')return _0x3237c0({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x3db8cc){}try{const _0x278c26=await waitForSelectorWithFallbacks(_0x4a1aac,K_DIRECT_MSG_BUTTON);await _0x278c26['click']();}catch(_0x5e21a8){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x5e21a8);try{await delay(0x6a4,0x7d0);try{const _0x5380c9=await waitForSelectorWithFallbacks(_0x4a1aac,K_OPTIONS_BUTTON);await _0x5380c9['click']();}catch(_0x1f90f9){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1f90f9),_0x3237c0({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1f90f9});return;}await delay(0x3e8,0x44c);const _0x5d118d=await waitForXPath(_0x4a1aac,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x5d118d['click']();}catch(_0x4beb18){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x4beb18),_0x3237c0({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x4a1aac);}catch(_0x51b81c){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x51b81c);}try{const _0x2bec2a=await waitForSelectorWithFallbacks(_0x4a1aac,K_CHAT_INPUT_FIELD);if(_0x134537){const _0x20dd93=await _0x4a1aac['$'](K_ALREADY_CHATTED);if(_0x20dd93)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x19960e),_0x3237c0({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x51d27a=await _0x4a1aac['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x51d27a),_0x438a19=_0x438a19['replace']('{USERNAME}',_0x19960e);let _0x376511;if(_0x438a19['includes']('{NAME}')||_0x438a19['includes']('{name}'))try{const _0x3ebf31=await extractFirstName(_0x51d27a,_0x2bcc55);console['log']('Response\x20Clearname\x20valid:\x20'+_0x3ebf31['valid']),_0x3ebf31['valid']?(_0x438a19=_0x438a19['replaceAll'](/{NAME}|{name}/g,_0x3ebf31['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x3ebf31['name']),_0x376511=_0x3ebf31['name']):(_0x438a19=_0x438a19['replaceAll'](/ ?({NAME}|{name})/g,''),_0x376511='UNKNOWN_NAME');}catch(_0x5b83fd){console['log'](_0x5b83fd['message']),_0x376511=_0x5b83fd['message'];const _0x5f5a7b=_0x51d27a?_0x51d27a['replace'](/[^\p{L}\s]/gu,''):'',_0x2ad3bd=_0x5f5a7b['split']('\x20')[0x0]||'';_0x2ad3bd['length']>0x2&&!_0x2ad3bd['includes']('Instagram')?_0x438a19=_0x438a19['replaceAll'](/{NAME}|{name}/g,_0x2ad3bd):_0x438a19=_0x438a19['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x438a19);const _0x2f6c55=_0x438a19['split']('\x0a');await _0x2bec2a['type'](_0x2f6c55[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x1c1840=0x1;_0x1c1840<_0x2f6c55['length'];_0x1c1840++){await _0x4a1aac['keyboard']['down']('Shift'),await _0x4a1aac['keyboard']['press']('Enter'),await _0x4a1aac['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x2f6c55[_0x1c1840]['length']>0x0&&await _0x2bec2a['type'](_0x2f6c55[_0x1c1840],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x599631=await waitForSelectorWithFallbacks(_0x4a1aac,K_SEND_MSG_BUTTON);await _0x599631['click']();}catch(_0x40f514){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x40f514),_0x3237c0({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x19960e+'\x20überspringen.','error':_0x40f514['message']});}await delay(0x320,0x3e8),_0x3237c0({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x51d27a,'extracted_clearname':_0x376511});}catch(_0x861ff7){let _0x16ee40=_0x861ff7;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x16ee40),_0x3237c0({'status':0x1f4,'message':'Error\x20500:\x20'+_0x16ee40});}});}function handle_fail(_0x87c0e6){if(isStopping)return new Promise(_0x493fa8=>{_0x493fa8('Scraper\x20gestoppt.');});else{let _0x308ab3='';switch(_0x87c0e6){case 0x0:_0x308ab3='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x308ab3='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x308ab3='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x308ab3='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0xf81780,_0x676bd6)=>{_0x676bd6(_0x308ab3);});}}async function fetch_account_details(_0x495778,_0x5091cd,_0x46840b,_0x3f86d3){try{await setCookiesForUser(_0x495778,_0x46840b['username']);}catch(_0x1c655d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1c655d);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1c655d);return handle_fail(0x0);}_0x495778['setDefaultNavigationTimeout'](0x7530),await _0x495778['goto']('https://www.instagram.com/'+_0x5091cd+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x495778);const _0x2d3edb=await _0x495778['evaluate'](()=>{const _0x384436=document['querySelector']('meta[property=\x22og:image\x22]');return _0x384436?_0x384436['getAttribute']('content'):null;});await _0x495778['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x6d982a=await _0x495778['evaluate'](()=>{const _0x3c68fc=document['querySelector']('meta[name=\x22description\x22]');if(!_0x3c68fc)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x3136fa=_0x3c68fc['getAttribute']('content');if(!_0x3136fa)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x3136fa);const _0x1534a3=/\s*[–-]\s*/,_0x53b98e=_0x3136fa['split'](_0x1534a3);if(_0x53b98e['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x3fcc63=_0x53b98e[0x0],_0x5dfe2b=_0x53b98e[0x1],_0x36fe17=_0x3fcc63['split'](',\x20');if(_0x36fe17['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x4c7f91=_0x36fe17[0x0]['split']('\x20')[0x0],_0x615a9c=_0x36fe17[0x1]['split']('\x20')[0x0],_0x2cfcf0=_0x36fe17[0x2]['split']('\x20')[0x0];let _0x604c2e='',_0x37f504='';const _0x9b7f71='\x20on\x20Instagram:\x20',_0x27a9c4=_0x5dfe2b['split'](_0x9b7f71);return _0x604c2e=_0x27a9c4[0x0]['trim'](),_0x604c2e=_0x604c2e['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x27a9c4['length']>0x1&&(_0x37f504=_0x27a9c4[0x1]['trim'](),_0x37f504['startsWith']('\x22')&&_0x37f504['endsWith']('\x22')&&(_0x37f504=_0x37f504['substring'](0x1,_0x37f504['length']-0x1)['trim']()),_0x37f504=_0x37f504['replace'](/&quot;/g,'')['trim']()),{'followers':_0x4c7f91,'following':_0x615a9c,'posts':_0x2cfcf0,'nameText':_0x604c2e,'bio':_0x37f504};});console['log']('Extracted\x20profile\x20data:',_0x6d982a);const _0x3ff78b=_0x6d982a['nameText'],_0x286157=_0x2d3edb,_0x27113b=_0x6d982a['bio'],_0x5eb9b6=_0x6d982a['followers'],_0x5a2889=_0x6d982a['following'],_0x34cd66=_0x6d982a['posts'],_0xbd10ff=![],_0x2b3957=![],_0x492db6=![],_0x21492c='\x0a\x20\x20INSERT\x20INTO\x20'+_0x3f86d3+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x21492c,[_0x5091cd,_0x3ff78b,_0x286157,_0x27113b,_0x5eb9b6,_0x5a2889,_0x34cd66,_0xbd10ff,_0x2b3957,_0x492db6],function(_0x49af15){_0x49af15?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x49af15['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x5638d4,_0x41daf5,_0x8fd541,_0x441962,_0x5ee974,_0x2e7cc8,_0x5bdc84){let _0x38d7f5=0x4,_0x4a4575=0x0,_0xb571db=0x0;try{await setCookiesForUser(_0x41daf5,_0x2e7cc8['username']);}catch(_0x39d4b7){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x39d4b7);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x39d4b7);return handle_fail(0x0);}let _0x5d187a=0x0;try{await _0x41daf5['goto']('https://www.instagram.com/'+_0x8fd541+'/'),await notificationClear(_0x41daf5);try{await checkLoginStatus(_0x41daf5);}catch(_0x3d5b1b){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x3d5b1b);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x41daf5);}catch(_0x4326cc){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x4326cc);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x441962<=0x0){const _0x21f318=await _0x41daf5['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x4cc2f1=await _0x41daf5['evaluate'](_0x4d0f97=>_0x4d0f97['innerHTML'],_0x21f318);_0x5d187a=Math['ceil'](_0x4cc2f1/0x4);}else _0x5d187a=Math['ceil'](_0x441962/0x4);_0x38d7f5+=_0x5d187a,_0xb571db=Math['round'](++_0x4a4575/_0x38d7f5*0x64),_0x5638d4['sender']['send']('fetch-progress',_0xb571db,!![]);let _0x515b98=await _0x41daf5['waitForSelector']('a[href=\x22/'+_0x8fd541+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x515b98['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x8fd541+'\x20gesichtet'),_0xb571db=Math['round'](++_0x4a4575/_0x38d7f5*0x64),_0x5638d4['sender']['send']('fetch-progress',_0xb571db,!![]);}catch(_0x224aed){console['log']('Follower\x20Liste\x20von\x20'+_0x8fd541+'\x20nicht\x20gefunden:'+_0x224aed);throw new Error('Follower\x20Liste\x20von\x20'+_0x8fd541+'\x20nicht\x20gefunden:'+_0x224aed);return handle_fail(0x0);}}catch(_0x1022ed){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1022ed);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1022ed);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x5d187a),await scroll(_0x41daf5,FOLLOWER_FENSTER,_0x5d187a,_0x2caf1e=>{_0xb571db=Math['round'](++_0x4a4575/_0x38d7f5*0x64),_0x5638d4['sender']['send']('fetch-progress',_0xb571db,!![]);}),await _0x41daf5['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x3aa798=await _0x41daf5['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x586b55=await _0x41daf5['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0xb571db=Math['round'](++_0x4a4575/_0x38d7f5*0x64),_0x5638d4['sender']['send']('fetch-progress',_0xb571db,!![]);_0x441962<=0x0&&(_0x441962=_0x3aa798['length']);let _0x185300=[];for(let _0x3ac58a=0x0;_0x3ac58a<_0x3aa798['length']&&_0x3ac58a<_0x441962;_0x3ac58a++){_0x185300['push'](await _0x3aa798[_0x3ac58a]['evaluate'](_0x313fd2=>_0x313fd2['textContent']));const _0x686ed1='INSERT\x20INTO\x20'+_0x5ee974+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x686ed1,[await _0x3aa798[_0x3ac58a]['evaluate'](_0x576eeb=>_0x576eeb['textContent']),await _0x586b55[_0x3ac58a]['evaluate'](_0x2301b1=>_0x2301b1['textContent'])],function(_0x48ac80){_0x48ac80?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x5ee974+'\x27:',_0x48ac80['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0xb571db=Math['round'](++_0x4a4575/_0x38d7f5*0x64),_0x5638d4['sender']['send']('fetch-progress',_0xb571db,!![]),_0x5bdc84&&(_0x5638d4['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5638d4,_0x41daf5,_0x2e7cc8,_0x5ee974,_0x185300)),new Promise(_0x40a714=>{_0x40a714('Scraping\x20finished!');});}catch(_0x30bc90){if(_0x5bdc84)throw new Error(_0x30bc90);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x8fd541+'\x20nicht\x20gefunden:\x20'+_0x30bc90);return handle_fail(0x0);}}async function fetch_details_from_list(_0x5c9c1e,_0x23baf0,_0x1e8820,_0xcad57b,_0x3b606b){let _0x1d2087=0x0,_0x2042ba=0x0;for(let _0x714701=0x0;_0x714701<_0x3b606b['length'];_0x714701++){console['log']('Processing\x20profile:',_0x3b606b[_0x714701]);try{await fetch_account_details(_0x23baf0,_0x3b606b[_0x714701],_0x1e8820,_0xcad57b);}catch(_0x1a8df4){console['error']('Detailed\x20Scraping\x20von:\x20',_0x3b606b[_0x714701],_0x1a8df4);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x3b606b[_0x714701]+'\x20'+_0x1a8df4);}_0x2042ba=Math['round'](++_0x1d2087/_0x3b606b['length']*0x64),_0x5c9c1e['sender']['send']('fetch-progress',_0x2042ba,!![],!![]);}}async function fetch_likers_from_post(_0x34413e,_0x67f2c4,_0x4df7df,_0x1808fd,_0x553400,_0x1c531f,_0x344e42){let _0x6caef9=0x4,_0x5b8404=0x0,_0x4dc68c=0x0;try{await setCookiesForUser(_0x67f2c4,_0x1c531f['username']);}catch(_0x93eedc){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x93eedc);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x93eedc);return handle_fail(0x1);return;}_0x4dc68c=Math['round'](++_0x5b8404/_0x6caef9*0x64),_0x34413e['sender']['send']('fetch-progress',_0x4dc68c,!![]);try{let _0x5b3c61=_0x4df7df['substring'](0x0,_0x4df7df['lastIndexOf']('/'));_0x5b3c61['includes']('/reel/')&&(_0x5b3c61=_0x5b3c61['replace']('/reel/','/p/'));let _0x3ab709=_0x5b3c61+'/liked_by';console['log'](_0x3ab709),await _0x67f2c4['goto'](_0x3ab709),await delay(0x7d0,0xfa0),await notificationClear(_0x67f2c4),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x67f2c4);}catch(_0x4123be){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x4123be);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x67f2c4);}catch(_0x5d91f0){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x5d91f0);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x4dc68c=Math['round'](++_0x5b8404/_0x6caef9*0x64),_0x34413e['sender']['send']('fetch-progress',_0x4dc68c,!![]),await _0x67f2c4['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x56e133=await _0x67f2c4['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x1719de=await _0x67f2c4['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x56e133['length']);let _0x5684c1=path['join'](__dirname,'/likers.csv');_0x4dc68c=Math['round'](++_0x5b8404/_0x6caef9*0x64),_0x34413e['sender']['send']('fetch-progress',_0x4dc68c,!![]);_0x1808fd<=0x0&&(_0x1808fd=_0x56e133['length']);try{let _0x3eb7ba=[];for(let _0x3630b0=0x0;_0x3630b0<_0x56e133['length']&&_0x3630b0<_0x1808fd;_0x3630b0++){_0x3eb7ba['push'](await _0x56e133[_0x3630b0]['evaluate'](_0x59cef2=>_0x59cef2['textContent']));try{const _0x3a7741='INSERT\x20INTO\x20'+_0x553400+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3a7741,[await _0x56e133[_0x3630b0]['evaluate'](_0x2fc39e=>_0x2fc39e['textContent']),await _0x1719de[_0x3630b0]['evaluate'](_0x47be00=>_0x47be00['textContent'])],function(_0x45096a){_0x45096a?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x553400+'\x27:',_0x45096a['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x5d5191){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3630b0+'\x20:\x20'+_0x5d5191);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3630b0+'\x20:\x20'+_0x5d5191);return handle_fail(0x1);}}return _0x4dc68c=Math['round'](++_0x5b8404/_0x6caef9*0x64),_0x34413e['sender']['send']('fetch-progress',_0x4dc68c,!![]),_0x344e42&&(_0x34413e['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x34413e,_0x67f2c4,_0x1c531f,_0x553400,_0x3eb7ba)),new Promise(_0x402539=>{_0x402539('Scraping\x20finished!');});}catch(_0x38d664){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x38d664);return handle_fail(0x1);}}catch(_0x471670){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x471670);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x471670);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x2c1898,_0x63c708,_0x4fc699,_0x13f7fd,_0x576db4,_0x571387,_0x538d8a){let _0x101bba=0x3,_0x57a305=0x0,_0x220afd=0x0;try{await setCookiesForUser(_0x63c708,_0x571387['username']);}catch(_0x155415){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x155415);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x155415);return handle_fail(0x2);}try{console['log'](_0x4fc699),await _0x63c708['goto'](_0x4fc699),await delay(0x7d0,0xfa0),await notificationClear(_0x63c708),await delay(0xc8,0x1f4);const _0x2d26d0=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x63c708);}catch(_0x58f20e){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x58f20e);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x63c708);}catch(_0x184f0c){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x184f0c);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x8a71bd;const _0x725e1f=await _0x63c708['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x2f04a9=await _0x63c708['evaluate'](_0x58f1b6=>_0x58f1b6['innerHTML'],_0x725e1f),_0x5b055c=String(_0x2f04a9)['replace'](/[^0-9]/g,''),_0x282cfb=Number(_0x5b055c)/0x14;_0x13f7fd<=0x0?_0x8a71bd=Math['ceil'](_0x282cfb/0x3):_0x8a71bd=Math['ceil'](_0x13f7fd/0x3);_0x101bba+=_0x8a71bd,_0x220afd=Math['round'](++_0x57a305/_0x101bba*0x64),_0x2c1898['sender']['send']('fetch-progress',_0x220afd,!![]),console['log']('Auto-scrolls:\x20'+_0x8a71bd),await scroll(_0x63c708,_0x2d26d0,_0x8a71bd,_0x14c532=>{_0x220afd=Math['round'](++_0x57a305/_0x101bba*0x64),_0x2c1898['sender']['send']('fetch-progress',_0x220afd,!![]);});try{const _0xde5daf=COM_REPLY_BUTTON_SPAN,_0x5529ff=await waitForXPathAll(_0x63c708,_0xde5daf);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x5529ff['size']),await delay(0x1f4,0x320);let _0xcaf6d7=_0x5529ff['size'],_0x6f5941=[];for(const [_0x12928e,_0x241cde]of _0x5529ff){_0x6f5941['push'](_0x241cde);}console['log']('Alle\x20Reply-Buttons:',_0x6f5941['length']);try{for(let _0x55a004=0x0;_0x55a004<_0xcaf6d7;_0x55a004++){await _0x6f5941[_0x55a004]['click'](),await delay(0x320,0x5dc);}}catch(_0x362c97){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x362c97);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x362c97);return handle_fail(0x2);}}catch(_0x4dfa72){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x271b73=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x63c708['waitForSelector'](_0x271b73),await delay(0x1f4,0x320),_0x220afd=Math['round'](++_0x57a305/_0x101bba*0x64),_0x2c1898['sender']['send']('fetch-progress',_0x220afd,!![]);const _0x10f686=await _0x63c708['$$'](_0x271b73);let _0x36eee9=path['join'](__dirname,'/comments.csv');_0x13f7fd<=0x0&&(_0x13f7fd=_0x10f686['length']);console['log']('fetch_limit:\x20'+_0x13f7fd),console['log']('comments_len:\x20'+_0x10f686['length']),_0x13f7fd++;try{let _0x431094=[];for(let _0x1ef9c3=0x1;_0x1ef9c3<_0x10f686['length']&&_0x1ef9c3<_0x13f7fd;_0x1ef9c3++){try{_0x431094['push'](await _0x10f686[_0x1ef9c3]['evaluate'](_0x489ab4=>_0x489ab4['textContent']));const _0x213b3c=await db['prepare']('INSERT\x20INTO\x20'+_0x576db4+'\x20(username)\x20VALUES\x20(?)');await _0x213b3c['run'](await _0x10f686[_0x1ef9c3]['evaluate'](_0x3eefbd=>_0x3eefbd['textContent']),function(_0x5b5cbc){_0x5b5cbc&&console['log']('error\x20in\x20add-user:'+_0x5b5cbc);}),await _0x213b3c['finalize']();}catch(_0x4e8f1e){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1ef9c3+'\x20:\x20'+_0x4e8f1e);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1ef9c3+'\x20:\x20'+_0x4e8f1e);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x220afd=Math['round'](++_0x57a305/_0x101bba*0x64),_0x2c1898['sender']['send']('fetch-progress',_0x220afd,!![]),_0x2c1898['sender']['send']('fetch-progress',0x64,!![]),_0x538d8a&&(_0x2c1898['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2c1898,_0x63c708,_0x571387,_0x576db4,_0x431094)),_0x2c1898['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x3cdade=>{_0x3cdade('Scraping\x20finished!');});}catch(_0x3b0432){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x3b0432);return handle_fail(0x2);}}catch(_0xb193e7){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0xb193e7);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0xb193e7);return handle_fail(0x2);}}async function set_clearname_from_username(_0x5ea821,_0x388886,_0x3e0aee=null){try{let _0x4c40e7,_0x1791aa;const _0x5f3ab7='SELECT\x20username\x20FROM\x20'+_0x388886+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x5f3ab7,[],(_0xac7377,_0x5bd008)=>{_0xac7377&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0xac7377['message']),_0x5bd008['length']===0x0&&(_0x1791aa=_0x5bd008['length']),_0x4c40e7=_0x5bd008['map'](_0x3c1e98=>_0x3c1e98['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x1791aa);if(_0x1791aa===0x0){console['log']('Leave');return;}const _0x165721=await _0x5ea821['waitForSelector'](IG_SEARCH_BUTTON);await _0x165721['click'](),await delay(0x4b0,0x7d0);for(let _0x26cc5e of _0x4c40e7){const _0x31734f=await _0x5ea821['waitForSelector'](IG_SEARCH_INPUT);await _0x31734f['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x5ea821['type'](IG_SEARCH_INPUT,_0x26cc5e,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x46a237=0x1;while(_0x46a237!=0x14){console['log']('Schleife');try{let _0x25b649=IG_NAME_SPAN_PART1+_0x46a237+IG_USERNAME_SPAN_PART2;const _0x20bc4e=await _0x5ea821['waitForSelector'](_0x25b649),_0x3dcd86=await _0x5ea821['evaluate'](_0x489105=>_0x489105['innerHTML'],_0x20bc4e);await delay(0xc8,0x1f4);if(_0x3dcd86==_0x26cc5e){let _0x54024c=IG_NAME_SPAN_PART1+_0x46a237+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x19c8ec=await _0x5ea821['waitForSelector'](_0x54024c);let _0x1aaff5=await _0x5ea821['evaluate'](_0x2dddda=>_0x2dddda['innerHTML'],_0x19c8ec);const _0x81292b=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x19430e=_0x1aaff5['match'](_0x81292b);_0x19430e?_0x1aaff5=_0x19430e[0x1]['trim']():_0x1aaff5=_0x1aaff5['trim']();_0x1aaff5['includes']('•')&&(_0x1aaff5=_0x1aaff5['substring'](0x0,_0x1aaff5['indexOf']('•')-0x1));const _0x31ba70='UPDATE\x20'+_0x388886+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x31ba70,[_0x1aaff5,_0x3dcd86],function(_0x1d451b){_0x1d451b&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1d451b['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x46a237++;}catch(_0x4573f6){const _0x56227a='UPDATE\x20'+_0x388886+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x56227a,['',_0x26cc5e],function(_0x197ec9){_0x197ec9&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x197ec9['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x4573f6);break;}}_0x3e0aee&&_0x3e0aee();}await _0x165721['click']();}catch(_0x593bf5){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x593bf5);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x5c46fa,_0x4bebee)=>{const _0x106370='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x106370,[],(_0x1851ce,_0x2cf25c)=>{_0x1851ce?_0x4bebee(_0x1851ce):_0x5c46fa(_0x2cf25c);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x59997a,_0x4172a8)=>{const _0x27c23a='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x27c23a,[],async(_0x390df4,_0x7a53d3)=>{if(_0x390df4)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x390df4['message']),_0x4172a8({'status':'error','message':_0x390df4['message']});else try{const _0x1aa5e6=await Promise['all'](_0x7a53d3['map'](_0x5efc35=>{return new Promise(_0x17e93a=>{if(!_0x5efc35['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x5efc35['campaign_name']),_0x17e93a({'campaign_name':_0x5efc35['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x58e9b3='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x5efc35['list_id'],_0x331c64='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x5efc35['list_id']+'\x22';db['get'](_0x58e9b3,[],(_0x3ed731,_0x2f1343)=>{_0x3ed731?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x5efc35['campaign_name']+':',_0x3ed731['message']),_0x17e93a({'campaign_name':_0x5efc35['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x331c64,[],(_0x780ab9,_0xca9222)=>{_0x780ab9?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x5efc35['campaign_name']+':',_0x780ab9['message']),_0x17e93a({'campaign_name':_0x5efc35['campaign_name'],'lead_count':_0x2f1343?_0x2f1343['lead_count']:0x0,'contacted_count':'N/A'})):_0x17e93a({'campaign_name':_0x5efc35['campaign_name'],'lead_count':_0x2f1343?_0x2f1343['lead_count']:0x0,'contacted_count':_0xca9222?_0xca9222['contacted_count']:0x0});});});});}));_0x59997a({'status':'success','campaigns':_0x1aa5e6});}catch(_0x5d5c56){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x5d5c56),_0x4172a8({'status':'error','message':_0x5d5c56['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x28ca7b,_0x9de1e8)=>{return new Promise((_0x9d8a8f,_0x3b5134)=>{const _0x51a21a='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x51a21a,[_0x9de1e8],(_0x4ca61e,_0xda1dfd)=>{_0x4ca61e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x4ca61e),_0x3b5134(_0x4ca61e)):(console['log']('ROWS'),console['log'](_0xda1dfd),debugDatabaseContents(),_0x9d8a8f(_0xda1dfd));});});});const showTableContents=_0x4146b9=>{return new Promise((_0x4d02db,_0x4ceae1)=>{const _0x51be95='SELECT\x20*\x20FROM\x20'+_0x4146b9+';';campaignDB['all'](_0x51be95,(_0x3f1d89,_0x5bea02)=>{_0x3f1d89?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x4146b9+':',_0x3f1d89),_0x4ceae1(_0x3f1d89)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x4146b9+':',_0x5bea02),_0x4d02db({'status':'success','message':_0x5bea02}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x377324){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x377324);}}ipcMain['handle']('create-campaign',async(_0x2172e0,_0x17ee3f)=>{return new Promise((_0x580f2e,_0x9f22b1)=>{const _0x455a9a='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x455a9a,[String(_0x17ee3f)],function(_0x144e8d){_0x144e8d?_0x9f22b1(_0x144e8d):_0x580f2e({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x4b52c7,_0x153ef2)=>{return new Promise((_0x531701,_0x57a9cf)=>{const _0x1c8a91='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x1c8a91,[_0x153ef2],function(_0x55156d){_0x55156d?_0x57a9cf(_0x55156d):_0x531701({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x1c16ee,_0x26769d,_0x424b95,_0x454c00,_0x313996,_0x2714e8,_0x466f2b,_0x4e9958,_0x2ee794)=>{const _0x17e8e5=await createMessageID(_0x313996);return new Promise((_0x2fc0c9,_0x4feae0)=>{console['log']('ZEITABSTAND:\x20'+_0x454c00);if(!_0x26769d||!_0x424b95||_0x454c00===undefined||_0x454c00===null||_0x454c00===''||!_0x17e8e5||!_0x2714e8)return _0x4feae0({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x17e8e5);const _0x1054d9='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x1054d9,[_0x424b95,_0x454c00,_0x17e8e5,_0x2714e8,_0x466f2b,_0x4e9958,_0x2ee794,_0x26769d],function(_0x98819f){if(_0x98819f)_0x4feae0({'status':'error','message':_0x98819f['message']});else this['changes']===0x0?_0x4feae0({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x2fc0c9({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x29aef6,_0x4f1103,_0x5c8d13,_0x2e62a3,_0x13bbff)=>{return new Promise((_0xabad32,_0x20b50d)=>{const _0x41f9b2='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x41f9b2,[_0x4f1103,_0x5c8d13,_0x2e62a3,_0x13bbff],function(_0x234930){return _0x234930?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x234930['message']),_0x20b50d('insert-dm-response',{'success':![],'message':_0x234930['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0xabad32('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x18b6bf=>{return new Promise((_0x34222b,_0x43a35a)=>{const _0xa712a2='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0xa712a2,[_0x18b6bf],(_0x5dbe0a,_0x5ab886)=>{if(_0x5dbe0a)_0x43a35a({'status':'error','message':_0x5dbe0a['message']});else{if(_0x5ab886)_0x34222b(_0x5ab886['message_id']);else{const _0x308292='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x308292,[_0x18b6bf],function(_0x415549){_0x415549?_0x43a35a({'status':'error','message':_0x415549['message']}):_0x34222b(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x576bbb,_0x35b02f)=>{return new Promise((_0x3da3d0,_0x5affe3)=>{const _0x123e9f='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x35b02f;db['get'](_0x123e9f,(_0x573430,_0x3b1c18)=>{_0x573430?_0x5affe3({'status':'error','message':_0x573430['message']}):_0x3da3d0({'status':'success','count':_0x3b1c18['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x5480e2,_0x1a36f6){try{const _0x104f78=await new Promise((_0x5c0e32,_0x58dec0)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x1a36f6],(_0x47b4bd,_0x36f064)=>{if(_0x47b4bd)_0x58dec0(_0x47b4bd);else{if(_0x36f064['length']>0x0){let _0x15a045=JSON['parse'](_0x36f064[0x0]['cookie']);console['log'](_0x15a045),_0x5c0e32(_0x15a045);}else _0x58dec0(new Error('User\x20with\x20username\x20'+_0x1a36f6+'\x20does\x20not\x20exist.'));}});});await _0x5480e2['setCookie'](..._0x104f78),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0xfd1df7){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0xfd1df7);}}async function saveCookiesForUser(_0x2064d7,_0x18e1be){try{const _0x5e8e42=await _0x2064d7['cookies']();if(!_0x5e8e42||_0x5e8e42['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x18e1be);const _0x4379b0=JSON['stringify'](_0x5e8e42);if(_0x4379b0['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x18e1be);return new Promise((_0x3c04ba,_0x532af4)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x18e1be],(_0x554abd,_0x52e7d8)=>{if(_0x554abd)return console['error']('Error\x20checking\x20user\x20existence:',_0x554abd),_0x532af4(_0x554abd);if(_0x52e7d8){const _0x47ad21=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x47ad21['run'](_0x4379b0,_0x18e1be,function(_0x5e59cf){return _0x5e59cf?(console['error']('Error\x20updating\x20cookies:',_0x5e59cf),_0x532af4(_0x5e59cf)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x18e1be),_0x3c04ba());});}else{const _0x4e8679=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x4e8679['run'](_0x18e1be,_0x4379b0,function(_0x4188e3){return _0x4188e3?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x4188e3),_0x532af4(_0x4188e3)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x18e1be),_0x3c04ba());});}});});}catch(_0x182c57){console['error']('Error\x20fetching\x20cookies:',_0x182c57);throw _0x182c57;}}async function createUserIfNotExists(_0x4c8bbf){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x4c8bbf],(_0x3be3fc,_0x5cd70c)=>{if(_0x3be3fc){console['error']('Error\x20checking\x20user\x20existence:',_0x3be3fc);throw _0x3be3fc;}else{if(!_0x5cd70c){const _0xe2f79d=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0xe2f79d['run'](_0x4c8bbf,function(_0x29014e){_0x29014e?console['error']('Error\x20inserting\x20new\x20user:',_0x29014e):console['log']('New\x20user\x20created:',_0x4c8bbf);});}else console['log']('User\x20already\x20exists:',_0x4c8bbf);}});}catch(_0x229db1){console['error']('Error\x20creating\x20user:',_0x229db1);throw _0x229db1;}}ipcMain['handle']('create-relation',async(_0x3b06d2,_0x552a28)=>{return new Promise((_0x150dcf,_0x3840a5)=>{const _0x4b5c74='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x552a28+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x4b5c74,function(_0x5c691c){_0x5c691c?_0x3840a5(_0x5c691c):_0x150dcf({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x41d71f,_0x7397b8)=>{return console['log']('droping\x20table'+_0x7397b8),new Promise((_0x95aadd,_0x1633b2)=>{const _0x2eca6d='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x7397b8;console['log']('droping\x20table'+_0x7397b8),db['run'](_0x2eca6d,function(_0x4826dd){_0x4826dd?_0x1633b2(_0x4826dd):_0x95aadd({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x3a0a4a=>{return new Promise((_0x44d493,_0x26be32)=>{const _0x34a18b='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x34a18b,[],(_0x1850ed,_0x51c0f1)=>{_0x1850ed?_0x26be32(_0x1850ed):_0x44d493(_0x51c0f1['map'](_0x216610=>_0x216610['name']));});});}),ipcMain['handle']('add-user',async(_0x57a0f0,_0x1aa062,_0x26da2c)=>{return new Promise(_0x12b6b5=>{const _0x23a1b9=db['prepare']('INSERT\x20INTO\x20'+_0x26da2c+'\x20(username)\x20VALUES\x20(?)');_0x23a1b9['run'](_0x1aa062,function(_0x5eaabb){_0x5eaabb?console['log']('error\x20in\x20add-user:'+_0x5eaabb):_0x12b6b5({'status':'success','id':this['lastID']});}),_0x23a1b9['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x4d7b33,_0x1abf2f)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x23361d,_0x41c66f)=>{if(_0x23361d)_0x1abf2f(_0x23361d);else{_0x4d7b33({'status':'success','users':_0x41c66f});for(_0x41c66f of _0x41c66f){console['log'](_0x41c66f['username']);}}});});}),ipcMain['handle']('get-data',async(_0x31f7ab,_0x5e6061)=>{return new Promise((_0x2228a6,_0x7598)=>{const _0x33b0e5='SELECT\x20*\x20FROM\x20'+_0x5e6061;console['log'](_0x33b0e5),db['all'](_0x33b0e5,[],(_0x3ada2d,_0x58a618)=>{_0x3ada2d?_0x7598(_0x3ada2d):_0x2228a6(_0x58a618);});});}),ipcMain['handle']('get-accounts',async _0x3cf05b=>{return new Promise((_0x36aaa7,_0x412263)=>{const _0x3b59de='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x3b59de),igaccountsDB['all'](_0x3b59de,[],(_0x58d041,_0x225503)=>{_0x58d041?_0x412263(_0x58d041):_0x36aaa7(_0x225503);});});}),ipcMain['handle']('get-targets',async(_0x164872,_0x52bce7)=>{return getTargetProfiles(_0x52bce7);}),ipcMain['handle']('delete-user',async(_0x25ce17,_0x3e9438,_0x2cbe8d)=>{return new Promise((_0x14ab75,_0x23dedd)=>{const _0x37656d=db['prepare']('DELETE\x20FROM\x20'+_0x2cbe8d+'\x20WHERE\x20username\x20=\x20?');_0x37656d['run'](_0x3e9438,function(_0x1cc84d){_0x1cc84d?_0x23dedd(_0x1cc84d):_0x14ab75({'status':'success','changes':this['changes']});}),_0x37656d['finalize']();});}),ipcMain['handle']('delete-account',async(_0x226dc6,_0xd91f1)=>{const _0x5736b8=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x5736b8['run'](_0xd91f1,function(_0x132d8c){_0x132d8c&&console['log'](_0x132d8c);}),_0x5736b8['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x385e9c,_0x1d1a02)=>{const _0x2ec06b='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x2ec06b,[],(_0x1221fe,_0x5d3919)=>{_0x1221fe?_0x1d1a02({'status':'error','message':_0x1221fe['message']}):_0x385e9c({'status':'success','contactedCount':_0x5d3919['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x239137,_0x1876ee)=>{const _0x12db01='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x12db01,[],(_0x35d34b,_0x40ff6e)=>{_0x35d34b?_0x1876ee({'status':'error','message':_0x35d34b['message']}):_0x239137({'status':'success','contactedCount':_0x40ff6e['contactedCount']});});});});function exportDatabase(_0x1a07f4){return new Promise((_0x108c65,_0x302709)=>{const _0x4713d0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x1a07f4+'\x0a\x20\x20\x20\x20';db['all'](_0x4713d0,[],async(_0x24349c,_0x33f639)=>{if(_0x24349c){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x24349c['message']),_0x302709(_0x24349c);return;}if(!_0x33f639||_0x33f639['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x108c65();return;}const _0x4fd84c=XLSX['utils']['json_to_sheet'](_0x33f639),_0x4a305f=XLSX['utils']['sheet_to_csv'](_0x4fd84c);try{const {canceled:_0x1b00a8,filePath:_0x4b8168}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x1a07f4+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x1b00a8||!_0x4b8168){console['log']('Speichern\x20abgebrochen.'),_0x108c65();return;}fs['writeFile'](_0x4b8168,_0x4a305f,'utf8',_0x1b9bab=>{_0x1b9bab?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x1b9bab['message']),_0x302709(_0x1b9bab)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x4b8168),_0x108c65());});}catch(_0x1c1395){console['error']('Fehler\x20im\x20Speicherdialog:',_0x1c1395),_0x302709(_0x1c1395);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x13d9b8,_0x4be783)=>{shell['openExternal'](_0x4be783);});