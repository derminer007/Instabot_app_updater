const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs'),{t,setLanguage,getLanguage}=require('./i18n');function quoteIdent(_0x559844){if(_0x559844===undefined||_0x559844===null)throw new Error('Invalid\x20identifier');const _0x2c9780=String(_0x559844),_0x4291c3=_0x2c9780['replace'](/"/g,'\x22\x22');return'\x22'+_0x4291c3+'\x22';}async function extractFirstName(_0x29e2d3,_0x4193da){try{const _0x398bd2=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x4193da},'body':JSON['stringify']({'clearname':_0x29e2d3})});if(!_0x398bd2['ok']){const _0x568a6d=await _0x398bd2['text']();throw new Error(_0x398bd2['status']+':\x20'+_0x568a6d);}const _0x5dd75e=await _0x398bd2['json']();return _0x5dd75e;}catch(_0x3cf4d0){console['error']('Error\x20in\x20extractFirstName:',_0x3cf4d0);throw _0x3cf4d0;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_ACCOUNT_PRIVAT_LABEL='//span[contains(.,\x20\x27private\x27)]',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_SEE_ALL_FOLLOWERS_TEXT='//span[contains(.,\x20\x27Only\x27)\x20and\x20contains(.,\x20\x27all\x20followers.\x27)]',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x46e1d8=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x46e1d8['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x46e1d8['webContents']['openDevTools']();}app['whenReady']()['then'](async()=>{try{await initOptionsDb(),console['log']('[OptionsDB]\x20initialisiert:',path['join'](SqlDataDirectory,'options.db'));}catch(_0x13fcdc){console['error']('[OptionsDB]\x20Initialisierung\x20fehlgeschlagen:',_0x13fcdc);}})['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x348a10){var _0xeceb4a=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x267d53){console['log']('window\x20id:'+_0x267d53['id']),_0x267d53['id']>0x1&&(_0xeceb4a=!![]);}),console['log']('child\x20opened\x20='+_0xeceb4a);if(!_0xeceb4a){const _0x59c303=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x59c303['loadFile'](_0x348a10['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));try{optionsDb&&(optionsDb['close'](),optionsDb=null,console['log']('[OptionsDB]\x20geschlossen.'));}catch(_0x5f4257){console['warn']('[OptionsDB]\x20Fehler\x20beim\x20Schließen:',_0x5f4257?.['message']||_0x5f4257);}if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x2d6a18=require('fs'),_0x105d1b=path['join'](app['getPath']('userData'),'data'),_0x570fdf=['campaign.db','crm.db','igaccounts.db'],_0x290550=[];try{_0x2d6a18['mkdirSync'](_0x105d1b,{'recursive':!![]});for(const _0x53523b of _0x570fdf){const _0x41f420=path['join'](process['resourcesPath'],'app','build','data',_0x53523b),_0x4bd208=path['join'](_0x105d1b,_0x53523b);!_0x2d6a18['existsSync'](_0x4bd208)?(_0x2d6a18['copyFileSync'](_0x41f420,_0x4bd208),console['log']('[InitDB]\x20Kopiert\x20'+_0x53523b+'\x20nach:\x20'+_0x4bd208)):console['log']('[InitDB]\x20'+_0x53523b+'\x20existiert\x20bereits:\x20'+_0x4bd208),_0x290550['push'](_0x4bd208);}}catch(_0xdcce44){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0xdcce44);}return _0x290550;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x43670f,AppUpdate:_0x3b170e}=require('electron-updater');_0x43670f['autoDownload']=![],_0x43670f['autoInstallOnAppQuit']=!![],_0x43670f['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x43670f['on']('update-available',_0x5a100b=>{console['log']('Update\x20verfügbar:',_0x5a100b),_0x43670f['downloadUpdate']();}),_0x43670f['on']('update-downloaded',_0x8eb4cb=>{console['log']('Update\x20heruntergeladen:',_0x8eb4cb),_0x43670f['quitAndInstall']();}),_0x43670f['on']('error',_0x256f84=>{console['error']('Fehler\x20beim\x20Updaten:',_0x256f84);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x3ff66c,AppUpdate:_0x1c69a0}=require('electron-updater');_0x3ff66c['autoDownload']=![],_0x3ff66c['autoInstallOnAppQuit']=!![],_0x3ff66c['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x3ff66c['on']('update-available',_0xbea505=>{console['log']('Update\x20verfügbar:',_0xbea505),_0x3ff66c['downloadUpdate']();}),_0x3ff66c['on']('update-downloaded',_0x2fc920=>{console['log']('Update\x20heruntergeladen:',_0x2fc920),console['log']('Neustarten\x20zum\x20Updaten');}),_0x3ff66c['on']('error',_0x13e12d=>{console['error']('Fehler\x20beim\x20Updaten:',_0x13e12d);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let optionsDb,optionsDbPath;function ensureDirSync(_0x4cc5d1){try{fs_no_promise['mkdirSync'](_0x4cc5d1,{'recursive':!![]});}catch(_0x26c45b){}}function initOptionsDb(){return new Promise((_0x33d19b,_0x140bdf)=>{try{ensureDirSync(SqlDataDirectory),optionsDbPath=path['join'](SqlDataDirectory,'options.db'),optionsDb=new sqlite3['Database'](optionsDbPath,_0x3a6ace=>{if(_0x3a6ace)return _0x140bdf(_0x3a6ace);optionsDb['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20options\x20(key\x20TEXT\x20PRIMARY\x20KEY,\x20value\x20TEXT\x20NOT\x20NULL)',_0x4ed679=>{if(_0x4ed679)return _0x140bdf(_0x4ed679);optionsDb['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)',['isHeadless','1'],_0x237e0c=>{if(_0x237e0c)return _0x140bdf(_0x237e0c);optionsDb['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)',['app_language','de'],async _0xc260e0=>{if(_0xc260e0)return _0x140bdf(_0xc260e0);try{const _0x569ad7=await getOption('app_language');setLanguage(_0x569ad7||'de');}catch(_0x4f4095){}_0x33d19b();});});});});}catch(_0x5cd993){_0x140bdf(_0x5cd993);}});}function setOption(_0x316a58,_0x54b81c){return new Promise((_0x54c6b6,_0x4537ef)=>{if(!optionsDb)return _0x4537ef(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['run']('INSERT\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)\x20ON\x20CONFLICT(key)\x20DO\x20UPDATE\x20SET\x20value\x20=\x20excluded.value',[_0x316a58,String(_0x54b81c)],_0xc3d6b=>{if(_0xc3d6b)return _0x4537ef(_0xc3d6b);_0x54c6b6();});});}function getOption(_0x5e2486){return new Promise((_0x5f15be,_0x58c725)=>{if(!optionsDb)return _0x58c725(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['get']('SELECT\x20value\x20FROM\x20options\x20WHERE\x20key\x20=\x20?',[_0x5e2486],(_0x2d9490,_0x416f8a)=>{if(_0x2d9490)return _0x58c725(_0x2d9490);_0x5f15be(_0x416f8a?_0x416f8a['value']:null);});});}async function setAppLanguage(_0x2c67c1){const _0x25add1=_0x2c67c1==='en'||_0x2c67c1==='de'?_0x2c67c1:'de';return await setOption('app_language',_0x25add1),setLanguage(_0x25add1),_0x25add1;}async function getAppLanguage(){const _0xfa1ae1=await getOption('app_language'),_0x781b15=_0xfa1ae1==='en'||_0xfa1ae1==='de'?_0xfa1ae1:'de';return setLanguage(_0x781b15),_0x781b15;}async function getIsHeadless(){try{const _0x184b3b=await getOption('isHeadless');if(_0x184b3b===null||_0x184b3b===undefined)return!![];if(_0x184b3b==='1'||_0x184b3b==='true'||_0x184b3b===!![])return!![];if(_0x184b3b==='0'||_0x184b3b==='false'||_0x184b3b===![])return![];return console['log']('[OptionsDB]\x20getIsHeadless\x20unerwarteter\x20Wert:',_0x184b3b),Boolean(_0x184b3b);}catch(_0x1dcc2b){return console['warn']('[OptionsDB]\x20getIsHeadless\x20Fehler,\x20fallback=true:',_0x1dcc2b?.['message']||_0x1dcc2b),!![];}}function setGlobalDelay(_0x22e729){return new Promise(async(_0x3e92fe,_0x6253ed)=>{try{if(!optionsDb)return _0x6253ed(new Error('Options-DB\x20nicht\x20initialisiert'));const _0x1d21a8=_0x22e729===null||_0x22e729===undefined||_0x22e729===''?'':String(Number(_0x22e729));await setOption('zeitabstand_global',_0x1d21a8),_0x3e92fe();}catch(_0x5c667f){_0x6253ed(_0x5c667f);}});}function getGlobalDelay(){return new Promise(async(_0x186a67,_0x6cc240)=>{try{if(!optionsDb)return _0x6cc240(new Error('Options-DB\x20nicht\x20initialisiert'));const _0xe4a2f=await getOption('zeitabstand_global');if(_0xe4a2f===null||_0xe4a2f===undefined||_0xe4a2f==='')return _0x186a67(null);const _0x38a377=Number(_0xe4a2f);if(Number['isFinite'](_0x38a377))return _0x186a67(_0x38a377);optionsDb['get']('SELECT\x20zeitabstand_global\x20FROM\x20options\x20WHERE\x20key\x20=\x20?\x20LIMIT\x201',['__global__'],(_0x3b58a5,_0x563080)=>{if(_0x3b58a5)return _0x6cc240(_0x3b58a5);if(_0x563080&&(_0x563080['zeitabstand_global']||_0x563080['zeitabstand_global']===0x0)){const _0x19f69=Number(_0x563080['zeitabstand_global']);return _0x186a67(Number['isFinite'](_0x19f69)?_0x19f69:null);}return _0x186a67(null);});}catch(_0x2093ad){_0x6cc240(_0x2093ad);}});}let browser_login=null;async function getBrowserPageLogin(){let _0x191a58='',_0x3ccefa=null;if(process['platform']==='darwin')_0x191a58=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x191a58=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x191a58}),_0x3ccefa=await browser_login['newPage'](),_0x3ccefa['setDefaultNavigationTimeout'](0x3a98),_0x3ccefa['setDefaultTimeout'](0x3a98),await _0x3ccefa['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x3ccefa;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x4b3340=0x1,_0x1b0920=0x0){try{let _0x12a8c4='',_0x4f9a8c=null;const _0x50111f=await getIsHeadless();if(process['platform']==='darwin')_0x12a8c4=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x12a8c4=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}_0x4b3340===0x0&&!pageStack[_0x1b0920]&&(browser=await puppeteer['launch']({'headless':_0x50111f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x12a8c4}),_0x4f9a8c=await browser['newPage'](),_0x4f9a8c['setDefaultNavigationTimeout'](0x3a98),_0x4f9a8c['setDefaultTimeout'](0x3a98),await _0x4f9a8c['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1b0920]=_0x4f9a8c);(browser===null||pageStack[_0x1b0920]===null||pageStack[_0x1b0920]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x50111f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x12a8c4}));(pageStack[_0x1b0920]===null||pageStack[_0x1b0920]['isClosed']())&&(_0x4f9a8c=await browser['newPage'](),_0x4f9a8c['setDefaultNavigationTimeout'](0x3a98),_0x4f9a8c['setDefaultTimeout'](0x3a98),await _0x4f9a8c['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1b0920]=_0x4f9a8c);try{await pageStack[_0x1b0920]['evaluate'](()=>!![]);}catch(_0x1070ff){const _0x4af2b0=String(_0x1070ff&&_0x1070ff['message']?_0x1070ff['message']:_0x1070ff),_0x831df7=/(detached\s*frame|Session closed|Target closed|Execution context was destroyed|Cannot find context)/i['test'](_0x4af2b0);if(_0x831df7){try{if(pageStack[_0x1b0920])await pageStack[_0x1b0920]['close']()['catch'](()=>{});}catch(_0x4cec12){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x514fb3){}browser=await puppeteer['launch']({'headless':_0x50111f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x12a8c4});const _0x20d05e=await browser['newPage']();_0x20d05e['setDefaultNavigationTimeout'](0x3a98),_0x20d05e['setDefaultTimeout'](0x3a98),await _0x20d05e['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1b0920]=_0x20d05e;}else{try{if(pageStack[_0x1b0920])await pageStack[_0x1b0920]['close']()['catch'](()=>{});}catch(_0x5dd91b){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x5ffdf5){}browser=await puppeteer['launch']({'headless':_0x50111f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x12a8c4});const _0x2184f3=await browser['newPage']();_0x2184f3['setDefaultNavigationTimeout'](0x3a98),_0x2184f3['setDefaultTimeout'](0x3a98),await _0x2184f3['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1b0920]=_0x2184f3;}}return pageStack[_0x1b0920];}catch(_0x18d933){console['error']('Failed\x20to\x20launch\x20browser:',_0x18d933);const _0x45c280=new Error(t('backend.errorBrowserStart')+'\x20:\x20'+_0x18d933);throw _0x45c280;}}ipcMain['on']('login',async(_0x4afdd7,_0x218d9f)=>{const _0x597cac=await getBrowserPageLogin();await _0x597cac['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x597cac,_0x218d9f),ipcMain['on']('setLoginCookies',async(_0x870ecd,_0x4a4b32)=>{try{await set_login_cookies(_0x597cac,_0x4a4b32);}catch(_0x1db19c){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x1db19c);}});}),ipcMain['handle']('set-headless',async(_0x8551c7,_0xc1ed37)=>{const _0x38a9d0=!!_0xc1ed37;if(!optionsDb)try{await initOptionsDb();}catch(_0x2af27f){console['error']('[OptionsDB]\x20Init\x20on\x20set-headless\x20fehlgeschlagen:',_0x2af27f);}return await setOption('isHeadless',_0x38a9d0?'1':'0'),console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20(DB)\x20auf:',_0x38a9d0),{'ok':!![],'headless':_0x38a9d0};}),ipcMain['handle']('get-headless',async()=>{const _0x1032b3=await getIsHeadless();return{'headless':_0x1032b3};}),ipcMain['handle']('set-global-delay',async(_0x2d8d08,_0x26a776)=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x390d7d){console['error']('[OptionsDB]\x20Init\x20on\x20set-global-delay\x20fehlgeschlagen:',_0x390d7d);}return await setGlobalDelay(_0x26a776),{'ok':!![]};}),ipcMain['handle']('get-global-delay',async()=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x4bc1ea){console['error']('[OptionsDB]\x20Init\x20on\x20get-global-delay\x20fehlgeschlagen:',_0x4bc1ea);}const _0x404374=await getGlobalDelay();return{'value':_0x404374};}),ipcMain['handle']('get-language',async()=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x23fcde){console['error']('[OptionsDB]\x20Init\x20on\x20get-language\x20fehlgeschlagen:',_0x23fcde);}const _0x10e3a5=await getAppLanguage();return{'lang':_0x10e3a5};}),ipcMain['handle']('set-language',async(_0x130aec,_0x38a0b7)=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x15622e){console['error']('[OptionsDB]\x20Init\x20on\x20set-language\x20fehlgeschlagen:',_0x15622e);}const _0x24c3b7=await setAppLanguage(_0x38a0b7);return{'ok':!![],'lang':_0x24c3b7};}),ipcMain['on']('export-relation',async(_0x16765b,_0x3b2ccf)=>{try{await exportDatabase(_0x3b2ccf),_0x16765b['reply']('export-relation-response',{'success':!![]});}catch(_0x33588c){console['error'](_0x33588c),_0x16765b['reply']('export-relation-response',{'success':![],'message':_0x33588c['message']});}}),ipcMain['handle']('sendMessage',async(_0x3d7792,_0xd41473,_0x1e64f3,_0x151b05,_0x5b729c,_0x3458d8,_0x3f2b59,_0x5e4608,_0x747929,_0x170d83,_0x511d58,_0x1a4681,_0xde9f93)=>{isStopping=![];let _0xd5f196=null;return _0x3f2b59?_0xd5f196=await getBrowserPage(_0x5b729c,_0x5e4608):_0xd5f196=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0xd41473),send_message(_0xd5f196,_0xd41473,_0x1e64f3,_0x151b05,_0x5b729c,_0x3458d8,_0x747929,_0x170d83,_0x511d58,_0x1a4681,_0xde9f93);}),ipcMain['handle']('stop-action',async(_0x11ea87,_0x32381e)=>{isStopping=!![];const _0x29c446=await getBrowserPage(0x1,_0x32381e);await _0x29c446['close']();}),ipcMain['handle']('fetch_followers',async(_0x1a8604,_0x1ac577,_0x1d558d,_0xe2dfc8,_0x1f19c4,_0x17b25b,_0x491ccd)=>{isStopping=![];const _0x2db5e2=await getBrowserPage();return fetch_followers_from_account(_0x1a8604,_0x2db5e2,_0x1ac577,_0x1d558d,_0xe2dfc8,_0x1f19c4,_0x17b25b,_0x491ccd);}),ipcMain['handle']('get-account-details',async(_0x37476c,_0x2843d3,_0x380ef1,_0x51eb05)=>{isStopping=![];const _0x4f0da1=await getBrowserPage();return fetch_account_details(_0x4f0da1,_0x2843d3,_0x380ef1,_0x51eb05);}),ipcMain['handle']('fetch_likes',async(_0x57ee07,_0x29e239,_0x2e2425,_0x1e6573,_0x567fb8,_0x5a5a7e,_0x267ea7)=>{isStopping=![];const _0x21bd11=await getBrowserPage();return fetch_likers_from_post(_0x57ee07,_0x21bd11,_0x29e239,_0x2e2425,_0x1e6573,_0x567fb8,_0x5a5a7e,_0x267ea7);}),ipcMain['handle']('fetch_comments',async(_0x3259c8,_0x3c41b4,_0x48bb58,_0x5a68d8,_0x2dde4c,_0x26531d,_0x18741e)=>{isStopping=![];const _0x3e8074=await getBrowserPage();return fetch_comments_from_post(_0x3259c8,_0x3e8074,_0x3c41b4,_0x48bb58,_0x5a68d8,_0x2dde4c,_0x26531d,_0x18741e);});async function updateAppSilent(){const {spawn:_0x17ac6d}=require('child_process'),_0x41ec99=require('path'),_0x22ef50=require('electron-log');return _0x22ef50['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x3eb23f,_0x59776f)=>{const {updateElectronApp:_0x3524f4,UpdateSourceType:_0x4fd17d}=require('update-electron-app');_0x3524f4({'updateSource':{'type':_0x4fd17d['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x22ef50}),_0x3eb23f('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x35999c,_0x401751)=>{doFullElectronUpdateSilent(),_0x35999c('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x38cc88}=require('child_process'),_0x18775a=require('path'),_0x38550c=require('electron-log');return _0x38550c['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x4e55b9,_0x398782)=>{const {updateElectronApp:_0x2c0092,UpdateSourceType:_0x93bd22}=require('update-electron-app');_0x2c0092({'updateSource':{'type':_0x93bd22['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x38550c}),_0x4e55b9('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x5340a1,_0x295720)=>{doFullElectronUpdate(),_0x5340a1('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise(async(_0x128052,_0x56fa30)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x128052('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x1bfdd7=await ensurePatchedMacUpdaterScript(),_0x138b9f=spawn('/bin/bash',[_0x1bfdd7],{'detached':!![],'stdio':'ignore'});_0x138b9f['unref'](),setTimeout(()=>{_0x128052('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x56fa30(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}async function ensurePatchedMacUpdaterScript(){const _0x19440f=path['join'](__dirname,'mac-updater-intern.sh'),_0x474c02=['https://raw.githubusercontent.com/derminer007/Instabot_app_updater/main/mac-updater-intern.sh','https://raw.githubusercontent.com/derminer007/Instabot_app_updater/staging/mac-updater-intern.sh'];for(const _0x569206 of _0x474c02){try{const _0x5f0e46=await fetch(_0x569206);if(!_0x5f0e46['ok'])throw new Error('HTTP\x20'+_0x5f0e46['status']);const _0x1aa645=await _0x5f0e46['text']();await fs['writeFile'](_0x19440f,_0x1aa645,{'encoding':'utf8'});try{fs_no_promise['chmodSync'](_0x19440f,0x1ed);}catch(_0x2d84b9){}return _0x19440f;}catch(_0x5c0df7){console['warn']('[Updater]\x20Laden\x20von\x20'+_0x569206+'\x20fehlgeschlagen:',_0x5c0df7?.['message']||_0x5c0df7);}}return console['warn']('[Updater]\x20Verwende\x20lokales\x20mac-updater-intern.sh\x20ohne\x20Patch\x20(Download\x20fehlgeschlagen).'),_0x19440f;}ipcMain['handle']('get-os-system',async _0x4dd502=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x15d99f,_0x1218f7)=>{console['log']('Update\x20Silent:\x20'+_0x1218f7);if(_0x1218f7){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x2e4207,_0x4e919e){return Math['random']()*(_0x4e919e-_0x2e4207+0x1)+_0x2e4207;}function delay(_0x7a6778,_0x116dd1){let _0x3d6fdd=getRnd(_0x7a6778,_0x116dd1);return new Promise(function(_0x6cc627){setTimeout(_0x6cc627,_0x3d6fdd);});}async function scroll(_0x43998a,_0x3454aa,_0x1aca8b=0x2,_0x4381ac){const _0x3f12ba=await _0x43998a['waitForSelector'](_0x3454aa);for(let _0x63033b=0x0;_0x63033b<_0x1aca8b;_0x63033b++){console['log']('Scrolling\x20'+_0x63033b),await _0x43998a['evaluate'](_0x3be6b5=>{const _0x52c321=document['querySelector'](_0x3be6b5);_0x52c321&&_0x52c321['scrollBy'](0x0,0x190);},_0x3454aa),await delay(0x320,0x5dc),_0x4381ac();}}async function saveCookies(_0x35f235){let _0x312183=await _0x35f235['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x312183,null,0x2));}async function notificationClear(_0x35e672){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x35e672['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x35e672['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x2e8661){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x2e8661);}}async function getTargetProfiles(_0x39eca1){return new Promise((_0x38b6e2,_0x1d38bf)=>{const _0x4986ec=quoteIdent(_0x39eca1);db['all']('SELECT\x20*\x20FROM\x20'+_0x4986ec,(_0x2b49ed,_0x58db69)=>{_0x2b49ed?_0x1d38bf(_0x2b49ed):_0x38b6e2(_0x58db69);});});}async function login_legacy(_0x127115,_0x4ceb64,_0x3257cb){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x127115,_0x4ceb64),await createUserIfNotExists(_0x4ceb64,_0x3257cb);}catch(_0x105e86){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x105e86);}try{await _0x127115['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x127115['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x127115['click']('button._a9--._ap36._a9_0');}catch(_0x345471){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x127115['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x127115['type']('input[name=\x27username\x27]',_0x4ceb64,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x127115['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x127115['type']('input[name=\x27password\x27]',_0x3257cb,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x127115['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x127115['click']('button[type=\x27submit\x27]');}catch(_0x1a3068){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x127115),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x127115,_0x4ceb64);}catch(_0x96311){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x96311);}}catch(_0x4b787c){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x4b787c);}}async function login(_0x1b81b2,_0x1d33ce){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1b81b2,_0x1d33ce),await createUserIfNotExists(_0x1d33ce);}catch(_0x4883d7){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4883d7);}try{await _0x1b81b2['goto']('https://www.instagram.com/accounts/login/');}catch(_0x2382c7){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2382c7);}}async function set_login_cookies(_0x4bcf82,_0x272163){try{await saveCookiesForUser(_0x4bcf82,_0x272163);}catch(_0x372424){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x372424);}}async function waitForXPath(_0x3dca0a,_0x583ca9,_0x5ebb52={}){return await _0x3dca0a['waitForFunction'](_0x2c6d69=>{return document['evaluate'](_0x2c6d69,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x5ebb52,_0x583ca9),_0x3dca0a['evaluateHandle'](_0x586831=>document['evaluate'](_0x586831,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x583ca9);}async function waitForSelectorWithFallbacks(_0x5b707d,_0x1fe686,_0x55f02b={}){!Array['isArray'](_0x1fe686)&&(_0x1fe686=[_0x1fe686]);for(let _0x36989b=0x0;_0x36989b<_0x1fe686['length'];_0x36989b++){const _0x3b80e0=_0x1fe686[_0x36989b],_0x732c1f=_0x3b80e0['startsWith']('//')||_0x3b80e0['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x732c1f?'XPath':'Selector')+'\x20'+(_0x36989b+0x1)+'/'+_0x1fe686['length']+':\x20'+_0x3b80e0['substring'](0x0,0x32)+'...');const _0x2c2bb1=_0x36989b===0x0?_0x55f02b['timeout']||0x1388:0x7d0;let _0xaec75b;if(_0x732c1f){const _0x156b60=await waitForXPath(_0x5b707d,_0x3b80e0,{..._0x55f02b,'timeout':_0x2c2bb1});if(!_0x156b60)throw new Error('XPath-Element\x20nicht\x20gefunden');_0xaec75b=_0x156b60;}else _0xaec75b=await _0x5b707d['waitForSelector'](_0x3b80e0,{..._0x55f02b,'timeout':_0x2c2bb1});return console['log']((_0x732c1f?'XPath':'Selector')+'\x20'+(_0x36989b+0x1)+'\x20gefunden!'),_0xaec75b;}catch(_0x5da069){console['log']((_0x732c1f?'XPath':'Selector')+'\x20'+(_0x36989b+0x1)+'\x20nicht\x20gefunden:\x20'+_0x5da069['message']);if(_0x36989b===_0x1fe686['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x1fe686['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x5da069['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x10403c,_0x4f6fc1,_0x5a6ed5={}){return await _0x10403c['waitForFunction'](_0x332e85=>{return document['evaluate'](_0x332e85,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x5a6ed5,_0x4f6fc1),_0x10403c['evaluateHandle'](_0x526dff=>{const _0x3fdb61=document['evaluate'](_0x526dff,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x1c463b=[];for(let _0x2a0e34=0x0;_0x2a0e34<_0x3fdb61['snapshotLength'];_0x2a0e34++){_0x1c463b['push'](_0x3fdb61['snapshotItem'](_0x2a0e34));}return _0x1c463b;},_0x4f6fc1)['then'](_0x231477=>_0x231477['getProperties']());}ipcMain['handle']('check-login',async(_0x51235a,_0x589bda)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x4be98b){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x317884){}browser=null;}const _0x24fb2d=await getBrowserPage(0x0,0x0),_0xaaa2c6=await checkCookiesSession(_0x24fb2d,_0x589bda);return _0xaaa2c6;});async function checkCookiesSession(_0x57853f,_0x107282){try{await setCookiesForUser(_0x57853f,_0x107282),console['log']('Cookies\x20für\x20'+_0x107282+'\x20erfolgreich\x20geladen');}catch(_0x43956a){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x107282+':',_0x43956a),![];}try{await _0x57853f['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x7eb2f3){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x7eb2f3);}await delay(0x6a4,0x7d0);try{const _0x4f3672=await checkLoginStatus(_0x57853f);return console['log']('Login-Status\x20für\x20'+_0x107282+':\x20'+_0x4f3672),_0x4f3672;}catch(_0x4790a2){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x107282+':',_0x4790a2['message']),![];}}async function checkLoginStatus(_0x1ceaf8){const _0x8d28a0=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//a[@role=\x27link\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x113b36=null;try{_0x113b36=await waitForSelectorWithFallbacks(_0x1ceaf8,_0x8d28a0,{'timeout':0x7d0});}catch(_0x3b4ff1){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x3b4ff1),!![];}if(_0x113b36){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x486406){const _0x5088dc=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x350e26=null;try{_0x350e26=await waitForSelectorWithFallbacks(_0x486406,_0x5088dc,{'timeout':0x7d0});}catch(_0x5df5c6){return console['log']('Seite\x20existiert:\x20'+_0x5df5c6),!![];}if(_0x350e26){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x53d98b){try{const _0x5a0ba1=await _0x53d98b['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x5a0ba1['length']);if(_0x5a0ba1&&_0x5a0ba1['length']>0x0){const _0x3ee87a=_0x5a0ba1[0x0];await _0x3ee87a['click'](),await delay(0xaf0,0xbb8);const _0xf895be=await _0x53d98b['evaluate'](()=>{const _0x40d026=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x40d026;});if(_0xf895be){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x3070c1=await _0x53d98b['$$'](K_BEITRAG_LIKE_BUTTON),_0x258e38=_0x3070c1[0x0];await delay(0x514,0x5dc),await _0x53d98b['evaluate'](_0x22f08d=>{_0x22f08d['click']();},_0x258e38);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x53d98b['goBack'](),await delay(0x7d0,0x898);}}catch(_0x5adf39){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x5adf39);throw new Error('Like_Posts:\x20'+_0x5adf39);}}async function likeFirstStory(_0x5a8e36){try{const _0x4feb17=await _0x5a8e36['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x4feb17['length']);if(_0x4feb17&&_0x4feb17['length']>0x0){const _0x49a25c=_0x4feb17[0x0];await _0x49a25c['click'](),await delay(0xaf0,0xbb8);const _0x19b11f=await _0x5a8e36['evaluate'](()=>{const _0x4a2dfc=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x4a2dfc;});if(_0x19b11f){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x5496cf=await _0x5a8e36['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5a8e36['click'](_0x5496cf);}catch(_0x13bafc){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x13bafc);try{const _0x38dee6=await _0x5a8e36['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5a8e36['evaluateHandle'](_0x3f8d9e=>{_0x3f8d9e['click']();},_0x38dee6);}catch(_0x2c737f){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x2c737f),await _0x5a8e36['evaluate'](()=>{const _0x5e57b0=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x5e57b0)_0x5e57b0['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x5a8e36['goBack'](),await delay(0x7d0,0x898);}}catch(_0x1f7b2b){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x1f7b2b);throw new Error('Like_Storys:\x20'+_0x1f7b2b);}}async function send_message(_0x254413,_0x1c6c1d,_0x297118,_0x3bc5af,_0x3abf98,_0x9c2726,_0x3daf23,_0x384402,_0x30337a,_0x1a182f,_0x31a30a){return new Promise(async(_0xee44a2,_0x655b1e)=>{_0x9c2726=_0x9c2726['split'](';'),console['log'](_0x9c2726[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x3abf98);if(_0x3bc5af===null||_0x3bc5af===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x655b1e('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x254413,_0x9c2726[0x0]);}catch(_0x5d5ca5){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5d5ca5),_0xee44a2({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5d5ca5});return;}await delay(0x6a4,0x7d0);try{await _0x254413['goto']('https://www.instagram.com/'+_0x1c6c1d+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x254413);}catch(_0x569ffc){_0xee44a2({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x569ffc});return;}try{await checkLoginStatus(_0x254413);}catch(_0x42e800){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x42e800),_0x655b1e('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x30337a==0x1)try{await likeFirstPost(_0x254413);}catch(_0x813032){_0x655b1e(_0x813032);}if(_0x1a182f==0x1)try{await likeFirstStory(_0x254413);}catch(_0x46afe4){_0x655b1e(_0x46afe4);}console['log']('UserSkip:\x20'+_0x3daf23);if(_0x3daf23==0x1)try{const _0x114789=await _0x254413['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x29d54b=>_0x29d54b['textContent']['trim']());console['log'](_0x114789);if(_0x114789==='Following'||_0x114789==='Folge\x20ich')return _0xee44a2({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x516530){}await delay(0x6a4,0x7d0);try{const _0x53319f=await waitForSelectorWithFallbacks(_0x254413,K_DIRECT_MSG_BUTTON);await _0x53319f['click'](),await delay(0xa8c,0xdac);try{const _0x8a8b33=await waitForSelectorWithFallbacks(_0x254413,K_EXPAND_MSG_BUTTON);await _0x8a8b33['click']();}catch(_0x1a9fd1){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x1a9fd1);}}catch(_0x45eb2a){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x45eb2a);try{await delay(0xa8c,0xbb8);try{const _0x46e7fd=await waitForSelectorWithFallbacks(_0x254413,K_OPTIONS_BUTTON);await _0x46e7fd['click']();}catch(_0xe18407){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0xe18407),_0xee44a2({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0xe18407});return;}await delay(0xa8c,0xbb8);const _0x443834=await waitForXPath(_0x254413,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x443834['click']();}catch(_0x4e48bb){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x4e48bb),_0xee44a2({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x254413);}catch(_0x365567){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x365567);}try{await delay(0xaf0,0xdac);const _0x5abade=await waitForSelectorWithFallbacks(_0x254413,K_CHAT_INPUT_FIELD,{'timeout':0x3a98});if(_0x384402){const _0x274fc6=await _0x254413['$'](K_ALREADY_CHATTED);if(_0x274fc6)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x1c6c1d),_0xee44a2({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x5072a0=await _0x254413['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x5072a0),_0x3bc5af=_0x3bc5af['replace']('{USERNAME}',_0x1c6c1d);let _0x2e0575;if(_0x3bc5af['includes']('{NAME}')||_0x3bc5af['includes']('{name}'))try{const _0x465ca4=await extractFirstName(_0x5072a0,_0x31a30a);console['log']('Response\x20Clearname\x20valid:\x20'+_0x465ca4['valid']),_0x465ca4['valid']?(_0x3bc5af=_0x3bc5af['replaceAll'](/{NAME}|{name}/g,_0x465ca4['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x465ca4['name']),_0x2e0575=_0x465ca4['name']):(_0x3bc5af=_0x3bc5af['replaceAll'](/ ?({NAME}|{name})/g,''),_0x2e0575='UNKNOWN_NAME');}catch(_0xf5d431){console['log'](_0xf5d431['message']),_0x2e0575=_0xf5d431['message'];const _0x39ce3c=_0x5072a0?_0x5072a0['replace'](/[^\p{L}\s]/gu,''):'',_0x546590=_0x39ce3c['split']('\x20')[0x0]||'';_0x546590['length']>0x2&&!_0x546590['includes']('Instagram')?_0x3bc5af=_0x3bc5af['replaceAll'](/{NAME}|{name}/g,_0x546590):_0x3bc5af=_0x3bc5af['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x3bc5af);const _0x4e3303=_0x3bc5af['split']('\x0a');await _0x5abade['type'](_0x4e3303[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x3a987b=0x1;_0x3a987b<_0x4e3303['length'];_0x3a987b++){await _0x254413['keyboard']['down']('Shift'),await _0x254413['keyboard']['press']('Enter'),await _0x254413['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x4e3303[_0x3a987b]['length']>0x0&&await _0x5abade['type'](_0x4e3303[_0x3a987b],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x3ec328=await waitForSelectorWithFallbacks(_0x254413,K_SEND_MSG_BUTTON);await _0x3ec328['click']();}catch(_0x2e847f){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x2e847f),_0xee44a2({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x1c6c1d+'\x20überspringen.','error':_0x2e847f['message']});}await delay(0x320,0x3e8),_0xee44a2({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x5072a0,'extracted_clearname':_0x2e0575});}catch(_0x399157){let _0x677044=_0x399157;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x677044),_0xee44a2({'status':0x1f4,'message':'Error\x20500:\x20'+_0x677044});}});}function handle_fail(_0x3d10fe){if(isStopping)return new Promise(_0x4f8249=>{_0x4f8249('Scraper\x20gestoppt.');});else{let _0x5bea06='';switch(_0x3d10fe){case 0x0:_0x5bea06='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x5bea06='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x5bea06='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x5bea06='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x3cfc2a,_0x55e807)=>{_0x55e807(_0x5bea06);});}}async function fetch_account_details(_0x4ec9e9,_0x19c631,_0x39fc93,_0x5af118){try{await setCookiesForUser(_0x4ec9e9,_0x39fc93['username']);}catch(_0x44916a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x44916a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x44916a);return handle_fail(0x0);}_0x4ec9e9['setDefaultNavigationTimeout'](0x7530),await _0x4ec9e9['goto']('https://www.instagram.com/'+_0x19c631+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x4ec9e9);const _0x2c4e32=await _0x4ec9e9['evaluate'](()=>{const _0x597dd1=document['querySelector']('meta[property=\x22og:image\x22]');return _0x597dd1?_0x597dd1['getAttribute']('content'):null;});await _0x4ec9e9['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x3797e2=await _0x4ec9e9['evaluate'](()=>{const _0x277f39=document['querySelector']('meta[name=\x22description\x22]');if(!_0x277f39)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x2cb7c5=_0x277f39['getAttribute']('content');if(!_0x2cb7c5)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x2cb7c5);const _0x51ebe3=/\s*[–-]\s*/,_0x2f0465=_0x2cb7c5['split'](_0x51ebe3);if(_0x2f0465['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x3921b2=_0x2f0465[0x0],_0x1bc98b=_0x2f0465[0x1],_0x5d1383=_0x3921b2['split'](',\x20');if(_0x5d1383['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x4ebb99=_0x5d1383[0x0]['split']('\x20')[0x0],_0x461362=_0x5d1383[0x1]['split']('\x20')[0x0],_0x11c9c3=_0x5d1383[0x2]['split']('\x20')[0x0];let _0x931178='',_0x4a09b4='';const _0x3d3cad='\x20on\x20Instagram:\x20',_0x55352b=_0x1bc98b['split'](_0x3d3cad);return _0x931178=_0x55352b[0x0]['trim'](),_0x931178=_0x931178['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x55352b['length']>0x1&&(_0x4a09b4=_0x55352b[0x1]['trim'](),_0x4a09b4['startsWith']('\x22')&&_0x4a09b4['endsWith']('\x22')&&(_0x4a09b4=_0x4a09b4['substring'](0x1,_0x4a09b4['length']-0x1)['trim']()),_0x4a09b4=_0x4a09b4['replace'](/&quot;/g,'')['trim']()),{'followers':_0x4ebb99,'following':_0x461362,'posts':_0x11c9c3,'nameText':_0x931178,'bio':_0x4a09b4};});console['log']('Extracted\x20profile\x20data:',_0x3797e2);const _0x25a948=_0x3797e2['nameText'],_0xb69f35=_0x2c4e32,_0x47e8f4=_0x3797e2['bio'],_0x4b3e15=_0x3797e2['followers'],_0x7c8d3e=_0x3797e2['following'],_0x1a1e0b=_0x3797e2['posts'],_0x3c0fac=![],_0x2abdbe=![],_0x352efa=![],_0x19fc42='\x0a\x20\x20INSERT\x20INTO\x20'+quoteIdent(_0x5af118)+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x19fc42,[_0x19c631,_0x25a948,_0xb69f35,_0x47e8f4,_0x4b3e15,_0x7c8d3e,_0x1a1e0b,_0x3c0fac,_0x2abdbe,_0x352efa],function(_0x52755d){_0x52755d?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x52755d['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x9c6872,_0x226003,_0x1912e7,_0x2fc5f3,_0x5b88ae,_0x25001a,_0x345f02,_0x24c0b9){let _0x154746=0x4,_0x4dbf7e=0x0,_0x3e7609=0x0;try{await setCookiesForUser(_0x226003,_0x25001a['username']);}catch(_0x3c702a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3c702a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3c702a);return handle_fail(0x0);}let _0x4bda0f=0x0;try{await _0x226003['goto']('https://www.instagram.com/'+_0x1912e7+'/'),await notificationClear(_0x226003);try{await checkLoginStatus(_0x226003);}catch(_0x5e4605){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x5e4605);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x226003);}catch(_0x409060){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x409060);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}let _0x4f53ad=null;try{_0x4f53ad=await waitForSelectorWithFallbacks(_0x226003,FOLLOWER_ACCOUNT_PRIVAT_LABEL,{'timeout':0x1388});if(_0x4f53ad)throw new Error('Angegebener\x20Account\x20ist\x20privat');}catch(_0xbff3c3){if(_0x4f53ad)throw new Error('Angegebener\x20Account\x20ist\x20privat');console['log']('Privat-Label\x20nicht\x20gefunden\x20(fortfahren):\x20'+(_0xbff3c3?.['message']||_0xbff3c3));}try{if(_0x2fc5f3<=0x0){const _0x34008d=await _0x226003['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x6a9180=await _0x226003['evaluate'](_0x12f638=>_0x12f638['innerHTML'],_0x34008d);_0x4bda0f=Math['ceil'](_0x6a9180/0x4);}else _0x4bda0f=Math['ceil'](_0x2fc5f3/0x4);_0x154746+=_0x4bda0f,_0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]);let _0x2e395b=await _0x226003['waitForSelector']('a[href=\x22/'+_0x1912e7+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x226003['evaluate'](_0x42b0cb=>{_0x42b0cb['click']();},_0x2e395b),console['log']('Follower\x20Liste\x20von\x20'+_0x1912e7+'\x20gesichtet'),_0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]);}catch(_0x2d531c){console['log']('Follower\x20Liste\x20von\x20'+_0x1912e7+'\x20nicht\x20gefunden:'+_0x2d531c);throw new Error('Follower\x20Liste\x20von\x20'+_0x1912e7+'\x20nicht\x20gefunden:'+_0x2d531c);return handle_fail(0x0);}}catch(_0x5656e8){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5656e8);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5656e8);return handle_fail(0x0);}let _0x3bb962=null;try{_0x3bb962=await waitForSelectorWithFallbacks(_0x226003,FOLLOWER_SEE_ALL_FOLLOWERS_TEXT,{'timeout':0x1388});}catch(_0x1d5453){console['log']('Hinweis-Label\x20(Only\x20see\x20all\x20followers)\x20nicht\x20gefunden:\x20'+_0x1d5453);}try{await delay(0x12c0,0x1388),_0x3bb962&&(_0x9c6872['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':t('backend.followersOnlyInfo')}),_0x4bda0f>0xa&&(_0x4bda0f=0xa));}catch(_0x48ee2d){console['warn']('Snackbar\x20Sendeversuch\x20fehlgeschlagen:',_0x48ee2d?.['message']||_0x48ee2d);}try{await delay(0x12c,0x1f4),console['log']('Auto-scrolls:\x20'+_0x4bda0f);try{await scroll(_0x226003,FOLLOWER_FENSTER,_0x4bda0f,_0x2f6dad=>{_0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]);});}catch{console['log']('Fallback\x20div:has\x20ausgelöst'),await scroll(_0x226003,'div.x6nl9eh.x1a5l9x9.x7vuprf.x1mg3h75.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',_0x4bda0f,_0x10a68d=>{});}_0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]),await _0x226003['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x561d5d=await _0x226003['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x13d2ad=await _0x226003['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]);_0x2fc5f3<=0x0&&(_0x2fc5f3=_0x561d5d['length']);let _0x4d0f1e=[];for(let _0x1c45c2=0x0;_0x1c45c2<_0x561d5d['length']&&_0x1c45c2<_0x2fc5f3;_0x1c45c2++){const _0x10b3a7=await _0x561d5d[_0x1c45c2]['evaluate'](_0x312441=>_0x312441['textContent']),_0x394b9b=await _0x13d2ad[_0x1c45c2]['evaluate'](_0x1a2aeb=>_0x1a2aeb['textContent']);if(_0x24c0b9){const _0x1af6da=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x25001a['username'],_0x10b3a7]);if(_0x1af6da){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x10b3a7);continue;}}_0x4d0f1e['push'](_0x10b3a7);const _0x1f0b43='INSERT\x20INTO\x20'+quoteIdent(_0x5b88ae)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x1f0b43,[_0x10b3a7,_0x394b9b],function(_0x4b51d7){_0x4b51d7?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x5b88ae+'\x27:',_0x4b51d7['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3e7609=Math['round'](++_0x4dbf7e/_0x154746*0x64),_0x9c6872['sender']['send']('fetch-progress',_0x3e7609,!![]),_0x345f02&&(_0x9c6872['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x9c6872,_0x226003,_0x25001a,_0x5b88ae,_0x4d0f1e)),_0x3bb962&&_0x9c6872['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':t('backend.followersOnlyDone',{'count':_0x561d5d['length']})}),new Promise(_0xec63b2=>{_0xec63b2('Scraping\x20finished!');});}catch(_0x223077){if(_0x345f02)throw new Error(_0x223077);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x1912e7+'\x20nicht\x20gefunden:\x20'+_0x223077);return handle_fail(0x0);}}async function fetch_details_from_list(_0x3d49a0,_0x192388,_0x18fa60,_0x353e24,_0x5c8eac){let _0x1faceb=0x0,_0x49cc3b=0x0;for(let _0x32ef1d=0x0;_0x32ef1d<_0x5c8eac['length'];_0x32ef1d++){console['log']('Processing\x20profile:',_0x5c8eac[_0x32ef1d]);try{await fetch_account_details(_0x192388,_0x5c8eac[_0x32ef1d],_0x18fa60,_0x353e24);}catch(_0x37b9ce){console['error']('Detailed\x20Scraping\x20von:\x20',_0x5c8eac[_0x32ef1d],_0x37b9ce);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x5c8eac[_0x32ef1d]+'\x20'+_0x37b9ce);}_0x49cc3b=Math['round'](++_0x1faceb/_0x5c8eac['length']*0x64),_0x3d49a0['sender']['send']('fetch-progress',_0x49cc3b,!![],!![]);}}async function fetch_likers_from_post(_0x29f7b7,_0x53aba9,_0x17d6c7,_0x542215,_0x2b8857,_0x99afaa,_0x2dbbd5,_0x2b06c5){let _0x47622a=0x4,_0x3ca604=0x0,_0x5a49b4=0x0;try{await setCookiesForUser(_0x53aba9,_0x99afaa['username']);}catch(_0x589e27){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x589e27);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x589e27);return handle_fail(0x1);}_0x5a49b4=Math['round'](++_0x3ca604/_0x47622a*0x64),_0x29f7b7['sender']['send']('fetch-progress',_0x5a49b4,!![]);try{let _0x4e9d47=_0x17d6c7['substring'](0x0,_0x17d6c7['lastIndexOf']('/'));_0x4e9d47['includes']('/reel/')&&(_0x4e9d47=_0x4e9d47['replace']('/reel/','/p/'));let _0x29720a=_0x4e9d47+'/liked_by';console['log'](_0x29720a),await _0x53aba9['goto'](_0x29720a),await delay(0x7d0,0xfa0),await notificationClear(_0x53aba9),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x53aba9);}catch(_0x22331c){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x22331c);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x53aba9);}catch(_0x2514a5){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x2514a5);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x5a49b4=Math['round'](++_0x3ca604/_0x47622a*0x64),_0x29f7b7['sender']['send']('fetch-progress',_0x5a49b4,!![]),await _0x53aba9['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x4c2a31=await _0x53aba9['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x41313e=await _0x53aba9['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x4c2a31['length']);let _0x3747ce=path['join'](__dirname,'/likers.csv');_0x5a49b4=Math['round'](++_0x3ca604/_0x47622a*0x64),_0x29f7b7['sender']['send']('fetch-progress',_0x5a49b4,!![]);_0x542215<=0x0&&(_0x542215=_0x4c2a31['length']);try{let _0xe584c6=[];for(let _0x1d7b16=0x0;_0x1d7b16<_0x4c2a31['length']&&_0x1d7b16<_0x542215;_0x1d7b16++){const _0x474daf=await _0x4c2a31[_0x1d7b16]['evaluate'](_0xee0830=>_0xee0830['textContent']),_0x2339ed=await _0x41313e[_0x1d7b16]['evaluate'](_0x46ba64=>_0x46ba64['textContent']);if(_0x2b06c5){const _0x3bfe87=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x99afaa['username'],_0x474daf]);if(_0x3bfe87){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x474daf);continue;}}_0xe584c6['push'](_0x474daf);const _0x5e6ae1='INSERT\x20INTO\x20'+quoteIdent(_0x2b8857)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x5e6ae1,[_0x474daf,_0x2339ed],function(_0x3a92dc){_0x3a92dc?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x2b8857+'\x27:',_0x3a92dc['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x5a49b4=Math['round'](++_0x3ca604/_0x47622a*0x64),_0x29f7b7['sender']['send']('fetch-progress',_0x5a49b4,!![]),_0x2dbbd5&&(_0x29f7b7['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x29f7b7,_0x53aba9,_0x99afaa,_0x2b8857,_0xe584c6)),new Promise(_0x18087a=>{_0x18087a('Scraping\x20finished!');});}catch(_0x3eccef){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x3eccef);return handle_fail(0x1);}}catch(_0x270eef){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x270eef);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x270eef);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x573eb9,_0x4f1001,_0x96aafe,_0x460f5c,_0x4cf624,_0x2382f5,_0x4525ca,_0x4820d3){let _0x53f696=0x3,_0xe1d785=0x0,_0x497bcb=0x0;try{await setCookiesForUser(_0x4f1001,_0x2382f5['username']);}catch(_0x4dc4fa){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4dc4fa);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4dc4fa);return handle_fail(0x2);}try{console['log'](_0x96aafe),await _0x4f1001['goto'](_0x96aafe),await delay(0x7d0,0xfa0),await notificationClear(_0x4f1001),await delay(0xc8,0x1f4);const _0x530a2f=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x4f1001);}catch(_0x4fd0d7){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x4fd0d7);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x4f1001);}catch(_0x26f573){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x26f573);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x16f445;const _0xef7d00=await _0x4f1001['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x21fe9c=await _0x4f1001['evaluate'](_0x403e6b=>_0x403e6b['innerHTML'],_0xef7d00),_0x308d85=String(_0x21fe9c)['replace'](/[^0-9]/g,''),_0x2c6a76=Number(_0x308d85)/0x14;_0x460f5c<=0x0?_0x16f445=Math['ceil'](_0x2c6a76/0x3):_0x16f445=Math['ceil'](_0x460f5c/0x3);_0x53f696+=_0x16f445,_0x497bcb=Math['round'](++_0xe1d785/_0x53f696*0x64),_0x573eb9['sender']['send']('fetch-progress',_0x497bcb,!![]),console['log']('Auto-scrolls:\x20'+_0x16f445),await scroll(_0x4f1001,_0x530a2f,_0x16f445,_0x5a37ea=>{_0x497bcb=Math['round'](++_0xe1d785/_0x53f696*0x64),_0x573eb9['sender']['send']('fetch-progress',_0x497bcb,!![]);});try{const _0x556988=COM_REPLY_BUTTON_SPAN,_0x5c738d=await waitForXPathAll(_0x4f1001,_0x556988);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x5c738d['size']),await delay(0x1f4,0x320);let _0x5390f8=_0x5c738d['size'],_0x4348a6=[];for(const [_0x49ef74,_0x2476d0]of _0x5c738d){_0x4348a6['push'](_0x2476d0);}console['log']('Alle\x20Reply-Buttons:',_0x4348a6['length']);try{for(let _0x26a3eb=0x0;_0x26a3eb<_0x5390f8;_0x26a3eb++){await _0x4348a6[_0x26a3eb]['click'](),await delay(0x320,0x5dc);}}catch(_0x41aca6){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x41aca6);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x41aca6);return handle_fail(0x2);}}catch(_0x30b887){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x2162e9=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x4f1001['waitForSelector'](_0x2162e9),await delay(0x1f4,0x320),_0x497bcb=Math['round'](++_0xe1d785/_0x53f696*0x64),_0x573eb9['sender']['send']('fetch-progress',_0x497bcb,!![]);const _0x37ad30=await _0x4f1001['$$'](_0x2162e9);let _0x540549=path['join'](__dirname,'/comments.csv');_0x460f5c<=0x0&&(_0x460f5c=_0x37ad30['length']);console['log']('fetch_limit:\x20'+_0x460f5c),console['log']('comments_len:\x20'+_0x37ad30['length']),_0x460f5c++;try{let _0x267cfb=[];for(let _0x41f22e=0x1;_0x41f22e<_0x37ad30['length']&&_0x41f22e<_0x460f5c;_0x41f22e++){const _0x129f15=await _0x37ad30[_0x41f22e]['evaluate'](_0x50a070=>_0x50a070['textContent']);if(_0x4820d3){const _0x12c608=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x2382f5['username'],_0x129f15]);if(_0x12c608){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x129f15);continue;}}try{_0x267cfb['push'](_0x129f15);const _0x42a034='INSERT\x20INTO\x20'+quoteIdent(_0x4cf624)+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x42a034,[_0x129f15],function(_0x45f129){_0x45f129&&console['log']('error\x20in\x20add-user:'+_0x45f129);});}catch(_0x444346){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x41f22e+'\x20:\x20'+_0x444346);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x41f22e+'\x20:\x20'+_0x444346);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x497bcb=Math['round'](++_0xe1d785/_0x53f696*0x64),_0x573eb9['sender']['send']('fetch-progress',_0x497bcb,!![]),_0x573eb9['sender']['send']('fetch-progress',0x64,!![]),_0x4525ca&&(_0x573eb9['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x573eb9,_0x4f1001,_0x2382f5,_0x4cf624,_0x267cfb)),_0x573eb9['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x3a5557=>{_0x3a5557('Scraping\x20finished!');});}catch(_0x104588){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x104588);return handle_fail(0x2);}}catch(_0x28ae8f){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x28ae8f);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x28ae8f);return handle_fail(0x2);}}async function set_clearname_from_username(_0x263d6b,_0x246308,_0x3d1786=null){try{let _0x2fb551,_0x60499f;const _0x32c037='SELECT\x20username\x20FROM\x20'+quoteIdent(_0x246308)+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x32c037,[],(_0x39f311,_0x2df8f9)=>{_0x39f311&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x39f311['message']),_0x2df8f9['length']===0x0&&(_0x60499f=_0x2df8f9['length']),_0x2fb551=_0x2df8f9['map'](_0x25629d=>_0x25629d['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x60499f);if(_0x60499f===0x0){console['log']('Leave');return;}const _0x45c789=await _0x263d6b['waitForSelector'](IG_SEARCH_BUTTON);await _0x45c789['click'](),await delay(0x4b0,0x7d0);for(let _0x5b8564 of _0x2fb551){const _0x1cd7cd=await _0x263d6b['waitForSelector'](IG_SEARCH_INPUT);await _0x1cd7cd['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x263d6b['type'](IG_SEARCH_INPUT,_0x5b8564,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x4e5553=0x1;while(_0x4e5553!=0x14){console['log']('Schleife');try{let _0xd63aff=IG_NAME_SPAN_PART1+_0x4e5553+IG_USERNAME_SPAN_PART2;const _0x10695f=await _0x263d6b['waitForSelector'](_0xd63aff),_0x133e2f=await _0x263d6b['evaluate'](_0x1efcde=>_0x1efcde['innerHTML'],_0x10695f);await delay(0xc8,0x1f4);if(_0x133e2f==_0x5b8564){let _0x1775bd=IG_NAME_SPAN_PART1+_0x4e5553+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x5e9c1c=await _0x263d6b['waitForSelector'](_0x1775bd);let _0x441b64=await _0x263d6b['evaluate'](_0x34bd3d=>_0x34bd3d['innerHTML'],_0x5e9c1c);const _0x82dc10=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x446520=_0x441b64['match'](_0x82dc10);_0x446520?_0x441b64=_0x446520[0x1]['trim']():_0x441b64=_0x441b64['trim']();_0x441b64['includes']('•')&&(_0x441b64=_0x441b64['substring'](0x0,_0x441b64['indexOf']('•')-0x1));const _0x1284f9='UPDATE\x20'+quoteIdent(_0x246308)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x1284f9,[_0x441b64,_0x133e2f],function(_0xd573dc){_0xd573dc&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0xd573dc['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x4e5553++;}catch(_0x324f4c){const _0x59b5bb='UPDATE\x20'+quoteIdent(_0x246308)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x59b5bb,['',_0x5b8564],function(_0x15f1d2){_0x15f1d2&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x15f1d2['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x324f4c);break;}}_0x3d1786&&_0x3d1786();}await _0x45c789['click']();}catch(_0x30fb71){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x30fb71);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x440c2a,_0x6090d2)=>{const _0x4c7f70='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x4c7f70,[],(_0x2ab9cd,_0x5740ee)=>{_0x2ab9cd?_0x6090d2(_0x2ab9cd):_0x440c2a(_0x5740ee);});});});const sqlGet=(_0x38062e,_0x458404,_0x244f56=[])=>new Promise((_0x12af63,_0x4010fe)=>_0x38062e['get'](_0x458404,_0x244f56,(_0x482aac,_0x3d4927)=>_0x482aac?_0x4010fe(_0x482aac):_0x12af63(_0x3d4927))),sqlAll=(_0x55d301,_0x13f97b,_0x625b59=[])=>new Promise((_0x499d12,_0x4ec113)=>_0x55d301['all'](_0x13f97b,_0x625b59,(_0x36b6f2,_0x33ce07)=>_0x36b6f2?_0x4ec113(_0x36b6f2):_0x499d12(_0x33ce07)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x437427=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x53c2e0=await Promise['all'](_0x437427['map'](async _0x23ef62=>{const _0x49e6b9=[];if(!_0x23ef62['list_id'])_0x49e6b9['push']('Liste');if(!_0x23ef62['zeitabstand'])_0x49e6b9['push']('Zeitabstand');if(!_0x23ef62['account'])_0x49e6b9['push']('Instagram\x20Account');if(_0x23ef62['account'])try{const _0x44762c=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x23ef62['account']]);if(!_0x44762c)_0x49e6b9['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x46a896=_0x44762c['cookie']&&_0x44762c['cookie']['trim']()!==''&&_0x44762c['cookie']['trim']()!=='[]';if(!_0x46a896)_0x49e6b9['push']('Instagram\x20Login');}}catch(_0x5f5433){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x5f5433['message']),_0x49e6b9['push']('Instagram\x20Account');}let _0x13b9a8='N/A',_0x2e0846='N/A';if(!_0x49e6b9['includes']('Liste')){try{const _0xc470ee=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+quoteIdent(_0x23ef62['list_id']));_0x13b9a8=_0xc470ee?.['lead_count']??0x0;}catch(_0x144e28){if(/no such table/i['test'](_0x144e28['message']))_0x49e6b9['push']('Liste\x20nicht\x20vorhanden');}try{const _0x340722=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x23ef62['list_id']]);_0x2e0846=_0x340722?.['contacted_count']??0x0;}catch(_0x451f02){}}return{'campaign_name':_0x23ef62['campaign_name'],'lead_count':_0x13b9a8,'contacted_count':_0x2e0846,'status':_0x49e6b9['length']===0x0?'Positiv':'Fehler:\x20'+_0x49e6b9['join'](',\x20')};}));return{'status':'success','campaigns':_0x53c2e0};}catch(_0x1043ec){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x1043ec['message']),{'status':'error','message':_0x1043ec['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0xd3ea33,_0x5e943e)=>{return new Promise((_0x117ce6,_0xc07248)=>{const _0x4abbeb='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x4abbeb,[_0x5e943e],(_0x1573c0,_0xac0043)=>{_0x1573c0?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x1573c0),_0xc07248(_0x1573c0)):(console['log']('ROWS'),console['log'](_0xac0043),debugDatabaseContents(),_0x117ce6(_0xac0043));});});});const showTableContents=_0x4d709d=>{return new Promise((_0x50f78b,_0x58580f)=>{const _0x5d58ad='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x4d709d)+';';campaignDB['all'](_0x5d58ad,(_0x483100,_0x1a5bf8)=>{_0x483100?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x4d709d+':',_0x483100),_0x58580f(_0x483100)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x4d709d+':',_0x1a5bf8),_0x50f78b({'status':'success','message':_0x1a5bf8}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x45a86f){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x45a86f);}}ipcMain['handle']('create-campaign',async(_0x259b51,_0x2018bb)=>{return new Promise((_0x51a161,_0x269d75)=>{const _0x27c9df='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x27c9df,[String(_0x2018bb)],function(_0x249e29){_0x249e29?_0x269d75(_0x249e29):_0x51a161({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x4a4d2d,_0x358f84)=>{return new Promise((_0x15833f,_0x167824)=>{const _0x38c2d4='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x38c2d4,[_0x358f84],function(_0x41151c){_0x41151c?_0x167824(_0x41151c):_0x15833f({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x742705,_0x2cdf68,_0x1fb45e,_0x406fde,_0x2c7515,_0x174a75,_0x239f56,_0x3693d7,_0x4f4ee2,_0x3f8e49)=>{const _0x39034f=await createMessageID(_0x2c7515);return new Promise((_0x571e5d,_0x3dc800)=>{console['log']('ZEITABSTAND:\x20'+_0x406fde);if(!_0x2cdf68||!_0x1fb45e||_0x406fde===undefined||_0x406fde===null||_0x406fde===''||!_0x39034f||!_0x174a75)return _0x3dc800({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x39034f);const _0x3e8eba='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x3e8eba,[_0x1fb45e,_0x406fde,_0x39034f,_0x174a75,_0x239f56,_0x3693d7,_0x4f4ee2,_0x3f8e49,_0x2cdf68],function(_0x12f6e5){if(_0x12f6e5)_0x3dc800({'status':'error','message':_0x12f6e5['message']});else this['changes']===0x0?_0x3dc800({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x571e5d({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x9bd8ff,_0x3dedc1,_0x309c56,_0x1f718a,_0x160d93)=>{return new Promise((_0x103904,_0x18254d)=>{const _0x180c1d='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x180c1d,[_0x3dedc1,_0x309c56,_0x1f718a,_0x160d93],function(_0x2c6eb6){return _0x2c6eb6?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x2c6eb6['message']),_0x18254d('insert-dm-response',{'success':![],'message':_0x2c6eb6['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x103904('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x36759a=>{return new Promise((_0x2c78b6,_0x5df4ce)=>{const _0x28494a='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x28494a,[_0x36759a],(_0x531ac1,_0xbc8cc1)=>{if(_0x531ac1)_0x5df4ce({'status':'error','message':_0x531ac1['message']});else{if(_0xbc8cc1)_0x2c78b6(_0xbc8cc1['message_id']);else{const _0x242d0d='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x242d0d,[_0x36759a],function(_0x3c4326){_0x3c4326?_0x5df4ce({'status':'error','message':_0x3c4326['message']}):_0x2c78b6(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x493693,_0x42e56e)=>{return new Promise((_0x507473,_0xf72bc)=>{const _0x188e6b='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+quoteIdent(_0x42e56e);db['get'](_0x188e6b,(_0x354e60,_0xa98657)=>{_0x354e60?_0xf72bc({'status':'error','message':_0x354e60['message']}):_0x507473({'status':'success','count':_0xa98657['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x5993ea,_0x5f35b6){try{const _0x5bb292=await new Promise((_0x2fb46c,_0x1c4d20)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5f35b6],(_0x595f41,_0x2c7431)=>{if(_0x595f41)_0x1c4d20(_0x595f41);else{if(_0x2c7431['length']>0x0){let _0x2ccc80=JSON['parse'](_0x2c7431[0x0]['cookie']);console['log'](_0x2ccc80),_0x2fb46c(_0x2ccc80);}else _0x1c4d20(new Error('User\x20with\x20username\x20'+_0x5f35b6+'\x20does\x20not\x20exist.'));}});});await _0x5993ea['setCookie'](..._0x5bb292),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x4dea95){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4dea95);}}async function saveCookiesForUser(_0xd02bc6,_0x487ef7){try{const _0x9284bc=await _0xd02bc6['cookies']();if(!_0x9284bc||_0x9284bc['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x487ef7);const _0x8b92f3=JSON['stringify'](_0x9284bc);if(_0x8b92f3['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x487ef7);return new Promise((_0x3cefbe,_0x2facc8)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x487ef7],(_0x5371dc,_0x45c444)=>{if(_0x5371dc)return console['error']('Error\x20checking\x20user\x20existence:',_0x5371dc),_0x2facc8(_0x5371dc);if(_0x45c444){const _0x4f0534=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x4f0534['run'](_0x8b92f3,_0x487ef7,function(_0x4d82c8){return _0x4d82c8?(console['error']('Error\x20updating\x20cookies:',_0x4d82c8),_0x2facc8(_0x4d82c8)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x487ef7),_0x3cefbe());});}else{const _0x42c856=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x42c856['run'](_0x487ef7,_0x8b92f3,function(_0x20c0c1){return _0x20c0c1?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x20c0c1),_0x2facc8(_0x20c0c1)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x487ef7),_0x3cefbe());});}});});}catch(_0x28d70d){console['error']('Error\x20fetching\x20cookies:',_0x28d70d);throw _0x28d70d;}}async function createUserIfNotExists(_0x1da4d5){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x1da4d5],(_0x45f9ee,_0x56512f)=>{if(_0x45f9ee){console['error']('Error\x20checking\x20user\x20existence:',_0x45f9ee);throw _0x45f9ee;}else{if(!_0x56512f){const _0x14e946=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x14e946['run'](_0x1da4d5,function(_0xbba431){_0xbba431?console['error']('Error\x20inserting\x20new\x20user:',_0xbba431):console['log']('New\x20user\x20created:',_0x1da4d5);});}else console['log']('User\x20already\x20exists:',_0x1da4d5);}});}catch(_0x44f507){console['error']('Error\x20creating\x20user:',_0x44f507);throw _0x44f507;}}ipcMain['handle']('create-relation',async(_0x384f0b,_0x4c9bfd)=>{return new Promise((_0x24d5db,_0x339bce)=>{const _0x2f7b71='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+quoteIdent(_0x4c9bfd)+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x2f7b71,function(_0xf8f522){_0xf8f522?_0x339bce(_0xf8f522):_0x24d5db({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0xa50634,_0x51eb4c)=>{return console['log']('droping\x20table'+_0x51eb4c),new Promise((_0x595069,_0x540e94)=>{const _0xf44000='DROP\x20TABLE\x20IF\x20EXISTS\x20'+quoteIdent(_0x51eb4c);console['log']('droping\x20table'+_0x51eb4c),db['run'](_0xf44000,function(_0x4c73a7){_0x4c73a7?_0x540e94(_0x4c73a7):_0x595069({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x1bd411=>{return new Promise((_0xaecad3,_0x3afe05)=>{const _0x4c9f1c='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x4c9f1c,[],(_0x4a46f6,_0x46e390)=>{_0x4a46f6?_0x3afe05(_0x4a46f6):_0xaecad3(_0x46e390['map'](_0x1f3fd6=>_0x1f3fd6['name']));});});}),ipcMain['handle']('add-user',async(_0x2c3365,_0x315f16,_0x1ea559)=>{return new Promise(_0x164e55=>{const _0x4e43f2=db['prepare']('INSERT\x20INTO\x20'+quoteIdent(_0x1ea559)+'\x20(username)\x20VALUES\x20(?)');_0x4e43f2['run'](_0x315f16,function(_0x223325){_0x223325?console['log']('error\x20in\x20add-user:'+_0x223325):_0x164e55({'status':'success','id':this['lastID']});}),_0x4e43f2['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x1ef80a,_0x503398)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x26b233,_0x45e232)=>{if(_0x26b233)_0x503398(_0x26b233);else{_0x1ef80a({'status':'success','users':_0x45e232});for(_0x45e232 of _0x45e232){console['log'](_0x45e232['username']);}}});});}),ipcMain['handle']('get-data',async(_0x137844,_0x5cd437)=>{return new Promise((_0x2642d8,_0x416475)=>{const _0x4406ee='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x5cd437);console['log'](_0x4406ee),db['all'](_0x4406ee,[],(_0x30dc6b,_0x4f5d78)=>{_0x30dc6b?_0x416475(_0x30dc6b):_0x2642d8(_0x4f5d78);});});}),ipcMain['handle']('get-accounts',async _0xf9545f=>{return new Promise((_0x27e161,_0x2345c2)=>{const _0x2bdd82='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x2bdd82),igaccountsDB['all'](_0x2bdd82,[],(_0xdd2d4d,_0x3d9fcd)=>{_0xdd2d4d?_0x2345c2(_0xdd2d4d):_0x27e161(_0x3d9fcd);});});}),ipcMain['handle']('get-targets',async(_0x54f38b,_0x5e6e80)=>{return getTargetProfiles(_0x5e6e80);}),ipcMain['handle']('delete-user',async(_0x50f4f3,_0x8f999,_0x5641cb)=>{return new Promise((_0x28c155,_0x5b525b)=>{const _0xdd41f3=db['prepare']('DELETE\x20FROM\x20'+quoteIdent(_0x5641cb)+'\x20WHERE\x20username\x20=\x20?');_0xdd41f3['run'](_0x8f999,function(_0x304d2a){_0x304d2a?_0x5b525b(_0x304d2a):_0x28c155({'status':'success','changes':this['changes']});}),_0xdd41f3['finalize']();});}),ipcMain['handle']('delete-account',async(_0x98dabb,_0x1aa7d7)=>{const _0x55f73e=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x55f73e['run'](_0x1aa7d7,function(_0x535f75){_0x535f75&&console['log'](_0x535f75);}),_0x55f73e['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x42e456,_0x4949e2)=>{const _0x48ae4d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x48ae4d,[],(_0x5912b5,_0xad0ee0)=>{_0x5912b5?_0x4949e2({'status':'error','message':_0x5912b5['message']}):_0x42e456({'status':'success','contactedCount':_0xad0ee0['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x356b61,_0x39602d)=>{const _0xace956='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0xace956,[],(_0x4294b9,_0x176aee)=>{_0x4294b9?_0x39602d({'status':'error','message':_0x4294b9['message']}):_0x356b61({'status':'success','contactedCount':_0x176aee['contactedCount']});});});});function exportDatabase(_0x3541f6){return new Promise((_0x45cea1,_0x3e0b52)=>{const _0x2f6d04='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+quoteIdent(_0x3541f6)+'\x0a\x20\x20\x20\x20';db['all'](_0x2f6d04,[],async(_0x434040,_0x4b5d7b)=>{if(_0x434040){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x434040['message']),_0x3e0b52(_0x434040);return;}if(!_0x4b5d7b||_0x4b5d7b['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x45cea1();return;}const _0x5e5160=XLSX['utils']['json_to_sheet'](_0x4b5d7b),_0x731366=XLSX['utils']['sheet_to_csv'](_0x5e5160);try{const {canceled:_0x68174c,filePath:_0x5df3ba}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x3541f6+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x68174c||!_0x5df3ba){console['log']('Speichern\x20abgebrochen.'),_0x45cea1();return;}fs['writeFile'](_0x5df3ba,_0x731366,'utf8',_0x190faa=>{_0x190faa?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x190faa['message']),_0x3e0b52(_0x190faa)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x5df3ba),_0x45cea1());});}catch(_0x1c3ae7){console['error']('Fehler\x20im\x20Speicherdialog:',_0x1c3ae7),_0x3e0b52(_0x1c3ae7);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x2f6204,_0x4704cf)=>{shell['openExternal'](_0x4704cf);});