const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x25628b,_0x33a105){try{const _0xf6f9e0=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x33a105},'body':JSON['stringify']({'clearname':_0x25628b})});if(!_0xf6f9e0['ok']){const _0x48509e=await _0xf6f9e0['text']();throw new Error(_0xf6f9e0['status']+':\x20'+_0x48509e);}const _0x50c0e7=await _0xf6f9e0['json']();return _0x50c0e7;}catch(_0x527718){console['error']('Error\x20in\x20extractFirstName:',_0x527718);throw _0x527718;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x2eb673=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x2eb673['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x2eb673['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x1f0ea){var _0x2708e0=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xf4e2a7){console['log']('window\x20id:'+_0xf4e2a7['id']),_0xf4e2a7['id']>0x1&&(_0x2708e0=!![]);}),console['log']('child\x20opened\x20='+_0x2708e0);if(!_0x2708e0){const _0x4380ad=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x4380ad['loadFile'](_0x1f0ea['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x2ae9ad=require('fs'),_0x35efab=path['join'](app['getPath']('userData'),'data'),_0x374115=['campaign.db','crm.db','igaccounts.db'],_0x31133b=[];try{_0x2ae9ad['mkdirSync'](_0x35efab,{'recursive':!![]});for(const _0x551fc2 of _0x374115){const _0x4b469d=path['join'](process['resourcesPath'],'app','build','data',_0x551fc2),_0x375882=path['join'](_0x35efab,_0x551fc2);!_0x2ae9ad['existsSync'](_0x375882)?(_0x2ae9ad['copyFileSync'](_0x4b469d,_0x375882),console['log']('[InitDB]\x20Kopiert\x20'+_0x551fc2+'\x20nach:\x20'+_0x375882)):console['log']('[InitDB]\x20'+_0x551fc2+'\x20existiert\x20bereits:\x20'+_0x375882),_0x31133b['push'](_0x375882);}}catch(_0xef197b){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0xef197b);}return _0x31133b;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x3a54b2,AppUpdate:_0x4e7b17}=require('electron-updater');_0x3a54b2['autoDownload']=![],_0x3a54b2['autoInstallOnAppQuit']=!![],_0x3a54b2['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x3a54b2['on']('update-available',_0x364be0=>{console['log']('Update\x20verfügbar:',_0x364be0),_0x3a54b2['downloadUpdate']();}),_0x3a54b2['on']('update-downloaded',_0x597f62=>{console['log']('Update\x20heruntergeladen:',_0x597f62),_0x3a54b2['quitAndInstall']();}),_0x3a54b2['on']('error',_0x2722e6=>{console['error']('Fehler\x20beim\x20Updaten:',_0x2722e6);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x4fb912,AppUpdate:_0x3f2d22}=require('electron-updater');_0x4fb912['autoDownload']=![],_0x4fb912['autoInstallOnAppQuit']=!![],_0x4fb912['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x4fb912['on']('update-available',_0x2b8fa4=>{console['log']('Update\x20verfügbar:',_0x2b8fa4),_0x4fb912['downloadUpdate']();}),_0x4fb912['on']('update-downloaded',_0x484e28=>{console['log']('Update\x20heruntergeladen:',_0x484e28),console['log']('Neustarten\x20zum\x20Updaten');}),_0x4fb912['on']('error',_0x18c6d6=>{console['error']('Fehler\x20beim\x20Updaten:',_0x18c6d6);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x225d53='',_0x55dfa5=null;if(process['platform']==='darwin')_0x225d53=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x225d53=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x225d53}),_0x55dfa5=await browser_login['newPage'](),_0x55dfa5['setDefaultNavigationTimeout'](0x1d4c),_0x55dfa5['setDefaultTimeout'](0x1d4c),await _0x55dfa5['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x55dfa5;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x5ec91b=0x1,_0x2cdbee=0x0){let _0x10bf62='',_0x5be09f=null;const _0x29c43f=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x10bf62=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x10bf62=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x5ec91b===0x0&&!pageStack[_0x2cdbee])return browser=await puppeteer['launch']({'headless':_0x29c43f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x10bf62}),_0x5be09f=await browser['newPage'](),_0x5be09f['setDefaultNavigationTimeout'](0x1d4c),_0x5be09f['setDefaultTimeout'](0x1d4c),await _0x5be09f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x2cdbee]=_0x5be09f,_0x5be09f;return(browser===null||pageStack[_0x2cdbee]===null||pageStack[_0x2cdbee]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x29c43f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x10bf62})),(pageStack[_0x2cdbee]===null||pageStack[_0x2cdbee]['isClosed']())&&(_0x5be09f=await browser['newPage'](),_0x5be09f['setDefaultNavigationTimeout'](0x1d4c),_0x5be09f['setDefaultTimeout'](0x1d4c),await _0x5be09f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x2cdbee]=_0x5be09f),pageStack[_0x2cdbee];}ipcMain['on']('login',async(_0x4044d8,_0x4ad048)=>{const _0x45a9cf=await getBrowserPageLogin();await _0x45a9cf['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x45a9cf,_0x4ad048),ipcMain['on']('setLoginCookies',async(_0xc22a23,_0x7d67f8)=>{try{await set_login_cookies(_0x45a9cf,_0x7d67f8);}catch(_0x54bb9){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x54bb9);}});}),ipcMain['on']('export-relation',async(_0x46e519,_0xbc8d55)=>{try{await exportDatabase(_0xbc8d55),_0x46e519['reply']('export-relation-response',{'success':!![]});}catch(_0x15aaba){console['error'](_0x15aaba),_0x46e519['reply']('export-relation-response',{'success':![],'message':_0x15aaba['message']});}}),ipcMain['handle']('sendMessage',async(_0x433c08,_0x373113,_0x3da25e,_0x47803c,_0x1146c9,_0x40cdba,_0x27ca6e,_0x9d7bac,_0x525338,_0x152077,_0x251856)=>{isStopping=![];let _0x2f4b7a=null;return _0x27ca6e?_0x2f4b7a=await getBrowserPage(_0x1146c9,_0x9d7bac):_0x2f4b7a=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x373113),send_message(_0x2f4b7a,_0x373113,_0x3da25e,_0x47803c,_0x1146c9,_0x40cdba,_0x525338,_0x152077,_0x251856);}),ipcMain['handle']('stop-action',async(_0x5adc09,_0x109230)=>{isStopping=!![];const _0x2b75aa=await getBrowserPage(0x1,_0x109230);await _0x2b75aa['close']();}),ipcMain['handle']('fetch_followers',async(_0x569788,_0x2674d9,_0x590b3e,_0x33fb89,_0x179c5a,_0x450450)=>{isStopping=![];const _0x2a5354=await getBrowserPage();return fetch_followers_from_account(_0x569788,_0x2a5354,_0x2674d9,_0x590b3e,_0x33fb89,_0x179c5a,_0x450450);}),ipcMain['handle']('get-account-details',async(_0x48c340,_0x171ada,_0x55c83d,_0x2041e6)=>{isStopping=![];const _0x202373=await getBrowserPage();return fetch_account_details(_0x202373,_0x171ada,_0x55c83d,_0x2041e6);}),ipcMain['handle']('fetch_likes',async(_0x35e66d,_0x27cda9,_0x2f335b,_0x18dbd8,_0x4e8a49,_0x450caf)=>{isStopping=![];const _0x4a7dac=await getBrowserPage();return fetch_likers_from_post(_0x35e66d,_0x4a7dac,_0x27cda9,_0x2f335b,_0x18dbd8,_0x4e8a49,_0x450caf);}),ipcMain['handle']('fetch_comments',async(_0x2c6576,_0x560ab4,_0x2c7f9e,_0x29be86,_0xe81406,_0x14688c)=>{isStopping=![];const _0x121edc=await getBrowserPage();return fetch_comments_from_post(_0x2c6576,_0x121edc,_0x560ab4,_0x2c7f9e,_0x29be86,_0xe81406,_0x14688c);});async function updateAppSilent(){const {spawn:_0x5a9a70}=require('child_process'),_0x3a6e51=require('path'),_0x2d6902=require('electron-log');return _0x2d6902['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x220764,_0x18d44a)=>{const {updateElectronApp:_0x1fa874,UpdateSourceType:_0x1a22e3}=require('update-electron-app');_0x1fa874({'updateSource':{'type':_0x1a22e3['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x2d6902}),_0x220764('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2ff93f,_0x3ca535)=>{doFullElectronUpdateSilent(),_0x2ff93f('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x360ea9}=require('child_process'),_0x8b95d9=require('path'),_0xad6b54=require('electron-log');return _0xad6b54['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2d3008,_0x369c36)=>{const {updateElectronApp:_0x3f2a97,UpdateSourceType:_0xac03f2}=require('update-electron-app');_0x3f2a97({'updateSource':{'type':_0xac03f2['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xad6b54}),_0x2d3008('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x5b3499,_0x578039)=>{doFullElectronUpdate(),_0x5b3499('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x10766b,_0x362ad9)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x10766b('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0xd2385a=path['join'](__dirname,'mac-updater-intern.sh'),_0x215fea=spawn('/bin/bash',[_0xd2385a],{'detached':!![],'stdio':'ignore'});_0x215fea['unref'](),setTimeout(()=>{_0x10766b('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x362ad9(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x46ba59=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x183e46,_0x134875)=>{console['log']('Update\x20Silent:\x20'+_0x134875);if(_0x134875){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x4baae0,_0x1ad7b4){return Math['random']()*(_0x1ad7b4-_0x4baae0+0x1)+_0x4baae0;}function delay(_0x46ef4a,_0x5e3733){let _0x12ef7d=getRnd(_0x46ef4a,_0x5e3733);return new Promise(function(_0x23549f){setTimeout(_0x23549f,_0x12ef7d);});}async function scroll(_0x370ac0,_0x4519e5,_0xfaaf5d=0x2,_0x5234d2){const _0x5311a4=await _0x370ac0['waitForSelector'](_0x4519e5);for(let _0x4a8ad1=0x0;_0x4a8ad1<_0xfaaf5d;_0x4a8ad1++){console['log']('Scrolling\x20'+_0x4a8ad1),await _0x370ac0['evaluate'](_0x58bace=>{const _0x350024=document['querySelector'](_0x58bace);_0x350024&&_0x350024['scrollBy'](0x0,0x190);},_0x4519e5),await delay(0x320,0x5dc),_0x5234d2();}}async function saveCookies(_0x3d8464){let _0x24b57e=await _0x3d8464['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x24b57e,null,0x2));}async function notificationClear(_0x1ee46f){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x1ee46f['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x1ee46f['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x209f5a){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x209f5a);}}async function getTargetProfiles(_0x672a87){return new Promise((_0x197d0d,_0x5812f4)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x672a87,(_0x4f87ba,_0x33ad0a)=>{_0x4f87ba?_0x5812f4(_0x4f87ba):_0x197d0d(_0x33ad0a);});});}async function login_legacy(_0x4c01f7,_0x279791,_0x117da2){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4c01f7,_0x279791),await createUserIfNotExists(_0x279791,_0x117da2);}catch(_0xa809fc){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xa809fc);}try{await _0x4c01f7['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x4c01f7['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x4c01f7['click']('button._a9--._ap36._a9_0');}catch(_0x5dcad){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x4c01f7['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x4c01f7['type']('input[name=\x27username\x27]',_0x279791,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4c01f7['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x4c01f7['type']('input[name=\x27password\x27]',_0x117da2,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4c01f7['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x4c01f7['click']('button[type=\x27submit\x27]');}catch(_0x545bb9){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x4c01f7),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x4c01f7,_0x279791);}catch(_0x1cf971){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x1cf971);}}catch(_0x284462){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x284462);}}async function login(_0x42434b,_0x4793d2){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x42434b,_0x4793d2),await createUserIfNotExists(_0x4793d2);}catch(_0x4b6115){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4b6115);}try{await _0x42434b['goto']('https://www.instagram.com/accounts/login/');}catch(_0x8d8d0c){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x8d8d0c);}}async function set_login_cookies(_0x17e26f,_0x26400f){try{await saveCookiesForUser(_0x17e26f,_0x26400f);}catch(_0x669412){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x669412);}}async function waitForXPath(_0x12bdaf,_0x270b01,_0x2f0e6b={}){return await _0x12bdaf['waitForFunction'](_0x3d5335=>{return document['evaluate'](_0x3d5335,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x2f0e6b,_0x270b01),_0x12bdaf['evaluateHandle'](_0x411309=>document['evaluate'](_0x411309,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x270b01);}async function waitForSelectorWithFallbacks(_0x29311c,_0x174924,_0x451cd2={}){!Array['isArray'](_0x174924)&&(_0x174924=[_0x174924]);for(let _0x49c2ac=0x0;_0x49c2ac<_0x174924['length'];_0x49c2ac++){const _0x243fe1=_0x174924[_0x49c2ac],_0x210756=_0x243fe1['startsWith']('//')||_0x243fe1['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x210756?'XPath':'Selector')+'\x20'+(_0x49c2ac+0x1)+'/'+_0x174924['length']+':\x20'+_0x243fe1['substring'](0x0,0x32)+'...');const _0x3b0965=_0x49c2ac===0x0?_0x451cd2['timeout']||0x1388:0x7d0;let _0x165458;if(_0x210756){const _0x181eaf=await waitForXPath(_0x29311c,_0x243fe1,{..._0x451cd2,'timeout':_0x3b0965});if(!_0x181eaf)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x165458=_0x181eaf;}else _0x165458=await _0x29311c['waitForSelector'](_0x243fe1,{..._0x451cd2,'timeout':_0x3b0965});return console['log']((_0x210756?'XPath':'Selector')+'\x20'+(_0x49c2ac+0x1)+'\x20gefunden!'),_0x165458;}catch(_0x34f963){console['log']((_0x210756?'XPath':'Selector')+'\x20'+(_0x49c2ac+0x1)+'\x20nicht\x20gefunden:\x20'+_0x34f963['message']);if(_0x49c2ac===_0x174924['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x174924['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x34f963['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function send_message(_0x1bdbad,_0x4935fd,_0x117ef5,_0x81351a,_0x4869a5,_0x379061,_0x3322e0,_0x481664,_0x5a269e){return new Promise(async(_0x59e83e,_0x4b0de4)=>{_0x379061=_0x379061['split'](';'),console['log'](_0x379061[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x4869a5);try{await setCookiesForUser(_0x1bdbad,_0x379061[0x0]);}catch(_0x138463){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x138463),_0x4b0de4({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x138463});return;}try{await _0x1bdbad['goto']('https://www.instagram.com/'+_0x4935fd+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x1bdbad);}catch(_0x4e9c91){_0x4b0de4({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x4e9c91});return;}console['log']('UserSkip:\x20'+_0x3322e0);if(_0x3322e0==0x1)try{const _0x3a6af7=await _0x1bdbad['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x5dbcaa=>_0x5dbcaa['textContent']['trim']());console['log'](_0x3a6af7);if(_0x3a6af7==='Following'||_0x3a6af7==='Folge\x20ich')return _0x59e83e({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x59047a){}try{await _0x1bdbad['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x1bdbad['click'](K_DIRECT_MSG_BUTTON);}catch(_0x363dad){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x363dad);try{await _0x1bdbad['waitForSelector'](K_OPTIONS_BUTTON),await _0x1bdbad['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x628ad3=await waitForXPath(_0x1bdbad,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x628ad3['click']();}catch(_0x10a31c){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x10a31c),_0x59e83e({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x1bdbad);}catch(_0x468a05){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x468a05);}try{const _0x5a71fb=await _0x1bdbad['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x481664){const _0x4c86c0=await _0x1bdbad['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x4c86c0)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x4935fd),_0x59e83e({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x1e6a48=await _0x1bdbad['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x1e6a48),_0x81351a=_0x81351a['replace']('{USERNAME}',_0x4935fd);let _0x122d8e;if(_0x81351a['includes']('{NAME}')||_0x81351a['includes']('{name}'))try{const _0xe07c80=await extractFirstName(_0x1e6a48,_0x5a269e);console['log']('Response\x20Clearname\x20valid:\x20'+_0xe07c80['valid']),_0xe07c80['valid']?(_0x81351a=_0x81351a['replaceAll'](/{NAME}|{name}/g,_0xe07c80['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0xe07c80['name']),_0x122d8e=_0xe07c80['name']):(_0x81351a=_0x81351a['replaceAll'](/ ?({NAME}|{name})/g,''),_0x122d8e='UNKNOWN_NAME');}catch(_0x1e5ef0){console['log'](_0x1e5ef0['message']),_0x122d8e=_0x1e5ef0['message'];let _0x14b6f2=_0x1e6a48['replace'](/[^\p{L}\s]/gu,''),_0x1ca355=_0x14b6f2['split']('\x20')[0x0];_0x1ca355['length']>0x2&&!_0x1ca355['includes']('Instagram')?_0x81351a=_0x81351a['replaceAll'](/{NAME}|{name}/g,_0x1ca355):_0x81351a=_0x81351a['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x5a71fb['type'](_0x81351a,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x3877aa=await waitForSelectorWithFallbacks(_0x1bdbad,K_SEND_MSG_BUTTON);await _0x3877aa['click'](),await delay(0x320,0x3e8),_0x59e83e({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x1e6a48,'extracted_clearname':_0x122d8e});}catch(_0x24a0f5){try{await _0x1bdbad['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x4f0e59=await _0x1bdbad['evaluate'](_0x3f4511=>{return document['querySelector'](_0x3f4511)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x4f0e59),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x24a0f5),_0x59e83e({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x4935fd+'\x20überspringen.'});}catch(_0x556e57){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x556e57),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x4935fd+'\x20:\x20'+_0x556e57),_0x59e83e({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x4935fd+'\x20:\x20'+_0x556e57});}}});}function handle_fail(_0x18f21f){if(isStopping)return new Promise(_0x41ab6c=>{_0x41ab6c('Scraper\x20gestoppt.');});else{let _0xf70a49='';switch(_0x18f21f){case 0x0:_0xf70a49='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0xf70a49='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0xf70a49='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0xf70a49='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x5f5837,_0x2c51c7)=>{_0x2c51c7(_0xf70a49);});}}async function fetch_account_details(_0x1c0f02,_0x386fa2,_0x575aaa,_0x2e8c33){try{await setCookiesForUser(_0x1c0f02,_0x575aaa['username']);}catch(_0x508d4b){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x508d4b);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x508d4b);return handle_fail(0x0);}_0x1c0f02['setDefaultNavigationTimeout'](0x7530),await _0x1c0f02['goto']('https://www.instagram.com/'+_0x386fa2+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x1c0f02);const _0x1ccd1b=await _0x1c0f02['evaluate'](()=>{const _0x14d50=document['querySelector']('meta[property=\x22og:image\x22]');return _0x14d50?_0x14d50['getAttribute']('content'):null;});await _0x1c0f02['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x2ba629=await _0x1c0f02['evaluate'](()=>{const _0x24b7d3=document['querySelector']('meta[name=\x22description\x22]');if(!_0x24b7d3)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x98fc20=_0x24b7d3['getAttribute']('content');if(!_0x98fc20)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x98fc20);const _0x151b44=/\s*[–-]\s*/,_0x394fb9=_0x98fc20['split'](_0x151b44);if(_0x394fb9['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x18c19c=_0x394fb9[0x0],_0x416c73=_0x394fb9[0x1],_0x589170=_0x18c19c['split'](',\x20');if(_0x589170['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x316a5d=_0x589170[0x0]['split']('\x20')[0x0],_0x10347a=_0x589170[0x1]['split']('\x20')[0x0],_0x4c0bd2=_0x589170[0x2]['split']('\x20')[0x0];let _0x662c7e='',_0x1a0a53='';const _0x2397b7='\x20on\x20Instagram:\x20',_0x138a03=_0x416c73['split'](_0x2397b7);return _0x662c7e=_0x138a03[0x0]['trim'](),_0x662c7e=_0x662c7e['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x138a03['length']>0x1&&(_0x1a0a53=_0x138a03[0x1]['trim'](),_0x1a0a53['startsWith']('\x22')&&_0x1a0a53['endsWith']('\x22')&&(_0x1a0a53=_0x1a0a53['substring'](0x1,_0x1a0a53['length']-0x1)['trim']()),_0x1a0a53=_0x1a0a53['replace'](/&quot;/g,'')['trim']()),{'followers':_0x316a5d,'following':_0x10347a,'posts':_0x4c0bd2,'nameText':_0x662c7e,'bio':_0x1a0a53};});console['log']('Extracted\x20profile\x20data:',_0x2ba629);const _0x302625=_0x2ba629['nameText'],_0x592843=_0x1ccd1b,_0x2f2b48=_0x2ba629['bio'],_0x210d16=_0x2ba629['followers'],_0x155284=_0x2ba629['following'],_0x57190c=_0x2ba629['posts'],_0x38d465=![],_0x344bd7=![],_0x4b4ba7=![],_0x2116e5='\x0a\x20\x20INSERT\x20INTO\x20'+_0x2e8c33+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x2116e5,[_0x386fa2,_0x302625,_0x592843,_0x2f2b48,_0x210d16,_0x155284,_0x57190c,_0x38d465,_0x344bd7,_0x4b4ba7],function(_0x55d00a){_0x55d00a?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x55d00a['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4f7c08,_0x88b21,_0x191788,_0x468cc1,_0x4a25f0,_0xa5702e,_0xa7d821){let _0x4cd45d=0x4,_0x144288=0x0,_0x448c23=0x0;try{await setCookiesForUser(_0x88b21,_0xa5702e['username']);}catch(_0x594536){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x594536);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x594536);return handle_fail(0x0);}let _0x12d8d6=0x0;try{await _0x88b21['goto']('https://www.instagram.com/'+_0x191788+'/'),await notificationClear(_0x88b21);try{if(_0x468cc1<=0x0){const _0x420ed7=await _0x88b21['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x1ac582=await _0x88b21['evaluate'](_0x3a7b09=>_0x3a7b09['innerHTML'],_0x420ed7);_0x12d8d6=Math['ceil'](_0x1ac582/0x4);}else _0x12d8d6=Math['ceil'](_0x468cc1/0x4);_0x4cd45d+=_0x12d8d6,_0x448c23=Math['round'](++_0x144288/_0x4cd45d*0x64),_0x4f7c08['sender']['send']('fetch-progress',_0x448c23,!![]);let _0x18f940=await _0x88b21['waitForSelector']('a[href=\x22/'+_0x191788+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x18f940['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x191788+'\x20gesichtet'),_0x448c23=Math['round'](++_0x144288/_0x4cd45d*0x64),_0x4f7c08['sender']['send']('fetch-progress',_0x448c23,!![]);}catch(_0x2501ba){console['log']('Follower\x20Liste\x20von\x20'+_0x191788+'\x20nicht\x20gefunden:'+_0x2501ba);throw new Error('Follower\x20Liste\x20von\x20'+_0x191788+'\x20nicht\x20gefunden:'+_0x2501ba);return handle_fail(0x0);}}catch(_0x544c35){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x544c35);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x544c35);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x12d8d6),await scroll(_0x88b21,FOLLOWER_FENSTER,_0x12d8d6,_0x5b3b2b=>{_0x448c23=Math['round'](++_0x144288/_0x4cd45d*0x64),_0x4f7c08['sender']['send']('fetch-progress',_0x448c23,!![]);}),await _0x88b21['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x4958ab=await _0x88b21['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x3d1042=await _0x88b21['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x448c23=Math['round'](++_0x144288/_0x4cd45d*0x64),_0x4f7c08['sender']['send']('fetch-progress',_0x448c23,!![]);_0x468cc1<=0x0&&(_0x468cc1=_0x4958ab['length']);let _0x20a243=[];for(let _0x26e586=0x0;_0x26e586<_0x4958ab['length']&&_0x26e586<_0x468cc1;_0x26e586++){_0x20a243['push'](await _0x4958ab[_0x26e586]['evaluate'](_0x296a56=>_0x296a56['textContent']));const _0x31d5f2='INSERT\x20INTO\x20'+_0x4a25f0+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x31d5f2,[await _0x4958ab[_0x26e586]['evaluate'](_0x1dee49=>_0x1dee49['textContent']),await _0x3d1042[_0x26e586]['evaluate'](_0x5c1785=>_0x5c1785['textContent'])],function(_0x411666){_0x411666?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4a25f0+'\x27:',_0x411666['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x448c23=Math['round'](++_0x144288/_0x4cd45d*0x64),_0x4f7c08['sender']['send']('fetch-progress',_0x448c23,!![]),_0xa7d821&&(_0x4f7c08['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4f7c08,_0x88b21,_0xa5702e,_0x4a25f0,_0x20a243)),new Promise(_0xbbdb68=>{_0xbbdb68('Scraping\x20finished!');});}catch(_0x596c61){if(_0xa7d821)throw new Error(_0x596c61);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x191788+'\x20nicht\x20gefunden:\x20'+_0x596c61);return handle_fail(0x0);}}async function fetch_details_from_list(_0x3f87e6,_0xa8717e,_0x4b47ed,_0xaa2486,_0x350c8f){let _0x41aa28=0x0,_0x5191df=0x0;for(let _0x1b4ddd=0x0;_0x1b4ddd<_0x350c8f['length'];_0x1b4ddd++){console['log']('Processing\x20profile:',_0x350c8f[_0x1b4ddd]);try{await fetch_account_details(_0xa8717e,_0x350c8f[_0x1b4ddd],_0x4b47ed,_0xaa2486);}catch(_0x1610f7){console['error']('Detailed\x20Scraping\x20von:\x20',_0x350c8f[_0x1b4ddd],_0x1610f7);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x350c8f[_0x1b4ddd]+'\x20'+_0x1610f7);}_0x5191df=Math['round'](++_0x41aa28/_0x350c8f['length']*0x64),_0x3f87e6['sender']['send']('fetch-progress',_0x5191df,!![],!![]);}}async function fetch_likers_from_post(_0x2ff81a,_0x26f468,_0x5e15ed,_0x549e6c,_0x393d96,_0x5190c7,_0x394a3a){let _0x1b2edd=0x4,_0x37bb55=0x0,_0x17708d=0x0;try{await setCookiesForUser(_0x26f468,_0x5190c7['username']);}catch(_0x253bf5){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x253bf5);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x253bf5);return handle_fail(0x1);return;}_0x17708d=Math['round'](++_0x37bb55/_0x1b2edd*0x64),_0x2ff81a['sender']['send']('fetch-progress',_0x17708d,!![]);try{let _0x426969=_0x5e15ed['substring'](0x0,_0x5e15ed['lastIndexOf']('/'));_0x426969['includes']('/reel/')&&(_0x426969=_0x426969['replace']('/reel/','/p/'));let _0x35acce=_0x426969+'/liked_by';console['log'](_0x35acce),await _0x26f468['goto'](_0x35acce),await delay(0x7d0,0xfa0),await notificationClear(_0x26f468),await delay(0xc8,0x1f4),_0x17708d=Math['round'](++_0x37bb55/_0x1b2edd*0x64),_0x2ff81a['sender']['send']('fetch-progress',_0x17708d,!![]),await _0x26f468['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x40c273=await _0x26f468['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x2cc758=await _0x26f468['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x40c273['length']);let _0x3a79cd=path['join'](__dirname,'/likers.csv');_0x17708d=Math['round'](++_0x37bb55/_0x1b2edd*0x64),_0x2ff81a['sender']['send']('fetch-progress',_0x17708d,!![]);_0x549e6c<=0x0&&(_0x549e6c=_0x40c273['length']);try{let _0xfc6833=[];for(let _0x219208=0x0;_0x219208<_0x40c273['length']&&_0x219208<_0x549e6c;_0x219208++){_0xfc6833['push'](await _0x40c273[_0x219208]['evaluate'](_0x374d01=>_0x374d01['textContent']));try{const _0x46e6b7='INSERT\x20INTO\x20'+_0x393d96+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x46e6b7,[await _0x40c273[_0x219208]['evaluate'](_0x5adc32=>_0x5adc32['textContent']),await _0x2cc758[_0x219208]['evaluate'](_0x1e33df=>_0x1e33df['textContent'])],function(_0x1a7600){_0x1a7600?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x393d96+'\x27:',_0x1a7600['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x12ac11){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x219208+'\x20:\x20'+_0x12ac11);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x219208+'\x20:\x20'+_0x12ac11);return handle_fail(0x1);}}return _0x17708d=Math['round'](++_0x37bb55/_0x1b2edd*0x64),_0x2ff81a['sender']['send']('fetch-progress',_0x17708d,!![]),_0x394a3a&&(_0x2ff81a['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2ff81a,_0x26f468,_0x5190c7,_0x393d96,_0xfc6833)),new Promise(_0x1ae6d9=>{_0x1ae6d9('Scraping\x20finished!');});}catch(_0x5dca03){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x5dca03);return handle_fail(0x1);}}catch(_0x317a68){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x317a68);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x317a68);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x1cef6e,_0x3e8490,_0x65f0f,_0x11383d,_0x233775,_0x1a12aa,_0x4b2f97){let _0x1a1560=0x3,_0x13f52c=0x0,_0x35634f=0x0;try{await setCookiesForUser(_0x3e8490,_0x1a12aa['username']);}catch(_0x13a981){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x13a981);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x13a981);return handle_fail(0x2);}try{console['log'](_0x65f0f),await _0x3e8490['goto'](_0x65f0f),await delay(0x7d0,0xfa0),await notificationClear(_0x3e8490),await delay(0xc8,0x1f4);const _0x3627d3=COM_COMMENTS_BOX_BODY_DIV;let _0x489964;const _0x3ccfc6=await _0x3e8490['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x3e51a3=await _0x3e8490['evaluate'](_0x5df37c=>_0x5df37c['innerHTML'],_0x3ccfc6),_0x7abceb=String(_0x3e51a3)['replace'](/[^0-9]/g,''),_0x36d032=Number(_0x7abceb)/0x14;_0x11383d<=0x0?_0x489964=Math['ceil'](_0x36d032/0x3):_0x489964=Math['ceil'](_0x11383d/0x3);_0x1a1560+=_0x489964,_0x35634f=Math['round'](++_0x13f52c/_0x1a1560*0x64),_0x1cef6e['sender']['send']('fetch-progress',_0x35634f,!![]),console['log']('Auto-scrolls:\x20'+_0x489964),await scroll(_0x3e8490,_0x3627d3,_0x489964,_0xc21507=>{_0x35634f=Math['round'](++_0x13f52c/_0x1a1560*0x64),_0x1cef6e['sender']['send']('fetch-progress',_0x35634f,!![]);});try{const _0x91f3f=COM_REPLY_BUTTON_SPAN;await _0x3e8490['waitForSelector'](_0x91f3f),await delay(0x1f4,0x320);const _0x3be4a0=await _0x3e8490['$$'](_0x91f3f);console['log'](_0x3be4a0);let _0x59ea0d=_0x3be4a0['length'];await delay(0xc8,0x1f4);try{for(let _0x261b5c=0x0;_0x261b5c<_0x59ea0d;_0x261b5c++){_0x3be4a0[_0x261b5c]['click'](),await delay(0x320,0x5dc);}}catch(_0x3aac52){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3aac52);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3aac52);return handle_fail(0x2);}}catch(_0x1520ce){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x463f1a=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x3e8490['waitForSelector'](_0x463f1a),await delay(0x1f4,0x320),_0x35634f=Math['round'](++_0x13f52c/_0x1a1560*0x64),_0x1cef6e['sender']['send']('fetch-progress',_0x35634f,!![]);const _0x3a2a63=await _0x3e8490['$$'](_0x463f1a);let _0x14957f=path['join'](__dirname,'/comments.csv');_0x11383d<=0x0&&(_0x11383d=_0x3a2a63['length']);console['log']('fetch_limit:\x20'+_0x11383d),console['log']('comments_len:\x20'+_0x3a2a63['length']),_0x11383d++;try{let _0x1c3e5a=[];for(let _0x92ccec=0x1;_0x92ccec<_0x3a2a63['length']&&_0x92ccec<_0x11383d;_0x92ccec++){try{_0x1c3e5a['push'](await _0x3a2a63[_0x92ccec]['evaluate'](_0x54cc47=>_0x54cc47['textContent']));const _0x58d7c2=await db['prepare']('INSERT\x20INTO\x20'+_0x233775+'\x20(username)\x20VALUES\x20(?)');await _0x58d7c2['run'](await _0x3a2a63[_0x92ccec]['evaluate'](_0x3ac01c=>_0x3ac01c['textContent']),function(_0x38b11c){_0x38b11c&&console['log']('error\x20in\x20add-user:'+_0x38b11c);}),await _0x58d7c2['finalize']();}catch(_0x88aa2e){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x92ccec+'\x20:\x20'+_0x88aa2e);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x92ccec+'\x20:\x20'+_0x88aa2e);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x35634f=Math['round'](++_0x13f52c/_0x1a1560*0x64),_0x1cef6e['sender']['send']('fetch-progress',_0x35634f,!![]),_0x1cef6e['sender']['send']('fetch-progress',0x64,!![]),_0x4b2f97&&(_0x1cef6e['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x1cef6e,_0x3e8490,_0x1a12aa,_0x233775,_0x1c3e5a)),_0x1cef6e['sender']['send']('fetch-progress',0x64,![]),new Promise(_0xe536ed=>{_0xe536ed('Scraping\x20finished!');});}catch(_0xa1d039){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0xa1d039);return handle_fail(0x2);}}catch(_0x56b106){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x56b106);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x56b106);return handle_fail(0x2);}}async function set_clearname_from_username(_0x1b606c,_0x31057f,_0x259301=null){try{let _0x3afb22,_0x3389f9;const _0x512301='SELECT\x20username\x20FROM\x20'+_0x31057f+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x512301,[],(_0x5d925a,_0x46e509)=>{_0x5d925a&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x5d925a['message']),_0x46e509['length']===0x0&&(_0x3389f9=_0x46e509['length']),_0x3afb22=_0x46e509['map'](_0x5c8224=>_0x5c8224['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x3389f9);if(_0x3389f9===0x0){console['log']('Leave');return;}const _0x4ec4be=await _0x1b606c['waitForSelector'](IG_SEARCH_BUTTON);await _0x4ec4be['click'](),await delay(0x4b0,0x7d0);for(let _0x4bd29d of _0x3afb22){const _0x2bca0c=await _0x1b606c['waitForSelector'](IG_SEARCH_INPUT);await _0x2bca0c['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x1b606c['type'](IG_SEARCH_INPUT,_0x4bd29d,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x25b5e9=0x1;while(_0x25b5e9!=0x14){console['log']('Schleife');try{let _0x33254d=IG_NAME_SPAN_PART1+_0x25b5e9+IG_USERNAME_SPAN_PART2;const _0x40f8a8=await _0x1b606c['waitForSelector'](_0x33254d),_0x4f796e=await _0x1b606c['evaluate'](_0x5272da=>_0x5272da['innerHTML'],_0x40f8a8);await delay(0xc8,0x1f4);if(_0x4f796e==_0x4bd29d){let _0x324129=IG_NAME_SPAN_PART1+_0x25b5e9+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x49e33f=await _0x1b606c['waitForSelector'](_0x324129);let _0x23cd2e=await _0x1b606c['evaluate'](_0x5c57b2=>_0x5c57b2['innerHTML'],_0x49e33f);const _0x10e73d=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x55cc84=_0x23cd2e['match'](_0x10e73d);_0x55cc84?_0x23cd2e=_0x55cc84[0x1]['trim']():_0x23cd2e=_0x23cd2e['trim']();_0x23cd2e['includes']('•')&&(_0x23cd2e=_0x23cd2e['substring'](0x0,_0x23cd2e['indexOf']('•')-0x1));const _0x419e06='UPDATE\x20'+_0x31057f+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x419e06,[_0x23cd2e,_0x4f796e],function(_0x5e2ed5){_0x5e2ed5&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x5e2ed5['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x25b5e9++;}catch(_0x4a8957){const _0x2a22b8='UPDATE\x20'+_0x31057f+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x2a22b8,['',_0x4bd29d],function(_0x4eea2e){_0x4eea2e&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x4eea2e['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x4a8957);break;}}_0x259301&&_0x259301();}await _0x4ec4be['click']();}catch(_0x46f08a){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x46f08a);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0xe3079c,_0xe4bf82)=>{const _0x51e803='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x51e803,[],(_0x4eb77b,_0xe5cab)=>{_0x4eb77b?_0xe4bf82(_0x4eb77b):_0xe3079c(_0xe5cab);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x4cb598,_0x1ccff2)=>{const _0x404fbe='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x404fbe,[],async(_0x23198e,_0x51c1f9)=>{if(_0x23198e)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x23198e['message']),_0x1ccff2({'status':'error','message':_0x23198e['message']});else try{const _0x142d7c=await Promise['all'](_0x51c1f9['map'](_0x222ee2=>{return new Promise(_0x3d3500=>{if(!_0x222ee2['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x222ee2['campaign_name']),_0x3d3500({'campaign_name':_0x222ee2['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x44e9d2='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x222ee2['list_id'],_0x511263='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x222ee2['list_id']+'\x22';db['get'](_0x44e9d2,[],(_0x45850a,_0x4fa2e8)=>{_0x45850a?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x222ee2['campaign_name']+':',_0x45850a['message']),_0x3d3500({'campaign_name':_0x222ee2['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x511263,[],(_0x1f1898,_0x5967c1)=>{_0x1f1898?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x222ee2['campaign_name']+':',_0x1f1898['message']),_0x3d3500({'campaign_name':_0x222ee2['campaign_name'],'lead_count':_0x4fa2e8?_0x4fa2e8['lead_count']:0x0,'contacted_count':'N/A'})):_0x3d3500({'campaign_name':_0x222ee2['campaign_name'],'lead_count':_0x4fa2e8?_0x4fa2e8['lead_count']:0x0,'contacted_count':_0x5967c1?_0x5967c1['contacted_count']:0x0});});});});}));_0x4cb598({'status':'success','campaigns':_0x142d7c});}catch(_0x4a24dc){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x4a24dc),_0x1ccff2({'status':'error','message':_0x4a24dc['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x1ebd44,_0x4f443f)=>{return new Promise((_0x2ffbd0,_0x33820e)=>{const _0xf02cb='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0xf02cb,[_0x4f443f],(_0xc7ff28,_0x291651)=>{_0xc7ff28?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0xc7ff28),_0x33820e(_0xc7ff28)):(console['log']('ROWS'),console['log'](_0x291651),debugDatabaseContents(),_0x2ffbd0(_0x291651));});});});const showTableContents=_0x2a2522=>{return new Promise((_0x35446e,_0x555dc4)=>{const _0x3e8238='SELECT\x20*\x20FROM\x20'+_0x2a2522+';';campaignDB['all'](_0x3e8238,(_0x15d70e,_0x13caf7)=>{_0x15d70e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x2a2522+':',_0x15d70e),_0x555dc4(_0x15d70e)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x2a2522+':',_0x13caf7),_0x35446e({'status':'success','message':_0x13caf7}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x49788b){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x49788b);}}ipcMain['handle']('create-campaign',async(_0x5ca50a,_0x5bc434)=>{return new Promise((_0x4af52b,_0x95982c)=>{const _0x476455='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x476455,[String(_0x5bc434)],function(_0x4ea34b){_0x4ea34b?_0x95982c(_0x4ea34b):_0x4af52b({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x3ce257,_0x2c6d4b)=>{return new Promise((_0x42c39d,_0x55b822)=>{const _0x103cda='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x103cda,[_0x2c6d4b],function(_0x54e86d){_0x54e86d?_0x55b822(_0x54e86d):_0x42c39d({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x381a75,_0x5a87d3,_0x325e81,_0x26a007,_0x9b155a,_0xb8720c,_0x31d907,_0x443ed1)=>{const _0x7b6961=await createMessageID(_0x9b155a);return new Promise((_0x25b123,_0x147dc1)=>{if(!_0x5a87d3||!_0x325e81||!_0x26a007||!_0x7b6961||!_0xb8720c)return _0x147dc1({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x7b6961);const _0x2d6a22='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x2d6a22,[_0x325e81,_0x26a007,_0x7b6961,_0xb8720c,_0x31d907,_0x443ed1,_0x5a87d3],function(_0x2a89f6){if(_0x2a89f6)_0x147dc1({'status':'error','message':_0x2a89f6['message']});else this['changes']===0x0?_0x147dc1({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x25b123({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0xe248a,_0x5d48e4,_0x3f7807,_0xbd218e,_0x5a8269)=>{return new Promise((_0x473d0c,_0x4ffd73)=>{const _0x26ed9c='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x26ed9c,[_0x5d48e4,_0x3f7807,_0xbd218e,_0x5a8269],function(_0x168646){return _0x168646?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x168646['message']),_0x4ffd73('insert-dm-response',{'success':![],'message':_0x168646['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x473d0c('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x5890a2=>{return new Promise((_0x3a5f5a,_0x3bc252)=>{const _0x42a8ea='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x42a8ea,[_0x5890a2],(_0x2fac3e,_0x1a5c9a)=>{if(_0x2fac3e)_0x3bc252({'status':'error','message':_0x2fac3e['message']});else{if(_0x1a5c9a)_0x3a5f5a(_0x1a5c9a['message_id']);else{const _0x519235='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x519235,[_0x5890a2],function(_0x22cb69){_0x22cb69?_0x3bc252({'status':'error','message':_0x22cb69['message']}):_0x3a5f5a(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x17a1af,_0x233b36)=>{return new Promise((_0x3f5c9d,_0x1cbe8d)=>{const _0x4f2dda='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x233b36;db['get'](_0x4f2dda,(_0x1165e1,_0x24fc2c)=>{_0x1165e1?_0x1cbe8d({'status':'error','message':_0x1165e1['message']}):_0x3f5c9d({'status':'success','count':_0x24fc2c['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x595cff,_0x5734cb){try{const _0x1b7fb7=await new Promise((_0x4e6bd3,_0x5f49ac)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5734cb],(_0x24d669,_0x501cbc)=>{if(_0x24d669)_0x5f49ac(_0x24d669);else{if(_0x501cbc['length']>0x0){let _0x492650=JSON['parse'](_0x501cbc[0x0]['cookie']);console['log'](_0x492650),_0x4e6bd3(_0x492650);}else _0x5f49ac(new Error('User\x20with\x20username\x20'+_0x5734cb+'\x20does\x20not\x20exist.'));}});});await _0x595cff['setCookie'](..._0x1b7fb7),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x363181){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x363181);}}async function saveCookiesForUser(_0x2bb2c8,_0x5c7551){try{const _0x74d2c7=await _0x2bb2c8['cookies']();if(!_0x74d2c7||_0x74d2c7['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x5c7551);const _0x416460=JSON['stringify'](_0x74d2c7);if(_0x416460['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x5c7551);return new Promise((_0x5e138c,_0x780da7)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x5c7551],(_0x194323,_0x2f044e)=>{if(_0x194323)return console['error']('Error\x20checking\x20user\x20existence:',_0x194323),_0x780da7(_0x194323);if(_0x2f044e){const _0x3339cf=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x3339cf['run'](_0x416460,_0x5c7551,function(_0x4df201){return _0x4df201?(console['error']('Error\x20updating\x20cookies:',_0x4df201),_0x780da7(_0x4df201)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x5c7551),_0x5e138c());});}else{const _0x18a458=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x18a458['run'](_0x5c7551,_0x416460,function(_0x4d8a07){return _0x4d8a07?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x4d8a07),_0x780da7(_0x4d8a07)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x5c7551),_0x5e138c());});}});});}catch(_0x22ab09){console['error']('Error\x20fetching\x20cookies:',_0x22ab09);throw _0x22ab09;}}async function createUserIfNotExists(_0x2e6a48){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x2e6a48],(_0x3d5df9,_0x44388b)=>{if(_0x3d5df9){console['error']('Error\x20checking\x20user\x20existence:',_0x3d5df9);throw _0x3d5df9;}else{if(!_0x44388b){const _0x13c982=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x13c982['run'](_0x2e6a48,function(_0x20be99){_0x20be99?console['error']('Error\x20inserting\x20new\x20user:',_0x20be99):console['log']('New\x20user\x20created:',_0x2e6a48);});}else console['log']('User\x20already\x20exists:',_0x2e6a48);}});}catch(_0x184f45){console['error']('Error\x20creating\x20user:',_0x184f45);throw _0x184f45;}}ipcMain['handle']('create-relation',async(_0x594f99,_0x4a475a)=>{return new Promise((_0x198b4a,_0x1abf26)=>{const _0x46a0f8='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x4a475a+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x46a0f8,function(_0x10386a){_0x10386a?_0x1abf26(_0x10386a):_0x198b4a({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x15b3c7,_0x208111)=>{return console['log']('droping\x20table'+_0x208111),new Promise((_0xc051d,_0x445a23)=>{const _0x49e485='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x208111;console['log']('droping\x20table'+_0x208111),db['run'](_0x49e485,function(_0x4fe3e1){_0x4fe3e1?_0x445a23(_0x4fe3e1):_0xc051d({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x3a5254=>{return new Promise((_0x549521,_0x22be10)=>{const _0x17c6a5='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x17c6a5,[],(_0x4c3641,_0x58730f)=>{_0x4c3641?_0x22be10(_0x4c3641):_0x549521(_0x58730f['map'](_0x3c2ef6=>_0x3c2ef6['name']));});});}),ipcMain['handle']('add-user',async(_0x387674,_0x59f2f6,_0x3256fc)=>{return new Promise(_0x4e0076=>{const _0x35a6b4=db['prepare']('INSERT\x20INTO\x20'+_0x3256fc+'\x20(username)\x20VALUES\x20(?)');_0x35a6b4['run'](_0x59f2f6,function(_0x4ac4a7){_0x4ac4a7?console['log']('error\x20in\x20add-user:'+_0x4ac4a7):_0x4e0076({'status':'success','id':this['lastID']});}),_0x35a6b4['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x53d228,_0x970782)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x321013,_0x38d77d)=>{if(_0x321013)_0x970782(_0x321013);else{_0x53d228({'status':'success','users':_0x38d77d});for(_0x38d77d of _0x38d77d){console['log'](_0x38d77d['username']);}}});});}),ipcMain['handle']('get-data',async(_0xf282e,_0x50060e)=>{return new Promise((_0x1dd61a,_0x1897c6)=>{const _0x633948='SELECT\x20*\x20FROM\x20'+_0x50060e;console['log'](_0x633948),db['all'](_0x633948,[],(_0x592f0d,_0x465c33)=>{_0x592f0d?_0x1897c6(_0x592f0d):_0x1dd61a(_0x465c33);});});}),ipcMain['handle']('get-accounts',async _0x4ed463=>{return new Promise((_0x116f0b,_0x38280e)=>{const _0x3edcc8='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x3edcc8),igaccountsDB['all'](_0x3edcc8,[],(_0x32ecd0,_0x27a5f2)=>{_0x32ecd0?_0x38280e(_0x32ecd0):_0x116f0b(_0x27a5f2);});});}),ipcMain['handle']('get-targets',async(_0x2d7aa2,_0x1e94eb)=>{return getTargetProfiles(_0x1e94eb);}),ipcMain['handle']('delete-user',async(_0x11b43e,_0x2c270d,_0x28b271)=>{return new Promise((_0x12450d,_0x4825aa)=>{const _0x40d622=db['prepare']('DELETE\x20FROM\x20'+_0x28b271+'\x20WHERE\x20username\x20=\x20?');_0x40d622['run'](_0x2c270d,function(_0x38aae4){_0x38aae4?_0x4825aa(_0x38aae4):_0x12450d({'status':'success','changes':this['changes']});}),_0x40d622['finalize']();});}),ipcMain['handle']('delete-account',async(_0x3fca5d,_0x101d77)=>{const _0x11411d=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x11411d['run'](_0x101d77,function(_0x285d67){_0x285d67&&console['log'](_0x285d67);}),_0x11411d['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x450cd0,_0x388ba0)=>{const _0x5744b1='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x5744b1,[],(_0xb62f48,_0x3cb989)=>{_0xb62f48?_0x388ba0({'status':'error','message':_0xb62f48['message']}):_0x450cd0({'status':'success','contactedCount':_0x3cb989['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x10076e,_0x22d820)=>{const _0x561cf0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x561cf0,[],(_0x40fb2b,_0x53d7db)=>{_0x40fb2b?_0x22d820({'status':'error','message':_0x40fb2b['message']}):_0x10076e({'status':'success','contactedCount':_0x53d7db['contactedCount']});});});});function exportDatabase(_0x704481){return new Promise((_0x139371,_0x5cbf29)=>{const _0x4c6dfa='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x704481+'\x0a\x20\x20\x20\x20';db['all'](_0x4c6dfa,[],async(_0xd231cf,_0x368ff3)=>{if(_0xd231cf){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0xd231cf['message']),_0x5cbf29(_0xd231cf);return;}if(!_0x368ff3||_0x368ff3['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x139371();return;}const _0x202e43=XLSX['utils']['json_to_sheet'](_0x368ff3),_0x3f1f75=XLSX['utils']['sheet_to_csv'](_0x202e43);try{const {canceled:_0x9b23f3,filePath:_0x2e2a88}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x704481+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x9b23f3||!_0x2e2a88){console['log']('Speichern\x20abgebrochen.'),_0x139371();return;}fs['writeFile'](_0x2e2a88,_0x3f1f75,'utf8',_0x27fe6c=>{_0x27fe6c?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x27fe6c['message']),_0x5cbf29(_0x27fe6c)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2e2a88),_0x139371());});}catch(_0x238fc9){console['error']('Fehler\x20im\x20Speicherdialog:',_0x238fc9),_0x5cbf29(_0x238fc9);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x181686,_0x6b627e)=>{shell['openExternal'](_0x6b627e);});