const {app,BrowserWindow,ipcMain,dialog}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),sqlite3=require('sqlite3')['verbose']();function createWindow(){const _0x525d67=new BrowserWindow({'width':0x320,'height':0x258,'webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x525d67['loadFile'](path['join'](__dirname,'index.html'));}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x1073b5){var _0x368cbd=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x499dbf){console['log']('window\x20id:'+_0x499dbf['id']),_0x499dbf['id']>0x1&&(_0x368cbd=!![]);}),console['log']('child\x20opened\x20='+_0x368cbd);if(!_0x368cbd){const _0xf35e9d=new BrowserWindow({'width':0x320,'height':0x258,'webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0xf35e9d['loadFile'](_0x1073b5['url']);}else console['log']('child\x20window\x20opened\x20already');}let browser=null,page=null;async function getBrowserPage(){let _0x4525aa='';if(process['platform']==='darwin')_0x4525aa='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome';else{if(process['platform']==='win32')_0x4525aa='chromium_local/chrome-win/chrome.exe';else{if(process['platform']==='linux'){}}}return(browser===null||page['isClosed']())&&(browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'executablePath':_0x4525aa})),(page===null||page['isClosed']())&&(page=await browser['newPage'](),page['setDefaultNavigationTimeout'](0x1d4c),page['setDefaultTimeout'](0x1d4c)),page;}ipcMain['on']('login',async(_0x4217e7,_0x5dc3f6,_0x31e3e0)=>{const _0x407e72=await getBrowserPage();await _0x407e72['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x407e72,_0x5dc3f6,_0x31e3e0),setTimeout(async()=>{await browser['close']();},0x1388);}),ipcMain['handle']('sendMessage',async(_0x4cb4dc,_0x375043,_0x3087cd,_0x46dec1,_0x37841d)=>{const _0x5708bb=await getBrowserPage();return console['log']('send\x20Message\x20gestartet'),console['log'](_0x375043),new Promise((_0x217d8a,_0x4d47b2)=>{send_message(_0x5708bb,_0x375043,_0x3087cd,_0x46dec1,_0x37841d)['then'](_0x38bdc1=>_0x217d8a(_0x38bdc1))['catch'](_0xc59e57=>_0x4d47b2(_0xc59e57));});}),ipcMain['on']('fetch_followers',async(_0x3f11a2,_0x39eb46,_0x220948,_0x1099c1,_0x2c6bc5)=>{const _0x4abf8b=await getBrowserPage();await fetch_followers_from_account(_0x4abf8b,_0x39eb46,_0x220948,_0x1099c1,_0x2c6bc5);}),ipcMain['on']('fetch_likes',async(_0x1a938a,_0x48c29e,_0x331d25,_0x3db02b,_0x3f03df)=>{const _0x50baf7=await getBrowserPage();await fetch_likers_from_post(_0x50baf7,_0x48c29e,_0x331d25,_0x3db02b,_0x3f03df);}),ipcMain['on']('fetch_comments',async(_0x8280c6,_0x44f061,_0x4cb7af,_0x37492e,_0x270ebe)=>{const _0x45d099=await getBrowserPage();await fetch_comments_from_post(_0x45d099,_0x44f061,_0x4cb7af,_0x37492e,_0x270ebe);});function getRnd(_0x5be5d3,_0xd41def){return Math['random']()*(_0xd41def-_0x5be5d3+0x1)+_0x5be5d3;}function delay(_0x49bc16,_0x4c63a2){let _0x41ec9f=getRnd(_0x49bc16,_0x4c63a2);return new Promise(function(_0x222be6){setTimeout(_0x222be6,_0x41ec9f);});}async function scroll(_0x338dea,_0x18af07,_0x1e24a3=0x2){const _0x38abd2=await _0x338dea['waitForSelector'](_0x18af07);for(let _0x2d724b=0x0;_0x2d724b<_0x1e24a3;_0x2d724b++){console['log']('Scrolling\x20'+_0x2d724b),await _0x338dea['evaluate'](_0x59a8dd=>{const _0x5cb7cb=document['querySelector'](_0x59a8dd);_0x5cb7cb&&_0x5cb7cb['scrollBy'](0x0,0x190);},_0x18af07),await delay(0x320,0x5dc);}}async function saveCookies(_0x2be56e){let _0x35c5d2=await _0x2be56e['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x35c5d2,null,0x2));}async function notificationClear(_0x443287){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x443287['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x443287['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x2d47de){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x2d47de);}}async function getTargetProfiles(_0x4afdcc){return new Promise((_0x3a564b,_0x391889)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x4afdcc,(_0x31420a,_0x501ed9)=>{_0x31420a?_0x391889(_0x31420a):_0x3a564b(_0x501ed9);});});}async function login(_0x2ffde9,_0x4f30d7,_0x230226){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x2ffde9,_0x4f30d7),await createUserIfNotExists(_0x4f30d7,_0x230226);}catch(_0x42f714){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x42f714);}try{await _0x2ffde9['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x2ffde9['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x2ffde9['click']('button._a9--._ap36._a9_0');}catch(_0x1772b5){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x2ffde9['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x2ffde9['type']('input[name=\x27username\x27]',_0x4f30d7,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x2ffde9['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x2ffde9['type']('input[name=\x27password\x27]',_0x230226,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x2ffde9['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x2ffde9['click']('button[type=\x27submit\x27]');}catch(_0x147f2f){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x2ffde9),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x2ffde9,_0x4f30d7);}catch(_0x28004c){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x28004c);}}catch(_0x273c24){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x273c24);}}async function send_message(_0x170971,_0x51cb7e,_0x4f9642,_0xcaee88,_0x4e5c9b){console['log'](_0x4e5c9b),console['log']('Anfang'),console['log']('Counter:\x20'+_0xcaee88);if(_0xcaee88==0x0){try{console['log'](_0x4e5c9b),await login(_0x170971,_0x4e5c9b['username'],_0x4e5c9b['password']);}catch(_0x2264d5){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2264d5);return;}await _0x170971['goto']('https://www.instagram.com/direct/inbox/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x170971);}try{try{const _0x3cefd0='div.x1i10hfl.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.x6s0dn4.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x1ypdohk.x78zum5.xl56j7k.x1y1aw1k.x1sxyh0.xwib8y2.xurb0ha.xcdnw81';await delay(0xfa0,0x1d4c),await _0x170971['waitForSelector'](_0x3cefd0),await _0x170971['click'](_0x3cefd0),console['log']('Message-Button\x20geklickt'),console['log'](_0x51cb7e+'\x20'+_0x4f9642),await delay(0xfa0,0x1d4c);try{const _0x2a5e41='input[name=\x22queryBox\x22]',_0x4973a7='body\x20>\x20div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x10l6tqk.x17qophe.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.x1q0g3np.x1a02dak.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20input';await _0x170971['waitForSelector'](_0x4973a7),await _0x170971['click'](_0x4973a7),await delay(0xfa0,0x1d4c),await _0x170971['waitForSelector'](_0x2a5e41),await _0x170971['click'](_0x2a5e41),await delay(0xfa0,0x1d4c),await _0x170971['type'](_0x2a5e41,_0x51cb7e,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),console['log']('Account\x20Name\x20eingefügt');const _0x5ae6db='body\x20>\x20div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x10l6tqk.x17qophe.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div.xjp7ctv\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(',_0x2e649a=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1pi30zi.x1swvt13.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z.x78zum5.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span';let _0x3bce1d=0x1;try{while(_0x3bce1d!=0x14){console['log']('Schleife');let _0x4c3834=_0x5ae6db+_0x3bce1d+_0x2e649a;const _0x15e754=await _0x170971['waitForSelector'](_0x4c3834),_0x942c7=await _0x170971['evaluate'](_0x48c304=>_0x48c304['innerHTML'],_0x15e754);console['log'](_0x942c7+'\x20'+_0x51cb7e),delay(0x3e8,0xbb8);if(_0x942c7==_0x51cb7e){console['log']('Account\x20gefunden'),await _0x170971['click'](_0x4c3834);break;}_0x3bce1d++;}try{await delay(0xbb8,0x1388);const _0x1d1184=await _0x170971['waitForSelector']('div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.x972fbf.xcfux6l.x1qhh985.xm0m39n.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.xexx8yu.x18d9i69.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1lq5wgf.xgqcy7u.x30kzoy.x9jhf4c.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x9bdzbf.x1ypdohk.x78zum5.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x1n2onr6.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xn3w4p2.x5ib6vp.xc73u3c.x1tu34mt.xzloghq');console['log'](_0x1d1184),await delay(0xbb8,0x1388),await _0x1d1184['click']();try{await delay(0xbb8,0x1388);const _0x110749=await _0x170971['waitForSelector']('div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1i64zmx.xw3qccf.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f.notranslate');await _0x110749['type'](_0x4f9642,{'delay':getRnd(0x50,0x78)}),await delay(0xbb8,0x1388);try{const _0x180fd4=await _0x170971['waitForSelector']('div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.xfs2ol5[role=\x22button\x22][tabindex=\x220\x22]');await _0x180fd4['click'](),await delay(0xbb8,0x1388);}catch(_0x14d69a){console['log']('Message-Button\x20nicht\x20geklickt:\x20'+_0x14d69a);}}catch(_0x114b9c){console['log']('Chat-Fenster\x20nicht\x20gefunden:\x20'+_0x114b9c);}}catch(_0x3fd72a){console['log']('error:\x20'+_0x3fd72a);}}catch(_0x33bb3f){console['log']('User\x20nicht\x20gefunden:'+_0x33bb3f);}}catch(_0x34166e){console['log']('DM-Fenster\x20nicht\x20gefunden:'+_0x34166e);}}catch(_0x46b0eb){console['log']('Message-Button\x20nicht\x20geklickt:'+_0x46b0eb);}}catch(_0x2fcbb5){console['log']('Nachricht\x20senden\x20fehlgeschlagen:\x20'+_0x2fcbb5);}console['log']('Ende');}async function fetch_followers_from_account(_0x5aeacb,_0x3f266a,_0x37fbc6,_0x3b4d70,_0x5e0a17){try{await login(_0x5aeacb,_0x5e0a17['username'],_0x5e0a17['password']);}catch(_0x38b4dd){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x38b4dd);}let _0x3960d4=0x0;try{await _0x5aeacb['goto']('https://www.instagram.com/'+_0x3f266a+'/'),await notificationClear(_0x5aeacb);try{if(_0x37fbc6<=0x0){const _0x1928be=await _0x5aeacb['waitForSelector']('div.x9f619.x1n2onr6\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span');await delay(0x12c,0x320);const _0x31146b=await _0x5aeacb['evaluate'](_0x141e12=>_0x141e12['innerHTML'],_0x1928be);_0x3960d4=Math['ceil'](_0x31146b/0x4);}else _0x3960d4=Math['ceil'](_0x37fbc6/0x4);let _0x113760=await _0x5aeacb['waitForSelector']('div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a');await delay(0xbb8,0x1388),await _0x113760['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x3f266a+'\x20gesichtet');}catch(_0x424e88){console['log']('Follower\x20Liste\x20von\x20'+_0x3f266a+'\x20nicht\x20gefunden:'+_0x424e88);}}catch(_0x5eaab0){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5eaab0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x3960d4),await scroll(_0x5aeacb,'div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1sxyh0.xurb0ha.x1uhb9sk.x6ikm8r.x1rife3k.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1l90r2v',_0x3960d4),await _0x5aeacb['waitForSelector']('a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd');const _0x45bf29=await _0x5aeacb['$$']('a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd');_0x37fbc6<=0x0&&(_0x37fbc6=_0x45bf29['length']);for(let _0x4eec70=0x0;_0x4eec70<_0x45bf29['length']&&_0x4eec70<_0x37fbc6;_0x4eec70++){console['log'](await _0x45bf29[_0x4eec70]['evaluate'](_0x4b2d66=>_0x4b2d66['textContent']));const _0x535979=await db['prepare']('INSERT\x20INTO\x20'+_0x3b4d70+'\x20(username)\x20VALUES\x20(?)');await _0x535979['run'](await _0x45bf29[_0x4eec70]['evaluate'](_0x343166=>_0x343166['textContent']),function(_0x4f8bed){_0x4f8bed&&console['log']('error\x20in\x20add-user:'+_0x4f8bed);}),await _0x535979['finalize']();}await dialog['showMessageBox']({'type':'info','buttons':['OK'],'title':'Information','message':'Scraping\x20finished!'});}catch(_0x3b24d2){console['log']('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x3f266a+'\x20nicht\x20gefunden:'+_0x3b24d2);}}async function fetch_likers_from_post(_0x340266,_0x3b5605,_0x818f85,_0x380ea8,_0xf6e84a){try{await login(_0x340266,_0xf6e84a['username'],_0xf6e84a['password']);}catch(_0x26bdab){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x26bdab);return;}try{let _0x1ae129=_0x3b5605['substring'](0x0,_0x3b5605['lastIndexOf']('/')),_0x13eae1=_0x1ae129+'/liked_by';console['log'](_0x13eae1),await _0x340266['goto'](_0x13eae1),await delay(0x7d0,0xfa0),await notificationClear(_0x340266),await delay(0xc8,0x1f4);let _0x4ae82f='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd';await _0x340266['waitForSelector'](_0x4ae82f),await delay(0x1f4,0x320);const _0xaaa2a4=await _0x340266['$$'](_0x4ae82f);await delay(0x1f4,0x320),console['log'](_0xaaa2a4['length']);let _0x3464f8=path['join'](__dirname,'/likers.csv');_0x818f85<=0x0&&(_0x818f85=_0xaaa2a4['length']);try{for(let _0x36b7e8=0x0;_0x36b7e8<_0xaaa2a4['length']&&_0x36b7e8<_0x818f85;_0x36b7e8++){console['log'](await _0xaaa2a4[_0x36b7e8]['evaluate'](_0x231ae9=>_0x231ae9['textContent']));try{const _0x1579e8=await db['prepare']('INSERT\x20INTO\x20'+_0x380ea8+'\x20(username)\x20VALUES\x20(?)');await _0x1579e8['run'](await _0xaaa2a4[_0x36b7e8]['evaluate'](_0x1017bc=>_0x1017bc['textContent']),function(_0x4c8f8d){_0x4c8f8d&&console['log']('error\x20in\x20add-user:'+_0x4c8f8d);}),await _0x1579e8['finalize']();}catch(_0xade18c){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x36b7e8+'\x20:\x20'+_0xade18c);}}await dialog['showMessageBox']({'type':'info','buttons':['OK'],'title':'Information','message':'Scraping\x20finished!'});}catch(_0x47bb1c){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');}}catch(_0xaad12f){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0xaad12f);}}async function fetch_comments_from_post(_0x449c7e,_0x26b181,_0x1d02e5,_0x2a7d73,_0x138aac){try{await login(_0x449c7e,_0x138aac['username'],_0x138aac['password']);}catch(_0x5b768c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5b768c);return;}try{console['log'](_0x26b181),await _0x449c7e['goto'](_0x26b181),await delay(0x7d0,0xfa0),await notificationClear(_0x449c7e),await delay(0xc8,0x1f4);const _0x1d7865='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6';let _0x1853d0;if(_0x1d02e5<=0x0){const _0x2956e0=await _0x449c7e['waitForSelector']('div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span');await delay(0x12c,0x320);let _0x7f57d6=await _0x449c7e['evaluate'](_0x4f73c4=>_0x4f73c4['innerHTML'],_0x2956e0),_0x4d8514=String(_0x7f57d6)['replace'](/[^0-9]/g,''),_0x17e96a=Number(_0x4d8514)/0x14;_0x1853d0=Math['ceil'](_0x17e96a/0x3);}else _0x1853d0=Math['ceil'](_0x1d02e5/0x3);console['log']('Auto-scrolls:\x20'+_0x1853d0),await scroll(_0x449c7e,_0x1d7865,_0x1853d0);try{const _0xc93033='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span';await _0x449c7e['waitForSelector'](_0xc93033),await delay(0x1f4,0x320);const _0x39d151=await _0x449c7e['$$'](_0xc93033);console['log'](_0x39d151),await delay(0xc8,0x1f4);try{for(let _0x3bec89=0x0;_0x3bec89<_0x39d151['length'];_0x3bec89++){_0x39d151[_0x3bec89]['click'](),await delay(0x320,0x5dc);}}catch(_0x428430){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x428430);}}catch(_0x3b9e3f){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x430765='span._ap3a._aaco._aacw._aacx._aad7._aade';await _0x449c7e['waitForSelector'](_0x430765),await delay(0x1f4,0x320);const _0x5e66a5=await _0x449c7e['$$'](_0x430765);let _0x4dca1f=path['join'](__dirname,'/comments.csv');_0x1d02e5<=0x0&&(_0x1d02e5=_0x5e66a5['length']);console['log']('fetch_limit:\x20'+_0x1d02e5),console['log']('comments_len:\x20'+_0x5e66a5['length']),_0x1d02e5++;try{for(let _0x511eb3=0x1;_0x511eb3<_0x5e66a5['length']&&_0x511eb3<_0x1d02e5;_0x511eb3++){try{console['log'](await _0x5e66a5[_0x511eb3]['evaluate'](_0x2cdb6d=>_0x2cdb6d['textContent']));const _0x22ec03=await db['prepare']('INSERT\x20INTO\x20'+_0x2a7d73+'\x20(username)\x20VALUES\x20(?)');await _0x22ec03['run'](await _0x5e66a5[_0x511eb3]['evaluate'](_0x11bc3c=>_0x11bc3c['textContent']),function(_0x403d9e){_0x403d9e&&console['log']('error\x20in\x20add-user:'+_0x403d9e);}),await _0x22ec03['finalize']();}catch(_0x5d5010){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x511eb3+'\x20:\x20'+_0x5d5010);}}await dialog['showMessageBox']({'type':'info','buttons':['OK'],'title':'Information','message':'Scraping\x20finished!'});}catch(_0x2a83dc){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');}}catch(_0x645cb6){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x645cb6);}}const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20password\x20TEXT,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x486b2a,_0x1c54a2){try{const _0x45f503=await new Promise((_0x38edf0,_0x34fe49)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x1c54a2],(_0x3002e6,_0x12e8cd)=>{if(_0x3002e6)_0x34fe49(_0x3002e6);else{if(_0x12e8cd['length']>0x0){let _0x1723a9=JSON['parse'](_0x12e8cd[0x0]['cookie']);console['log'](_0x1723a9),_0x38edf0(_0x1723a9);}else _0x34fe49(new Error('User\x20with\x20username\x20'+_0x1c54a2+'\x20does\x20not\x20exist.'));}});});await _0x486b2a['setCookie'](..._0x45f503),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x151d92){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x151d92);}}async function saveCookiesForUser(_0x507bed,_0x344740){try{let _0xa787f4=await _0x507bed['cookies']();_0xa787f4=JSON['stringify'](_0xa787f4),igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x344740],(_0x43bcaa,_0x970e04)=>{if(_0x43bcaa){console['error']('Error\x20checking\x20user\x20existence:',_0x43bcaa);throw _0x43bcaa;}else{if(_0x970e04){const _0x199ff2=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x199ff2['run'](_0xa787f4,_0x344740,function(_0x3046c2){_0x3046c2?console['error']('Error\x20updating\x20cookies:',_0x3046c2):console['log']('Cookies\x20updated\x20for\x20user:',_0x344740);});}else{const _0x5cc653=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x5cc653['run'](_0x344740,_0xa787f4,function(_0x3360b8){_0x3360b8?console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x3360b8):console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x344740);});}}});}catch(_0x2c395c){console['error']('Error\x20fetching\x20cookies:',_0x2c395c);throw _0x2c395c;}}async function createUserIfNotExists(_0x1c4cd4,_0x2856b5){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x1c4cd4],(_0x2168e0,_0x25171b)=>{if(_0x2168e0){console['error']('Error\x20checking\x20user\x20existence:',_0x2168e0);throw _0x2168e0;}else{if(!_0x25171b){const _0x598fe1=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20password)\x20VALUES\x20(?,\x20?)');_0x598fe1['run'](_0x1c4cd4,_0x2856b5,function(_0x85a159){_0x85a159?console['error']('Error\x20inserting\x20new\x20user:',_0x85a159):console['log']('New\x20user\x20created:',_0x1c4cd4);});}else console['log']('User\x20already\x20exists:',_0x1c4cd4);}});}catch(_0x296ed6){console['error']('Error\x20creating\x20user:',_0x296ed6);throw _0x296ed6;}}ipcMain['handle']('create-relation',async(_0x32aa2a,_0x49e924)=>{return new Promise((_0x4bb31b,_0xa28b2b)=>{const _0x2005a3='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x49e924+'\x20(username\x20TEXT\x20PRIMARY\x20KEY)';db['run'](_0x2005a3,function(_0x41e1c6){_0x41e1c6?_0xa28b2b(_0x41e1c6):_0x4bb31b({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x2e9859,_0x234060)=>{return console['log']('droping\x20table'+_0x234060),new Promise((_0x48e628,_0x494a9d)=>{const _0x1b2840='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x234060;console['log']('droping\x20table'+_0x234060),db['run'](_0x1b2840,function(_0x257f49){_0x257f49?_0x494a9d(_0x257f49):_0x48e628({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x2d5b81=>{return new Promise((_0x7c5a8a,_0x5834f7)=>{const _0x4bb4c6='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x4bb4c6,[],(_0x5e4e05,_0x1c9e97)=>{_0x5e4e05?_0x5834f7(_0x5e4e05):_0x7c5a8a(_0x1c9e97['map'](_0x18299f=>_0x18299f['name']));});});}),ipcMain['handle']('add-user',async(_0x32a097,_0x4d12c7,_0x148d72)=>{return new Promise(_0x16d685=>{const _0x3405d7=db['prepare']('INSERT\x20INTO\x20'+_0x148d72+'\x20(username)\x20VALUES\x20(?)');_0x3405d7['run'](_0x4d12c7,function(_0x66a9ca){_0x66a9ca?console['log']('error\x20in\x20add-user:'+_0x66a9ca):_0x16d685({'status':'success','id':this['lastID']});}),_0x3405d7['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x6b01a1,_0x3d8e69)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x30f90f,_0x4f3cc3)=>{if(_0x30f90f)_0x3d8e69(_0x30f90f);else{_0x6b01a1({'status':'success','users':_0x4f3cc3});for(_0x4f3cc3 of _0x4f3cc3){console['log'](_0x4f3cc3['username']);}}});});}),ipcMain['handle']('get-data',async(_0xcbf599,_0x5bd8a1)=>{return new Promise((_0x36fcbe,_0x43e70b)=>{const _0xe00837='SELECT\x20*\x20FROM\x20'+_0x5bd8a1;console['log'](_0xe00837),db['all'](_0xe00837,[],(_0x40960d,_0xb54237)=>{_0x40960d?_0x43e70b(_0x40960d):_0x36fcbe(_0xb54237);});});}),ipcMain['handle']('get-accounts',async _0x4388ad=>{return new Promise((_0x3db7df,_0x32c0ad)=>{const _0x5138f1='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x5138f1),igaccountsDB['all'](_0x5138f1,[],(_0x14094d,_0x301aeb)=>{_0x14094d?_0x32c0ad(_0x14094d):_0x3db7df(_0x301aeb);});});}),ipcMain['handle']('get-targets',async(_0x40d606,_0x24aba6)=>{return getTargetProfiles(_0x24aba6);}),ipcMain['handle']('delete-user',async(_0x3940e3,_0x58c2f7,_0x2a3e51)=>{return new Promise((_0x2a180f,_0x5a2229)=>{const _0x8de879=db['prepare']('DELETE\x20FROM\x20'+_0x2a3e51+'\x20WHERE\x20username\x20=\x20?');_0x8de879['run'](_0x58c2f7,function(_0x3aed2b){_0x3aed2b?_0x5a2229(_0x3aed2b):_0x2a180f({'status':'success','changes':this['changes']});}),_0x8de879['finalize']();});}),ipcMain['handle']('delete-account',async(_0xbe58c6,_0x45dec1)=>{const _0xcec6a=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0xcec6a['run'](_0x45dec1,function(_0x1a2081){_0x1a2081&&console['log'](_0x1a2081);}),_0xcec6a['finalize']();});