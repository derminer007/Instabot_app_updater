const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x23db28,_0x1ea12e){try{const _0x19e141=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x1ea12e},'body':JSON['stringify']({'clearname':_0x23db28})});if(!_0x19e141['ok']){const _0x2a29cf=await _0x19e141['text']();throw new Error(_0x19e141['status']+':\x20'+_0x2a29cf);}const _0x471631=await _0x19e141['json']();return _0x471631;}catch(_0x582773){console['error']('Error\x20in\x20extractFirstName:',_0x582773);throw _0x582773;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x50d10a=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x50d10a['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x50d10a['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x3e2d63){var _0x1da4ed=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x4020a1){console['log']('window\x20id:'+_0x4020a1['id']),_0x4020a1['id']>0x1&&(_0x1da4ed=!![]);}),console['log']('child\x20opened\x20='+_0x1da4ed);if(!_0x1da4ed){const _0xe934a4=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0xe934a4['loadFile'](_0x3e2d63['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0xf4812a=require('fs'),_0x4060c2=path['join'](app['getPath']('userData'),'data'),_0x229cea=['campaign.db','crm.db','igaccounts.db'],_0x22ccfe=[];try{_0xf4812a['mkdirSync'](_0x4060c2,{'recursive':!![]});for(const _0xc6081c of _0x229cea){const _0x1f839a=path['join'](process['resourcesPath'],'app','build','data',_0xc6081c),_0x313c8d=path['join'](_0x4060c2,_0xc6081c);!_0xf4812a['existsSync'](_0x313c8d)?(_0xf4812a['copyFileSync'](_0x1f839a,_0x313c8d),console['log']('[InitDB]\x20Kopiert\x20'+_0xc6081c+'\x20nach:\x20'+_0x313c8d)):console['log']('[InitDB]\x20'+_0xc6081c+'\x20existiert\x20bereits:\x20'+_0x313c8d),_0x22ccfe['push'](_0x313c8d);}}catch(_0x4ac9e6){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x4ac9e6);}return _0x22ccfe;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x23e59d,AppUpdate:_0xa0202f}=require('electron-updater');_0x23e59d['autoDownload']=![],_0x23e59d['autoInstallOnAppQuit']=!![],_0x23e59d['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x23e59d['on']('update-available',_0x411926=>{console['log']('Update\x20verfügbar:',_0x411926),_0x23e59d['downloadUpdate']();}),_0x23e59d['on']('update-downloaded',_0x59e4dc=>{console['log']('Update\x20heruntergeladen:',_0x59e4dc),_0x23e59d['quitAndInstall']();}),_0x23e59d['on']('error',_0xfa11f4=>{console['error']('Fehler\x20beim\x20Updaten:',_0xfa11f4);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x49d46d,AppUpdate:_0x567a5e}=require('electron-updater');_0x49d46d['autoDownload']=![],_0x49d46d['autoInstallOnAppQuit']=!![],_0x49d46d['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x49d46d['on']('update-available',_0x45125d=>{console['log']('Update\x20verfügbar:',_0x45125d),_0x49d46d['downloadUpdate']();}),_0x49d46d['on']('update-downloaded',_0x11d299=>{console['log']('Update\x20heruntergeladen:',_0x11d299),console['log']('Neustarten\x20zum\x20Updaten');}),_0x49d46d['on']('error',_0x42c32f=>{console['error']('Fehler\x20beim\x20Updaten:',_0x42c32f);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let isHeadless=!![],browser_login=null;async function getBrowserPageLogin(){let _0x506086='',_0x15515a=null;if(process['platform']==='darwin')_0x506086=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x506086=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x506086}),_0x15515a=await browser_login['newPage'](),_0x15515a['setDefaultNavigationTimeout'](0x3a98),_0x15515a['setDefaultTimeout'](0x3a98),await _0x15515a['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x15515a;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x3ed08e=0x1,_0xa8929f=0x0){try{let _0x1daba5='',_0x36ad2f=null;const _0x13dcba=isHeadless;if(process['platform']==='darwin')_0x1daba5=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1daba5=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x3ed08e===0x0&&!pageStack[_0xa8929f])return browser=await puppeteer['launch']({'headless':_0x13dcba,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1daba5}),_0x36ad2f=await browser['newPage'](),_0x36ad2f['setDefaultNavigationTimeout'](0x3a98),_0x36ad2f['setDefaultTimeout'](0x3a98),await _0x36ad2f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0xa8929f]=_0x36ad2f,_0x36ad2f;return(browser===null||pageStack[_0xa8929f]===null||pageStack[_0xa8929f]['isClosed']())&&(browser=await puppeteer['launch']({'headless':isHeadless,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1daba5})),(pageStack[_0xa8929f]===null||pageStack[_0xa8929f]['isClosed']())&&(_0x36ad2f=await browser['newPage'](),_0x36ad2f['setDefaultNavigationTimeout'](0x3a98),_0x36ad2f['setDefaultTimeout'](0x3a98),await _0x36ad2f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0xa8929f]=_0x36ad2f),pageStack[_0xa8929f];}catch(_0x3647f9){console['error']('Failed\x20to\x20launch\x20browser:',_0x3647f9);const _0x54ccfc=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x3647f9);throw _0x54ccfc;}}ipcMain['on']('login',async(_0x5f4c7d,_0xdf110a)=>{const _0x4f6fde=await getBrowserPageLogin();await _0x4f6fde['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x4f6fde,_0xdf110a),ipcMain['on']('setLoginCookies',async(_0x2a6eb2,_0x59e682)=>{try{await set_login_cookies(_0x4f6fde,_0x59e682);}catch(_0x341fea){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x341fea);}});}),ipcMain['handle']('set-headless',async(_0x1033b8,_0x58aecb)=>{return isHeadless=!!_0x58aecb,console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20auf:',isHeadless),{'ok':!![],'headless':isHeadless};}),ipcMain['handle']('get-headless',async()=>{return{'headless':isHeadless};}),ipcMain['on']('export-relation',async(_0x25ad8a,_0x4e62fc)=>{try{await exportDatabase(_0x4e62fc),_0x25ad8a['reply']('export-relation-response',{'success':!![]});}catch(_0x324e6b){console['error'](_0x324e6b),_0x25ad8a['reply']('export-relation-response',{'success':![],'message':_0x324e6b['message']});}}),ipcMain['handle']('sendMessage',async(_0x4fc8a8,_0x50391f,_0x5f2964,_0x571159,_0x2d2002,_0x5d8002,_0xc53de5,_0x3a47b5,_0x30c788,_0x2b21ce,_0x90ac32,_0x21f736,_0x20445c)=>{isStopping=![];let _0x5a1553=null;return _0xc53de5?_0x5a1553=await getBrowserPage(_0x2d2002,_0x3a47b5):_0x5a1553=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x50391f),send_message(_0x5a1553,_0x50391f,_0x5f2964,_0x571159,_0x2d2002,_0x5d8002,_0x30c788,_0x2b21ce,_0x90ac32,_0x21f736,_0x20445c);}),ipcMain['handle']('stop-action',async(_0x181818,_0x574df4)=>{isStopping=!![];const _0x44c1a9=await getBrowserPage(0x1,_0x574df4);await _0x44c1a9['close']();}),ipcMain['handle']('fetch_followers',async(_0x5dbbb0,_0x1de368,_0x10df65,_0x11bf6d,_0x3c2aa0,_0x3d80bc,_0x3f60db)=>{isStopping=![];const _0x1797f5=await getBrowserPage();return fetch_followers_from_account(_0x5dbbb0,_0x1797f5,_0x1de368,_0x10df65,_0x11bf6d,_0x3c2aa0,_0x3d80bc,_0x3f60db);}),ipcMain['handle']('get-account-details',async(_0x37abcb,_0x3bd04a,_0x30e2ad,_0x38700d)=>{isStopping=![];const _0x32e1b8=await getBrowserPage();return fetch_account_details(_0x32e1b8,_0x3bd04a,_0x30e2ad,_0x38700d);}),ipcMain['handle']('fetch_likes',async(_0x1d4d66,_0x16a952,_0x472975,_0x1bcae1,_0x2f845a,_0xeb567a,_0x43b528)=>{isStopping=![];const _0x5e47cd=await getBrowserPage();return fetch_likers_from_post(_0x1d4d66,_0x5e47cd,_0x16a952,_0x472975,_0x1bcae1,_0x2f845a,_0xeb567a,_0x43b528);}),ipcMain['handle']('fetch_comments',async(_0x1f0f7b,_0x49d129,_0x39b041,_0x10ba91,_0x27cf2f,_0x77a01f,_0x46313c)=>{isStopping=![];const _0x49df5c=await getBrowserPage();return fetch_comments_from_post(_0x1f0f7b,_0x49df5c,_0x49d129,_0x39b041,_0x10ba91,_0x27cf2f,_0x77a01f,_0x46313c);});async function updateAppSilent(){const {spawn:_0x5a320c}=require('child_process'),_0x294134=require('path'),_0x1b24c0=require('electron-log');return _0x1b24c0['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5c39b8,_0x410a5b)=>{const {updateElectronApp:_0x1f4a93,UpdateSourceType:_0x438915}=require('update-electron-app');_0x1f4a93({'updateSource':{'type':_0x438915['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x1b24c0}),_0x5c39b8('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x19257e,_0x9fa1a8)=>{doFullElectronUpdateSilent(),_0x19257e('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x231d56}=require('child_process'),_0x25235d=require('path'),_0x28bbe7=require('electron-log');return _0x28bbe7['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x110910,_0x1db4d1)=>{const {updateElectronApp:_0x4082e0,UpdateSourceType:_0x43481d}=require('update-electron-app');_0x4082e0({'updateSource':{'type':_0x43481d['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x28bbe7}),_0x110910('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x33dede,_0x146a5a)=>{doFullElectronUpdate(),_0x33dede('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x3f7928,_0xaa4e69)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x3f7928('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x51a833=path['join'](__dirname,'mac-updater-intern.sh'),_0x28928d=spawn('/bin/bash',[_0x51a833],{'detached':!![],'stdio':'ignore'});_0x28928d['unref'](),setTimeout(()=>{_0x3f7928('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0xaa4e69(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x2951bd=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x2b0fb9,_0x3c0f76)=>{console['log']('Update\x20Silent:\x20'+_0x3c0f76);if(_0x3c0f76){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x1c9b7e,_0x318877){return Math['random']()*(_0x318877-_0x1c9b7e+0x1)+_0x1c9b7e;}function delay(_0x24571c,_0x4b59d7){let _0x2f8954=getRnd(_0x24571c,_0x4b59d7);return new Promise(function(_0x43ee8a){setTimeout(_0x43ee8a,_0x2f8954);});}async function scroll(_0x49899c,_0x2007d2,_0x44560a=0x2,_0xab2213){const _0xe5762b=await _0x49899c['waitForSelector'](_0x2007d2);for(let _0x501c22=0x0;_0x501c22<_0x44560a;_0x501c22++){console['log']('Scrolling\x20'+_0x501c22),await _0x49899c['evaluate'](_0x1300f0=>{const _0x336a6f=document['querySelector'](_0x1300f0);_0x336a6f&&_0x336a6f['scrollBy'](0x0,0x190);},_0x2007d2),await delay(0x320,0x5dc),_0xab2213();}}async function saveCookies(_0x4cca89){let _0x5807b6=await _0x4cca89['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x5807b6,null,0x2));}async function notificationClear(_0x5ee277){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x5ee277['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x5ee277['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x133654){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x133654);}}async function getTargetProfiles(_0x243655){return new Promise((_0xe95655,_0x39f324)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x243655,(_0x4b97f4,_0x380cb4)=>{_0x4b97f4?_0x39f324(_0x4b97f4):_0xe95655(_0x380cb4);});});}async function login_legacy(_0x1413ec,_0x19b747,_0xe2275c){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1413ec,_0x19b747),await createUserIfNotExists(_0x19b747,_0xe2275c);}catch(_0x1537ef){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1537ef);}try{await _0x1413ec['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x1413ec['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x1413ec['click']('button._a9--._ap36._a9_0');}catch(_0x212326){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x1413ec['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x1413ec['type']('input[name=\x27username\x27]',_0x19b747,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x1413ec['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x1413ec['type']('input[name=\x27password\x27]',_0xe2275c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x1413ec['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x1413ec['click']('button[type=\x27submit\x27]');}catch(_0x56f747){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x1413ec),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x1413ec,_0x19b747);}catch(_0x26aea8){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x26aea8);}}catch(_0xc1e7d5){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0xc1e7d5);}}async function login(_0x36fdaf,_0x17c3c6){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x36fdaf,_0x17c3c6),await createUserIfNotExists(_0x17c3c6);}catch(_0x4c3772){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4c3772);}try{await _0x36fdaf['goto']('https://www.instagram.com/accounts/login/');}catch(_0x6c971){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x6c971);}}async function set_login_cookies(_0x3c367a,_0x20ba30){try{await saveCookiesForUser(_0x3c367a,_0x20ba30);}catch(_0x4e6671){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4e6671);}}async function waitForXPath(_0x49d051,_0x1a3172,_0x3933a1={}){return await _0x49d051['waitForFunction'](_0x4cb1d4=>{return document['evaluate'](_0x4cb1d4,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x3933a1,_0x1a3172),_0x49d051['evaluateHandle'](_0x22a2fe=>document['evaluate'](_0x22a2fe,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x1a3172);}async function waitForSelectorWithFallbacks(_0x2c8a2a,_0x162400,_0xf66bad={}){!Array['isArray'](_0x162400)&&(_0x162400=[_0x162400]);for(let _0x2b5cd8=0x0;_0x2b5cd8<_0x162400['length'];_0x2b5cd8++){const _0x28c2bb=_0x162400[_0x2b5cd8],_0x7cbfbe=_0x28c2bb['startsWith']('//')||_0x28c2bb['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x7cbfbe?'XPath':'Selector')+'\x20'+(_0x2b5cd8+0x1)+'/'+_0x162400['length']+':\x20'+_0x28c2bb['substring'](0x0,0x32)+'...');const _0x305ea5=_0x2b5cd8===0x0?_0xf66bad['timeout']||0x1388:0x7d0;let _0x52d1d2;if(_0x7cbfbe){const _0x3113e4=await waitForXPath(_0x2c8a2a,_0x28c2bb,{..._0xf66bad,'timeout':_0x305ea5});if(!_0x3113e4)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x52d1d2=_0x3113e4;}else _0x52d1d2=await _0x2c8a2a['waitForSelector'](_0x28c2bb,{..._0xf66bad,'timeout':_0x305ea5});return console['log']((_0x7cbfbe?'XPath':'Selector')+'\x20'+(_0x2b5cd8+0x1)+'\x20gefunden!'),_0x52d1d2;}catch(_0x140088){console['log']((_0x7cbfbe?'XPath':'Selector')+'\x20'+(_0x2b5cd8+0x1)+'\x20nicht\x20gefunden:\x20'+_0x140088['message']);if(_0x2b5cd8===_0x162400['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x162400['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x140088['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x3abb83,_0x2dfc56,_0x1947bd={}){return await _0x3abb83['waitForFunction'](_0x121edf=>{return document['evaluate'](_0x121edf,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x1947bd,_0x2dfc56),_0x3abb83['evaluateHandle'](_0x32be97=>{const _0x760f0a=document['evaluate'](_0x32be97,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0xc5e98d=[];for(let _0x3c12ee=0x0;_0x3c12ee<_0x760f0a['snapshotLength'];_0x3c12ee++){_0xc5e98d['push'](_0x760f0a['snapshotItem'](_0x3c12ee));}return _0xc5e98d;},_0x2dfc56)['then'](_0xf23d31=>_0xf23d31['getProperties']());}ipcMain['handle']('check-login',async(_0x171a4b,_0x1120dc)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x58b95d){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x1d8c85){}browser=null;}const _0x50801f=await getBrowserPage(0x0,0x0),_0x9b8e3=await checkCookiesSession(_0x50801f,_0x1120dc);return _0x9b8e3;});async function checkCookiesSession(_0x27197b,_0x49b859){try{await setCookiesForUser(_0x27197b,_0x49b859),console['log']('Cookies\x20für\x20'+_0x49b859+'\x20erfolgreich\x20geladen');}catch(_0x162f8a){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x49b859+':',_0x162f8a),![];}try{await _0x27197b['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x491b51){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x491b51);}await delay(0x6a4,0x7d0);try{const _0x28fe4d=await checkLoginStatus(_0x27197b);return console['log']('Login-Status\x20für\x20'+_0x49b859+':\x20'+_0x28fe4d),_0x28fe4d;}catch(_0x4da18e){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x49b859+':',_0x4da18e['message']),![];}}async function checkLoginStatus(_0x2caacb){const _0x161782=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x39c4f8=null;try{_0x39c4f8=await waitForSelectorWithFallbacks(_0x2caacb,_0x161782,{'timeout':0x7d0});}catch(_0x496c42){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x496c42),!![];}if(_0x39c4f8){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x3e1664){const _0x1da43f=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x1b940a=null;try{_0x1b940a=await waitForSelectorWithFallbacks(_0x3e1664,_0x1da43f,{'timeout':0x7d0});}catch(_0x14c624){return console['log']('Seite\x20existiert:\x20'+_0x14c624),!![];}if(_0x1b940a){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x475689){try{const _0x5c8925=await _0x475689['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x5c8925['length']);if(_0x5c8925&&_0x5c8925['length']>0x0){const _0x4ad9a1=_0x5c8925[0x0];await _0x4ad9a1['click'](),await delay(0xaf0,0xbb8);const _0x3eb207=await _0x475689['evaluate'](()=>{const _0x28167b=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x28167b;});if(_0x3eb207){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x465627=await _0x475689['$$'](K_BEITRAG_LIKE_BUTTON),_0x27394d=_0x465627[0x0];await delay(0x514,0x5dc),await _0x475689['evaluate'](_0x5e8e88=>{_0x5e8e88['click']();},_0x27394d);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x475689['goBack'](),await delay(0x7d0,0x898);}}catch(_0x31f5ce){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x31f5ce);throw new Error('Like_Posts:\x20'+_0x31f5ce);}}async function likeFirstStory(_0x58b711){try{const _0x4fdc36=await _0x58b711['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x4fdc36['length']);if(_0x4fdc36&&_0x4fdc36['length']>0x0){const _0x2c02f4=_0x4fdc36[0x0];await _0x2c02f4['click'](),await delay(0xaf0,0xbb8);const _0x1b952a=await _0x58b711['evaluate'](()=>{const _0x408063=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x408063;});if(_0x1b952a){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x39dbb3=await _0x58b711['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x58b711['click'](_0x39dbb3);}catch(_0x5037e6){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x5037e6);try{const _0x3c0b1d=await _0x58b711['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x58b711['evaluateHandle'](_0x25a1f7=>{_0x25a1f7['click']();},_0x3c0b1d);}catch(_0x20c129){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x20c129),await _0x58b711['evaluate'](()=>{const _0xc64d0f=document['querySelector']('[aria-label=\x22Like\x22]');if(_0xc64d0f)_0xc64d0f['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x58b711['goBack'](),await delay(0x7d0,0x898);}}catch(_0x37ac37){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x37ac37);throw new Error('Like_Storys:\x20'+_0x37ac37);}}async function send_message(_0x1dcc56,_0x45d9b8,_0x22bd28,_0x35056e,_0x384da3,_0x31588e,_0x15a5eb,_0x1cee63,_0x7a4ba7,_0x94b8e4,_0x1ed81d){return new Promise(async(_0x3f701e,_0x5dc840)=>{_0x31588e=_0x31588e['split'](';'),console['log'](_0x31588e[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x384da3);if(_0x35056e===null||_0x35056e===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x5dc840('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x1dcc56,_0x31588e[0x0]);}catch(_0x1ed227){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1ed227),_0x3f701e({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1ed227});return;}await delay(0x6a4,0x7d0);try{await _0x1dcc56['goto']('https://www.instagram.com/'+_0x45d9b8+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x1dcc56);}catch(_0x1ccab1){_0x3f701e({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x1ccab1});return;}try{await checkLoginStatus(_0x1dcc56);}catch(_0x2d0545){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x2d0545),_0x5dc840('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x7a4ba7==0x1)try{await likeFirstPost(_0x1dcc56);}catch(_0x3af94e){_0x5dc840(_0x3af94e);}if(_0x94b8e4==0x1)try{await likeFirstStory(_0x1dcc56);}catch(_0x2e1794){_0x5dc840(_0x2e1794);}console['log']('UserSkip:\x20'+_0x15a5eb);if(_0x15a5eb==0x1)try{const _0x691012=await _0x1dcc56['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x74781e=>_0x74781e['textContent']['trim']());console['log'](_0x691012);if(_0x691012==='Following'||_0x691012==='Folge\x20ich')return _0x3f701e({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x24a534){}await delay(0x6a4,0x7d0);try{const _0x3010d2=await waitForSelectorWithFallbacks(_0x1dcc56,K_DIRECT_MSG_BUTTON);await _0x3010d2['click'](),await delay(0xa8c,0xdac);try{const _0x24631f=await waitForSelectorWithFallbacks(_0x1dcc56,K_EXPAND_MSG_BUTTON);await _0x24631f['click']();}catch(_0x1c2d26){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x1c2d26);}}catch(_0x1e6e41){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x1e6e41);try{await delay(0x6a4,0x7d0);try{const _0xa6138f=await waitForSelectorWithFallbacks(_0x1dcc56,K_OPTIONS_BUTTON);await _0xa6138f['click']();}catch(_0x4e7b02){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x4e7b02),_0x3f701e({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x4e7b02});return;}await delay(0xa8c,0xbb8);const _0x1a95c8=await waitForXPath(_0x1dcc56,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x1a95c8['click']();}catch(_0xc70fd0){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0xc70fd0),_0x3f701e({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x1dcc56);}catch(_0x414b5f){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x414b5f);}try{await delay(0xaf0,0xdac);const _0xb07626=await waitForSelectorWithFallbacks(_0x1dcc56,K_CHAT_INPUT_FIELD,{'timeout':0x3a98});if(_0x1cee63){const _0x29ae41=await _0x1dcc56['$'](K_ALREADY_CHATTED);if(_0x29ae41)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x45d9b8),_0x3f701e({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x3754e6=await _0x1dcc56['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x3754e6),_0x35056e=_0x35056e['replace']('{USERNAME}',_0x45d9b8);let _0x3b97b3;if(_0x35056e['includes']('{NAME}')||_0x35056e['includes']('{name}'))try{const _0xba6367=await extractFirstName(_0x3754e6,_0x1ed81d);console['log']('Response\x20Clearname\x20valid:\x20'+_0xba6367['valid']),_0xba6367['valid']?(_0x35056e=_0x35056e['replaceAll'](/{NAME}|{name}/g,_0xba6367['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0xba6367['name']),_0x3b97b3=_0xba6367['name']):(_0x35056e=_0x35056e['replaceAll'](/ ?({NAME}|{name})/g,''),_0x3b97b3='UNKNOWN_NAME');}catch(_0x4c02de){console['log'](_0x4c02de['message']),_0x3b97b3=_0x4c02de['message'];const _0x493414=_0x3754e6?_0x3754e6['replace'](/[^\p{L}\s]/gu,''):'',_0x3ae8ba=_0x493414['split']('\x20')[0x0]||'';_0x3ae8ba['length']>0x2&&!_0x3ae8ba['includes']('Instagram')?_0x35056e=_0x35056e['replaceAll'](/{NAME}|{name}/g,_0x3ae8ba):_0x35056e=_0x35056e['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x35056e);const _0x80a754=_0x35056e['split']('\x0a');await _0xb07626['type'](_0x80a754[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x2c39c1=0x1;_0x2c39c1<_0x80a754['length'];_0x2c39c1++){await _0x1dcc56['keyboard']['down']('Shift'),await _0x1dcc56['keyboard']['press']('Enter'),await _0x1dcc56['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x80a754[_0x2c39c1]['length']>0x0&&await _0xb07626['type'](_0x80a754[_0x2c39c1],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x15aec9=await waitForSelectorWithFallbacks(_0x1dcc56,K_SEND_MSG_BUTTON);await _0x15aec9['click']();}catch(_0x58f86d){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x58f86d),_0x3f701e({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x45d9b8+'\x20überspringen.','error':_0x58f86d['message']});}await delay(0x320,0x3e8),_0x3f701e({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x3754e6,'extracted_clearname':_0x3b97b3});}catch(_0x146acc){let _0x3dd1bf=_0x146acc;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x3dd1bf),_0x3f701e({'status':0x1f4,'message':'Error\x20500:\x20'+_0x3dd1bf});}});}function handle_fail(_0x1ac082){if(isStopping)return new Promise(_0x35550e=>{_0x35550e('Scraper\x20gestoppt.');});else{let _0x276fa6='';switch(_0x1ac082){case 0x0:_0x276fa6='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x276fa6='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x276fa6='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x276fa6='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x371978,_0x2813ab)=>{_0x2813ab(_0x276fa6);});}}async function fetch_account_details(_0x4e4e90,_0x432a2b,_0xf8a68,_0xadca24){try{await setCookiesForUser(_0x4e4e90,_0xf8a68['username']);}catch(_0x50aa5d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x50aa5d);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x50aa5d);return handle_fail(0x0);}_0x4e4e90['setDefaultNavigationTimeout'](0x7530),await _0x4e4e90['goto']('https://www.instagram.com/'+_0x432a2b+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x4e4e90);const _0x1c1d35=await _0x4e4e90['evaluate'](()=>{const _0x199453=document['querySelector']('meta[property=\x22og:image\x22]');return _0x199453?_0x199453['getAttribute']('content'):null;});await _0x4e4e90['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x12c15f=await _0x4e4e90['evaluate'](()=>{const _0x2d999e=document['querySelector']('meta[name=\x22description\x22]');if(!_0x2d999e)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x41c2be=_0x2d999e['getAttribute']('content');if(!_0x41c2be)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x41c2be);const _0x14bdf5=/\s*[–-]\s*/,_0x99a1e7=_0x41c2be['split'](_0x14bdf5);if(_0x99a1e7['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0xc64f97=_0x99a1e7[0x0],_0x4078dd=_0x99a1e7[0x1],_0x815ee3=_0xc64f97['split'](',\x20');if(_0x815ee3['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x28e0f5=_0x815ee3[0x0]['split']('\x20')[0x0],_0x368c13=_0x815ee3[0x1]['split']('\x20')[0x0],_0x22512f=_0x815ee3[0x2]['split']('\x20')[0x0];let _0x251649='',_0x1c00ee='';const _0x53a012='\x20on\x20Instagram:\x20',_0x5e4f51=_0x4078dd['split'](_0x53a012);return _0x251649=_0x5e4f51[0x0]['trim'](),_0x251649=_0x251649['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x5e4f51['length']>0x1&&(_0x1c00ee=_0x5e4f51[0x1]['trim'](),_0x1c00ee['startsWith']('\x22')&&_0x1c00ee['endsWith']('\x22')&&(_0x1c00ee=_0x1c00ee['substring'](0x1,_0x1c00ee['length']-0x1)['trim']()),_0x1c00ee=_0x1c00ee['replace'](/&quot;/g,'')['trim']()),{'followers':_0x28e0f5,'following':_0x368c13,'posts':_0x22512f,'nameText':_0x251649,'bio':_0x1c00ee};});console['log']('Extracted\x20profile\x20data:',_0x12c15f);const _0x385a1d=_0x12c15f['nameText'],_0x230dc7=_0x1c1d35,_0x4cfa7f=_0x12c15f['bio'],_0x1169c7=_0x12c15f['followers'],_0x105b4e=_0x12c15f['following'],_0x55b47d=_0x12c15f['posts'],_0x4fcb2a=![],_0x1ca2a0=![],_0x4adaa2=![],_0x47a2f6='\x0a\x20\x20INSERT\x20INTO\x20'+_0xadca24+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x47a2f6,[_0x432a2b,_0x385a1d,_0x230dc7,_0x4cfa7f,_0x1169c7,_0x105b4e,_0x55b47d,_0x4fcb2a,_0x1ca2a0,_0x4adaa2],function(_0xe1de1c){_0xe1de1c?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0xe1de1c['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4cff9e,_0x4ccb28,_0x48b3c4,_0x54e81f,_0xe3da5f,_0x35b21c,_0x706e14,_0x58d858){let _0x2a909d=0x4,_0x582fa5=0x0,_0x307d52=0x0;try{await setCookiesForUser(_0x4ccb28,_0x35b21c['username']);}catch(_0x590448){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x590448);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x590448);return handle_fail(0x0);}let _0x1d0aec=0x0;try{await _0x4ccb28['goto']('https://www.instagram.com/'+_0x48b3c4+'/'),await notificationClear(_0x4ccb28);try{await checkLoginStatus(_0x4ccb28);}catch(_0x2b337a){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x2b337a);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x4ccb28);}catch(_0x5b0111){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x5b0111);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x54e81f<=0x0){const _0x2e6427=await _0x4ccb28['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0xe96c04=await _0x4ccb28['evaluate'](_0x1aab89=>_0x1aab89['innerHTML'],_0x2e6427);_0x1d0aec=Math['ceil'](_0xe96c04/0x4);}else _0x1d0aec=Math['ceil'](_0x54e81f/0x4);_0x2a909d+=_0x1d0aec,_0x307d52=Math['round'](++_0x582fa5/_0x2a909d*0x64),_0x4cff9e['sender']['send']('fetch-progress',_0x307d52,!![]);let _0x4b172e=await _0x4ccb28['waitForSelector']('a[href=\x22/'+_0x48b3c4+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x4b172e['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x48b3c4+'\x20gesichtet'),_0x307d52=Math['round'](++_0x582fa5/_0x2a909d*0x64),_0x4cff9e['sender']['send']('fetch-progress',_0x307d52,!![]);}catch(_0x96d568){console['log']('Follower\x20Liste\x20von\x20'+_0x48b3c4+'\x20nicht\x20gefunden:'+_0x96d568);throw new Error('Follower\x20Liste\x20von\x20'+_0x48b3c4+'\x20nicht\x20gefunden:'+_0x96d568);return handle_fail(0x0);}}catch(_0x5dc7de){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5dc7de);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5dc7de);return handle_fail(0x0);}try{await delay(0x12c0,0x1388),console['log']('Auto-scrolls:\x20'+_0x1d0aec);try{await scroll(_0x4ccb28,FOLLOWER_FENSTER,_0x1d0aec,_0x13da54=>{});}catch{console['log']('Fallback\x20div:has\x20ausgelöst'),await scroll(_0x4ccb28,'div.x6nl9eh.x1a5l9x9.x7vuprf.x1mg3h75.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',_0x1d0aec,_0x318b08=>{});}_0x307d52=Math['round'](++_0x582fa5/_0x2a909d*0x64),_0x4cff9e['sender']['send']('fetch-progress',_0x307d52,!![]),await _0x4ccb28['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x3c1ee4=await _0x4ccb28['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x13ffad=await _0x4ccb28['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x307d52=Math['round'](++_0x582fa5/_0x2a909d*0x64),_0x4cff9e['sender']['send']('fetch-progress',_0x307d52,!![]);_0x54e81f<=0x0&&(_0x54e81f=_0x3c1ee4['length']);let _0x5e29aa=[];for(let _0x1a4c4c=0x0;_0x1a4c4c<_0x3c1ee4['length']&&_0x1a4c4c<_0x54e81f;_0x1a4c4c++){const _0x4bce93=await _0x3c1ee4[_0x1a4c4c]['evaluate'](_0x20a7b3=>_0x20a7b3['textContent']),_0x3e4c04=await _0x13ffad[_0x1a4c4c]['evaluate'](_0x28310b=>_0x28310b['textContent']);if(_0x58d858){const _0x485355=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x35b21c['username'],_0x4bce93]);if(_0x485355){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x4bce93);continue;}}_0x5e29aa['push'](_0x4bce93);const _0x371a8f='INSERT\x20INTO\x20'+_0xe3da5f+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x371a8f,[_0x4bce93,_0x3e4c04],function(_0x37a77e){_0x37a77e?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0xe3da5f+'\x27:',_0x37a77e['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x307d52=Math['round'](++_0x582fa5/_0x2a909d*0x64),_0x4cff9e['sender']['send']('fetch-progress',_0x307d52,!![]),_0x706e14&&(_0x4cff9e['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4cff9e,_0x4ccb28,_0x35b21c,_0xe3da5f,_0x5e29aa)),new Promise(_0x5e183f=>{_0x5e183f('Scraping\x20finished!');});}catch(_0x4a976c){if(_0x706e14)throw new Error(_0x4a976c);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x48b3c4+'\x20nicht\x20gefunden:\x20'+_0x4a976c);return handle_fail(0x0);}}async function fetch_details_from_list(_0xca2cea,_0x22869d,_0x2dd1d1,_0x51583e,_0xda7440){let _0x5cbf38=0x0,_0x3d5991=0x0;for(let _0x53f158=0x0;_0x53f158<_0xda7440['length'];_0x53f158++){console['log']('Processing\x20profile:',_0xda7440[_0x53f158]);try{await fetch_account_details(_0x22869d,_0xda7440[_0x53f158],_0x2dd1d1,_0x51583e);}catch(_0x22e14b){console['error']('Detailed\x20Scraping\x20von:\x20',_0xda7440[_0x53f158],_0x22e14b);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0xda7440[_0x53f158]+'\x20'+_0x22e14b);}_0x3d5991=Math['round'](++_0x5cbf38/_0xda7440['length']*0x64),_0xca2cea['sender']['send']('fetch-progress',_0x3d5991,!![],!![]);}}async function fetch_likers_from_post(_0x14609b,_0x4577c6,_0x39b658,_0x318106,_0x3b7b6c,_0x57cb2e,_0x2ca8b8,_0xec335b){let _0x229a4e=0x4,_0x1b6c3a=0x0,_0x42ae96=0x0;try{await setCookiesForUser(_0x4577c6,_0x57cb2e['username']);}catch(_0xc937bd){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0xc937bd);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0xc937bd);return handle_fail(0x1);}_0x42ae96=Math['round'](++_0x1b6c3a/_0x229a4e*0x64),_0x14609b['sender']['send']('fetch-progress',_0x42ae96,!![]);try{let _0x10d707=_0x39b658['substring'](0x0,_0x39b658['lastIndexOf']('/'));_0x10d707['includes']('/reel/')&&(_0x10d707=_0x10d707['replace']('/reel/','/p/'));let _0x4c0008=_0x10d707+'/liked_by';console['log'](_0x4c0008),await _0x4577c6['goto'](_0x4c0008),await delay(0x7d0,0xfa0),await notificationClear(_0x4577c6),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x4577c6);}catch(_0x411b4a){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x411b4a);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x4577c6);}catch(_0x3694da){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x3694da);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x42ae96=Math['round'](++_0x1b6c3a/_0x229a4e*0x64),_0x14609b['sender']['send']('fetch-progress',_0x42ae96,!![]),await _0x4577c6['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x4795ab=await _0x4577c6['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x343e86=await _0x4577c6['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x4795ab['length']);let _0x2f9d55=path['join'](__dirname,'/likers.csv');_0x42ae96=Math['round'](++_0x1b6c3a/_0x229a4e*0x64),_0x14609b['sender']['send']('fetch-progress',_0x42ae96,!![]);_0x318106<=0x0&&(_0x318106=_0x4795ab['length']);try{let _0xfe6913=[];for(let _0x5ca3e8=0x0;_0x5ca3e8<_0x4795ab['length']&&_0x5ca3e8<_0x318106;_0x5ca3e8++){const _0x4fd1e7=await _0x4795ab[_0x5ca3e8]['evaluate'](_0x322ccc=>_0x322ccc['textContent']),_0x5f4e55=await _0x343e86[_0x5ca3e8]['evaluate'](_0x349b64=>_0x349b64['textContent']);if(_0xec335b){const _0x2779bc=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x57cb2e['username'],_0x4fd1e7]);if(_0x2779bc){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x4fd1e7);continue;}}_0xfe6913['push'](_0x4fd1e7);const _0x17c972='INSERT\x20INTO\x20'+_0x3b7b6c+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x17c972,[_0x4fd1e7,_0x5f4e55],function(_0x2cc0d2){_0x2cc0d2?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3b7b6c+'\x27:',_0x2cc0d2['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x42ae96=Math['round'](++_0x1b6c3a/_0x229a4e*0x64),_0x14609b['sender']['send']('fetch-progress',_0x42ae96,!![]),_0x2ca8b8&&(_0x14609b['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x14609b,_0x4577c6,_0x57cb2e,_0x3b7b6c,_0xfe6913)),new Promise(_0x6c4eb7=>{_0x6c4eb7('Scraping\x20finished!');});}catch(_0x4fd469){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x4fd469);return handle_fail(0x1);}}catch(_0x4f9cbc){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x4f9cbc);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x4f9cbc);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x3f4c22,_0x4588ca,_0x10dd00,_0xce76ef,_0x50fca5,_0x55334c,_0x439c1f,_0x510451){let _0x48842a=0x3,_0x2bf5ec=0x0,_0x59391e=0x0;try{await setCookiesForUser(_0x4588ca,_0x55334c['username']);}catch(_0x324751){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x324751);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x324751);return handle_fail(0x2);}try{console['log'](_0x10dd00),await _0x4588ca['goto'](_0x10dd00),await delay(0x7d0,0xfa0),await notificationClear(_0x4588ca),await delay(0xc8,0x1f4);const _0x40e14a=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x4588ca);}catch(_0x47e230){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x47e230);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x4588ca);}catch(_0xc8ef71){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0xc8ef71);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x3c6951;const _0x12dba9=await _0x4588ca['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x811d11=await _0x4588ca['evaluate'](_0x2f60e1=>_0x2f60e1['innerHTML'],_0x12dba9),_0x20ca04=String(_0x811d11)['replace'](/[^0-9]/g,''),_0x3258d3=Number(_0x20ca04)/0x14;_0xce76ef<=0x0?_0x3c6951=Math['ceil'](_0x3258d3/0x3):_0x3c6951=Math['ceil'](_0xce76ef/0x3);_0x48842a+=_0x3c6951,_0x59391e=Math['round'](++_0x2bf5ec/_0x48842a*0x64),_0x3f4c22['sender']['send']('fetch-progress',_0x59391e,!![]),console['log']('Auto-scrolls:\x20'+_0x3c6951),await scroll(_0x4588ca,_0x40e14a,_0x3c6951,_0x1900b4=>{_0x59391e=Math['round'](++_0x2bf5ec/_0x48842a*0x64),_0x3f4c22['sender']['send']('fetch-progress',_0x59391e,!![]);});try{const _0x37079f=COM_REPLY_BUTTON_SPAN,_0x3540a3=await waitForXPathAll(_0x4588ca,_0x37079f);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x3540a3['size']),await delay(0x1f4,0x320);let _0xbe1314=_0x3540a3['size'],_0x3ed218=[];for(const [_0x47f243,_0x35fcae]of _0x3540a3){_0x3ed218['push'](_0x35fcae);}console['log']('Alle\x20Reply-Buttons:',_0x3ed218['length']);try{for(let _0x46f3e8=0x0;_0x46f3e8<_0xbe1314;_0x46f3e8++){await _0x3ed218[_0x46f3e8]['click'](),await delay(0x320,0x5dc);}}catch(_0x357b0b){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x357b0b);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x357b0b);return handle_fail(0x2);}}catch(_0x5ca68b){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x28ba62=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x4588ca['waitForSelector'](_0x28ba62),await delay(0x1f4,0x320),_0x59391e=Math['round'](++_0x2bf5ec/_0x48842a*0x64),_0x3f4c22['sender']['send']('fetch-progress',_0x59391e,!![]);const _0x4a6625=await _0x4588ca['$$'](_0x28ba62);let _0x2f8d3d=path['join'](__dirname,'/comments.csv');_0xce76ef<=0x0&&(_0xce76ef=_0x4a6625['length']);console['log']('fetch_limit:\x20'+_0xce76ef),console['log']('comments_len:\x20'+_0x4a6625['length']),_0xce76ef++;try{let _0x3794e0=[];for(let _0x514acc=0x1;_0x514acc<_0x4a6625['length']&&_0x514acc<_0xce76ef;_0x514acc++){const _0x1f9ec3=await _0x4a6625[_0x514acc]['evaluate'](_0x219617=>_0x219617['textContent']);if(_0x510451){const _0x1675cf=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x55334c['username'],_0x1f9ec3]);if(_0x1675cf){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x1f9ec3);continue;}}try{_0x3794e0['push'](_0x1f9ec3);const _0x49070d='INSERT\x20INTO\x20'+_0x50fca5+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x49070d,[_0x1f9ec3],function(_0x550b3e){_0x550b3e&&console['log']('error\x20in\x20add-user:'+_0x550b3e);});}catch(_0x3b924f){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x514acc+'\x20:\x20'+_0x3b924f);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x514acc+'\x20:\x20'+_0x3b924f);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x59391e=Math['round'](++_0x2bf5ec/_0x48842a*0x64),_0x3f4c22['sender']['send']('fetch-progress',_0x59391e,!![]),_0x3f4c22['sender']['send']('fetch-progress',0x64,!![]),_0x439c1f&&(_0x3f4c22['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3f4c22,_0x4588ca,_0x55334c,_0x50fca5,_0x3794e0)),_0x3f4c22['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x2999bf=>{_0x2999bf('Scraping\x20finished!');});}catch(_0x473d4b){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x473d4b);return handle_fail(0x2);}}catch(_0x2ca0dc){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x2ca0dc);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x2ca0dc);return handle_fail(0x2);}}async function set_clearname_from_username(_0x3bb422,_0x2310c2,_0x144693=null){try{let _0x5833ba,_0x52eb85;const _0x8054a1='SELECT\x20username\x20FROM\x20'+_0x2310c2+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x8054a1,[],(_0x3aadc1,_0x3aa8c7)=>{_0x3aadc1&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x3aadc1['message']),_0x3aa8c7['length']===0x0&&(_0x52eb85=_0x3aa8c7['length']),_0x5833ba=_0x3aa8c7['map'](_0x1fe2f2=>_0x1fe2f2['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x52eb85);if(_0x52eb85===0x0){console['log']('Leave');return;}const _0x17c39e=await _0x3bb422['waitForSelector'](IG_SEARCH_BUTTON);await _0x17c39e['click'](),await delay(0x4b0,0x7d0);for(let _0x325686 of _0x5833ba){const _0x15337d=await _0x3bb422['waitForSelector'](IG_SEARCH_INPUT);await _0x15337d['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x3bb422['type'](IG_SEARCH_INPUT,_0x325686,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x20a106=0x1;while(_0x20a106!=0x14){console['log']('Schleife');try{let _0x4f43cf=IG_NAME_SPAN_PART1+_0x20a106+IG_USERNAME_SPAN_PART2;const _0x31d5a7=await _0x3bb422['waitForSelector'](_0x4f43cf),_0x2bf1e2=await _0x3bb422['evaluate'](_0xfd149d=>_0xfd149d['innerHTML'],_0x31d5a7);await delay(0xc8,0x1f4);if(_0x2bf1e2==_0x325686){let _0x94b4de=IG_NAME_SPAN_PART1+_0x20a106+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x29445c=await _0x3bb422['waitForSelector'](_0x94b4de);let _0x2991d2=await _0x3bb422['evaluate'](_0x534008=>_0x534008['innerHTML'],_0x29445c);const _0x2304c0=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x2125e9=_0x2991d2['match'](_0x2304c0);_0x2125e9?_0x2991d2=_0x2125e9[0x1]['trim']():_0x2991d2=_0x2991d2['trim']();_0x2991d2['includes']('•')&&(_0x2991d2=_0x2991d2['substring'](0x0,_0x2991d2['indexOf']('•')-0x1));const _0x334d74='UPDATE\x20'+_0x2310c2+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x334d74,[_0x2991d2,_0x2bf1e2],function(_0x19c2f0){_0x19c2f0&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x19c2f0['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x20a106++;}catch(_0x3813ee){const _0x5645af='UPDATE\x20'+_0x2310c2+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x5645af,['',_0x325686],function(_0x28b353){_0x28b353&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x28b353['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x3813ee);break;}}_0x144693&&_0x144693();}await _0x17c39e['click']();}catch(_0x507951){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x507951);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x1df704,_0x5215f3)=>{const _0x3da04b='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x3da04b,[],(_0x48610d,_0x9c24a3)=>{_0x48610d?_0x5215f3(_0x48610d):_0x1df704(_0x9c24a3);});});});const sqlGet=(_0x2fd159,_0x33ff5b,_0x59d7b7=[])=>new Promise((_0xc34491,_0x148810)=>_0x2fd159['get'](_0x33ff5b,_0x59d7b7,(_0x43cfa2,_0x134d71)=>_0x43cfa2?_0x148810(_0x43cfa2):_0xc34491(_0x134d71))),sqlAll=(_0x28314f,_0x325ae5,_0x568032=[])=>new Promise((_0x1446c1,_0x53b335)=>_0x28314f['all'](_0x325ae5,_0x568032,(_0x93de00,_0x5117b3)=>_0x93de00?_0x53b335(_0x93de00):_0x1446c1(_0x5117b3)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x5b3394=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x5e367b=await Promise['all'](_0x5b3394['map'](async _0x23b8ce=>{const _0x572c18=[];if(!_0x23b8ce['list_id'])_0x572c18['push']('Liste');if(!_0x23b8ce['zeitabstand'])_0x572c18['push']('Zeitabstand');if(!_0x23b8ce['account'])_0x572c18['push']('Instagram\x20Account');if(_0x23b8ce['account'])try{const _0x2810fe=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x23b8ce['account']]);if(!_0x2810fe)_0x572c18['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0xd0cd1d=_0x2810fe['cookie']&&_0x2810fe['cookie']['trim']()!==''&&_0x2810fe['cookie']['trim']()!=='[]';if(!_0xd0cd1d)_0x572c18['push']('Instagram\x20Login');}}catch(_0x4487e9){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x4487e9['message']),_0x572c18['push']('Instagram\x20Account');}let _0x418bdf='N/A',_0x6125fd='N/A';if(!_0x572c18['includes']('Liste')){try{const _0x23f52c=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x23b8ce['list_id']);_0x418bdf=_0x23f52c?.['lead_count']??0x0;}catch(_0x54a14b){if(/no such table/i['test'](_0x54a14b['message']))_0x572c18['push']('Liste\x20nicht\x20vorhanden');}try{const _0x2155a2=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x23b8ce['list_id']]);_0x6125fd=_0x2155a2?.['contacted_count']??0x0;}catch(_0x4391d8){}}return{'campaign_name':_0x23b8ce['campaign_name'],'lead_count':_0x418bdf,'contacted_count':_0x6125fd,'status':_0x572c18['length']===0x0?'Positiv':'Fehler:\x20'+_0x572c18['join'](',\x20')};}));return{'status':'success','campaigns':_0x5e367b};}catch(_0xdee7eb){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0xdee7eb['message']),{'status':'error','message':_0xdee7eb['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x5cc42c,_0xe83f12)=>{return new Promise((_0x25688b,_0x5025f2)=>{const _0x3c352e='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x3c352e,[_0xe83f12],(_0x4e7d09,_0x1f8e55)=>{_0x4e7d09?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x4e7d09),_0x5025f2(_0x4e7d09)):(console['log']('ROWS'),console['log'](_0x1f8e55),debugDatabaseContents(),_0x25688b(_0x1f8e55));});});});const showTableContents=_0x5c5727=>{return new Promise((_0x36aa0d,_0x187528)=>{const _0x40f38c='SELECT\x20*\x20FROM\x20'+_0x5c5727+';';campaignDB['all'](_0x40f38c,(_0x48b443,_0x44ec59)=>{_0x48b443?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x5c5727+':',_0x48b443),_0x187528(_0x48b443)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x5c5727+':',_0x44ec59),_0x36aa0d({'status':'success','message':_0x44ec59}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x1d1620){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x1d1620);}}ipcMain['handle']('create-campaign',async(_0x33f31a,_0x567342)=>{return new Promise((_0x52e9f5,_0x1e66a4)=>{const _0x169f99='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x169f99,[String(_0x567342)],function(_0x1877fd){_0x1877fd?_0x1e66a4(_0x1877fd):_0x52e9f5({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x54d68e,_0x5488b9)=>{return new Promise((_0x48fb39,_0x5dcabe)=>{const _0x545bf2='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x545bf2,[_0x5488b9],function(_0xfb9da4){_0xfb9da4?_0x5dcabe(_0xfb9da4):_0x48fb39({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x3758bd,_0x736eca,_0x546209,_0x349ddc,_0x32b91f,_0x359a62,_0x4e143b,_0x52a35b,_0xaf9422,_0x204bb9)=>{const _0x39ded7=await createMessageID(_0x32b91f);return new Promise((_0x110da,_0x3784b4)=>{console['log']('ZEITABSTAND:\x20'+_0x349ddc);if(!_0x736eca||!_0x546209||_0x349ddc===undefined||_0x349ddc===null||_0x349ddc===''||!_0x39ded7||!_0x359a62)return _0x3784b4({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x39ded7);const _0x1ccc70='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x1ccc70,[_0x546209,_0x349ddc,_0x39ded7,_0x359a62,_0x4e143b,_0x52a35b,_0xaf9422,_0x204bb9,_0x736eca],function(_0x37bb3b){if(_0x37bb3b)_0x3784b4({'status':'error','message':_0x37bb3b['message']});else this['changes']===0x0?_0x3784b4({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x110da({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x15abaa,_0x15e1b9,_0x724916,_0x36f1e6,_0x7e97b9)=>{return new Promise((_0x188fce,_0x5cf014)=>{const _0x1bdab5='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x1bdab5,[_0x15e1b9,_0x724916,_0x36f1e6,_0x7e97b9],function(_0x1f1fd6){return _0x1f1fd6?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x1f1fd6['message']),_0x5cf014('insert-dm-response',{'success':![],'message':_0x1f1fd6['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x188fce('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xed7653=>{return new Promise((_0x342191,_0xca2b66)=>{const _0x62537a='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x62537a,[_0xed7653],(_0x35eca4,_0x2e1c25)=>{if(_0x35eca4)_0xca2b66({'status':'error','message':_0x35eca4['message']});else{if(_0x2e1c25)_0x342191(_0x2e1c25['message_id']);else{const _0xc9d702='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0xc9d702,[_0xed7653],function(_0x25a026){_0x25a026?_0xca2b66({'status':'error','message':_0x25a026['message']}):_0x342191(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x3c259b,_0x535b58)=>{return new Promise((_0x2f90b7,_0x173587)=>{const _0x39e00b='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x535b58;db['get'](_0x39e00b,(_0xd17de5,_0x4e2005)=>{_0xd17de5?_0x173587({'status':'error','message':_0xd17de5['message']}):_0x2f90b7({'status':'success','count':_0x4e2005['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x209540,_0x5256e9){try{const _0xca90bd=await new Promise((_0x6fe527,_0x5b6ed9)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5256e9],(_0x94e480,_0x1c588a)=>{if(_0x94e480)_0x5b6ed9(_0x94e480);else{if(_0x1c588a['length']>0x0){let _0x3781e3=JSON['parse'](_0x1c588a[0x0]['cookie']);console['log'](_0x3781e3),_0x6fe527(_0x3781e3);}else _0x5b6ed9(new Error('User\x20with\x20username\x20'+_0x5256e9+'\x20does\x20not\x20exist.'));}});});await _0x209540['setCookie'](..._0xca90bd),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x4e45cb){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4e45cb);}}async function saveCookiesForUser(_0x1079f4,_0x28e5e6){try{const _0x313cb7=await _0x1079f4['cookies']();if(!_0x313cb7||_0x313cb7['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x28e5e6);const _0x199214=JSON['stringify'](_0x313cb7);if(_0x199214['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x28e5e6);return new Promise((_0x2e1faf,_0x201a63)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x28e5e6],(_0x1a3000,_0x26ad34)=>{if(_0x1a3000)return console['error']('Error\x20checking\x20user\x20existence:',_0x1a3000),_0x201a63(_0x1a3000);if(_0x26ad34){const _0x2c44d6=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x2c44d6['run'](_0x199214,_0x28e5e6,function(_0x5a73ef){return _0x5a73ef?(console['error']('Error\x20updating\x20cookies:',_0x5a73ef),_0x201a63(_0x5a73ef)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x28e5e6),_0x2e1faf());});}else{const _0x556fe7=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x556fe7['run'](_0x28e5e6,_0x199214,function(_0x38deae){return _0x38deae?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x38deae),_0x201a63(_0x38deae)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x28e5e6),_0x2e1faf());});}});});}catch(_0x53a29d){console['error']('Error\x20fetching\x20cookies:',_0x53a29d);throw _0x53a29d;}}async function createUserIfNotExists(_0x2a4a0c){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x2a4a0c],(_0x4aa08a,_0x2b5cbf)=>{if(_0x4aa08a){console['error']('Error\x20checking\x20user\x20existence:',_0x4aa08a);throw _0x4aa08a;}else{if(!_0x2b5cbf){const _0x5ca016=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x5ca016['run'](_0x2a4a0c,function(_0x46cf4d){_0x46cf4d?console['error']('Error\x20inserting\x20new\x20user:',_0x46cf4d):console['log']('New\x20user\x20created:',_0x2a4a0c);});}else console['log']('User\x20already\x20exists:',_0x2a4a0c);}});}catch(_0x14364b){console['error']('Error\x20creating\x20user:',_0x14364b);throw _0x14364b;}}ipcMain['handle']('create-relation',async(_0xd696d0,_0x569b6b)=>{return new Promise((_0x53ec1c,_0x28d700)=>{const _0x5922e8='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x569b6b+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x5922e8,function(_0x5e153b){_0x5e153b?_0x28d700(_0x5e153b):_0x53ec1c({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x3c2223,_0x2f0194)=>{return console['log']('droping\x20table'+_0x2f0194),new Promise((_0x10669f,_0x2322d2)=>{const _0xd35a98='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x2f0194;console['log']('droping\x20table'+_0x2f0194),db['run'](_0xd35a98,function(_0x2b04a4){_0x2b04a4?_0x2322d2(_0x2b04a4):_0x10669f({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x5962e2=>{return new Promise((_0xcf0e25,_0x3a3be2)=>{const _0x1b3b0c='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x1b3b0c,[],(_0x2b9160,_0x9fbbbd)=>{_0x2b9160?_0x3a3be2(_0x2b9160):_0xcf0e25(_0x9fbbbd['map'](_0x4f885c=>_0x4f885c['name']));});});}),ipcMain['handle']('add-user',async(_0x4551a6,_0x1f4c11,_0x2120ab)=>{return new Promise(_0x550180=>{const _0x59bd87=db['prepare']('INSERT\x20INTO\x20'+_0x2120ab+'\x20(username)\x20VALUES\x20(?)');_0x59bd87['run'](_0x1f4c11,function(_0x214f47){_0x214f47?console['log']('error\x20in\x20add-user:'+_0x214f47):_0x550180({'status':'success','id':this['lastID']});}),_0x59bd87['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x9f7a4b,_0x3d62fe)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x327031,_0x557220)=>{if(_0x327031)_0x3d62fe(_0x327031);else{_0x9f7a4b({'status':'success','users':_0x557220});for(_0x557220 of _0x557220){console['log'](_0x557220['username']);}}});});}),ipcMain['handle']('get-data',async(_0x56650d,_0x314c6c)=>{return new Promise((_0x3b302a,_0x2a6fd1)=>{const _0x48d78c='SELECT\x20*\x20FROM\x20'+_0x314c6c;console['log'](_0x48d78c),db['all'](_0x48d78c,[],(_0xb133f1,_0x54bee8)=>{_0xb133f1?_0x2a6fd1(_0xb133f1):_0x3b302a(_0x54bee8);});});}),ipcMain['handle']('get-accounts',async _0x3669ea=>{return new Promise((_0x1cf79e,_0x50627d)=>{const _0x55718f='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x55718f),igaccountsDB['all'](_0x55718f,[],(_0x3e7f0e,_0x5053de)=>{_0x3e7f0e?_0x50627d(_0x3e7f0e):_0x1cf79e(_0x5053de);});});}),ipcMain['handle']('get-targets',async(_0x209e05,_0x216f9c)=>{return getTargetProfiles(_0x216f9c);}),ipcMain['handle']('delete-user',async(_0x565a47,_0x2d3a10,_0x30448d)=>{return new Promise((_0x342953,_0x35ca75)=>{const _0x39e690=db['prepare']('DELETE\x20FROM\x20'+_0x30448d+'\x20WHERE\x20username\x20=\x20?');_0x39e690['run'](_0x2d3a10,function(_0x36152a){_0x36152a?_0x35ca75(_0x36152a):_0x342953({'status':'success','changes':this['changes']});}),_0x39e690['finalize']();});}),ipcMain['handle']('delete-account',async(_0x3f2ff3,_0x4abc8f)=>{const _0x32c715=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x32c715['run'](_0x4abc8f,function(_0x18b80f){_0x18b80f&&console['log'](_0x18b80f);}),_0x32c715['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x50856a,_0x228657)=>{const _0x7f1e40='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x7f1e40,[],(_0x51f4f9,_0x56c7d1)=>{_0x51f4f9?_0x228657({'status':'error','message':_0x51f4f9['message']}):_0x50856a({'status':'success','contactedCount':_0x56c7d1['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x5a0465,_0x1d5aa9)=>{const _0x578201='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x578201,[],(_0x89da78,_0x1b11a4)=>{_0x89da78?_0x1d5aa9({'status':'error','message':_0x89da78['message']}):_0x5a0465({'status':'success','contactedCount':_0x1b11a4['contactedCount']});});});});function exportDatabase(_0x320772){return new Promise((_0x22f764,_0x382849)=>{const _0x1378ce='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x320772+'\x0a\x20\x20\x20\x20';db['all'](_0x1378ce,[],async(_0x3f92d2,_0xcca373)=>{if(_0x3f92d2){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x3f92d2['message']),_0x382849(_0x3f92d2);return;}if(!_0xcca373||_0xcca373['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x22f764();return;}const _0x1c5c74=XLSX['utils']['json_to_sheet'](_0xcca373),_0x2c99b5=XLSX['utils']['sheet_to_csv'](_0x1c5c74);try{const {canceled:_0x1c4db2,filePath:_0x40d534}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x320772+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x1c4db2||!_0x40d534){console['log']('Speichern\x20abgebrochen.'),_0x22f764();return;}fs['writeFile'](_0x40d534,_0x2c99b5,'utf8',_0x3cbd46=>{_0x3cbd46?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x3cbd46['message']),_0x382849(_0x3cbd46)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x40d534),_0x22f764());});}catch(_0x3df7ff){console['error']('Fehler\x20im\x20Speicherdialog:',_0x3df7ff),_0x382849(_0x3df7ff);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x97b47c,_0x4a1703)=>{shell['openExternal'](_0x4a1703);});