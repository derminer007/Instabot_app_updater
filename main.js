const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');let t=(_0x1eab22,_0x46c25d)=>{if(_0x46c25d&&typeof _0x46c25d==='object')try{return String(_0x1eab22)['replace'](/\{(\w+)\}/g,(_0x2f0b1a,_0x443444)=>_0x46c25d[_0x443444]!=null?String(_0x46c25d[_0x443444]):'{'+_0x443444+'}');}catch(_0x3d4886){}return _0x1eab22;},setLanguage=()=>{},getLanguage=()=>'de';try{const i18nMod=require('./i18n');if(i18nMod&&typeof i18nMod['t']==='function')t=i18nMod['t'];if(i18nMod&&typeof i18nMod['setLanguage']==='function')setLanguage=i18nMod['setLanguage'];if(i18nMod&&typeof i18nMod['getLanguage']==='function')getLanguage=i18nMod['getLanguage'];}catch(a0_0x4e7af7){console['warn']('[i18n]\x20i18n.js\x20nicht\x20gefunden\x20–\x20Fallback\x20aktiv.\x20Grund:',a0_0x4e7af7&&a0_0x4e7af7['message']?a0_0x4e7af7['message']:a0_0x4e7af7);}function quoteIdent(_0x36b0dd){if(_0x36b0dd===undefined||_0x36b0dd===null)throw new Error('Invalid\x20identifier');const _0x3b9885=String(_0x36b0dd),_0xf4b848=_0x3b9885['replace'](/"/g,'\x22\x22');return'\x22'+_0xf4b848+'\x22';}async function extractFirstName(_0x370588,_0x4f102b){try{const _0x183bea=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x4f102b},'body':JSON['stringify']({'clearname':_0x370588})});if(!_0x183bea['ok']){const _0x7a4854=await _0x183bea['text']();throw new Error(_0x183bea['status']+':\x20'+_0x7a4854);}const _0x365382=await _0x183bea['json']();return _0x365382;}catch(_0x259225){console['error']('Error\x20in\x20extractFirstName:',_0x259225);throw _0x259225;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_ACCOUNT_PRIVAT_LABEL='//span[contains(.,\x20\x27private\x27)]',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_SEE_ALL_FOLLOWERS_TEXT='//span[contains(.,\x20\x27Only\x27)\x20and\x20contains(.,\x20\x27all\x20followers.\x27)]',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x5a2f55=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x5a2f55['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x5a2f55['webContents']['openDevTools']();}app['whenReady']()['then'](async()=>{try{await initOptionsDb(),console['log']('[OptionsDB]\x20initialisiert:',path['join'](SqlDataDirectory,'options.db'));}catch(_0xe32db4){console['error']('[OptionsDB]\x20Initialisierung\x20fehlgeschlagen:',_0xe32db4);}})['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x38cd3a){var _0x16fa08=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2bd370){console['log']('window\x20id:'+_0x2bd370['id']),_0x2bd370['id']>0x1&&(_0x16fa08=!![]);}),console['log']('child\x20opened\x20='+_0x16fa08);if(!_0x16fa08){const _0x265ad6=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x265ad6['loadFile'](_0x38cd3a['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));try{optionsDb&&(optionsDb['close'](),optionsDb=null,console['log']('[OptionsDB]\x20geschlossen.'));}catch(_0x5b64a7){console['warn']('[OptionsDB]\x20Fehler\x20beim\x20Schließen:',_0x5b64a7?.['message']||_0x5b64a7);}if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x4802ce=require('fs'),_0x9f0499=path['join'](app['getPath']('userData'),'data'),_0x2c9a62=['campaign.db','crm.db','igaccounts.db'],_0x51f4f1=[];try{_0x4802ce['mkdirSync'](_0x9f0499,{'recursive':!![]});for(const _0x337b01 of _0x2c9a62){const _0x3edcd0=path['join'](process['resourcesPath'],'app','build','data',_0x337b01),_0x59c006=path['join'](_0x9f0499,_0x337b01);!_0x4802ce['existsSync'](_0x59c006)?(_0x4802ce['copyFileSync'](_0x3edcd0,_0x59c006),console['log']('[InitDB]\x20Kopiert\x20'+_0x337b01+'\x20nach:\x20'+_0x59c006)):console['log']('[InitDB]\x20'+_0x337b01+'\x20existiert\x20bereits:\x20'+_0x59c006),_0x51f4f1['push'](_0x59c006);}}catch(_0x3a5d37){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x3a5d37);}return _0x51f4f1;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x1aee95,AppUpdate:_0x23df7f}=require('electron-updater');_0x1aee95['autoDownload']=![],_0x1aee95['autoInstallOnAppQuit']=!![],_0x1aee95['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x1aee95['on']('update-available',_0x37cc1c=>{console['log']('Update\x20verfügbar:',_0x37cc1c),_0x1aee95['downloadUpdate']();}),_0x1aee95['on']('update-downloaded',_0x429398=>{console['log']('Update\x20heruntergeladen:',_0x429398),_0x1aee95['quitAndInstall']();}),_0x1aee95['on']('error',_0x107aec=>{console['error']('Fehler\x20beim\x20Updaten:',_0x107aec);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x1d971,AppUpdate:_0x31ac6c}=require('electron-updater');_0x1d971['autoDownload']=![],_0x1d971['autoInstallOnAppQuit']=!![],_0x1d971['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x1d971['on']('update-available',_0x35b6d8=>{console['log']('Update\x20verfügbar:',_0x35b6d8),_0x1d971['downloadUpdate']();}),_0x1d971['on']('update-downloaded',_0x18c7b9=>{console['log']('Update\x20heruntergeladen:',_0x18c7b9),console['log']('Neustarten\x20zum\x20Updaten');}),_0x1d971['on']('error',_0x304a9c=>{console['error']('Fehler\x20beim\x20Updaten:',_0x304a9c);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let optionsDb,optionsDbPath;function ensureDirSync(_0x2dd44b){try{fs_no_promise['mkdirSync'](_0x2dd44b,{'recursive':!![]});}catch(_0x4de29c){}}function initOptionsDb(){return new Promise((_0x40b54f,_0x4b10c9)=>{try{ensureDirSync(SqlDataDirectory),optionsDbPath=path['join'](SqlDataDirectory,'options.db'),optionsDb=new sqlite3['Database'](optionsDbPath,_0x4a306=>{if(_0x4a306)return _0x4b10c9(_0x4a306);optionsDb['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20options\x20(key\x20TEXT\x20PRIMARY\x20KEY,\x20value\x20TEXT\x20NOT\x20NULL)',_0x285d4b=>{if(_0x285d4b)return _0x4b10c9(_0x285d4b);optionsDb['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)',['isHeadless','1'],_0x575828=>{if(_0x575828)return _0x4b10c9(_0x575828);optionsDb['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)',['app_language','de'],async _0x51df70=>{if(_0x51df70)return _0x4b10c9(_0x51df70);try{const _0x4a7722=await getOption('app_language');setLanguage(_0x4a7722||'de');}catch(_0x45a535){}_0x40b54f();});});});});}catch(_0x42a9d9){_0x4b10c9(_0x42a9d9);}});}function setOption(_0x35b4dd,_0x1f746e){return new Promise((_0x56bbd9,_0xcfc64f)=>{if(!optionsDb)return _0xcfc64f(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['run']('INSERT\x20INTO\x20options\x20(key,\x20value)\x20VALUES\x20(?,\x20?)\x20ON\x20CONFLICT(key)\x20DO\x20UPDATE\x20SET\x20value\x20=\x20excluded.value',[_0x35b4dd,String(_0x1f746e)],_0x598c41=>{if(_0x598c41)return _0xcfc64f(_0x598c41);_0x56bbd9();});});}function getOption(_0x5528d1){return new Promise((_0x358b1c,_0x4dc7ac)=>{if(!optionsDb)return _0x4dc7ac(new Error('Options-DB\x20nicht\x20initialisiert'));optionsDb['get']('SELECT\x20value\x20FROM\x20options\x20WHERE\x20key\x20=\x20?',[_0x5528d1],(_0x210eb1,_0x3ba580)=>{if(_0x210eb1)return _0x4dc7ac(_0x210eb1);_0x358b1c(_0x3ba580?_0x3ba580['value']:null);});});}async function setAppLanguage(_0xfeb6fe){const _0x485658=_0xfeb6fe==='en'||_0xfeb6fe==='de'?_0xfeb6fe:'de';return await setOption('app_language',_0x485658),setLanguage(_0x485658),_0x485658;}async function getAppLanguage(){const _0x39693c=await getOption('app_language'),_0x44415d=_0x39693c==='en'||_0x39693c==='de'?_0x39693c:'de';return setLanguage(_0x44415d),_0x44415d;}async function getIsHeadless(){try{const _0x1ca67f=await getOption('isHeadless');if(_0x1ca67f===null||_0x1ca67f===undefined)return!![];if(_0x1ca67f==='1'||_0x1ca67f==='true'||_0x1ca67f===!![])return!![];if(_0x1ca67f==='0'||_0x1ca67f==='false'||_0x1ca67f===![])return![];return console['log']('[OptionsDB]\x20getIsHeadless\x20unerwarteter\x20Wert:',_0x1ca67f),Boolean(_0x1ca67f);}catch(_0x62376d){return console['warn']('[OptionsDB]\x20getIsHeadless\x20Fehler,\x20fallback=true:',_0x62376d?.['message']||_0x62376d),!![];}}function setGlobalDelay(_0x200d29){return new Promise(async(_0x312a7b,_0x3f012f)=>{try{if(!optionsDb)return _0x3f012f(new Error('Options-DB\x20nicht\x20initialisiert'));const _0x4448ab=_0x200d29===null||_0x200d29===undefined||_0x200d29===''?'':String(Number(_0x200d29));await setOption('zeitabstand_global',_0x4448ab),_0x312a7b();}catch(_0x20658b){_0x3f012f(_0x20658b);}});}function getGlobalDelay(){return new Promise(async(_0x1ab0ee,_0x133a57)=>{try{if(!optionsDb)return _0x133a57(new Error('Options-DB\x20nicht\x20initialisiert'));const _0x2da8a0=await getOption('zeitabstand_global');if(_0x2da8a0===null||_0x2da8a0===undefined||_0x2da8a0==='')return _0x1ab0ee(null);const _0x3540a3=Number(_0x2da8a0);if(Number['isFinite'](_0x3540a3))return _0x1ab0ee(_0x3540a3);optionsDb['get']('SELECT\x20zeitabstand_global\x20FROM\x20options\x20WHERE\x20key\x20=\x20?\x20LIMIT\x201',['__global__'],(_0x343b95,_0x37bcaa)=>{if(_0x343b95)return _0x133a57(_0x343b95);if(_0x37bcaa&&(_0x37bcaa['zeitabstand_global']||_0x37bcaa['zeitabstand_global']===0x0)){const _0x3de3f6=Number(_0x37bcaa['zeitabstand_global']);return _0x1ab0ee(Number['isFinite'](_0x3de3f6)?_0x3de3f6:null);}return _0x1ab0ee(null);});}catch(_0x80314f){_0x133a57(_0x80314f);}});}let browser_login=null;async function getBrowserPageLogin(){let _0xda5a96='',_0x4b7ae0=null;if(process['platform']==='darwin')_0xda5a96=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0xda5a96=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0xda5a96}),_0x4b7ae0=await browser_login['newPage'](),_0x4b7ae0['setDefaultNavigationTimeout'](0x3a98),_0x4b7ae0['setDefaultTimeout'](0x3a98),await _0x4b7ae0['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x4b7ae0;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x232dac=0x1,_0x16216b=0x0){try{let _0x1104d3='',_0x2f47f0=null;const _0x4dbf71=await getIsHeadless();if(process['platform']==='darwin')_0x1104d3=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1104d3=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}_0x232dac===0x0&&!pageStack[_0x16216b]&&(browser=await puppeteer['launch']({'headless':_0x4dbf71,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1104d3}),_0x2f47f0=await browser['newPage'](),_0x2f47f0['setDefaultNavigationTimeout'](0x3a98),_0x2f47f0['setDefaultTimeout'](0x3a98),await _0x2f47f0['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x16216b]=_0x2f47f0);(browser===null||pageStack[_0x16216b]===null||pageStack[_0x16216b]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x4dbf71,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1104d3}));(pageStack[_0x16216b]===null||pageStack[_0x16216b]['isClosed']())&&(_0x2f47f0=await browser['newPage'](),_0x2f47f0['setDefaultNavigationTimeout'](0x3a98),_0x2f47f0['setDefaultTimeout'](0x3a98),await _0x2f47f0['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x16216b]=_0x2f47f0);try{await pageStack[_0x16216b]['evaluate'](()=>!![]);}catch(_0x5d03b8){const _0x4799f2=String(_0x5d03b8&&_0x5d03b8['message']?_0x5d03b8['message']:_0x5d03b8),_0x378aa0=/(detached\s*frame|Session closed|Target closed|Execution context was destroyed|Cannot find context)/i['test'](_0x4799f2);if(_0x378aa0){try{if(pageStack[_0x16216b])await pageStack[_0x16216b]['close']()['catch'](()=>{});}catch(_0x362419){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x4cfcd0){}browser=await puppeteer['launch']({'headless':_0x4dbf71,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1104d3});const _0x28ef98=await browser['newPage']();_0x28ef98['setDefaultNavigationTimeout'](0x3a98),_0x28ef98['setDefaultTimeout'](0x3a98),await _0x28ef98['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x16216b]=_0x28ef98;}else{try{if(pageStack[_0x16216b])await pageStack[_0x16216b]['close']()['catch'](()=>{});}catch(_0x4e7f89){}try{if(browser)await browser['close']()['catch'](()=>{});}catch(_0x27aa55){}browser=await puppeteer['launch']({'headless':_0x4dbf71,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1104d3});const _0x1b451a=await browser['newPage']();_0x1b451a['setDefaultNavigationTimeout'](0x3a98),_0x1b451a['setDefaultTimeout'](0x3a98),await _0x1b451a['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x16216b]=_0x1b451a;}}return pageStack[_0x16216b];}catch(_0x302be9){console['error']('Failed\x20to\x20launch\x20browser:',_0x302be9);const _0x220996=new Error(t('backend.errorBrowserStart')+'\x20:\x20'+_0x302be9);throw _0x220996;}}ipcMain['on']('login',async(_0x3e37a1,_0x507e46)=>{const _0x2dc69b=await getBrowserPageLogin();await _0x2dc69b['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x2dc69b,_0x507e46),ipcMain['on']('setLoginCookies',async(_0xd5c084,_0x585774)=>{try{await set_login_cookies(_0x2dc69b,_0x585774);}catch(_0x36a4e5){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x36a4e5);}});}),ipcMain['handle']('set-headless',async(_0x42b8a7,_0x15fb29)=>{const _0x23d711=!!_0x15fb29;if(!optionsDb)try{await initOptionsDb();}catch(_0x19bba9){console['error']('[OptionsDB]\x20Init\x20on\x20set-headless\x20fehlgeschlagen:',_0x19bba9);}return await setOption('isHeadless',_0x23d711?'1':'0'),console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20(DB)\x20auf:',_0x23d711),{'ok':!![],'headless':_0x23d711};}),ipcMain['handle']('get-headless',async()=>{const _0x2a8895=await getIsHeadless();return{'headless':_0x2a8895};}),ipcMain['handle']('set-global-delay',async(_0x24f904,_0x2edfd2)=>{if(!optionsDb)try{await initOptionsDb();}catch(_0xb8721e){console['error']('[OptionsDB]\x20Init\x20on\x20set-global-delay\x20fehlgeschlagen:',_0xb8721e);}return await setGlobalDelay(_0x2edfd2),{'ok':!![]};}),ipcMain['handle']('get-global-delay',async()=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x5c858b){console['error']('[OptionsDB]\x20Init\x20on\x20get-global-delay\x20fehlgeschlagen:',_0x5c858b);}const _0x19e7d=await getGlobalDelay();return{'value':_0x19e7d};}),ipcMain['handle']('get-language',async()=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x556104){console['error']('[OptionsDB]\x20Init\x20on\x20get-language\x20fehlgeschlagen:',_0x556104);}const _0x47fb32=await getAppLanguage();return{'lang':_0x47fb32};}),ipcMain['handle']('set-language',async(_0x29767b,_0x35f5bd)=>{if(!optionsDb)try{await initOptionsDb();}catch(_0x3c85d4){console['error']('[OptionsDB]\x20Init\x20on\x20set-language\x20fehlgeschlagen:',_0x3c85d4);}const _0x1ae449=await setAppLanguage(_0x35f5bd);return{'ok':!![],'lang':_0x1ae449};}),ipcMain['on']('export-relation',async(_0x38c1e1,_0x2e8d52)=>{try{await exportDatabase(_0x2e8d52),_0x38c1e1['reply']('export-relation-response',{'success':!![]});}catch(_0x35731d){console['error'](_0x35731d),_0x38c1e1['reply']('export-relation-response',{'success':![],'message':_0x35731d['message']});}}),ipcMain['handle']('sendMessage',async(_0x13515f,_0x200a75,_0x2f8e00,_0x2f8c3e,_0x21b4cd,_0x9b62ad,_0x5549f8,_0x1237be,_0x433fb0,_0x2f44cb,_0x50795f,_0x5bbf85,_0x7e908c)=>{isStopping=![];let _0x59bad9=null;return _0x5549f8?_0x59bad9=await getBrowserPage(_0x21b4cd,_0x1237be):_0x59bad9=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x200a75),send_message(_0x59bad9,_0x200a75,_0x2f8e00,_0x2f8c3e,_0x21b4cd,_0x9b62ad,_0x433fb0,_0x2f44cb,_0x50795f,_0x5bbf85,_0x7e908c);}),ipcMain['handle']('stop-action',async(_0x21788b,_0x429b0e)=>{isStopping=!![];const _0x475d93=await getBrowserPage(0x1,_0x429b0e);await _0x475d93['close']();}),ipcMain['handle']('fetch_followers',async(_0x1bdda0,_0x3303b3,_0x1800aa,_0x530a6e,_0x56ac60,_0x1147a0,_0x399833)=>{isStopping=![];const _0x105440=await getBrowserPage();return fetch_followers_from_account(_0x1bdda0,_0x105440,_0x3303b3,_0x1800aa,_0x530a6e,_0x56ac60,_0x1147a0,_0x399833);}),ipcMain['handle']('get-account-details',async(_0xb123aa,_0xae6b0c,_0x250d4c,_0xa7337d)=>{isStopping=![];const _0x53f46a=await getBrowserPage();return fetch_account_details(_0x53f46a,_0xae6b0c,_0x250d4c,_0xa7337d);}),ipcMain['handle']('fetch_likes',async(_0x30341e,_0x326c7d,_0x34ebbf,_0x332b82,_0x1ca1bb,_0x287867,_0x1076f3)=>{isStopping=![];const _0x336d62=await getBrowserPage();return fetch_likers_from_post(_0x30341e,_0x336d62,_0x326c7d,_0x34ebbf,_0x332b82,_0x1ca1bb,_0x287867,_0x1076f3);}),ipcMain['handle']('fetch_comments',async(_0x574060,_0x46259b,_0x7b2ba9,_0x4138fc,_0x47e799,_0x5975c4,_0xd488de)=>{isStopping=![];const _0x185624=await getBrowserPage();return fetch_comments_from_post(_0x574060,_0x185624,_0x46259b,_0x7b2ba9,_0x4138fc,_0x47e799,_0x5975c4,_0xd488de);});async function updateAppSilent(){const {spawn:_0x2ba8a3}=require('child_process'),_0x36ee4a=require('path'),_0x512510=require('electron-log');return _0x512510['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2d71d1,_0x4347b1)=>{const {updateElectronApp:_0x93bad7,UpdateSourceType:_0x3c6cbe}=require('update-electron-app');_0x93bad7({'updateSource':{'type':_0x3c6cbe['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x512510}),_0x2d71d1('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x337559,_0x9c521a)=>{doFullElectronUpdateSilent(),_0x337559('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x3c7dbe}=require('child_process'),_0x5b0b15=require('path'),_0x13341c=require('electron-log');return _0x13341c['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x36305a,_0x2caca8)=>{const {updateElectronApp:_0x58b3eb,UpdateSourceType:_0x368b57}=require('update-electron-app');_0x58b3eb({'updateSource':{'type':_0x368b57['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x13341c}),_0x36305a('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x37e0ef,_0x1f79f7)=>{doFullElectronUpdate(),_0x37e0ef('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise(async(_0x4186b1,_0x125688)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x4186b1('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x12c5ad=await ensurePatchedMacUpdaterScript(),_0x243515=spawn('/bin/bash',[_0x12c5ad],{'detached':!![],'stdio':'ignore'});_0x243515['unref'](),setTimeout(()=>{_0x4186b1('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x125688(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}async function ensurePatchedMacUpdaterScript(){const _0x4e7faf=path['join'](__dirname,'mac-updater-intern.sh'),_0x218963=['https://raw.githubusercontent.com/derminer007/Instabot_app_updater/main/mac-updater-intern.sh','https://raw.githubusercontent.com/derminer007/Instabot_app_updater/staging/mac-updater-intern.sh'];for(const _0x24e535 of _0x218963){try{const _0x1b6f83=await fetch(_0x24e535);if(!_0x1b6f83['ok'])throw new Error('HTTP\x20'+_0x1b6f83['status']);const _0x7713cc=await _0x1b6f83['text']();await fs['writeFile'](_0x4e7faf,_0x7713cc,{'encoding':'utf8'});try{fs_no_promise['chmodSync'](_0x4e7faf,0x1ed);}catch(_0xa329cd){}return _0x4e7faf;}catch(_0xcd5698){console['warn']('[Updater]\x20Laden\x20von\x20'+_0x24e535+'\x20fehlgeschlagen:',_0xcd5698?.['message']||_0xcd5698);}}return console['warn']('[Updater]\x20Verwende\x20lokales\x20mac-updater-intern.sh\x20ohne\x20Patch\x20(Download\x20fehlgeschlagen).'),_0x4e7faf;}ipcMain['handle']('get-os-system',async _0x3f1e24=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x559256,_0x3fe95a)=>{console['log']('Update\x20Silent:\x20'+_0x3fe95a);if(_0x3fe95a){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x57bc10,_0x10b589){return Math['random']()*(_0x10b589-_0x57bc10+0x1)+_0x57bc10;}function delay(_0xb3ed15,_0x565147){let _0x2eb4f=getRnd(_0xb3ed15,_0x565147);return new Promise(function(_0x22b5f6){setTimeout(_0x22b5f6,_0x2eb4f);});}async function scroll(_0x571be6,_0x4636d6,_0x3abf1a=0x2,_0x503431){const _0x3e4deb=await _0x571be6['waitForSelector'](_0x4636d6);for(let _0x22bc9=0x0;_0x22bc9<_0x3abf1a;_0x22bc9++){console['log']('Scrolling\x20'+_0x22bc9),await _0x571be6['evaluate'](_0x4df360=>{const _0x279a05=document['querySelector'](_0x4df360);_0x279a05&&_0x279a05['scrollBy'](0x0,0x190);},_0x4636d6),await delay(0x320,0x5dc),_0x503431();}}async function saveCookies(_0x4db2a7){let _0x3dbe2a=await _0x4db2a7['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x3dbe2a,null,0x2));}async function notificationClear(_0x11ac3d){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x11ac3d['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x11ac3d['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x2d927f){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x2d927f);}}async function getTargetProfiles(_0x1f74c6){return new Promise((_0x4baa9e,_0x52be38)=>{const _0x2eff71=quoteIdent(_0x1f74c6);db['all']('SELECT\x20*\x20FROM\x20'+_0x2eff71,(_0x53db5f,_0xafb5d9)=>{_0x53db5f?_0x52be38(_0x53db5f):_0x4baa9e(_0xafb5d9);});});}async function login_legacy(_0x5eb842,_0x3a322d,_0x1b393b){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x5eb842,_0x3a322d),await createUserIfNotExists(_0x3a322d,_0x1b393b);}catch(_0x842612){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x842612);}try{await _0x5eb842['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x5eb842['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x5eb842['click']('button._a9--._ap36._a9_0');}catch(_0x2d6a4e){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x5eb842['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x5eb842['type']('input[name=\x27username\x27]',_0x3a322d,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5eb842['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x5eb842['type']('input[name=\x27password\x27]',_0x1b393b,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5eb842['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x5eb842['click']('button[type=\x27submit\x27]');}catch(_0x1a33db){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x5eb842),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x5eb842,_0x3a322d);}catch(_0x4a2eae){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4a2eae);}}catch(_0x2b808c){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2b808c);}}async function login(_0x20ac44,_0x5e4818){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x20ac44,_0x5e4818),await createUserIfNotExists(_0x5e4818);}catch(_0x63cd9){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x63cd9);}try{await _0x20ac44['goto']('https://www.instagram.com/accounts/login/');}catch(_0x170f51){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x170f51);}}async function set_login_cookies(_0x39105d,_0x3bc55f){try{await saveCookiesForUser(_0x39105d,_0x3bc55f);}catch(_0x439d82){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x439d82);}}async function waitForXPath(_0x1e54b5,_0x461ea0,_0xe18a7={}){return await _0x1e54b5['waitForFunction'](_0x20051c=>{return document['evaluate'](_0x20051c,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0xe18a7,_0x461ea0),_0x1e54b5['evaluateHandle'](_0x3d6577=>document['evaluate'](_0x3d6577,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x461ea0);}async function waitForSelectorWithFallbacks(_0x1404ba,_0x192cb8,_0x3d200a={}){!Array['isArray'](_0x192cb8)&&(_0x192cb8=[_0x192cb8]);for(let _0x4a1727=0x0;_0x4a1727<_0x192cb8['length'];_0x4a1727++){const _0x55a795=_0x192cb8[_0x4a1727],_0x41c60b=_0x55a795['startsWith']('//')||_0x55a795['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x41c60b?'XPath':'Selector')+'\x20'+(_0x4a1727+0x1)+'/'+_0x192cb8['length']+':\x20'+_0x55a795['substring'](0x0,0x32)+'...');const _0x2745cf=_0x4a1727===0x0?_0x3d200a['timeout']||0x1388:0x7d0;let _0x18d7d6;if(_0x41c60b){const _0x405179=await waitForXPath(_0x1404ba,_0x55a795,{..._0x3d200a,'timeout':_0x2745cf});if(!_0x405179)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x18d7d6=_0x405179;}else _0x18d7d6=await _0x1404ba['waitForSelector'](_0x55a795,{..._0x3d200a,'timeout':_0x2745cf});return console['log']((_0x41c60b?'XPath':'Selector')+'\x20'+(_0x4a1727+0x1)+'\x20gefunden!'),_0x18d7d6;}catch(_0x11db7f){console['log']((_0x41c60b?'XPath':'Selector')+'\x20'+(_0x4a1727+0x1)+'\x20nicht\x20gefunden:\x20'+_0x11db7f['message']);if(_0x4a1727===_0x192cb8['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x192cb8['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x11db7f['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x1d98d3,_0x55b03e,_0x1574f1={}){return await _0x1d98d3['waitForFunction'](_0x22d58e=>{return document['evaluate'](_0x22d58e,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x1574f1,_0x55b03e),_0x1d98d3['evaluateHandle'](_0x55a3ff=>{const _0x385694=document['evaluate'](_0x55a3ff,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x185a68=[];for(let _0x42610e=0x0;_0x42610e<_0x385694['snapshotLength'];_0x42610e++){_0x185a68['push'](_0x385694['snapshotItem'](_0x42610e));}return _0x185a68;},_0x55b03e)['then'](_0x51223e=>_0x51223e['getProperties']());}ipcMain['handle']('check-login',async(_0xd71b9,_0x382922)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x2a11ce){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x4b7857){}browser=null;}const _0x3cd4e3=await getBrowserPage(0x0,0x0),_0x5c2522=await checkCookiesSession(_0x3cd4e3,_0x382922);return _0x5c2522;});async function checkCookiesSession(_0x2dc49b,_0x4f4c43){try{await setCookiesForUser(_0x2dc49b,_0x4f4c43),console['log']('Cookies\x20für\x20'+_0x4f4c43+'\x20erfolgreich\x20geladen');}catch(_0x29ed1e){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x4f4c43+':',_0x29ed1e),![];}try{await _0x2dc49b['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0xed7641){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0xed7641);}await delay(0x6a4,0x7d0);try{const _0x2c0500=await checkLoginStatus(_0x2dc49b);return console['log']('Login-Status\x20für\x20'+_0x4f4c43+':\x20'+_0x2c0500),_0x2c0500;}catch(_0x3ebcf5){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x4f4c43+':',_0x3ebcf5['message']),![];}}async function checkLoginStatus(_0x1c12f4){const _0x52bfb5=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//a[@role=\x27link\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x5dab48=null;try{_0x5dab48=await waitForSelectorWithFallbacks(_0x1c12f4,_0x52bfb5,{'timeout':0x7d0});}catch(_0x2ab062){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x2ab062),!![];}if(_0x5dab48){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x1939a4){const _0x421067=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0xf1dd60=null;try{_0xf1dd60=await waitForSelectorWithFallbacks(_0x1939a4,_0x421067,{'timeout':0x7d0});}catch(_0xae8cae){return console['log']('Seite\x20existiert:\x20'+_0xae8cae),!![];}if(_0xf1dd60){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x216b23){try{const _0x998668=await _0x216b23['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x998668['length']);if(_0x998668&&_0x998668['length']>0x0){const _0x225585=_0x998668[0x0];await _0x225585['click'](),await delay(0xaf0,0xbb8);const _0x565b0b=await _0x216b23['evaluate'](()=>{const _0x224e50=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x224e50;});if(_0x565b0b){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x38a310=await _0x216b23['$$'](K_BEITRAG_LIKE_BUTTON),_0x2fefc8=_0x38a310[0x0];await delay(0x514,0x5dc),await _0x216b23['evaluate'](_0x4a4e59=>{_0x4a4e59['click']();},_0x2fefc8);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x216b23['goBack'](),await delay(0x7d0,0x898);}}catch(_0x70b78c){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x70b78c);throw new Error('Like_Posts:\x20'+_0x70b78c);}}async function likeFirstStory(_0x56942e){try{const _0x1d8f10=await _0x56942e['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x1d8f10['length']);if(_0x1d8f10&&_0x1d8f10['length']>0x0){const _0x3af325=_0x1d8f10[0x0];await _0x3af325['click'](),await delay(0xaf0,0xbb8);const _0x488743=await _0x56942e['evaluate'](()=>{const _0x257fc7=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x257fc7;});if(_0x488743){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x429d55=await _0x56942e['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x56942e['click'](_0x429d55);}catch(_0xd534e9){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0xd534e9);try{const _0x5ca852=await _0x56942e['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x56942e['evaluateHandle'](_0x3672f8=>{_0x3672f8['click']();},_0x5ca852);}catch(_0x4564c4){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x4564c4),await _0x56942e['evaluate'](()=>{const _0x42ba59=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x42ba59)_0x42ba59['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x56942e['goBack'](),await delay(0x7d0,0x898);}}catch(_0x35b8eb){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x35b8eb);throw new Error('Like_Storys:\x20'+_0x35b8eb);}}async function send_message(_0x3d2ff9,_0x3f8c12,_0x3d654e,_0x33926a,_0x573407,_0x13b973,_0x49cb9e,_0x23fdce,_0x1079ac,_0x219c94,_0x5496f3){return new Promise(async(_0x435df4,_0x5c66fd)=>{_0x13b973=_0x13b973['split'](';'),console['log'](_0x13b973[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x573407);if(_0x33926a===null||_0x33926a===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x5c66fd('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x3d2ff9,_0x13b973[0x0]);}catch(_0x315f82){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x315f82),_0x435df4({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x315f82});return;}await delay(0x6a4,0x7d0);try{await _0x3d2ff9['goto']('https://www.instagram.com/'+_0x3f8c12+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x3d2ff9);}catch(_0x4e6f1b){_0x435df4({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x4e6f1b});return;}try{await checkLoginStatus(_0x3d2ff9);}catch(_0x6402c9){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x6402c9),_0x5c66fd('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x1079ac==0x1)try{await likeFirstPost(_0x3d2ff9);}catch(_0x50bac7){_0x5c66fd(_0x50bac7);}if(_0x219c94==0x1)try{await likeFirstStory(_0x3d2ff9);}catch(_0x1483e9){_0x5c66fd(_0x1483e9);}console['log']('UserSkip:\x20'+_0x49cb9e);if(_0x49cb9e==0x1)try{const _0x13a77e=await _0x3d2ff9['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x1254e7=>_0x1254e7['textContent']['trim']());console['log'](_0x13a77e);if(_0x13a77e==='Following'||_0x13a77e==='Folge\x20ich')return _0x435df4({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x2b7bda){}await delay(0x6a4,0x7d0);try{const _0x681b51=await waitForSelectorWithFallbacks(_0x3d2ff9,K_DIRECT_MSG_BUTTON);await _0x681b51['click'](),await delay(0xa8c,0xdac);try{const _0x105dde=await waitForSelectorWithFallbacks(_0x3d2ff9,K_EXPAND_MSG_BUTTON);await _0x105dde['click']();}catch(_0x1fc6be){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x1fc6be);}}catch(_0x10bd2b){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x10bd2b);try{await delay(0xa8c,0xbb8);try{const _0x4bd687=await waitForSelectorWithFallbacks(_0x3d2ff9,K_OPTIONS_BUTTON);await _0x4bd687['click']();}catch(_0x8f7cf4){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x8f7cf4),_0x435df4({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x8f7cf4});return;}await delay(0xa8c,0xbb8);const _0x155ec6=await waitForXPath(_0x3d2ff9,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x155ec6['click']();}catch(_0x409e04){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x409e04),_0x435df4({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x3d2ff9);}catch(_0x4492e9){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x4492e9);}try{await delay(0xaf0,0xdac);const _0x21febd=await waitForSelectorWithFallbacks(_0x3d2ff9,K_CHAT_INPUT_FIELD,{'timeout':0x3a98});if(_0x23fdce){const _0x58ae3c=await _0x3d2ff9['$'](K_ALREADY_CHATTED);if(_0x58ae3c)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x3f8c12),_0x435df4({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x18b790=await _0x3d2ff9['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x18b790),_0x33926a=_0x33926a['replace']('{USERNAME}',_0x3f8c12);let _0x28c774;if(_0x33926a['includes']('{NAME}')||_0x33926a['includes']('{name}'))try{const _0xd5c6a3=await extractFirstName(_0x18b790,_0x5496f3);console['log']('Response\x20Clearname\x20valid:\x20'+_0xd5c6a3['valid']),_0xd5c6a3['valid']?(_0x33926a=_0x33926a['replaceAll'](/{NAME}|{name}/g,_0xd5c6a3['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0xd5c6a3['name']),_0x28c774=_0xd5c6a3['name']):(_0x33926a=_0x33926a['replaceAll'](/ ?({NAME}|{name})/g,''),_0x28c774='UNKNOWN_NAME');}catch(_0x3b7e5c){console['log'](_0x3b7e5c['message']),_0x28c774=_0x3b7e5c['message'];const _0x28a3fb=_0x18b790?_0x18b790['replace'](/[^\p{L}\s]/gu,''):'',_0x39690f=_0x28a3fb['split']('\x20')[0x0]||'';_0x39690f['length']>0x2&&!_0x39690f['includes']('Instagram')?_0x33926a=_0x33926a['replaceAll'](/{NAME}|{name}/g,_0x39690f):_0x33926a=_0x33926a['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x33926a);const _0x11333c=_0x33926a['split']('\x0a');await _0x21febd['type'](_0x11333c[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x30333d=0x1;_0x30333d<_0x11333c['length'];_0x30333d++){await _0x3d2ff9['keyboard']['down']('Shift'),await _0x3d2ff9['keyboard']['press']('Enter'),await _0x3d2ff9['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x11333c[_0x30333d]['length']>0x0&&await _0x21febd['type'](_0x11333c[_0x30333d],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x2c9ed1=await waitForSelectorWithFallbacks(_0x3d2ff9,K_SEND_MSG_BUTTON);await _0x2c9ed1['click']();}catch(_0x4cda17){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x4cda17),_0x435df4({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x3f8c12+'\x20überspringen.','error':_0x4cda17['message']});}await delay(0x320,0x3e8),_0x435df4({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x18b790,'extracted_clearname':_0x28c774});}catch(_0x253771){let _0x582dcb=_0x253771;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x582dcb),_0x435df4({'status':0x1f4,'message':'Error\x20500:\x20'+_0x582dcb});}});}function handle_fail(_0x3d59ad){if(isStopping)return new Promise(_0x238ff3=>{_0x238ff3('Scraper\x20gestoppt.');});else{let _0x5d8fc1='';switch(_0x3d59ad){case 0x0:_0x5d8fc1='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x5d8fc1='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x5d8fc1='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x5d8fc1='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x21337f,_0x1545b9)=>{_0x1545b9(_0x5d8fc1);});}}async function fetch_account_details(_0x333738,_0x3b6cfa,_0x5df803,_0x49bf6e){try{await setCookiesForUser(_0x333738,_0x5df803['username']);}catch(_0x37f3a3){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x37f3a3);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x37f3a3);return handle_fail(0x0);}_0x333738['setDefaultNavigationTimeout'](0x7530),await _0x333738['goto']('https://www.instagram.com/'+_0x3b6cfa+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x333738);const _0x185bc1=await _0x333738['evaluate'](()=>{const _0x32bfff=document['querySelector']('meta[property=\x22og:image\x22]');return _0x32bfff?_0x32bfff['getAttribute']('content'):null;});await _0x333738['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x23d4d8=await _0x333738['evaluate'](()=>{const _0x2b7ca5=document['querySelector']('meta[name=\x22description\x22]');if(!_0x2b7ca5)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x17fff8=_0x2b7ca5['getAttribute']('content');if(!_0x17fff8)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x17fff8);const _0x158107=/\s*[–-]\s*/,_0x47e2c6=_0x17fff8['split'](_0x158107);if(_0x47e2c6['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x5805ea=_0x47e2c6[0x0],_0x1aa52c=_0x47e2c6[0x1],_0xc1488c=_0x5805ea['split'](',\x20');if(_0xc1488c['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x5b8644=_0xc1488c[0x0]['split']('\x20')[0x0],_0x3135fe=_0xc1488c[0x1]['split']('\x20')[0x0],_0x4de086=_0xc1488c[0x2]['split']('\x20')[0x0];let _0x1b7665='',_0x44abcc='';const _0x1a3d81='\x20on\x20Instagram:\x20',_0x5d1433=_0x1aa52c['split'](_0x1a3d81);return _0x1b7665=_0x5d1433[0x0]['trim'](),_0x1b7665=_0x1b7665['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x5d1433['length']>0x1&&(_0x44abcc=_0x5d1433[0x1]['trim'](),_0x44abcc['startsWith']('\x22')&&_0x44abcc['endsWith']('\x22')&&(_0x44abcc=_0x44abcc['substring'](0x1,_0x44abcc['length']-0x1)['trim']()),_0x44abcc=_0x44abcc['replace'](/&quot;/g,'')['trim']()),{'followers':_0x5b8644,'following':_0x3135fe,'posts':_0x4de086,'nameText':_0x1b7665,'bio':_0x44abcc};});console['log']('Extracted\x20profile\x20data:',_0x23d4d8);const _0x363c03=_0x23d4d8['nameText'],_0x523ca6=_0x185bc1,_0x32b4e1=_0x23d4d8['bio'],_0x46cd9a=_0x23d4d8['followers'],_0xb69865=_0x23d4d8['following'],_0x5cfaad=_0x23d4d8['posts'],_0xac7214=![],_0x4f9efb=![],_0xd01b18=![],_0x748e23='\x0a\x20\x20INSERT\x20INTO\x20'+quoteIdent(_0x49bf6e)+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x748e23,[_0x3b6cfa,_0x363c03,_0x523ca6,_0x32b4e1,_0x46cd9a,_0xb69865,_0x5cfaad,_0xac7214,_0x4f9efb,_0xd01b18],function(_0x43d64a){_0x43d64a?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x43d64a['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4ee5fb,_0xe4de1d,_0x42f987,_0x374dd4,_0x54f7a4,_0x12b5bf,_0x2b2319,_0xbf60c2){let _0x480ee7=0x4,_0x702ae9=0x0,_0x3dd1d5=0x0;try{await setCookiesForUser(_0xe4de1d,_0x12b5bf['username']);}catch(_0x33fcb4){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x33fcb4);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x33fcb4);return handle_fail(0x0);}let _0x1b56f4=0x0;try{await _0xe4de1d['goto']('https://www.instagram.com/'+_0x42f987+'/'),await notificationClear(_0xe4de1d);try{await checkLoginStatus(_0xe4de1d);}catch(_0xb1889e){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0xb1889e);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0xe4de1d);}catch(_0x5762f7){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x5762f7);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}let _0xe52d75=null;try{_0xe52d75=await waitForSelectorWithFallbacks(_0xe4de1d,FOLLOWER_ACCOUNT_PRIVAT_LABEL,{'timeout':0x1388});if(_0xe52d75)throw new Error('Angegebener\x20Account\x20ist\x20privat');}catch(_0x548c38){if(_0xe52d75)throw new Error('Angegebener\x20Account\x20ist\x20privat');console['log']('Privat-Label\x20nicht\x20gefunden\x20(fortfahren):\x20'+(_0x548c38?.['message']||_0x548c38));}try{if(_0x374dd4<=0x0){const _0xa2446=await _0xe4de1d['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x3a458e=await _0xe4de1d['evaluate'](_0x128f8f=>_0x128f8f['innerHTML'],_0xa2446);_0x1b56f4=Math['ceil'](_0x3a458e/0x4);}else _0x1b56f4=Math['ceil'](_0x374dd4/0x4);_0x480ee7+=_0x1b56f4,_0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]);let _0xe8501d=await _0xe4de1d['waitForSelector']('a[href=\x22/'+_0x42f987+'/followers/\x22]');await delay(0xbb8,0x1388),await _0xe4de1d['evaluate'](_0x135c13=>{_0x135c13['click']();},_0xe8501d),console['log']('Follower\x20Liste\x20von\x20'+_0x42f987+'\x20gesichtet'),_0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]);}catch(_0x33d78f){console['log']('Follower\x20Liste\x20von\x20'+_0x42f987+'\x20nicht\x20gefunden:'+_0x33d78f);throw new Error('Follower\x20Liste\x20von\x20'+_0x42f987+'\x20nicht\x20gefunden:'+_0x33d78f);return handle_fail(0x0);}}catch(_0x2b3d18){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2b3d18);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2b3d18);return handle_fail(0x0);}let _0x449107=null;try{_0x449107=await waitForSelectorWithFallbacks(_0xe4de1d,FOLLOWER_SEE_ALL_FOLLOWERS_TEXT,{'timeout':0x1388});}catch(_0x3a82c8){console['log']('Hinweis-Label\x20(Only\x20see\x20all\x20followers)\x20nicht\x20gefunden:\x20'+_0x3a82c8);}try{await delay(0x12c0,0x1388),_0x449107&&(_0x4ee5fb['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':t('backend.followersOnlyInfo')}),_0x1b56f4>0xa&&(_0x1b56f4=0xa));}catch(_0x56437a){console['warn']('Snackbar\x20Sendeversuch\x20fehlgeschlagen:',_0x56437a?.['message']||_0x56437a);}try{await delay(0x12c,0x1f4),console['log']('Auto-scrolls:\x20'+_0x1b56f4);try{await scroll(_0xe4de1d,FOLLOWER_FENSTER,_0x1b56f4,_0x1fd009=>{_0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]);});}catch{console['log']('Fallback\x20div:has\x20ausgelöst'),await scroll(_0xe4de1d,'div.x6nl9eh.x1a5l9x9.x7vuprf.x1mg3h75.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',_0x1b56f4,_0x59bbfd=>{});}_0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]),await _0xe4de1d['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x112e53=await _0xe4de1d['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x156c6c=await _0xe4de1d['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]);_0x374dd4<=0x0&&(_0x374dd4=_0x112e53['length']);let _0x36d6eb=[];for(let _0xdcc184=0x0;_0xdcc184<_0x112e53['length']&&_0xdcc184<_0x374dd4;_0xdcc184++){const _0x461dcf=await _0x112e53[_0xdcc184]['evaluate'](_0xfd566f=>_0xfd566f['textContent']),_0x454d2f=await _0x156c6c[_0xdcc184]['evaluate'](_0x4dec1e=>_0x4dec1e['textContent']);if(_0xbf60c2){const _0xc07cb4=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x12b5bf['username'],_0x461dcf]);if(_0xc07cb4){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x461dcf);continue;}}_0x36d6eb['push'](_0x461dcf);const _0x294f42='INSERT\x20INTO\x20'+quoteIdent(_0x54f7a4)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x294f42,[_0x461dcf,_0x454d2f],function(_0xde2bc2){_0xde2bc2?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x54f7a4+'\x27:',_0xde2bc2['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3dd1d5=Math['round'](++_0x702ae9/_0x480ee7*0x64),_0x4ee5fb['sender']['send']('fetch-progress',_0x3dd1d5,!![]),_0x2b2319&&(_0x4ee5fb['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4ee5fb,_0xe4de1d,_0x12b5bf,_0x54f7a4,_0x36d6eb)),_0x449107&&_0x4ee5fb['sender']['send']('show-snackbar',{'open':!![],'severity':'info','message':t('backend.followersOnlyDone',{'count':_0x112e53['length']})}),new Promise(_0x49bd14=>{_0x49bd14('Scraping\x20finished!');});}catch(_0x259a27){if(_0x2b2319)throw new Error(_0x259a27);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x42f987+'\x20nicht\x20gefunden:\x20'+_0x259a27);return handle_fail(0x0);}}async function fetch_details_from_list(_0xbbc868,_0x40f00f,_0x2aeaea,_0x5104f1,_0x53f646){let _0x1420b5=0x0,_0x109313=0x0;for(let _0x822c4b=0x0;_0x822c4b<_0x53f646['length'];_0x822c4b++){console['log']('Processing\x20profile:',_0x53f646[_0x822c4b]);try{await fetch_account_details(_0x40f00f,_0x53f646[_0x822c4b],_0x2aeaea,_0x5104f1);}catch(_0x495a9c){console['error']('Detailed\x20Scraping\x20von:\x20',_0x53f646[_0x822c4b],_0x495a9c);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x53f646[_0x822c4b]+'\x20'+_0x495a9c);}_0x109313=Math['round'](++_0x1420b5/_0x53f646['length']*0x64),_0xbbc868['sender']['send']('fetch-progress',_0x109313,!![],!![]);}}async function fetch_likers_from_post(_0x3f279b,_0x580dfd,_0xbef5c1,_0x496401,_0x1b9d6d,_0x4ed9df,_0x1e2383,_0x12d16f){let _0x349286=0x4,_0x2a3712=0x0,_0x5e1d06=0x0;try{await setCookiesForUser(_0x580dfd,_0x4ed9df['username']);}catch(_0xb69b0e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0xb69b0e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0xb69b0e);return handle_fail(0x1);}_0x5e1d06=Math['round'](++_0x2a3712/_0x349286*0x64),_0x3f279b['sender']['send']('fetch-progress',_0x5e1d06,!![]);try{let _0x432d81=_0xbef5c1['substring'](0x0,_0xbef5c1['lastIndexOf']('/'));_0x432d81['includes']('/reel/')&&(_0x432d81=_0x432d81['replace']('/reel/','/p/'));let _0x190f88=_0x432d81+'/liked_by';console['log'](_0x190f88),await _0x580dfd['goto'](_0x190f88),await delay(0x7d0,0xfa0),await notificationClear(_0x580dfd),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x580dfd);}catch(_0x459419){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x459419);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x580dfd);}catch(_0xd18eec){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0xd18eec);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x5e1d06=Math['round'](++_0x2a3712/_0x349286*0x64),_0x3f279b['sender']['send']('fetch-progress',_0x5e1d06,!![]),await _0x580dfd['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x66034d=await _0x580dfd['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x7994e7=await _0x580dfd['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x66034d['length']);let _0x236a32=path['join'](__dirname,'/likers.csv');_0x5e1d06=Math['round'](++_0x2a3712/_0x349286*0x64),_0x3f279b['sender']['send']('fetch-progress',_0x5e1d06,!![]);_0x496401<=0x0&&(_0x496401=_0x66034d['length']);try{let _0x58a429=[];for(let _0x59c2d3=0x0;_0x59c2d3<_0x66034d['length']&&_0x59c2d3<_0x496401;_0x59c2d3++){const _0x436096=await _0x66034d[_0x59c2d3]['evaluate'](_0x27db37=>_0x27db37['textContent']),_0xc4081=await _0x7994e7[_0x59c2d3]['evaluate'](_0x274d8a=>_0x274d8a['textContent']);if(_0x12d16f){const _0x4ade88=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x4ed9df['username'],_0x436096]);if(_0x4ade88){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x436096);continue;}}_0x58a429['push'](_0x436096);const _0x564294='INSERT\x20INTO\x20'+quoteIdent(_0x1b9d6d)+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x564294,[_0x436096,_0xc4081],function(_0x48eddb){_0x48eddb?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x1b9d6d+'\x27:',_0x48eddb['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x5e1d06=Math['round'](++_0x2a3712/_0x349286*0x64),_0x3f279b['sender']['send']('fetch-progress',_0x5e1d06,!![]),_0x1e2383&&(_0x3f279b['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3f279b,_0x580dfd,_0x4ed9df,_0x1b9d6d,_0x58a429)),new Promise(_0x5e362f=>{_0x5e362f('Scraping\x20finished!');});}catch(_0x4c0e6b){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x4c0e6b);return handle_fail(0x1);}}catch(_0x223fab){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x223fab);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x223fab);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x548caf,_0x87dab0,_0x5e7290,_0x55a65d,_0x3538b9,_0x2ac777,_0x5b11fe,_0x31304c){let _0x5c3a6e=0x3,_0x559574=0x0,_0x43e896=0x0;try{await setCookiesForUser(_0x87dab0,_0x2ac777['username']);}catch(_0x7d4d3e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x7d4d3e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x7d4d3e);return handle_fail(0x2);}try{console['log'](_0x5e7290),await _0x87dab0['goto'](_0x5e7290),await delay(0x7d0,0xfa0),await notificationClear(_0x87dab0),await delay(0xc8,0x1f4);const _0x2bd525=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x87dab0);}catch(_0x31ded3){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x31ded3);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x87dab0);}catch(_0x19cd6a){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x19cd6a);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x319bb4;const _0x471ca0=await _0x87dab0['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x538b35=await _0x87dab0['evaluate'](_0x2ff820=>_0x2ff820['innerHTML'],_0x471ca0),_0x25705e=String(_0x538b35)['replace'](/[^0-9]/g,''),_0x541df1=Number(_0x25705e)/0x14;_0x55a65d<=0x0?_0x319bb4=Math['ceil'](_0x541df1/0x3):_0x319bb4=Math['ceil'](_0x55a65d/0x3);_0x5c3a6e+=_0x319bb4,_0x43e896=Math['round'](++_0x559574/_0x5c3a6e*0x64),_0x548caf['sender']['send']('fetch-progress',_0x43e896,!![]),console['log']('Auto-scrolls:\x20'+_0x319bb4),await scroll(_0x87dab0,_0x2bd525,_0x319bb4,_0x35aead=>{_0x43e896=Math['round'](++_0x559574/_0x5c3a6e*0x64),_0x548caf['sender']['send']('fetch-progress',_0x43e896,!![]);});try{const _0x50adee=COM_REPLY_BUTTON_SPAN,_0x5d4f44=await waitForXPathAll(_0x87dab0,_0x50adee);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x5d4f44['size']),await delay(0x1f4,0x320);let _0x2ff816=_0x5d4f44['size'],_0x11063c=[];for(const [_0x234020,_0x525c43]of _0x5d4f44){_0x11063c['push'](_0x525c43);}console['log']('Alle\x20Reply-Buttons:',_0x11063c['length']);try{for(let _0x23b51e=0x0;_0x23b51e<_0x2ff816;_0x23b51e++){await _0x11063c[_0x23b51e]['click'](),await delay(0x320,0x5dc);}}catch(_0x4aa367){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x4aa367);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x4aa367);return handle_fail(0x2);}}catch(_0x48ff90){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x254c48=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x87dab0['waitForSelector'](_0x254c48),await delay(0x1f4,0x320),_0x43e896=Math['round'](++_0x559574/_0x5c3a6e*0x64),_0x548caf['sender']['send']('fetch-progress',_0x43e896,!![]);const _0x20f04d=await _0x87dab0['$$'](_0x254c48);let _0x518afe=path['join'](__dirname,'/comments.csv');_0x55a65d<=0x0&&(_0x55a65d=_0x20f04d['length']);console['log']('fetch_limit:\x20'+_0x55a65d),console['log']('comments_len:\x20'+_0x20f04d['length']),_0x55a65d++;try{let _0x26553a=[];for(let _0x3b8392=0x1;_0x3b8392<_0x20f04d['length']&&_0x3b8392<_0x55a65d;_0x3b8392++){const _0x359a3a=await _0x20f04d[_0x3b8392]['evaluate'](_0xc9b815=>_0xc9b815['textContent']);if(_0x31304c){const _0x8216ea=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x2ac777['username'],_0x359a3a]);if(_0x8216ea){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x359a3a);continue;}}try{_0x26553a['push'](_0x359a3a);const _0x3c73db='INSERT\x20INTO\x20'+quoteIdent(_0x3538b9)+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x3c73db,[_0x359a3a],function(_0x50c932){_0x50c932&&console['log']('error\x20in\x20add-user:'+_0x50c932);});}catch(_0x411414){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3b8392+'\x20:\x20'+_0x411414);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3b8392+'\x20:\x20'+_0x411414);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x43e896=Math['round'](++_0x559574/_0x5c3a6e*0x64),_0x548caf['sender']['send']('fetch-progress',_0x43e896,!![]),_0x548caf['sender']['send']('fetch-progress',0x64,!![]),_0x5b11fe&&(_0x548caf['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x548caf,_0x87dab0,_0x2ac777,_0x3538b9,_0x26553a)),_0x548caf['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x306636=>{_0x306636('Scraping\x20finished!');});}catch(_0x457293){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x457293);return handle_fail(0x2);}}catch(_0x2d38f6){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x2d38f6);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x2d38f6);return handle_fail(0x2);}}async function set_clearname_from_username(_0x40c813,_0x26ea1f,_0x52dc60=null){try{let _0x237cb7,_0x2fa83e;const _0x1247f6='SELECT\x20username\x20FROM\x20'+quoteIdent(_0x26ea1f)+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x1247f6,[],(_0x22a1e9,_0x37ec9a)=>{_0x22a1e9&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x22a1e9['message']),_0x37ec9a['length']===0x0&&(_0x2fa83e=_0x37ec9a['length']),_0x237cb7=_0x37ec9a['map'](_0x1ac47a=>_0x1ac47a['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x2fa83e);if(_0x2fa83e===0x0){console['log']('Leave');return;}const _0x498cd5=await _0x40c813['waitForSelector'](IG_SEARCH_BUTTON);await _0x498cd5['click'](),await delay(0x4b0,0x7d0);for(let _0x432665 of _0x237cb7){const _0x4045e8=await _0x40c813['waitForSelector'](IG_SEARCH_INPUT);await _0x4045e8['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x40c813['type'](IG_SEARCH_INPUT,_0x432665,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x162c9d=0x1;while(_0x162c9d!=0x14){console['log']('Schleife');try{let _0x498f0b=IG_NAME_SPAN_PART1+_0x162c9d+IG_USERNAME_SPAN_PART2;const _0x1bbe02=await _0x40c813['waitForSelector'](_0x498f0b),_0x1a4eea=await _0x40c813['evaluate'](_0x2bf302=>_0x2bf302['innerHTML'],_0x1bbe02);await delay(0xc8,0x1f4);if(_0x1a4eea==_0x432665){let _0xbf368=IG_NAME_SPAN_PART1+_0x162c9d+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x31e545=await _0x40c813['waitForSelector'](_0xbf368);let _0x471022=await _0x40c813['evaluate'](_0x55f607=>_0x55f607['innerHTML'],_0x31e545);const _0x1fc048=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0xc12848=_0x471022['match'](_0x1fc048);_0xc12848?_0x471022=_0xc12848[0x1]['trim']():_0x471022=_0x471022['trim']();_0x471022['includes']('•')&&(_0x471022=_0x471022['substring'](0x0,_0x471022['indexOf']('•')-0x1));const _0x3c419e='UPDATE\x20'+quoteIdent(_0x26ea1f)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x3c419e,[_0x471022,_0x1a4eea],function(_0x9d3658){_0x9d3658&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x9d3658['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x162c9d++;}catch(_0x32de8c){const _0x541cb7='UPDATE\x20'+quoteIdent(_0x26ea1f)+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x541cb7,['',_0x432665],function(_0x191c63){_0x191c63&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x191c63['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x32de8c);break;}}_0x52dc60&&_0x52dc60();}await _0x498cd5['click']();}catch(_0x4d3ed7){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x4d3ed7);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x3fc0f5,_0x2f65a6)=>{const _0x33b0de='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x33b0de,[],(_0x21f5cc,_0x3a5ea4)=>{_0x21f5cc?_0x2f65a6(_0x21f5cc):_0x3fc0f5(_0x3a5ea4);});});});const sqlGet=(_0x1d14e6,_0x5d2b93,_0xe7e477=[])=>new Promise((_0x2cbf0a,_0x42c82c)=>_0x1d14e6['get'](_0x5d2b93,_0xe7e477,(_0x410654,_0x382417)=>_0x410654?_0x42c82c(_0x410654):_0x2cbf0a(_0x382417))),sqlAll=(_0x479fd0,_0x451db6,_0x449e1e=[])=>new Promise((_0x357686,_0x218f8b)=>_0x479fd0['all'](_0x451db6,_0x449e1e,(_0x3fe593,_0x2734ee)=>_0x3fe593?_0x218f8b(_0x3fe593):_0x357686(_0x2734ee)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x279bf9=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x4e6fa4=await Promise['all'](_0x279bf9['map'](async _0x299016=>{const _0x193d13=[];if(!_0x299016['list_id'])_0x193d13['push']('Liste');if(!_0x299016['zeitabstand'])_0x193d13['push']('Zeitabstand');if(!_0x299016['account'])_0x193d13['push']('Instagram\x20Account');if(_0x299016['account'])try{const _0x3f73b7=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x299016['account']]);if(!_0x3f73b7)_0x193d13['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x1f101a=_0x3f73b7['cookie']&&_0x3f73b7['cookie']['trim']()!==''&&_0x3f73b7['cookie']['trim']()!=='[]';if(!_0x1f101a)_0x193d13['push']('Instagram\x20Login');}}catch(_0x4dd926){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x4dd926['message']),_0x193d13['push']('Instagram\x20Account');}let _0x28ee03='N/A',_0x214572='N/A';if(!_0x193d13['includes']('Liste')){try{const _0x3670ae=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+quoteIdent(_0x299016['list_id']));_0x28ee03=_0x3670ae?.['lead_count']??0x0;}catch(_0x25e48e){if(/no such table/i['test'](_0x25e48e['message']))_0x193d13['push']('Liste\x20nicht\x20vorhanden');}try{const _0x144a39=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x299016['list_id']]);_0x214572=_0x144a39?.['contacted_count']??0x0;}catch(_0x2660a8){}}return{'campaign_name':_0x299016['campaign_name'],'lead_count':_0x28ee03,'contacted_count':_0x214572,'status':_0x193d13['length']===0x0?'Positiv':'Fehler:\x20'+_0x193d13['join'](',\x20')};}));return{'status':'success','campaigns':_0x4e6fa4};}catch(_0x54cb66){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x54cb66['message']),{'status':'error','message':_0x54cb66['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x4c1384,_0x4d87f6)=>{return new Promise((_0x5636ac,_0x2fa304)=>{const _0x566721='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x566721,[_0x4d87f6],(_0xfc3235,_0x18f56c)=>{_0xfc3235?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0xfc3235),_0x2fa304(_0xfc3235)):(console['log']('ROWS'),console['log'](_0x18f56c),debugDatabaseContents(),_0x5636ac(_0x18f56c));});});});const showTableContents=_0x58dd87=>{return new Promise((_0xa5b58a,_0x53fac0)=>{const _0x47816f='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x58dd87)+';';campaignDB['all'](_0x47816f,(_0x399960,_0x146086)=>{_0x399960?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x58dd87+':',_0x399960),_0x53fac0(_0x399960)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x58dd87+':',_0x146086),_0xa5b58a({'status':'success','message':_0x146086}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x588a5d){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x588a5d);}}ipcMain['handle']('create-campaign',async(_0x1274b2,_0x3275fd)=>{return new Promise((_0x1ad550,_0x53b7e1)=>{const _0x283fe1='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x283fe1,[String(_0x3275fd)],function(_0x1db711){_0x1db711?_0x53b7e1(_0x1db711):_0x1ad550({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x339750,_0x2419f9)=>{return new Promise((_0x4dc33d,_0x43115e)=>{const _0x38f00b='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x38f00b,[_0x2419f9],function(_0x285f53){_0x285f53?_0x43115e(_0x285f53):_0x4dc33d({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x2f1727,_0xe3ca6c,_0x55b710,_0x538de5,_0xae8609,_0x373a8d,_0x2abb36,_0x33f629,_0xc52d4b,_0x50ea22)=>{const _0x267198=await createMessageID(_0xae8609);return new Promise((_0x192104,_0x55a22c)=>{console['log']('ZEITABSTAND:\x20'+_0x538de5);if(!_0xe3ca6c||!_0x55b710||_0x538de5===undefined||_0x538de5===null||_0x538de5===''||!_0x267198||!_0x373a8d)return _0x55a22c({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x267198);const _0x3da0d3='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x3da0d3,[_0x55b710,_0x538de5,_0x267198,_0x373a8d,_0x2abb36,_0x33f629,_0xc52d4b,_0x50ea22,_0xe3ca6c],function(_0x456f41){if(_0x456f41)_0x55a22c({'status':'error','message':_0x456f41['message']});else this['changes']===0x0?_0x55a22c({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x192104({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x3600b5,_0x36a30b,_0x44e395,_0x47b04a,_0x4be445)=>{return new Promise((_0x21ac7c,_0x1f4cab)=>{const _0x32eec4='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x32eec4,[_0x36a30b,_0x44e395,_0x47b04a,_0x4be445],function(_0x34a801){return _0x34a801?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x34a801['message']),_0x1f4cab('insert-dm-response',{'success':![],'message':_0x34a801['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x21ac7c('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x73116d=>{return new Promise((_0x292325,_0x1bd400)=>{const _0x9ac8b2='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x9ac8b2,[_0x73116d],(_0x3fdcb9,_0x16e1d7)=>{if(_0x3fdcb9)_0x1bd400({'status':'error','message':_0x3fdcb9['message']});else{if(_0x16e1d7)_0x292325(_0x16e1d7['message_id']);else{const _0x4cc0d6='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x4cc0d6,[_0x73116d],function(_0x398418){_0x398418?_0x1bd400({'status':'error','message':_0x398418['message']}):_0x292325(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x465a35,_0x53c4eb)=>{return new Promise((_0x459eed,_0x18d9d4)=>{const _0x57bf33='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+quoteIdent(_0x53c4eb);db['get'](_0x57bf33,(_0x46fd78,_0x242b95)=>{_0x46fd78?_0x18d9d4({'status':'error','message':_0x46fd78['message']}):_0x459eed({'status':'success','count':_0x242b95['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x71f004,_0x466847){try{const _0x4b5f05=await new Promise((_0x109774,_0x352ee8)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x466847],(_0xaea2f9,_0x38cc77)=>{if(_0xaea2f9)_0x352ee8(_0xaea2f9);else{if(_0x38cc77['length']>0x0){let _0x304c46=JSON['parse'](_0x38cc77[0x0]['cookie']);console['log'](_0x304c46),_0x109774(_0x304c46);}else _0x352ee8(new Error('User\x20with\x20username\x20'+_0x466847+'\x20does\x20not\x20exist.'));}});});await _0x71f004['setCookie'](..._0x4b5f05),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x4ccbb0){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4ccbb0);}}async function saveCookiesForUser(_0x53e973,_0x565cc8){try{const _0x270462=await _0x53e973['cookies']();if(!_0x270462||_0x270462['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x565cc8);const _0x5ee29c=JSON['stringify'](_0x270462);if(_0x5ee29c['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x565cc8);return new Promise((_0x4293fb,_0x4ab3c2)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x565cc8],(_0x1a28c8,_0x2456c9)=>{if(_0x1a28c8)return console['error']('Error\x20checking\x20user\x20existence:',_0x1a28c8),_0x4ab3c2(_0x1a28c8);if(_0x2456c9){const _0x43998f=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x43998f['run'](_0x5ee29c,_0x565cc8,function(_0x36ef25){return _0x36ef25?(console['error']('Error\x20updating\x20cookies:',_0x36ef25),_0x4ab3c2(_0x36ef25)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x565cc8),_0x4293fb());});}else{const _0xf8847e=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0xf8847e['run'](_0x565cc8,_0x5ee29c,function(_0x459b89){return _0x459b89?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x459b89),_0x4ab3c2(_0x459b89)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x565cc8),_0x4293fb());});}});});}catch(_0x209aba){console['error']('Error\x20fetching\x20cookies:',_0x209aba);throw _0x209aba;}}async function createUserIfNotExists(_0x47b1ab){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x47b1ab],(_0x34eba3,_0x4ceada)=>{if(_0x34eba3){console['error']('Error\x20checking\x20user\x20existence:',_0x34eba3);throw _0x34eba3;}else{if(!_0x4ceada){const _0x9b1f47=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x9b1f47['run'](_0x47b1ab,function(_0x44c91a){_0x44c91a?console['error']('Error\x20inserting\x20new\x20user:',_0x44c91a):console['log']('New\x20user\x20created:',_0x47b1ab);});}else console['log']('User\x20already\x20exists:',_0x47b1ab);}});}catch(_0x4ea37c){console['error']('Error\x20creating\x20user:',_0x4ea37c);throw _0x4ea37c;}}ipcMain['handle']('create-relation',async(_0x3b1502,_0x5941d8)=>{return new Promise((_0x3d0e56,_0x3b2088)=>{const _0x3a862c='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+quoteIdent(_0x5941d8)+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x3a862c,function(_0x473674){_0x473674?_0x3b2088(_0x473674):_0x3d0e56({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x32581c,_0x57b9cb)=>{return console['log']('droping\x20table'+_0x57b9cb),new Promise((_0x34b9c4,_0x363dc3)=>{const _0x2c936c='DROP\x20TABLE\x20IF\x20EXISTS\x20'+quoteIdent(_0x57b9cb);console['log']('droping\x20table'+_0x57b9cb),db['run'](_0x2c936c,function(_0x10764d){_0x10764d?_0x363dc3(_0x10764d):_0x34b9c4({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x57c5be=>{return new Promise((_0x3dc789,_0x380be6)=>{const _0x36073d='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x36073d,[],(_0x50f6f0,_0x5162eb)=>{_0x50f6f0?_0x380be6(_0x50f6f0):_0x3dc789(_0x5162eb['map'](_0x2209dc=>_0x2209dc['name']));});});}),ipcMain['handle']('add-user',async(_0x293c37,_0x29049a,_0x4d8827)=>{return new Promise(_0x1cbd6d=>{const _0x43484a=db['prepare']('INSERT\x20INTO\x20'+quoteIdent(_0x4d8827)+'\x20(username)\x20VALUES\x20(?)');_0x43484a['run'](_0x29049a,function(_0x1c7b7c){_0x1c7b7c?console['log']('error\x20in\x20add-user:'+_0x1c7b7c):_0x1cbd6d({'status':'success','id':this['lastID']});}),_0x43484a['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x25692b,_0xe63940)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x31a63d,_0xa0fa20)=>{if(_0x31a63d)_0xe63940(_0x31a63d);else{_0x25692b({'status':'success','users':_0xa0fa20});for(_0xa0fa20 of _0xa0fa20){console['log'](_0xa0fa20['username']);}}});});}),ipcMain['handle']('get-data',async(_0x2e78ad,_0x5e8946)=>{return new Promise((_0x10469c,_0x4e7618)=>{const _0x4f2c0f='SELECT\x20*\x20FROM\x20'+quoteIdent(_0x5e8946);console['log'](_0x4f2c0f),db['all'](_0x4f2c0f,[],(_0x1d7b2e,_0x5ddf5b)=>{_0x1d7b2e?_0x4e7618(_0x1d7b2e):_0x10469c(_0x5ddf5b);});});}),ipcMain['handle']('get-accounts',async _0x590fde=>{return new Promise((_0x220fb9,_0x54fefc)=>{const _0x4b64f4='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x4b64f4),igaccountsDB['all'](_0x4b64f4,[],(_0xac586d,_0x5a59ca)=>{_0xac586d?_0x54fefc(_0xac586d):_0x220fb9(_0x5a59ca);});});}),ipcMain['handle']('get-targets',async(_0x53b096,_0x1564dd)=>{return getTargetProfiles(_0x1564dd);}),ipcMain['handle']('delete-user',async(_0x18d95d,_0x186887,_0xf3e956)=>{return new Promise((_0x2e5214,_0x57051d)=>{const _0x1d590f=db['prepare']('DELETE\x20FROM\x20'+quoteIdent(_0xf3e956)+'\x20WHERE\x20username\x20=\x20?');_0x1d590f['run'](_0x186887,function(_0xf72821){_0xf72821?_0x57051d(_0xf72821):_0x2e5214({'status':'success','changes':this['changes']});}),_0x1d590f['finalize']();});}),ipcMain['handle']('delete-account',async(_0x4626f3,_0x3453ec)=>{const _0x519dac=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x519dac['run'](_0x3453ec,function(_0xcbbcfa){_0xcbbcfa&&console['log'](_0xcbbcfa);}),_0x519dac['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x188662,_0x41151f)=>{const _0x4e885d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4e885d,[],(_0x5ade69,_0x13b0ed)=>{_0x5ade69?_0x41151f({'status':'error','message':_0x5ade69['message']}):_0x188662({'status':'success','contactedCount':_0x13b0ed['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x53139b,_0x5bd3c0)=>{const _0x1ff9ac='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x1ff9ac,[],(_0x79f619,_0x4bf485)=>{_0x79f619?_0x5bd3c0({'status':'error','message':_0x79f619['message']}):_0x53139b({'status':'success','contactedCount':_0x4bf485['contactedCount']});});});});function exportDatabase(_0x51d3cd){return new Promise((_0x3022f1,_0x4ec4f9)=>{const _0x1a08ae='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+quoteIdent(_0x51d3cd)+'\x0a\x20\x20\x20\x20';db['all'](_0x1a08ae,[],async(_0x299bfb,_0x43fd16)=>{if(_0x299bfb){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x299bfb['message']),_0x4ec4f9(_0x299bfb);return;}if(!_0x43fd16||_0x43fd16['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x3022f1();return;}const _0x148551=XLSX['utils']['json_to_sheet'](_0x43fd16),_0x30f5c2=XLSX['utils']['sheet_to_csv'](_0x148551);try{const {canceled:_0x37ee08,filePath:_0x57fd5e}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x51d3cd+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x37ee08||!_0x57fd5e){console['log']('Speichern\x20abgebrochen.'),_0x3022f1();return;}fs['writeFile'](_0x57fd5e,_0x30f5c2,'utf8',_0x326624=>{_0x326624?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x326624['message']),_0x4ec4f9(_0x326624)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x57fd5e),_0x3022f1());});}catch(_0x34328d){console['error']('Fehler\x20im\x20Speicherdialog:',_0x34328d),_0x4ec4f9(_0x34328d);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x182b97,_0x484c34)=>{shell['openExternal'](_0x484c34);});