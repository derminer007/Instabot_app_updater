const {app,BrowserWindow,ipcMain,dialog}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_NEW_MSG_BUTTON='div.x1i10hfl.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.x6s0dn4.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x1ypdohk.x78zum5.xl56j7k.x1y1aw1k.x1sxyh0.xwib8y2.xurb0ha.xcdnw81',K_SEARCH_BAR_INPUT='body\x20>\x20div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x10l6tqk.x17qophe.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.x1q0g3np.x1a02dak.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20input',K_USERNAME_SPALTE_PART1='div:nth-child(',K_CLEARNAME_SPALTE_PART2=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1pi30zi.x1swvt13.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span\x20>\x20span',K_CHAT_BUTTON_DIV='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.x972fbf.xcfux6l.x1qhh985.xm0m39n.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.xexx8yu.x18d9i69.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1lq5wgf.xgqcy7u.x30kzoy.x9jhf4c.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x9bdzbf.x1ypdohk.x78zum5.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x1n2onr6.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xn3w4p2.x5ib6vp.xc73u3c.x1tu34mt.xzloghq',K_NACHRICHT_SCHREIBEN_INPUT_DIV='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1i64zmx.xw3qccf.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f.notranslate',K_SENDEN_BUTTON_DIV='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x404a11=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x404a11['loadFile'](path['join'](__dirname,'index.html'));}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x5f28b0){var _0x2cf977=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2d2941){console['log']('window\x20id:'+_0x2d2941['id']),_0x2d2941['id']>0x1&&(_0x2cf977=!![]);}),console['log']('child\x20opened\x20='+_0x2cf977);if(!_0x2cf977){const _0x153753=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x153753['loadFile'](_0x5f28b0['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0);});const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x326ce9='',_0x52c799=null;if(process['platform']==='darwin')_0x326ce9=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x326ce9=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x326ce9}),_0x52c799=await browser_login['newPage'](),_0x52c799['setDefaultNavigationTimeout'](0x1d4c),_0x52c799['setDefaultTimeout'](0x1d4c),_0x52c799;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x26f200=0x1,_0x4e1714=0x0){let _0x4f2eb4='',_0x28dab8=null;if(process['platform']==='darwin')_0x4f2eb4=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x4f2eb4=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x26f200===0x0&&!pageStack[_0x4e1714])return browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4f2eb4}),_0x28dab8=await browser['newPage'](),_0x28dab8['setDefaultNavigationTimeout'](0x1d4c),_0x28dab8['setDefaultTimeout'](0x1d4c),pageStack[_0x4e1714]=_0x28dab8,_0x28dab8;return(browser===null||pageStack[_0x4e1714]===null||pageStack[_0x4e1714]['isClosed']())&&(browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4f2eb4})),(pageStack[_0x4e1714]===null||pageStack[_0x4e1714]['isClosed']())&&(_0x28dab8=await browser['newPage'](),_0x28dab8['setDefaultNavigationTimeout'](0x1d4c),_0x28dab8['setDefaultTimeout'](0x1d4c),pageStack[_0x4e1714]=_0x28dab8),pageStack[_0x4e1714];}ipcMain['on']('login',async(_0x36969d,_0x5c3f30)=>{const _0x1e5148=await getBrowserPageLogin();await _0x1e5148['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x1e5148,_0x5c3f30);}),ipcMain['on']('setLoginCookies',async(_0xf7d7ce,_0x4f9e46)=>{const _0x4fc27c=await getBrowserPage();await set_login_cookies(_0x4fc27c,_0x4f9e46),await browser_login['close']();}),ipcMain['handle']('sendMessage',async(_0x13ba23,_0x1adc16,_0xdab350,_0x16ed6c,_0x1ef6a7,_0x1881af,_0x9a2c24,_0x2bf102)=>{isStopping=![];let _0xdbe95f=null;return _0x9a2c24?_0xdbe95f=await getBrowserPage(_0x1ef6a7,_0x2bf102):_0xdbe95f=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x1adc16),new Promise((_0x19c9f5,_0x2ef7f9)=>{send_message(_0xdbe95f,_0x1adc16,_0xdab350,_0x16ed6c,_0x1ef6a7,_0x1881af)['then'](_0x3f1077=>_0x19c9f5(_0x3f1077))['catch'](_0x38c003=>_0x2ef7f9(_0x38c003));});}),ipcMain['handle']('stop-action',async(_0x1892f0,_0x797b1c)=>{isStopping=!![];const _0x46533c=await getBrowserPage(0x1,_0x797b1c);await _0x46533c['close']();}),ipcMain['handle']('fetch_followers',async(_0x16180b,_0x38a187,_0x30df33,_0x1126ec,_0x16d001,_0x23ef2c)=>{isStopping=![];const _0x43ab24=await getBrowserPage();return fetch_followers_from_account(_0x16180b,_0x43ab24,_0x38a187,_0x30df33,_0x1126ec,_0x16d001,_0x23ef2c);}),ipcMain['handle']('get-account-details',async(_0x4e1ae6,_0x3bea10,_0x296a3a,_0xb29f22)=>{isStopping=![];const _0x49b35e=await getBrowserPage();return fetch_account_details(_0x49b35e,_0x3bea10,_0x296a3a,_0xb29f22);}),ipcMain['handle']('fetch_likes',async(_0x3ed1ad,_0xcb6fef,_0x18aad5,_0x3331fb,_0x469877,_0x216742)=>{isStopping=![];const _0xa10a6e=await getBrowserPage();return fetch_likers_from_post(_0x3ed1ad,_0xa10a6e,_0xcb6fef,_0x18aad5,_0x3331fb,_0x469877,_0x216742);}),ipcMain['handle']('fetch_comments',async(_0x27513f,_0x30e5ea,_0x249d06,_0x972b74,_0x4252a9,_0x1b8ae9)=>{isStopping=![];const _0x4f6d68=await getBrowserPage();return fetch_comments_from_post(_0x27513f,_0x4f6d68,_0x30e5ea,_0x249d06,_0x972b74,_0x4252a9,_0x1b8ae9);}),ipcMain['handle']('update-app',async _0x21c2de=>{const {spawn:_0x4bedbb}=require('child_process'),_0x5a1dd8=require('path');if(process['platform']==='darwin'){const _0x2bc6d4=_0x5a1dd8['join'](__dirname,'mac-updater-intern.sh'),_0x2a78f3=_0x4bedbb('/bin/bash',[_0x2bc6d4]);_0x2a78f3['stdout']['on']('data',_0x53da07=>{console['log']('stdout:\x20'+_0x53da07);}),_0x2a78f3['stderr']['on']('data',_0x2e7872=>{console['error']('stderr:\x20'+_0x2e7872);}),_0x2a78f3['on']('close',_0x4f63f5=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x4f63f5);});}else{if(process['platform']==='win32'){const _0x43083e=_0x5a1dd8['join'](__dirname,'../','../','../');process['chdir'](_0x43083e),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x3c415e='soft-ui-updater-windows.ps1',_0x15e0ce='soft-ui-updater-windows.exe',_0xf74a2a=_0x4bedbb('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x3c415e]);console['log']('Windows\x20Pfad:\x20'+_0x43083e),_0xf74a2a['stdout']['on']('data',_0x11ee97=>{console['log']('stdout:\x20'+_0x11ee97);}),_0xf74a2a['stderr']['on']('data',_0x19b980=>{console['error']('stderr:\x20'+_0x19b980);}),_0xf74a2a['on']('close',_0x127117=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x127117);});}}});function getRnd(_0x525ffb,_0x5025e4){return Math['random']()*(_0x5025e4-_0x525ffb+0x1)+_0x525ffb;}function delay(_0x3c0293,_0xea307a){let _0x36ad73=getRnd(_0x3c0293,_0xea307a);return new Promise(function(_0x42c9a5){setTimeout(_0x42c9a5,_0x36ad73);});}async function scroll(_0x12bc7b,_0x1e21d2,_0x22faa7=0x2,_0x2d49a7){const _0x4f4d9b=await _0x12bc7b['waitForSelector'](_0x1e21d2);for(let _0x2d2a68=0x0;_0x2d2a68<_0x22faa7;_0x2d2a68++){console['log']('Scrolling\x20'+_0x2d2a68),await _0x12bc7b['evaluate'](_0x13edca=>{const _0x51dd99=document['querySelector'](_0x13edca);_0x51dd99&&_0x51dd99['scrollBy'](0x0,0x190);},_0x1e21d2),await delay(0x320,0x5dc),_0x2d49a7();}}async function saveCookies(_0x504a58){let _0x19c85e=await _0x504a58['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x19c85e,null,0x2));}async function notificationClear(_0x51b086){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x51b086['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x51b086['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x147904){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x147904);}}async function getTargetProfiles(_0x110269){return new Promise((_0x278bb9,_0x2c003b)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x110269,(_0x304337,_0x57f2b5)=>{_0x304337?_0x2c003b(_0x304337):_0x278bb9(_0x57f2b5);});});}async function login_legacy(_0x5362a5,_0x38a604,_0x2c9662){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x5362a5,_0x38a604),await createUserIfNotExists(_0x38a604,_0x2c9662);}catch(_0x2d3c53){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2d3c53);}try{await _0x5362a5['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x5362a5['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x5362a5['click']('button._a9--._ap36._a9_0');}catch(_0x23a1ec){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x5362a5['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x5362a5['type']('input[name=\x27username\x27]',_0x38a604,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5362a5['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x5362a5['type']('input[name=\x27password\x27]',_0x2c9662,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5362a5['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x5362a5['click']('button[type=\x27submit\x27]');}catch(_0x51cab1){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x5362a5),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x5362a5,_0x38a604);}catch(_0xecebf8){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xecebf8);}}catch(_0x52c4ae){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x52c4ae);}}async function login(_0x333a36,_0x29b017){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x333a36,_0x29b017),await createUserIfNotExists(_0x29b017);}catch(_0x11146b){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x11146b);}try{await _0x333a36['goto']('https://www.instagram.com/accounts/login/');}catch(_0x4076ff){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x4076ff);}}async function set_login_cookies(_0x35b65e,_0x25f98d){try{await saveCookiesForUser(_0x35b65e,_0x25f98d);}catch(_0x1f0f7e){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x1f0f7e);}}async function send_message(_0x53130c,_0x39225f,_0x4fb9d0,_0x2fdf2c,_0x4fbe63,_0x38853c){_0x38853c=_0x38853c['split'](';'),console['log'](_0x38853c[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x4fbe63);if(_0x4fbe63==0x0){try{await login(_0x53130c,_0x38853c[0x0]);}catch(_0x54c320){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x54c320);return;}await _0x53130c['goto']('https://www.instagram.com/direct/inbox/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x53130c);}let _0x5eabb8;await set_clearname_from_username(_0x53130c,_0x4fb9d0);const _0x49e50b='SELECT\x20clearname\x20FROM\x20'+_0x4fb9d0+'\x20WHERE\x20username\x20IS\x20?';db['all'](_0x49e50b,[_0x39225f],(_0x3c1623,_0x4dff0c)=>{_0x3c1623&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x3c1623['message']);if(_0x4dff0c['length']===0x0)return;_0x5eabb8=_0x4dff0c['map'](_0x1ee72e=>_0x1ee72e['clearname']);});try{try{const _0x3fd4c8=K_NEW_MSG_BUTTON;await delay(0xfa0,0x1d4c),await _0x53130c['waitForSelector'](_0x3fd4c8),await _0x53130c['click'](_0x3fd4c8),console['log']('Message-Button\x20geklickt'),console['log'](_0x39225f+'\x20'+_0x2fdf2c),await delay(0xfa0,0x1d4c);try{const _0x31ecb5='input[name=\x22queryBox\x22]',_0x4cf833=K_SEARCH_BAR_INPUT;await _0x53130c['waitForSelector'](_0x4cf833),await _0x53130c['click'](_0x4cf833),await delay(0xfa0,0x1d4c),await _0x53130c['waitForSelector'](_0x31ecb5),await _0x53130c['click'](_0x31ecb5),await delay(0xfa0,0x1d4c),await _0x53130c['type'](_0x31ecb5,_0x39225f,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),console['log']('Account\x20Name\x20eingefügt');const _0x47486d=K_USERNAME_SPALTE_PART1,_0x508fbe=K_CLEARNAME_SPALTE_PART2;let _0x339d84=0x1;try{while(_0x339d84!=0x14){console['log']('Schleife');let _0x4c9689=_0x47486d+_0x339d84+_0x508fbe;const _0x950933=await _0x53130c['waitForSelector'](_0x4c9689),_0x483cdc=await _0x53130c['evaluate'](_0x44b214=>_0x44b214['innerHTML'],_0x950933);console['log'](_0x483cdc+';'+_0x5eabb8+';'+_0x39225f),delay(0x3e8,0xbb8);if(_0x483cdc['includes'](_0x5eabb8)){console['log']('Account\x20gefunden'),await _0x53130c['click'](_0x4c9689);break;}else{if(_0x483cdc==_0x39225f){console['log']('Account\x20gefunden'),await _0x53130c['click'](_0x4c9689);break;}}_0x339d84++;}try{await delay(0xbb8,0x1388);const _0x477db5=await _0x53130c['waitForSelector'](K_CHAT_BUTTON_DIV);console['log'](_0x477db5),await delay(0xbb8,0x1388),await _0x477db5['click']();try{await delay(0xbb8,0x1388);const _0x95cfed=await _0x53130c['waitForSelector'](K_NACHRICHT_SCHREIBEN_INPUT_DIV);_0x2fdf2c=_0x2fdf2c['replace']('{USERNAME}',_0x39225f),_0x2fdf2c=_0x2fdf2c['replace']('{username}',_0x5eabb8),await _0x95cfed['type'](_0x2fdf2c,{'delay':getRnd(0x50,0x78)}),await delay(0xbb8,0x1388);try{const _0x597645=await _0x53130c['waitForSelector'](K_SENDEN_BUTTON_DIV);return await _0x597645['click'](),await delay(0xbb8,0x1388),new Promise(_0x3eb211=>{_0x3eb211('Nachricht\x20erfolgreich\x20verschickt!');});}catch(_0x552c9b){console['log']('Message-Button\x20nicht\x20geklickt:\x20'+_0x552c9b);}}catch(_0x524688){console['log']('Chat-Fenster\x20nicht\x20gefunden:\x20'+_0x524688);}}catch(_0x236651){console['log']('error:\x20'+_0x236651);}}catch(_0x5eb913){return console['log']('User\x20nicht\x20gefunden:'+_0x5eb913),await _0x53130c['goto']('https://www.instagram.com/direct/inbox/'),new Promise((_0x3cbd42,_0x37bc42)=>{_0x37bc42('user_not_found');});}}catch(_0x5b6cf2){console['log']('DM-Fenster\x20nicht\x20gefunden:'+_0x5b6cf2);}}catch(_0x5b3868){console['log']('Message-Button\x20nicht\x20geklickt:'+_0x5b3868);}}catch(_0x3f2abf){console['log']('Nachricht\x20senden\x20fehlgeschlagen:\x20'+_0x3f2abf);}return console['log']('Ende'),await _0x53130c['goto']('https://www.instagram.com/direct/inbox/'),new Promise((_0x15658e,_0x15c512)=>{_0x15c512('ig_update');});}function handle_fail(_0x4845c3){if(isStopping)return new Promise(_0x5592ce=>{_0x5592ce('Scraper\x20gestoppt.');});else{let _0x396820='';switch(_0x4845c3){case 0x0:_0x396820='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x396820='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x396820='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x396820='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x1ffbca,_0x46b609)=>{_0x46b609(_0x396820);});}}async function fetch_account_details(_0xd0866d,_0x222892,_0x492de1,_0x1dbb76){try{await login(_0xd0866d,_0x492de1['username']);}catch(_0x5aaaec){return console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5aaaec),handle_fail(0x0);}_0xd0866d['setDefaultNavigationTimeout'](0x7530),await _0xd0866d['goto']('https://www.instagram.com/'+_0x222892+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0xd0866d);const _0x51dac3=await _0xd0866d['evaluate'](()=>{const _0x35dea2=document['querySelector']('meta[property=\x22og:image\x22]');return _0x35dea2?_0x35dea2['getAttribute']('content'):null;});await _0xd0866d['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0xa60945=await _0xd0866d['evaluate'](()=>{const _0x4be76e=document['querySelector']('meta[name=\x22description\x22]');if(!_0x4be76e)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x8341e5=_0x4be76e['getAttribute']('content');if(!_0x8341e5)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x8341e5);const _0x359bcb=/\s*[–-]\s*/,_0xaa66be=_0x8341e5['split'](_0x359bcb);if(_0xaa66be['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0xb37f9f=_0xaa66be[0x0],_0x30bb27=_0xaa66be[0x1],_0x5a3907=_0xb37f9f['split'](',\x20');if(_0x5a3907['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0xd2279a=_0x5a3907[0x0]['split']('\x20')[0x0],_0x5916dd=_0x5a3907[0x1]['split']('\x20')[0x0],_0x19ea21=_0x5a3907[0x2]['split']('\x20')[0x0];let _0x4e432e='',_0x360813='';const _0x472f37='\x20on\x20Instagram:\x20',_0x11af1f=_0x30bb27['split'](_0x472f37);return _0x4e432e=_0x11af1f[0x0]['trim'](),_0x11af1f['length']>0x1&&(_0x360813=_0x11af1f[0x1]['trim'](),_0x360813['startsWith']('\x22')&&_0x360813['endsWith']('\x22')&&(_0x360813=_0x360813['substring'](0x1,_0x360813['length']-0x1)['trim']()),_0x360813=_0x360813['replace'](/&quot;/g,'')['trim']()),{'followers':_0xd2279a,'following':_0x5916dd,'posts':_0x19ea21,'nameText':_0x4e432e,'bio':_0x360813};});console['log']('Extracted\x20profile\x20data:',_0xa60945);const _0x5c78a0=_0xa60945['nameText'],_0x7da5c9=_0x51dac3,_0x29b7a5=_0xa60945['bio'],_0x5e7ec2=_0xa60945['followers'],_0x3ff79a=_0xa60945['following'],_0x45e995=_0xa60945['posts'],_0x372b3c=![],_0x3e5430=![],_0x39ac93=![],_0x38894b='\x0a\x20\x20INSERT\x20INTO\x20'+_0x1dbb76+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x38894b,[_0x222892,_0x5c78a0,_0x7da5c9,_0x29b7a5,_0x5e7ec2,_0x3ff79a,_0x45e995,_0x372b3c,_0x3e5430,_0x39ac93],function(_0x491f39){_0x491f39?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x491f39['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x1e8157,_0x359d69,_0x10266e,_0x5a4d96,_0x26d7fe,_0x39e716,_0x2a77a6){let _0x3dc575=0x4,_0x4be1ff=0x0,_0x420260=0x0;try{await login(_0x359d69,_0x39e716['username']);}catch(_0x13a4c1){return console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x13a4c1),handle_fail(0x0);}let _0x42e670=0x0;try{await _0x359d69['goto']('https://www.instagram.com/'+_0x10266e+'/'),await notificationClear(_0x359d69);try{if(_0x5a4d96<=0x0){const _0x24a801=await _0x359d69['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x541c61=await _0x359d69['evaluate'](_0x35fe7b=>_0x35fe7b['innerHTML'],_0x24a801);_0x42e670=Math['ceil'](_0x541c61/0x4);}else _0x42e670=Math['ceil'](_0x5a4d96/0x4);_0x3dc575+=_0x42e670,_0x420260=Math['round'](++_0x4be1ff/_0x3dc575*0x64),_0x1e8157['sender']['send']('fetch-progress',_0x420260,!![]);let _0x81c4fd=await _0x359d69['waitForSelector']('a[href=\x22/'+_0x10266e+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x81c4fd['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x10266e+'\x20gesichtet'),_0x420260=Math['round'](++_0x4be1ff/_0x3dc575*0x64),_0x1e8157['sender']['send']('fetch-progress',_0x420260,!![]);}catch(_0xbbc7cd){return console['log']('Follower\x20Liste\x20von\x20'+_0x10266e+'\x20nicht\x20gefunden:'+_0xbbc7cd),handle_fail(0x0);}}catch(_0x465b17){return console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x465b17),handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x42e670),await scroll(_0x359d69,FOLLOWER_FENSTER,_0x42e670,_0x339d8a=>{_0x420260=Math['round'](++_0x4be1ff/_0x3dc575*0x64),_0x1e8157['sender']['send']('fetch-progress',_0x420260,!![]);}),await _0x359d69['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0xd83c93=await _0x359d69['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x1854e7=await _0x359d69['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x420260=Math['round'](++_0x4be1ff/_0x3dc575*0x64),_0x1e8157['sender']['send']('fetch-progress',_0x420260,!![]);_0x5a4d96<=0x0&&(_0x5a4d96=_0xd83c93['length']);let _0x555285=[];for(let _0xc7e1da=0x0;_0xc7e1da<_0xd83c93['length']&&_0xc7e1da<_0x5a4d96;_0xc7e1da++){_0x555285['push'](await _0xd83c93[_0xc7e1da]['evaluate'](_0x3d3b6a=>_0x3d3b6a['textContent']));const _0x593455='INSERT\x20INTO\x20'+_0x26d7fe+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x593455,[await _0xd83c93[_0xc7e1da]['evaluate'](_0x14cdf5=>_0x14cdf5['textContent']),await _0x1854e7[_0xc7e1da]['evaluate'](_0x583f2b=>_0x583f2b['textContent'])],function(_0x345405){_0x345405?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x26d7fe+'\x27:',_0x345405['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x420260=Math['round'](++_0x4be1ff/_0x3dc575*0x64),_0x1e8157['sender']['send']('fetch-progress',_0x420260,!![]),_0x2a77a6&&await fetch_details_from_list(_0x359d69,_0x39e716,_0x26d7fe,_0x555285),new Promise(_0x63530=>{_0x63530('Scraping\x20finished!');});}catch(_0x2b33b7){throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x10266e+'\x20nicht\x20gefunden:\x20'+_0x2b33b7);return handle_fail(0x0);}}async function fetch_details_from_list(_0x14d945,_0x59eead,_0x4405d5,_0xff2242){for(let _0x3d677b=0x0;_0x3d677b<_0xff2242['length'];_0x3d677b++){console['log']('Processing\x20profile:',_0xff2242[_0x3d677b]);try{await fetch_account_details(_0x14d945,_0xff2242[_0x3d677b],_0x59eead,_0x4405d5);}catch(_0x1a41d7){console['error']('Fehler\x20beim\x20Verarbeiten\x20von',_0xff2242[_0x3d677b],_0x1a41d7);}}}async function fetch_likers_from_post(_0x264408,_0x2b56a6,_0x5da40f,_0x25da33,_0x339cbe,_0x554612,_0x132216){let _0x37cd0e=0x4,_0x3ad32b=0x0,_0x40b3b7=0x0;try{await login(_0x2b56a6,_0x554612['username']);}catch(_0x22923f){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x22923f);return handle_fail(0x1);return;}_0x40b3b7=Math['round'](++_0x3ad32b/_0x37cd0e*0x64),_0x264408['sender']['send']('fetch-progress',_0x40b3b7,!![]);try{let _0x152473=_0x5da40f['substring'](0x0,_0x5da40f['lastIndexOf']('/')),_0x43c59d=_0x152473+'/liked_by';console['log'](_0x43c59d),await _0x2b56a6['goto'](_0x43c59d),await delay(0x7d0,0xfa0),await notificationClear(_0x2b56a6),await delay(0xc8,0x1f4),_0x40b3b7=Math['round'](++_0x3ad32b/_0x37cd0e*0x64),_0x264408['sender']['send']('fetch-progress',_0x40b3b7,!![]),await _0x2b56a6['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x211eef=await _0x2b56a6['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x1ec5d7=await _0x2b56a6['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x211eef['length']);let _0x3cea6d=path['join'](__dirname,'/likers.csv');_0x40b3b7=Math['round'](++_0x3ad32b/_0x37cd0e*0x64),_0x264408['sender']['send']('fetch-progress',_0x40b3b7,!![]);_0x25da33<=0x0&&(_0x25da33=_0x211eef['length']);try{let _0x1bd4a5=[];for(let _0x1e1f67=0x0;_0x1e1f67<_0x211eef['length']&&_0x1e1f67<_0x25da33;_0x1e1f67++){_0x1bd4a5['push'](await _0x211eef[_0x1e1f67]['evaluate'](_0x416f35=>_0x416f35['textContent']));try{const _0x154332='INSERT\x20INTO\x20'+_0x339cbe+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x154332,[await _0x211eef[_0x1e1f67]['evaluate'](_0x50198b=>_0x50198b['textContent']),await _0x1ec5d7[_0x1e1f67]['evaluate'](_0x24934d=>_0x24934d['textContent'])],function(_0x34fee0){_0x34fee0?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x339cbe+'\x27:',_0x34fee0['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x35c0bd){return console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1e1f67+'\x20:\x20'+_0x35c0bd),handle_fail(0x1);}}return _0x40b3b7=Math['round'](++_0x3ad32b/_0x37cd0e*0x64),_0x264408['sender']['send']('fetch-progress',_0x40b3b7,!![]),_0x132216&&await fetch_details_from_list(_0x2b56a6,_0x554612,_0x339cbe,_0x1bd4a5),new Promise(_0x2d5b26=>{_0x2d5b26('Scraping\x20finished!');});}catch(_0x282de){return console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben'),handle_fail(0x1);}}catch(_0x27d00a){return console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x27d00a),handle_fail(0x1);}}async function fetch_comments_from_post(_0x438c32,_0x59f4c8,_0x3db64f,_0x3f3673,_0xa41fdb,_0x9913c,_0x17a815){let _0xcbe0d=0x3,_0x41cc7a=0x0,_0x2956b0=0x0,_0x5730c0=0x0,_0xa40854=0x0;const _0x532106=0x32,_0x4cd0a5=0x32;try{await login(_0x59f4c8,_0x9913c['username']);}catch(_0x546277){return console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x546277),handle_fail(0x2);}try{console['log'](_0x3db64f),await _0x59f4c8['goto'](_0x3db64f),await delay(0x7d0,0xfa0),await notificationClear(_0x59f4c8),await delay(0xc8,0x1f4);const _0x1fe63a=COM_COMMENTS_BOX_BODY_DIV;let _0x580564;if(_0x3f3673<=0x0){const _0x478594=await _0x59f4c8['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x16751f=await _0x59f4c8['evaluate'](_0x16801e=>_0x16801e['innerHTML'],_0x478594),_0x4accaa=String(_0x16751f)['replace'](/[^0-9]/g,''),_0x115459=Number(_0x4accaa)/0x14;_0x580564=Math['ceil'](_0x115459/0x3);}else _0x580564=Math['ceil'](_0x3f3673/0x3);_0xcbe0d+=_0x580564,_0x2956b0=Math['round'](++_0x41cc7a/_0xcbe0d*_0x532106),_0x438c32['sender']['send']('fetch-progress',_0x2956b0,!![]),console['log']('Auto-scrolls:\x20'+_0x580564),await scroll(_0x59f4c8,_0x1fe63a,_0x580564,_0x3df8ef=>{_0x2956b0=Math['round'](++_0x41cc7a/_0xcbe0d*_0x532106),_0x438c32['sender']['send']('fetch-progress',_0x2956b0,!![]);});try{const _0x3f8c30=COM_REPLY_BUTTON_SPAN;await _0x59f4c8['waitForSelector'](_0x3f8c30),await delay(0x1f4,0x320);const _0x4fa92a=await _0x59f4c8['$$'](_0x3f8c30);console['log'](_0x4fa92a),_0x5730c0=_0x4fa92a['length'],await delay(0xc8,0x1f4);try{for(let _0x43e5a3=0x0;_0x43e5a3<_0x5730c0;_0x43e5a3++){_0x4fa92a[_0x43e5a3]['click'](),await delay(0x320,0x5dc),_0x2956b0=Math['round'](++_0x43e5a3/_0x5730c0*_0x4cd0a5),_0x438c32['sender']['send']('fetch-progress',_0x2956b0,!![]);}}catch(_0x212889){return console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x212889),handle_fail(0x2);}}catch(_0x480ebe){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x15eae3=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x59f4c8['waitForSelector'](_0x15eae3),await delay(0x1f4,0x320),_0x2956b0=Math['round']((++_0x41cc7a+_0x5730c0)/_0xcbe0d*_0x532106),_0x438c32['sender']['send']('fetch-progress',_0x2956b0,!![]);const _0x1e5378=await _0x59f4c8['$$'](_0x15eae3);let _0x48b2ea=path['join'](__dirname,'/comments.csv');_0x3f3673<=0x0&&(_0x3f3673=_0x1e5378['length']);console['log']('fetch_limit:\x20'+_0x3f3673),console['log']('comments_len:\x20'+_0x1e5378['length']),_0x3f3673++;try{let _0x3d1869=[];for(let _0x57fd2a=0x1;_0x57fd2a<_0x1e5378['length']&&_0x57fd2a<_0x3f3673;_0x57fd2a++){try{_0x3d1869['push'](await _0x1e5378[_0x57fd2a]['evaluate'](_0xb1d5e0=>_0xb1d5e0['textContent']));const _0x3ee96a=await db['prepare']('INSERT\x20INTO\x20'+_0xa41fdb+'\x20(username)\x20VALUES\x20(?)');await _0x3ee96a['run'](await _0x1e5378[_0x57fd2a]['evaluate'](_0x379c42=>_0x379c42['textContent']),function(_0x395955){_0x395955&&console['log']('error\x20in\x20add-user:'+_0x395955);}),await _0x3ee96a['finalize']();}catch(_0x2d28c4){return console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x57fd2a+'\x20:\x20'+_0x2d28c4),handle_fail(0x2);}}await delay(0x4b0,0x7d0);try{await set_clearname_from_username(_0x59f4c8,_0xa41fdb);}catch(_0x231610){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x231610);}return _0x17a815&&await fetch_details_from_list(_0x59f4c8,_0x9913c,_0xa41fdb,_0x3d1869),new Promise(_0x6d5a7c=>{_0x6d5a7c('Scraping\x20finished!');});}catch(_0x5f2c56){return console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben'),handle_fail(0x2);}}catch(_0x2e9514){return console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x2e9514),handle_fail(0x2);}}async function set_clearname_from_username(_0x4d471a,_0x4fd75b){try{let _0x4284c1,_0x1c5132;const _0x4d84a5='SELECT\x20username\x20FROM\x20'+_0x4fd75b+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x4d84a5,[],(_0xa5f11c,_0x474370)=>{_0xa5f11c&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0xa5f11c['message']),_0x474370['length']===0x0&&(_0x1c5132=_0x474370['length']),_0x4284c1=_0x474370['map'](_0x58da48=>_0x58da48['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x1c5132);if(_0x1c5132===0x0){console['log']('Leave');return;}const _0x3e7afb=await _0x4d471a['waitForSelector'](IG_SEARCH_BUTTON);await _0x3e7afb['click'](),await delay(0x4b0,0x7d0);for(let _0x54500f of _0x4284c1){const _0x53b443=await _0x4d471a['waitForSelector'](IG_SEARCH_INPUT);await _0x53b443['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x4d471a['type'](IG_SEARCH_INPUT,_0x54500f,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x2f4f80=0x1;while(_0x2f4f80!=0x14){console['log']('Schleife');try{let _0x265d5c=IG_NAME_SPAN_PART1+_0x2f4f80+IG_USERNAME_SPAN_PART2;const _0x17ba8b=await _0x4d471a['waitForSelector'](_0x265d5c),_0x2c2f27=await _0x4d471a['evaluate'](_0x37d18b=>_0x37d18b['innerHTML'],_0x17ba8b);await delay(0xc8,0x1f4);if(_0x2c2f27==_0x54500f){let _0x585bef=IG_NAME_SPAN_PART1+_0x2f4f80+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x26b5e5=await _0x4d471a['waitForSelector'](_0x585bef);let _0x3c677e=await _0x4d471a['evaluate'](_0x18d79d=>_0x18d79d['innerHTML'],_0x26b5e5);const _0x193017=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x29ab36=_0x3c677e['match'](_0x193017);_0x29ab36?_0x3c677e=_0x29ab36[0x1]['trim']():_0x3c677e=_0x3c677e['trim']();_0x3c677e['includes']('•')&&(_0x3c677e=_0x3c677e['substring'](0x0,_0x3c677e['indexOf']('•')-0x1));const _0x4c1144='UPDATE\x20'+_0x4fd75b+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x4c1144,[_0x3c677e,_0x2c2f27],function(_0x46edb3){_0x46edb3&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x46edb3['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x2f4f80++;}catch(_0x4bdfa3){const _0x2672cd='UPDATE\x20'+_0x4fd75b+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x2672cd,['',_0x54500f],function(_0x5c52ef){_0x5c52ef&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x5c52ef['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x4bdfa3);break;}}}await _0x3e7afb['click']();}catch(_0x379106){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x379106);}}const campaignPath=path['resolve'](__dirname,'data/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(campaign_name\x20TEXT\x20PRIMARY\x20KEY,\x20list_id\x20TEXT,\x20zeitabstand\x20REAL,\x20message_id\x20TEXT,\x20account\x20TEXT,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0xcd5b3a,_0x4f4e1f)=>{const _0x18d739='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x18d739,[],(_0x9b692e,_0x52a198)=>{_0x9b692e?_0x4f4e1f(_0x9b692e):_0xcd5b3a(_0x52a198);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x121277,_0x55ad87)=>{const _0xcba417='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0xcba417,[],async(_0x28ca71,_0xca2d47)=>{if(_0x28ca71)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x28ca71['message']),_0x55ad87({'status':'error','message':_0x28ca71['message']});else try{const _0x4509a7=await Promise['all'](_0xca2d47['map'](_0x37cad9=>{return new Promise(_0x204a6d=>{if(!_0x37cad9['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x37cad9['campaign_name']),_0x204a6d({'campaign_name':_0x37cad9['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x1a4c33='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x37cad9['list_id'],_0x4c801b='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x37cad9['list_id']+'\x22';console['log']('campaing\x20listid:\x20'+_0x37cad9['list_id']),db['get'](_0x1a4c33,[],(_0x1a1185,_0x184cfd)=>{_0x1a1185?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x37cad9['campaign_name']+':',_0x1a1185['message']),_0x204a6d({'campaign_name':_0x37cad9['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x4c801b,[],(_0x5a9166,_0x494a12)=>{_0x5a9166?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x37cad9['campaign_name']+':',_0x5a9166['message']),_0x204a6d({'campaign_name':_0x37cad9['campaign_name'],'lead_count':_0x184cfd?_0x184cfd['lead_count']:0x0,'contacted_count':'N/A'})):_0x204a6d({'campaign_name':_0x37cad9['campaign_name'],'lead_count':_0x184cfd?_0x184cfd['lead_count']:0x0,'contacted_count':_0x494a12?_0x494a12['contacted_count']:0x0});});});});}));_0x121277({'status':'success','campaigns':_0x4509a7});}catch(_0x13878a){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x13878a),_0x55ad87({'status':'error','message':_0x13878a['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xf0436f,_0x1af158)=>{return new Promise((_0x48e22c,_0x45f411)=>{const _0x4753b6='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x4753b6,[_0x1af158],(_0x2f771f,_0x4ac5b1)=>{_0x2f771f?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x2f771f),_0x45f411(_0x2f771f)):(console['log']('ROWS'),console['log'](_0x4ac5b1),debugDatabaseContents(),_0x48e22c(_0x4ac5b1));});});});const showTableContents=_0x1e1b81=>{return new Promise((_0x4e6a29,_0x41f01d)=>{const _0x1d891e='SELECT\x20*\x20FROM\x20'+_0x1e1b81+';';campaignDB['all'](_0x1d891e,(_0x164f2f,_0x546712)=>{_0x164f2f?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x1e1b81+':',_0x164f2f),_0x41f01d(_0x164f2f)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x1e1b81+':',_0x546712),_0x4e6a29({'status':'success','message':_0x546712}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x39c066){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x39c066);}}ipcMain['handle']('create-campaign',async(_0x579cc6,_0x2abde5)=>{return new Promise((_0xad583e,_0x638f2d)=>{const _0xa26a74='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0xa26a74,[String(_0x2abde5)],function(_0x4a838f){_0x4a838f?_0x638f2d(_0x4a838f):_0xad583e({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x5e876c,_0x2e876f)=>{return new Promise((_0x3b17ac,_0x172982)=>{const _0x5834ba='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x5834ba,[_0x2e876f],function(_0x22f0eb){_0x22f0eb?_0x172982(_0x22f0eb):_0x3b17ac({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0xf36c13,_0x3e4189,_0x199dc9,_0x4a92cd,_0x33ed20,_0x133ba8)=>{const _0x15e1e1=await createMessageID(_0x33ed20);return new Promise((_0x595eb9,_0x3d55e3)=>{if(!_0x3e4189||!_0x199dc9||!_0x4a92cd||!_0x15e1e1||!_0x133ba8)return _0x3d55e3({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x15e1e1);const _0x422b88='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x422b88,[_0x199dc9,_0x4a92cd,_0x15e1e1,_0x133ba8,_0x3e4189],function(_0x27709d){if(_0x27709d)_0x3d55e3({'status':'error','message':_0x27709d['message']});else this['changes']===0x0?_0x3d55e3({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x595eb9({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x2aa1a9,_0x219b45,_0x44dac8,_0x10fb03,_0x1fe260)=>{return new Promise((_0xa5a302,_0x11e71a)=>{const _0x29c064='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x29c064,[_0x219b45,_0x44dac8,_0x10fb03,_0x1fe260],function(_0xc2a59f){return _0xc2a59f?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0xc2a59f['message']),_0x11e71a('insert-dm-response',{'success':![],'message':_0xc2a59f['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0xa5a302('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x98b1a8=>{return new Promise((_0x6ae7b8,_0x53cdb1)=>{const _0x17215f='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x17215f,[_0x98b1a8],(_0x11d602,_0x15431b)=>{if(_0x11d602)_0x53cdb1({'status':'error','message':_0x11d602['message']});else{if(_0x15431b)_0x6ae7b8(_0x15431b['message_id']);else{const _0x277013='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x277013,[_0x98b1a8],function(_0x5c4237){_0x5c4237?_0x53cdb1({'status':'error','message':_0x5c4237['message']}):_0x6ae7b8(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x12c97a,_0x1d75fc)=>{return new Promise((_0x3a39ef,_0x3ce7c3)=>{const _0x4fbc0c='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x1d75fc;db['get'](_0x4fbc0c,(_0x5553a1,_0x260e93)=>{_0x5553a1?_0x3ce7c3({'status':'error','message':_0x5553a1['message']}):_0x3a39ef({'status':'success','count':_0x260e93['count']});});});});const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x54b4cc,_0x28c249){try{const _0x1aa012=await new Promise((_0x5561f5,_0x3475ae)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x28c249],(_0x805c23,_0x236836)=>{if(_0x805c23)_0x3475ae(_0x805c23);else{if(_0x236836['length']>0x0){let _0x4ec8d4=JSON['parse'](_0x236836[0x0]['cookie']);console['log'](_0x4ec8d4),_0x5561f5(_0x4ec8d4);}else _0x3475ae(new Error('User\x20with\x20username\x20'+_0x28c249+'\x20does\x20not\x20exist.'));}});});await _0x54b4cc['setCookie'](..._0x1aa012),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x3ff13d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3ff13d);}}async function saveCookiesForUser(_0x49122e,_0x223325){try{let _0x4b1d70=await _0x49122e['cookies']();_0x4b1d70=JSON['stringify'](_0x4b1d70),igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x223325],(_0x1bf7dc,_0x5638cd)=>{if(_0x1bf7dc){console['error']('Error\x20checking\x20user\x20existence:',_0x1bf7dc);throw _0x1bf7dc;}else{if(_0x5638cd){const _0x4c44a2=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x4c44a2['run'](_0x4b1d70,_0x223325,function(_0xca13d7){_0xca13d7?console['error']('Error\x20updating\x20cookies:',_0xca13d7):console['log']('Cookies\x20updated\x20for\x20user:',_0x223325);});}else{const _0x4bcd27=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x4bcd27['run'](_0x223325,_0x4b1d70,function(_0x4da81e){_0x4da81e?console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x4da81e):console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x223325);});}}});}catch(_0x3b1177){console['error']('Error\x20fetching\x20cookies:',_0x3b1177);throw _0x3b1177;}}async function createUserIfNotExists(_0x26211f){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x26211f],(_0x22c929,_0x1636c9)=>{if(_0x22c929){console['error']('Error\x20checking\x20user\x20existence:',_0x22c929);throw _0x22c929;}else{if(!_0x1636c9){const _0x39a509=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x39a509['run'](_0x26211f,function(_0x1bf3de){_0x1bf3de?console['error']('Error\x20inserting\x20new\x20user:',_0x1bf3de):console['log']('New\x20user\x20created:',_0x26211f);});}else console['log']('User\x20already\x20exists:',_0x26211f);}});}catch(_0x187b1c){console['error']('Error\x20creating\x20user:',_0x187b1c);throw _0x187b1c;}}ipcMain['handle']('create-relation',async(_0x21e027,_0x34f23c)=>{return new Promise((_0x4cc3c0,_0x521a24)=>{const _0x1a1c9d='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x34f23c+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x1a1c9d,function(_0x426bf5){_0x426bf5?_0x521a24(_0x426bf5):_0x4cc3c0({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x370aed,_0x339419)=>{return console['log']('droping\x20table'+_0x339419),new Promise((_0x5bb69f,_0x4524fa)=>{const _0x46fec4='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x339419;console['log']('droping\x20table'+_0x339419),db['run'](_0x46fec4,function(_0x43a34e){_0x43a34e?_0x4524fa(_0x43a34e):_0x5bb69f({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x2ecbf1=>{return new Promise((_0xbba32f,_0x20ec76)=>{const _0xe7a614='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0xe7a614,[],(_0x2c9f9e,_0x1293ff)=>{_0x2c9f9e?_0x20ec76(_0x2c9f9e):_0xbba32f(_0x1293ff['map'](_0x3dc016=>_0x3dc016['name']));});});}),ipcMain['handle']('add-user',async(_0x8073fa,_0x176193,_0x5ef906)=>{return new Promise(_0x1f9f5b=>{const _0xfd7a14=db['prepare']('INSERT\x20INTO\x20'+_0x5ef906+'\x20(username)\x20VALUES\x20(?)');_0xfd7a14['run'](_0x176193,function(_0x4ccea4){_0x4ccea4?console['log']('error\x20in\x20add-user:'+_0x4ccea4):_0x1f9f5b({'status':'success','id':this['lastID']});}),_0xfd7a14['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x422783,_0xd323d8)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x4d1a63,_0x167e75)=>{if(_0x4d1a63)_0xd323d8(_0x4d1a63);else{_0x422783({'status':'success','users':_0x167e75});for(_0x167e75 of _0x167e75){console['log'](_0x167e75['username']);}}});});}),ipcMain['handle']('get-data',async(_0x54bf0c,_0xbddeb6)=>{return new Promise((_0x24c434,_0x1ef422)=>{const _0xc6bfda='SELECT\x20*\x20FROM\x20'+_0xbddeb6;console['log'](_0xc6bfda),db['all'](_0xc6bfda,[],(_0x12ee36,_0x55b4fd)=>{_0x12ee36?_0x1ef422(_0x12ee36):_0x24c434(_0x55b4fd);});});}),ipcMain['handle']('get-accounts',async _0x3c1494=>{return new Promise((_0x128ae1,_0x1c1576)=>{const _0x13a2c6='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x13a2c6),igaccountsDB['all'](_0x13a2c6,[],(_0x7cf293,_0x86206)=>{_0x7cf293?_0x1c1576(_0x7cf293):_0x128ae1(_0x86206);});});}),ipcMain['handle']('get-targets',async(_0x14eba4,_0x26c517)=>{return getTargetProfiles(_0x26c517);}),ipcMain['handle']('delete-user',async(_0x209fe2,_0xd21465,_0x4aed87)=>{return new Promise((_0x3bc331,_0x2e27fc)=>{const _0x38c0ec=db['prepare']('DELETE\x20FROM\x20'+_0x4aed87+'\x20WHERE\x20username\x20=\x20?');_0x38c0ec['run'](_0xd21465,function(_0x32ce1a){_0x32ce1a?_0x2e27fc(_0x32ce1a):_0x3bc331({'status':'success','changes':this['changes']});}),_0x38c0ec['finalize']();});}),ipcMain['handle']('delete-account',async(_0x32d955,_0x1adb8e)=>{const _0x42dc1b=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x42dc1b['run'](_0x1adb8e,function(_0x1dde88){_0x1dde88&&console['log'](_0x1dde88);}),_0x42dc1b['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x238552,_0x454177)=>{const _0x1fb5f1='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x1fb5f1,[],(_0x124619,_0x243fda)=>{_0x124619?_0x454177({'status':'error','message':_0x124619['message']}):_0x238552({'status':'success','contactedCount':_0x243fda['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x2483ec,_0x173e78)=>{const _0x43093d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x43093d,[],(_0x32de85,_0x50aa20)=>{_0x32de85?_0x173e78({'status':'error','message':_0x32de85['message']}):_0x2483ec({'status':'success','contactedCount':_0x50aa20['contactedCount']});});});});