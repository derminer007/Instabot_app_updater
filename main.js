const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x406b59,_0x4150ae){try{const _0x3110ef=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x4150ae},'body':JSON['stringify']({'clearname':_0x406b59})});if(!_0x3110ef['ok']){const _0x349fcf=await _0x3110ef['text']();throw new Error(_0x3110ef['status']+':\x20'+_0x349fcf);}const _0x5d8fbd=await _0x3110ef['json']();return _0x5d8fbd;}catch(_0x5809e8){console['error']('Error\x20in\x20extractFirstName:',_0x5809e8);throw _0x5809e8;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED=['[role=\x22button\x22][aria-label=\x22Double\x20tap\x20to\x20like\x22]','div.html-div.xdj266r.x14z9mp.xat24cr.x1lziwak.xexx8yu.xyri2b.x18d9i69.x1c1uobl.x6ikm8r.x10wlt62\x20>\x20div\x20>\x20span'],K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x3ddac1=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x3ddac1['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x3ddac1['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x5d0f36){var _0x12366d=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xbf63f2){console['log']('window\x20id:'+_0xbf63f2['id']),_0xbf63f2['id']>0x1&&(_0x12366d=!![]);}),console['log']('child\x20opened\x20='+_0x12366d);if(!_0x12366d){const _0x1ee906=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x1ee906['loadFile'](_0x5d0f36['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x5a2e89=require('fs'),_0x4046de=path['join'](app['getPath']('userData'),'data'),_0x43e2f0=['campaign.db','crm.db','igaccounts.db'],_0x277f1f=[];try{_0x5a2e89['mkdirSync'](_0x4046de,{'recursive':!![]});for(const _0x5b0a7c of _0x43e2f0){const _0x595cb1=path['join'](process['resourcesPath'],'app','build','data',_0x5b0a7c),_0x2f545c=path['join'](_0x4046de,_0x5b0a7c);!_0x5a2e89['existsSync'](_0x2f545c)?(_0x5a2e89['copyFileSync'](_0x595cb1,_0x2f545c),console['log']('[InitDB]\x20Kopiert\x20'+_0x5b0a7c+'\x20nach:\x20'+_0x2f545c)):console['log']('[InitDB]\x20'+_0x5b0a7c+'\x20existiert\x20bereits:\x20'+_0x2f545c),_0x277f1f['push'](_0x2f545c);}}catch(_0x738b8c){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x738b8c);}return _0x277f1f;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0xe59ef6,AppUpdate:_0x200830}=require('electron-updater');_0xe59ef6['autoDownload']=![],_0xe59ef6['autoInstallOnAppQuit']=!![],_0xe59ef6['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0xe59ef6['on']('update-available',_0x13b92f=>{console['log']('Update\x20verfügbar:',_0x13b92f),_0xe59ef6['downloadUpdate']();}),_0xe59ef6['on']('update-downloaded',_0x5a270b=>{console['log']('Update\x20heruntergeladen:',_0x5a270b),_0xe59ef6['quitAndInstall']();}),_0xe59ef6['on']('error',_0x472be9=>{console['error']('Fehler\x20beim\x20Updaten:',_0x472be9);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x5b1bc1,AppUpdate:_0x2b12b7}=require('electron-updater');_0x5b1bc1['autoDownload']=![],_0x5b1bc1['autoInstallOnAppQuit']=!![],_0x5b1bc1['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x5b1bc1['on']('update-available',_0x4a7a06=>{console['log']('Update\x20verfügbar:',_0x4a7a06),_0x5b1bc1['downloadUpdate']();}),_0x5b1bc1['on']('update-downloaded',_0x37e0c9=>{console['log']('Update\x20heruntergeladen:',_0x37e0c9),console['log']('Neustarten\x20zum\x20Updaten');}),_0x5b1bc1['on']('error',_0x3f0cca=>{console['error']('Fehler\x20beim\x20Updaten:',_0x3f0cca);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x518a65='',_0x5671f2=null;if(process['platform']==='darwin')_0x518a65=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x518a65=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x518a65}),_0x5671f2=await browser_login['newPage'](),_0x5671f2['setDefaultNavigationTimeout'](0x1d4c),_0x5671f2['setDefaultTimeout'](0x1d4c),await _0x5671f2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x5671f2;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x34de5c=0x1,_0x1a228b=0x0){try{let _0x3049cf='',_0x45de65=null;const _0x18904e=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x3049cf=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x3049cf=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x34de5c===0x0&&!pageStack[_0x1a228b])return browser=await puppeteer['launch']({'headless':_0x18904e,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3049cf}),_0x45de65=await browser['newPage'](),_0x45de65['setDefaultNavigationTimeout'](0x1d4c),_0x45de65['setDefaultTimeout'](0x1d4c),await _0x45de65['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1a228b]=_0x45de65,_0x45de65;return(browser===null||pageStack[_0x1a228b]===null||pageStack[_0x1a228b]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x18904e,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3049cf})),(pageStack[_0x1a228b]===null||pageStack[_0x1a228b]['isClosed']())&&(_0x45de65=await browser['newPage'](),_0x45de65['setDefaultNavigationTimeout'](0x1d4c),_0x45de65['setDefaultTimeout'](0x1d4c),await _0x45de65['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1a228b]=_0x45de65),pageStack[_0x1a228b];}catch(_0x151a67){console['error']('Failed\x20to\x20launch\x20browser:',_0x151a67);const _0x315eda=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x151a67);throw _0x315eda;}}ipcMain['on']('login',async(_0x172588,_0x281946)=>{const _0x808bd2=await getBrowserPageLogin();await _0x808bd2['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x808bd2,_0x281946),ipcMain['on']('setLoginCookies',async(_0x181f17,_0x420a48)=>{try{await set_login_cookies(_0x808bd2,_0x420a48);}catch(_0x5d7c75){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x5d7c75);}});}),ipcMain['on']('export-relation',async(_0x3aec58,_0x4425c7)=>{try{await exportDatabase(_0x4425c7),_0x3aec58['reply']('export-relation-response',{'success':!![]});}catch(_0x499cc6){console['error'](_0x499cc6),_0x3aec58['reply']('export-relation-response',{'success':![],'message':_0x499cc6['message']});}}),ipcMain['handle']('sendMessage',async(_0xf0986a,_0xcf235f,_0x5f457c,_0x31a11c,_0x229d99,_0x255773,_0x1bd8e3,_0x1f699f,_0x3fd0c1,_0x594ae0,_0x5124df)=>{isStopping=![];let _0x2f1e9c=null;return _0x1bd8e3?_0x2f1e9c=await getBrowserPage(_0x229d99,_0x1f699f):_0x2f1e9c=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0xcf235f),send_message(_0x2f1e9c,_0xcf235f,_0x5f457c,_0x31a11c,_0x229d99,_0x255773,_0x3fd0c1,_0x594ae0,_0x5124df);}),ipcMain['handle']('stop-action',async(_0x104f07,_0x33f403)=>{isStopping=!![];const _0x3c86ef=await getBrowserPage(0x1,_0x33f403);await _0x3c86ef['close']();}),ipcMain['handle']('fetch_followers',async(_0x11e75a,_0x2cb437,_0x21ab40,_0x258d91,_0x3bc64f,_0x343846)=>{isStopping=![];const _0x3eb2b9=await getBrowserPage();return fetch_followers_from_account(_0x11e75a,_0x3eb2b9,_0x2cb437,_0x21ab40,_0x258d91,_0x3bc64f,_0x343846);}),ipcMain['handle']('get-account-details',async(_0x54cef1,_0x8978c6,_0x2ada44,_0x5119d9)=>{isStopping=![];const _0x2c940f=await getBrowserPage();return fetch_account_details(_0x2c940f,_0x8978c6,_0x2ada44,_0x5119d9);}),ipcMain['handle']('fetch_likes',async(_0x583920,_0x1b892a,_0x30a691,_0xb0aeca,_0x5b3195,_0x5a7256)=>{isStopping=![];const _0x1b96ed=await getBrowserPage();return fetch_likers_from_post(_0x583920,_0x1b96ed,_0x1b892a,_0x30a691,_0xb0aeca,_0x5b3195,_0x5a7256);}),ipcMain['handle']('fetch_comments',async(_0xbf4379,_0x44344d,_0x5db5e6,_0x4fe759,_0x120ad8,_0x450ce3)=>{isStopping=![];const _0x4a9290=await getBrowserPage();return fetch_comments_from_post(_0xbf4379,_0x4a9290,_0x44344d,_0x5db5e6,_0x4fe759,_0x120ad8,_0x450ce3);});async function updateAppSilent(){const {spawn:_0x42eaea}=require('child_process'),_0x564b05=require('path'),_0x48e131=require('electron-log');return _0x48e131['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x30ecfc,_0x375f1c)=>{const {updateElectronApp:_0x359602,UpdateSourceType:_0x33006b}=require('update-electron-app');_0x359602({'updateSource':{'type':_0x33006b['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x48e131}),_0x30ecfc('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2ffbd2,_0xb2173d)=>{doFullElectronUpdateSilent(),_0x2ffbd2('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x45a7c3}=require('child_process'),_0x5dd744=require('path'),_0x2207b8=require('electron-log');return _0x2207b8['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x4fc696,_0x5da8f0)=>{const {updateElectronApp:_0x2f7bb5,UpdateSourceType:_0x169e6a}=require('update-electron-app');_0x2f7bb5({'updateSource':{'type':_0x169e6a['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x2207b8}),_0x4fc696('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2520aa,_0x35cbf0)=>{doFullElectronUpdate(),_0x2520aa('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x1f70cf,_0x268e58)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x1f70cf('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x3cbebf=path['join'](__dirname,'mac-updater-intern.sh'),_0x5c9c99=spawn('/bin/bash',[_0x3cbebf],{'detached':!![],'stdio':'ignore'});_0x5c9c99['unref'](),setTimeout(()=>{_0x1f70cf('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x268e58(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0xe9f86b=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x3444bc,_0x3d3642)=>{console['log']('Update\x20Silent:\x20'+_0x3d3642);if(_0x3d3642){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x26a71d,_0x183000){return Math['random']()*(_0x183000-_0x26a71d+0x1)+_0x26a71d;}function delay(_0x12f666,_0x540c71){let _0x3dba43=getRnd(_0x12f666,_0x540c71);return new Promise(function(_0x8b0577){setTimeout(_0x8b0577,_0x3dba43);});}async function scroll(_0x38c070,_0x5b0f0c,_0x4f0f81=0x2,_0x21c1ef){const _0x265aa3=await _0x38c070['waitForSelector'](_0x5b0f0c);for(let _0x1d7d09=0x0;_0x1d7d09<_0x4f0f81;_0x1d7d09++){console['log']('Scrolling\x20'+_0x1d7d09),await _0x38c070['evaluate'](_0x4a423d=>{const _0x4f9f27=document['querySelector'](_0x4a423d);_0x4f9f27&&_0x4f9f27['scrollBy'](0x0,0x190);},_0x5b0f0c),await delay(0x320,0x5dc),_0x21c1ef();}}async function saveCookies(_0x415fa4){let _0x183069=await _0x415fa4['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x183069,null,0x2));}async function notificationClear(_0x48a801){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x48a801['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x48a801['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x339283){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x339283);}}async function getTargetProfiles(_0x4af301){return new Promise((_0x279252,_0x223a21)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x4af301,(_0x58c75f,_0xfcd123)=>{_0x58c75f?_0x223a21(_0x58c75f):_0x279252(_0xfcd123);});});}async function login_legacy(_0x45c368,_0x262d7c,_0x5330bb){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x45c368,_0x262d7c),await createUserIfNotExists(_0x262d7c,_0x5330bb);}catch(_0x1bdf62){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1bdf62);}try{await _0x45c368['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x45c368['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x45c368['click']('button._a9--._ap36._a9_0');}catch(_0x15f1d5){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x45c368['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x45c368['type']('input[name=\x27username\x27]',_0x262d7c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x45c368['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x45c368['type']('input[name=\x27password\x27]',_0x5330bb,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x45c368['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x45c368['click']('button[type=\x27submit\x27]');}catch(_0x5c3414){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x45c368),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x45c368,_0x262d7c);}catch(_0xc6ae76){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xc6ae76);}}catch(_0x201dca){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x201dca);}}async function login(_0x611970,_0x545e06){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x611970,_0x545e06),await createUserIfNotExists(_0x545e06);}catch(_0x215857){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x215857);}try{await _0x611970['goto']('https://www.instagram.com/accounts/login/');}catch(_0x251d59){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x251d59);}}async function set_login_cookies(_0x319f92,_0x5aedc8){try{await saveCookiesForUser(_0x319f92,_0x5aedc8);}catch(_0x223e2f){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x223e2f);}}async function waitForXPath(_0x4b39a2,_0xdf197b,_0x405bc5={}){return await _0x4b39a2['waitForFunction'](_0x2477de=>{return document['evaluate'](_0x2477de,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x405bc5,_0xdf197b),_0x4b39a2['evaluateHandle'](_0x19f116=>document['evaluate'](_0x19f116,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0xdf197b);}async function waitForSelectorWithFallbacks(_0x3cbe83,_0x4390e7,_0x24f9fb={}){!Array['isArray'](_0x4390e7)&&(_0x4390e7=[_0x4390e7]);for(let _0x294bfc=0x0;_0x294bfc<_0x4390e7['length'];_0x294bfc++){const _0x59e06a=_0x4390e7[_0x294bfc],_0x56931b=_0x59e06a['startsWith']('//')||_0x59e06a['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x56931b?'XPath':'Selector')+'\x20'+(_0x294bfc+0x1)+'/'+_0x4390e7['length']+':\x20'+_0x59e06a['substring'](0x0,0x32)+'...');const _0x3c7945=_0x294bfc===0x0?_0x24f9fb['timeout']||0x1388:0x7d0;let _0x1644b5;if(_0x56931b){const _0x2ab8f4=await waitForXPath(_0x3cbe83,_0x59e06a,{..._0x24f9fb,'timeout':_0x3c7945});if(!_0x2ab8f4)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x1644b5=_0x2ab8f4;}else _0x1644b5=await _0x3cbe83['waitForSelector'](_0x59e06a,{..._0x24f9fb,'timeout':_0x3c7945});return console['log']((_0x56931b?'XPath':'Selector')+'\x20'+(_0x294bfc+0x1)+'\x20gefunden!'),_0x1644b5;}catch(_0x3d402f){console['log']((_0x56931b?'XPath':'Selector')+'\x20'+(_0x294bfc+0x1)+'\x20nicht\x20gefunden:\x20'+_0x3d402f['message']);if(_0x294bfc===_0x4390e7['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x4390e7['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x3d402f['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function checkLoginStatus(_0x42dfcb){const _0x5c8e3b=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x47e88f=null;try{_0x47e88f=await waitForSelectorWithFallbacks(_0x42dfcb,_0x5c8e3b,{'timeout':0x7d0});}catch(_0x42a377){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x42a377),!![];}if(_0x47e88f){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function send_message(_0x54bf82,_0x5a0a8d,_0x1c5b54,_0x512893,_0x3ed663,_0x55e1c0,_0x1061c3,_0x59fa48,_0x5dbbf0){return new Promise(async(_0x291451,_0x56c06f)=>{_0x55e1c0=_0x55e1c0['split'](';'),console['log'](_0x55e1c0[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x3ed663);try{await setCookiesForUser(_0x54bf82,_0x55e1c0[0x0]);}catch(_0x32f71d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x32f71d),_0x291451({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x32f71d});return;}try{await _0x54bf82['goto']('https://www.instagram.com/'+_0x5a0a8d+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x54bf82);}catch(_0x2b9b23){_0x291451({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x2b9b23});return;}try{await checkLoginStatus(_0x54bf82);}catch(_0x5daf11){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x5daf11),_0x56c06f('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}console['log']('UserSkip:\x20'+_0x1061c3);if(_0x1061c3==0x1)try{const _0x21d7ec=await _0x54bf82['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4c8282=>_0x4c8282['textContent']['trim']());console['log'](_0x21d7ec);if(_0x21d7ec==='Following'||_0x21d7ec==='Folge\x20ich')return _0x291451({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x2bbf4f){}try{const _0x288e9b=await waitForSelectorWithFallbacks(_0x54bf82,K_DIRECT_MSG_BUTTON);await _0x288e9b['click']();}catch(_0xcc207d){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0xcc207d);try{try{const _0x3b03ca=await waitForSelectorWithFallbacks(_0x54bf82,K_OPTIONS_BUTTON);await _0x3b03ca['click']();}catch(_0x22d684){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x22d684),_0x291451({'status':0x1f4,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x22d684});return;}await delay(0x1f4,0x320);const _0x169bc0=await waitForXPath(_0x54bf82,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x169bc0['click']();}catch(_0x1506ef){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x1506ef),_0x291451({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x54bf82);}catch(_0x40da28){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x40da28);}try{const _0xd36cde=await waitForSelectorWithFallbacks(_0x54bf82,K_CHAT_INPUT_FIELD);if(_0x59fa48){const _0xca6921=await waitForSelectorWithFallbacks(_0x54bf82,K_ALREADY_CHATTED);if(_0xca6921)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x5a0a8d),_0x291451({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x232619=await _0x54bf82['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x232619),_0x512893=_0x512893['replace']('{USERNAME}',_0x5a0a8d);let _0x21007b;if(_0x512893['includes']('{NAME}')||_0x512893['includes']('{name}'))try{const _0x4d8e34=await extractFirstName(_0x232619,_0x5dbbf0);console['log']('Response\x20Clearname\x20valid:\x20'+_0x4d8e34['valid']),_0x4d8e34['valid']?(_0x512893=_0x512893['replaceAll'](/{NAME}|{name}/g,_0x4d8e34['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x4d8e34['name']),_0x21007b=_0x4d8e34['name']):(_0x512893=_0x512893['replaceAll'](/ ?({NAME}|{name})/g,''),_0x21007b='UNKNOWN_NAME');}catch(_0x2c1bc7){console['log'](_0x2c1bc7['message']),_0x21007b=_0x2c1bc7['message'];let _0x26abae=_0x232619['replace'](/[^\p{L}\s]/gu,''),_0x5dbb2d=_0x26abae['split']('\x20')[0x0];_0x5dbb2d['length']>0x2&&!_0x5dbb2d['includes']('Instagram')?_0x512893=_0x512893['replaceAll'](/{NAME}|{name}/g,_0x5dbb2d):_0x512893=_0x512893['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0xd36cde['type'](_0x512893,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x1533e9=await waitForSelectorWithFallbacks(_0x54bf82,K_SEND_MSG_BUTTON);await _0x1533e9['click'](),await delay(0x320,0x3e8),_0x291451({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x232619,'extracted_clearname':_0x21007b});}catch(_0x5afeaa){let _0x631cd9=_0x5afeaa;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x631cd9),_0x291451({'status':0x1f4,'message':'Error\x20500:\x20'+_0x631cd9});}});}function handle_fail(_0x2cd20d){if(isStopping)return new Promise(_0xcf4717=>{_0xcf4717('Scraper\x20gestoppt.');});else{let _0x3a2739='';switch(_0x2cd20d){case 0x0:_0x3a2739='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x3a2739='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x3a2739='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x3a2739='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x1c5d7e,_0x199a62)=>{_0x199a62(_0x3a2739);});}}async function fetch_account_details(_0x54de44,_0xa12dba,_0x36ef70,_0x4263ce){try{await setCookiesForUser(_0x54de44,_0x36ef70['username']);}catch(_0x52b13e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x52b13e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x52b13e);return handle_fail(0x0);}_0x54de44['setDefaultNavigationTimeout'](0x7530),await _0x54de44['goto']('https://www.instagram.com/'+_0xa12dba+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x54de44);const _0x3abfe3=await _0x54de44['evaluate'](()=>{const _0xe4d082=document['querySelector']('meta[property=\x22og:image\x22]');return _0xe4d082?_0xe4d082['getAttribute']('content'):null;});await _0x54de44['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x32d920=await _0x54de44['evaluate'](()=>{const _0xb6b5bd=document['querySelector']('meta[name=\x22description\x22]');if(!_0xb6b5bd)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x362ad0=_0xb6b5bd['getAttribute']('content');if(!_0x362ad0)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x362ad0);const _0x3cc879=/\s*[–-]\s*/,_0x124a5c=_0x362ad0['split'](_0x3cc879);if(_0x124a5c['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x15bd0b=_0x124a5c[0x0],_0x108b27=_0x124a5c[0x1],_0x206b51=_0x15bd0b['split'](',\x20');if(_0x206b51['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x3c2df9=_0x206b51[0x0]['split']('\x20')[0x0],_0x40d462=_0x206b51[0x1]['split']('\x20')[0x0],_0x427cf5=_0x206b51[0x2]['split']('\x20')[0x0];let _0x59a84a='',_0x42ccf8='';const _0x2c6a65='\x20on\x20Instagram:\x20',_0x3dee58=_0x108b27['split'](_0x2c6a65);return _0x59a84a=_0x3dee58[0x0]['trim'](),_0x59a84a=_0x59a84a['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x3dee58['length']>0x1&&(_0x42ccf8=_0x3dee58[0x1]['trim'](),_0x42ccf8['startsWith']('\x22')&&_0x42ccf8['endsWith']('\x22')&&(_0x42ccf8=_0x42ccf8['substring'](0x1,_0x42ccf8['length']-0x1)['trim']()),_0x42ccf8=_0x42ccf8['replace'](/&quot;/g,'')['trim']()),{'followers':_0x3c2df9,'following':_0x40d462,'posts':_0x427cf5,'nameText':_0x59a84a,'bio':_0x42ccf8};});console['log']('Extracted\x20profile\x20data:',_0x32d920);const _0x557ff0=_0x32d920['nameText'],_0x42dfc9=_0x3abfe3,_0x163905=_0x32d920['bio'],_0x1d444c=_0x32d920['followers'],_0x302744=_0x32d920['following'],_0x2f400a=_0x32d920['posts'],_0x1fbaad=![],_0x4c6b6d=![],_0x11fb8c=![],_0xf3a266='\x0a\x20\x20INSERT\x20INTO\x20'+_0x4263ce+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0xf3a266,[_0xa12dba,_0x557ff0,_0x42dfc9,_0x163905,_0x1d444c,_0x302744,_0x2f400a,_0x1fbaad,_0x4c6b6d,_0x11fb8c],function(_0x1f61c8){_0x1f61c8?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x1f61c8['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x1a25a7,_0x12e5ff,_0x7a473a,_0x4a4256,_0x4824f8,_0xc54ff1,_0x2191e7){let _0x153805=0x4,_0x99299e=0x0,_0x177731=0x0;try{await setCookiesForUser(_0x12e5ff,_0xc54ff1['username']);}catch(_0x4e6d3b){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4e6d3b);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4e6d3b);return handle_fail(0x0);}let _0x24ff01=0x0;try{await _0x12e5ff['goto']('https://www.instagram.com/'+_0x7a473a+'/'),await notificationClear(_0x12e5ff);try{if(_0x4a4256<=0x0){const _0x582ffd=await _0x12e5ff['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x5e6aa0=await _0x12e5ff['evaluate'](_0x57b97d=>_0x57b97d['innerHTML'],_0x582ffd);_0x24ff01=Math['ceil'](_0x5e6aa0/0x4);}else _0x24ff01=Math['ceil'](_0x4a4256/0x4);_0x153805+=_0x24ff01,_0x177731=Math['round'](++_0x99299e/_0x153805*0x64),_0x1a25a7['sender']['send']('fetch-progress',_0x177731,!![]);let _0x21c749=await _0x12e5ff['waitForSelector']('a[href=\x22/'+_0x7a473a+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x21c749['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x7a473a+'\x20gesichtet'),_0x177731=Math['round'](++_0x99299e/_0x153805*0x64),_0x1a25a7['sender']['send']('fetch-progress',_0x177731,!![]);}catch(_0x350a61){console['log']('Follower\x20Liste\x20von\x20'+_0x7a473a+'\x20nicht\x20gefunden:'+_0x350a61);throw new Error('Follower\x20Liste\x20von\x20'+_0x7a473a+'\x20nicht\x20gefunden:'+_0x350a61);return handle_fail(0x0);}}catch(_0x383265){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x383265);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x383265);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x24ff01),await scroll(_0x12e5ff,FOLLOWER_FENSTER,_0x24ff01,_0x1abbde=>{_0x177731=Math['round'](++_0x99299e/_0x153805*0x64),_0x1a25a7['sender']['send']('fetch-progress',_0x177731,!![]);}),await _0x12e5ff['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x529e9b=await _0x12e5ff['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x28a087=await _0x12e5ff['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x177731=Math['round'](++_0x99299e/_0x153805*0x64),_0x1a25a7['sender']['send']('fetch-progress',_0x177731,!![]);_0x4a4256<=0x0&&(_0x4a4256=_0x529e9b['length']);let _0x4a2f12=[];for(let _0x348c02=0x0;_0x348c02<_0x529e9b['length']&&_0x348c02<_0x4a4256;_0x348c02++){_0x4a2f12['push'](await _0x529e9b[_0x348c02]['evaluate'](_0x132293=>_0x132293['textContent']));const _0x244e36='INSERT\x20INTO\x20'+_0x4824f8+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x244e36,[await _0x529e9b[_0x348c02]['evaluate'](_0x5cbf2c=>_0x5cbf2c['textContent']),await _0x28a087[_0x348c02]['evaluate'](_0x536888=>_0x536888['textContent'])],function(_0x191567){_0x191567?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4824f8+'\x27:',_0x191567['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x177731=Math['round'](++_0x99299e/_0x153805*0x64),_0x1a25a7['sender']['send']('fetch-progress',_0x177731,!![]),_0x2191e7&&(_0x1a25a7['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x1a25a7,_0x12e5ff,_0xc54ff1,_0x4824f8,_0x4a2f12)),new Promise(_0x1d3fc3=>{_0x1d3fc3('Scraping\x20finished!');});}catch(_0x4539a9){if(_0x2191e7)throw new Error(_0x4539a9);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x7a473a+'\x20nicht\x20gefunden:\x20'+_0x4539a9);return handle_fail(0x0);}}async function fetch_details_from_list(_0x44acb6,_0x4cb401,_0x59e93b,_0x24a6f4,_0x46cb7b){let _0x2b32d9=0x0,_0x2619a3=0x0;for(let _0x58bf30=0x0;_0x58bf30<_0x46cb7b['length'];_0x58bf30++){console['log']('Processing\x20profile:',_0x46cb7b[_0x58bf30]);try{await fetch_account_details(_0x4cb401,_0x46cb7b[_0x58bf30],_0x59e93b,_0x24a6f4);}catch(_0x289fd7){console['error']('Detailed\x20Scraping\x20von:\x20',_0x46cb7b[_0x58bf30],_0x289fd7);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x46cb7b[_0x58bf30]+'\x20'+_0x289fd7);}_0x2619a3=Math['round'](++_0x2b32d9/_0x46cb7b['length']*0x64),_0x44acb6['sender']['send']('fetch-progress',_0x2619a3,!![],!![]);}}async function fetch_likers_from_post(_0x25fa6e,_0x1567cb,_0x1ae714,_0x55ec3d,_0x3cdbdf,_0x211e7a,_0x33181d){let _0x55e9bb=0x4,_0x59c420=0x0,_0x126ee6=0x0;try{await setCookiesForUser(_0x1567cb,_0x211e7a['username']);}catch(_0x213000){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x213000);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x213000);return handle_fail(0x1);return;}_0x126ee6=Math['round'](++_0x59c420/_0x55e9bb*0x64),_0x25fa6e['sender']['send']('fetch-progress',_0x126ee6,!![]);try{let _0x349441=_0x1ae714['substring'](0x0,_0x1ae714['lastIndexOf']('/'));_0x349441['includes']('/reel/')&&(_0x349441=_0x349441['replace']('/reel/','/p/'));let _0x30f540=_0x349441+'/liked_by';console['log'](_0x30f540),await _0x1567cb['goto'](_0x30f540),await delay(0x7d0,0xfa0),await notificationClear(_0x1567cb),await delay(0xc8,0x1f4),_0x126ee6=Math['round'](++_0x59c420/_0x55e9bb*0x64),_0x25fa6e['sender']['send']('fetch-progress',_0x126ee6,!![]),await _0x1567cb['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0xfce1b5=await _0x1567cb['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x10222c=await _0x1567cb['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0xfce1b5['length']);let _0x2d080f=path['join'](__dirname,'/likers.csv');_0x126ee6=Math['round'](++_0x59c420/_0x55e9bb*0x64),_0x25fa6e['sender']['send']('fetch-progress',_0x126ee6,!![]);_0x55ec3d<=0x0&&(_0x55ec3d=_0xfce1b5['length']);try{let _0x4adc7c=[];for(let _0x300dfc=0x0;_0x300dfc<_0xfce1b5['length']&&_0x300dfc<_0x55ec3d;_0x300dfc++){_0x4adc7c['push'](await _0xfce1b5[_0x300dfc]['evaluate'](_0x1ff610=>_0x1ff610['textContent']));try{const _0x4fb2c='INSERT\x20INTO\x20'+_0x3cdbdf+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x4fb2c,[await _0xfce1b5[_0x300dfc]['evaluate'](_0x2d5df6=>_0x2d5df6['textContent']),await _0x10222c[_0x300dfc]['evaluate'](_0x49b6ff=>_0x49b6ff['textContent'])],function(_0x1e18f8){_0x1e18f8?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3cdbdf+'\x27:',_0x1e18f8['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x4504b7){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x300dfc+'\x20:\x20'+_0x4504b7);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x300dfc+'\x20:\x20'+_0x4504b7);return handle_fail(0x1);}}return _0x126ee6=Math['round'](++_0x59c420/_0x55e9bb*0x64),_0x25fa6e['sender']['send']('fetch-progress',_0x126ee6,!![]),_0x33181d&&(_0x25fa6e['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x25fa6e,_0x1567cb,_0x211e7a,_0x3cdbdf,_0x4adc7c)),new Promise(_0x5869f6=>{_0x5869f6('Scraping\x20finished!');});}catch(_0x1eaf71){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x1eaf71);return handle_fail(0x1);}}catch(_0xd44626){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0xd44626);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0xd44626);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x35d0c6,_0x1aa808,_0x459483,_0x17ff79,_0x1f29e6,_0x5a9a73,_0x5e5dac){let _0xb55c87=0x3,_0x870ca=0x0,_0x898f97=0x0;try{await setCookiesForUser(_0x1aa808,_0x5a9a73['username']);}catch(_0x5a09af){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5a09af);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5a09af);return handle_fail(0x2);}try{console['log'](_0x459483),await _0x1aa808['goto'](_0x459483),await delay(0x7d0,0xfa0),await notificationClear(_0x1aa808),await delay(0xc8,0x1f4);const _0x36c6eb=COM_COMMENTS_BOX_BODY_DIV;let _0x12689e;const _0x5af6f9=await _0x1aa808['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x32392a=await _0x1aa808['evaluate'](_0x287181=>_0x287181['innerHTML'],_0x5af6f9),_0x131999=String(_0x32392a)['replace'](/[^0-9]/g,''),_0x2c34c0=Number(_0x131999)/0x14;_0x17ff79<=0x0?_0x12689e=Math['ceil'](_0x2c34c0/0x3):_0x12689e=Math['ceil'](_0x17ff79/0x3);_0xb55c87+=_0x12689e,_0x898f97=Math['round'](++_0x870ca/_0xb55c87*0x64),_0x35d0c6['sender']['send']('fetch-progress',_0x898f97,!![]),console['log']('Auto-scrolls:\x20'+_0x12689e),await scroll(_0x1aa808,_0x36c6eb,_0x12689e,_0xca2b98=>{_0x898f97=Math['round'](++_0x870ca/_0xb55c87*0x64),_0x35d0c6['sender']['send']('fetch-progress',_0x898f97,!![]);});try{const _0x5d4ff9=COM_REPLY_BUTTON_SPAN;await _0x1aa808['waitForSelector'](_0x5d4ff9),await delay(0x1f4,0x320);const _0x1ee81a=await _0x1aa808['$$'](_0x5d4ff9);console['log'](_0x1ee81a);let _0x28f3b1=_0x1ee81a['length'];await delay(0xc8,0x1f4);try{for(let _0x164168=0x0;_0x164168<_0x28f3b1;_0x164168++){_0x1ee81a[_0x164168]['click'](),await delay(0x320,0x5dc);}}catch(_0x2fc213){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x2fc213);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x2fc213);return handle_fail(0x2);}}catch(_0x410ecb){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x520748=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x1aa808['waitForSelector'](_0x520748),await delay(0x1f4,0x320),_0x898f97=Math['round'](++_0x870ca/_0xb55c87*0x64),_0x35d0c6['sender']['send']('fetch-progress',_0x898f97,!![]);const _0x11f4ba=await _0x1aa808['$$'](_0x520748);let _0x473c1a=path['join'](__dirname,'/comments.csv');_0x17ff79<=0x0&&(_0x17ff79=_0x11f4ba['length']);console['log']('fetch_limit:\x20'+_0x17ff79),console['log']('comments_len:\x20'+_0x11f4ba['length']),_0x17ff79++;try{let _0x4af4d3=[];for(let _0x20a02f=0x1;_0x20a02f<_0x11f4ba['length']&&_0x20a02f<_0x17ff79;_0x20a02f++){try{_0x4af4d3['push'](await _0x11f4ba[_0x20a02f]['evaluate'](_0x3d65af=>_0x3d65af['textContent']));const _0x3c7891=await db['prepare']('INSERT\x20INTO\x20'+_0x1f29e6+'\x20(username)\x20VALUES\x20(?)');await _0x3c7891['run'](await _0x11f4ba[_0x20a02f]['evaluate'](_0x45018c=>_0x45018c['textContent']),function(_0x425329){_0x425329&&console['log']('error\x20in\x20add-user:'+_0x425329);}),await _0x3c7891['finalize']();}catch(_0x2703b3){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x20a02f+'\x20:\x20'+_0x2703b3);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x20a02f+'\x20:\x20'+_0x2703b3);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x898f97=Math['round'](++_0x870ca/_0xb55c87*0x64),_0x35d0c6['sender']['send']('fetch-progress',_0x898f97,!![]),_0x35d0c6['sender']['send']('fetch-progress',0x64,!![]),_0x5e5dac&&(_0x35d0c6['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x35d0c6,_0x1aa808,_0x5a9a73,_0x1f29e6,_0x4af4d3)),_0x35d0c6['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x588f72=>{_0x588f72('Scraping\x20finished!');});}catch(_0x191d30){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x191d30);return handle_fail(0x2);}}catch(_0x4d7195){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x4d7195);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x4d7195);return handle_fail(0x2);}}async function set_clearname_from_username(_0x3eff56,_0x1b752a,_0x3dac24=null){try{let _0x109a8d,_0x53870e;const _0x187b22='SELECT\x20username\x20FROM\x20'+_0x1b752a+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x187b22,[],(_0x31d278,_0x25598c)=>{_0x31d278&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x31d278['message']),_0x25598c['length']===0x0&&(_0x53870e=_0x25598c['length']),_0x109a8d=_0x25598c['map'](_0x39611a=>_0x39611a['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x53870e);if(_0x53870e===0x0){console['log']('Leave');return;}const _0xde6c13=await _0x3eff56['waitForSelector'](IG_SEARCH_BUTTON);await _0xde6c13['click'](),await delay(0x4b0,0x7d0);for(let _0x123985 of _0x109a8d){const _0x1ab2e4=await _0x3eff56['waitForSelector'](IG_SEARCH_INPUT);await _0x1ab2e4['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x3eff56['type'](IG_SEARCH_INPUT,_0x123985,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0xaf6999=0x1;while(_0xaf6999!=0x14){console['log']('Schleife');try{let _0xed945a=IG_NAME_SPAN_PART1+_0xaf6999+IG_USERNAME_SPAN_PART2;const _0x3f88b7=await _0x3eff56['waitForSelector'](_0xed945a),_0x1564c7=await _0x3eff56['evaluate'](_0x7915bf=>_0x7915bf['innerHTML'],_0x3f88b7);await delay(0xc8,0x1f4);if(_0x1564c7==_0x123985){let _0x5d78d5=IG_NAME_SPAN_PART1+_0xaf6999+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x50bfe2=await _0x3eff56['waitForSelector'](_0x5d78d5);let _0x56de8e=await _0x3eff56['evaluate'](_0x46f39b=>_0x46f39b['innerHTML'],_0x50bfe2);const _0x2dd8c0=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x1b5336=_0x56de8e['match'](_0x2dd8c0);_0x1b5336?_0x56de8e=_0x1b5336[0x1]['trim']():_0x56de8e=_0x56de8e['trim']();_0x56de8e['includes']('•')&&(_0x56de8e=_0x56de8e['substring'](0x0,_0x56de8e['indexOf']('•')-0x1));const _0x33b8d4='UPDATE\x20'+_0x1b752a+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x33b8d4,[_0x56de8e,_0x1564c7],function(_0x5617b4){_0x5617b4&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x5617b4['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0xaf6999++;}catch(_0x4333f9){const _0x4ac0ea='UPDATE\x20'+_0x1b752a+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x4ac0ea,['',_0x123985],function(_0x507b88){_0x507b88&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x507b88['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x4333f9);break;}}_0x3dac24&&_0x3dac24();}await _0xde6c13['click']();}catch(_0x25a83b){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x25a83b);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x4a37a8,_0x4dd89a)=>{const _0x49f455='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x49f455,[],(_0x17a1bf,_0x2ec10e)=>{_0x17a1bf?_0x4dd89a(_0x17a1bf):_0x4a37a8(_0x2ec10e);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x1ed1bd,_0x2bdc1f)=>{const _0x40ee85='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x40ee85,[],async(_0x5699fb,_0x284e01)=>{if(_0x5699fb)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x5699fb['message']),_0x2bdc1f({'status':'error','message':_0x5699fb['message']});else try{const _0x4e1ab7=await Promise['all'](_0x284e01['map'](_0x3dd4db=>{return new Promise(_0x387d8a=>{if(!_0x3dd4db['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x3dd4db['campaign_name']),_0x387d8a({'campaign_name':_0x3dd4db['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x710892='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x3dd4db['list_id'],_0x3ceef5='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x3dd4db['list_id']+'\x22';db['get'](_0x710892,[],(_0x37d7ca,_0x1d50b5)=>{_0x37d7ca?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x3dd4db['campaign_name']+':',_0x37d7ca['message']),_0x387d8a({'campaign_name':_0x3dd4db['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x3ceef5,[],(_0x2b9b1e,_0x828ba9)=>{_0x2b9b1e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x3dd4db['campaign_name']+':',_0x2b9b1e['message']),_0x387d8a({'campaign_name':_0x3dd4db['campaign_name'],'lead_count':_0x1d50b5?_0x1d50b5['lead_count']:0x0,'contacted_count':'N/A'})):_0x387d8a({'campaign_name':_0x3dd4db['campaign_name'],'lead_count':_0x1d50b5?_0x1d50b5['lead_count']:0x0,'contacted_count':_0x828ba9?_0x828ba9['contacted_count']:0x0});});});});}));_0x1ed1bd({'status':'success','campaigns':_0x4e1ab7});}catch(_0x2fa2c4){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x2fa2c4),_0x2bdc1f({'status':'error','message':_0x2fa2c4['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xe52daa,_0x514f11)=>{return new Promise((_0x59d516,_0x31239f)=>{const _0xb571a7='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0xb571a7,[_0x514f11],(_0x27bb28,_0x2c98b0)=>{_0x27bb28?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x27bb28),_0x31239f(_0x27bb28)):(console['log']('ROWS'),console['log'](_0x2c98b0),debugDatabaseContents(),_0x59d516(_0x2c98b0));});});});const showTableContents=_0x24e79d=>{return new Promise((_0x1dec7b,_0xff1f10)=>{const _0x4cf67d='SELECT\x20*\x20FROM\x20'+_0x24e79d+';';campaignDB['all'](_0x4cf67d,(_0x5a66ca,_0x306ebf)=>{_0x5a66ca?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x24e79d+':',_0x5a66ca),_0xff1f10(_0x5a66ca)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x24e79d+':',_0x306ebf),_0x1dec7b({'status':'success','message':_0x306ebf}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x1e74ef){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x1e74ef);}}ipcMain['handle']('create-campaign',async(_0x4464e3,_0x39d454)=>{return new Promise((_0x54e130,_0x12a29d)=>{const _0x5d76a9='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x5d76a9,[String(_0x39d454)],function(_0x210c6f){_0x210c6f?_0x12a29d(_0x210c6f):_0x54e130({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x23558e,_0x3610ec)=>{return new Promise((_0x2de0bd,_0x380474)=>{const _0x51845d='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x51845d,[_0x3610ec],function(_0x95448a){_0x95448a?_0x380474(_0x95448a):_0x2de0bd({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x43e66e,_0x15c65e,_0x43ce0a,_0x15409e,_0x33c494,_0x353ad0,_0x2752f7,_0x47ced6)=>{const _0x3f2539=await createMessageID(_0x33c494);return new Promise((_0x53d2a9,_0x31985b)=>{if(!_0x15c65e||!_0x43ce0a||!_0x15409e||!_0x3f2539||!_0x353ad0)return _0x31985b({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x3f2539);const _0x37e26a='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x37e26a,[_0x43ce0a,_0x15409e,_0x3f2539,_0x353ad0,_0x2752f7,_0x47ced6,_0x15c65e],function(_0x7b55d0){if(_0x7b55d0)_0x31985b({'status':'error','message':_0x7b55d0['message']});else this['changes']===0x0?_0x31985b({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x53d2a9({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x280f93,_0x1216ea,_0x40596c,_0xb3eee6,_0x41760b)=>{return new Promise((_0x4d4608,_0x40bede)=>{const _0x4161ee='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4161ee,[_0x1216ea,_0x40596c,_0xb3eee6,_0x41760b],function(_0x357375){return _0x357375?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x357375['message']),_0x40bede('insert-dm-response',{'success':![],'message':_0x357375['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x4d4608('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x40a9c5=>{return new Promise((_0x3a77de,_0x3f5a8c)=>{const _0x17f1ac='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x17f1ac,[_0x40a9c5],(_0x4ee8b1,_0x4d1d38)=>{if(_0x4ee8b1)_0x3f5a8c({'status':'error','message':_0x4ee8b1['message']});else{if(_0x4d1d38)_0x3a77de(_0x4d1d38['message_id']);else{const _0x52faa2='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x52faa2,[_0x40a9c5],function(_0x33ab3c){_0x33ab3c?_0x3f5a8c({'status':'error','message':_0x33ab3c['message']}):_0x3a77de(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x1b2058,_0x173b15)=>{return new Promise((_0x51e75b,_0x58c7e5)=>{const _0x1bb6b5='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x173b15;db['get'](_0x1bb6b5,(_0x72f732,_0x5aa048)=>{_0x72f732?_0x58c7e5({'status':'error','message':_0x72f732['message']}):_0x51e75b({'status':'success','count':_0x5aa048['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x9edf3a,_0x35c986){try{const _0x2ea6c0=await new Promise((_0x11b5c4,_0x22c0be)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x35c986],(_0x42a55c,_0x30677d)=>{if(_0x42a55c)_0x22c0be(_0x42a55c);else{if(_0x30677d['length']>0x0){let _0x1abce2=JSON['parse'](_0x30677d[0x0]['cookie']);console['log'](_0x1abce2),_0x11b5c4(_0x1abce2);}else _0x22c0be(new Error('User\x20with\x20username\x20'+_0x35c986+'\x20does\x20not\x20exist.'));}});});await _0x9edf3a['setCookie'](..._0x2ea6c0),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x19372d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x19372d);}}async function saveCookiesForUser(_0x46d045,_0x166693){try{const _0x752ce8=await _0x46d045['cookies']();if(!_0x752ce8||_0x752ce8['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x166693);const _0x3c4d48=JSON['stringify'](_0x752ce8);if(_0x3c4d48['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x166693);return new Promise((_0xb9d883,_0x590426)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x166693],(_0x388a35,_0x2b08a4)=>{if(_0x388a35)return console['error']('Error\x20checking\x20user\x20existence:',_0x388a35),_0x590426(_0x388a35);if(_0x2b08a4){const _0x110096=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x110096['run'](_0x3c4d48,_0x166693,function(_0x35fe01){return _0x35fe01?(console['error']('Error\x20updating\x20cookies:',_0x35fe01),_0x590426(_0x35fe01)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x166693),_0xb9d883());});}else{const _0x1be733=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x1be733['run'](_0x166693,_0x3c4d48,function(_0x587e0f){return _0x587e0f?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x587e0f),_0x590426(_0x587e0f)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x166693),_0xb9d883());});}});});}catch(_0x31677f){console['error']('Error\x20fetching\x20cookies:',_0x31677f);throw _0x31677f;}}async function createUserIfNotExists(_0x2b0590){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x2b0590],(_0x491fd6,_0x2c82f2)=>{if(_0x491fd6){console['error']('Error\x20checking\x20user\x20existence:',_0x491fd6);throw _0x491fd6;}else{if(!_0x2c82f2){const _0x302b57=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x302b57['run'](_0x2b0590,function(_0x510ee0){_0x510ee0?console['error']('Error\x20inserting\x20new\x20user:',_0x510ee0):console['log']('New\x20user\x20created:',_0x2b0590);});}else console['log']('User\x20already\x20exists:',_0x2b0590);}});}catch(_0x273cfa){console['error']('Error\x20creating\x20user:',_0x273cfa);throw _0x273cfa;}}ipcMain['handle']('create-relation',async(_0xe6c650,_0x3951eb)=>{return new Promise((_0x176676,_0x4330af)=>{const _0x9c768b='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x3951eb+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x9c768b,function(_0x5cc3ca){_0x5cc3ca?_0x4330af(_0x5cc3ca):_0x176676({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x24f763,_0x11a75d)=>{return console['log']('droping\x20table'+_0x11a75d),new Promise((_0x207bb3,_0x2ab24f)=>{const _0x579b2a='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x11a75d;console['log']('droping\x20table'+_0x11a75d),db['run'](_0x579b2a,function(_0x5cf022){_0x5cf022?_0x2ab24f(_0x5cf022):_0x207bb3({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0xeedc0a=>{return new Promise((_0x352425,_0x3da6e7)=>{const _0x442d9a='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x442d9a,[],(_0x136061,_0x3a34c0)=>{_0x136061?_0x3da6e7(_0x136061):_0x352425(_0x3a34c0['map'](_0x5baaf2=>_0x5baaf2['name']));});});}),ipcMain['handle']('add-user',async(_0x564833,_0x18e42a,_0x128a06)=>{return new Promise(_0x5c0641=>{const _0x3567a6=db['prepare']('INSERT\x20INTO\x20'+_0x128a06+'\x20(username)\x20VALUES\x20(?)');_0x3567a6['run'](_0x18e42a,function(_0x29ed97){_0x29ed97?console['log']('error\x20in\x20add-user:'+_0x29ed97):_0x5c0641({'status':'success','id':this['lastID']});}),_0x3567a6['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x522958,_0x8ea86e)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x1861e4,_0x3bf295)=>{if(_0x1861e4)_0x8ea86e(_0x1861e4);else{_0x522958({'status':'success','users':_0x3bf295});for(_0x3bf295 of _0x3bf295){console['log'](_0x3bf295['username']);}}});});}),ipcMain['handle']('get-data',async(_0x4d7716,_0x579ef8)=>{return new Promise((_0x18bd02,_0x3e0b53)=>{const _0x3611d0='SELECT\x20*\x20FROM\x20'+_0x579ef8;console['log'](_0x3611d0),db['all'](_0x3611d0,[],(_0x12f8b4,_0x51eda2)=>{_0x12f8b4?_0x3e0b53(_0x12f8b4):_0x18bd02(_0x51eda2);});});}),ipcMain['handle']('get-accounts',async _0x62bfe1=>{return new Promise((_0x5480f9,_0x1e5516)=>{const _0xfb9243='SELECT\x20*\x20FROM\x20accounts';console['log'](_0xfb9243),igaccountsDB['all'](_0xfb9243,[],(_0x4d5f3b,_0x11ef10)=>{_0x4d5f3b?_0x1e5516(_0x4d5f3b):_0x5480f9(_0x11ef10);});});}),ipcMain['handle']('get-targets',async(_0x499c5f,_0x43ffe9)=>{return getTargetProfiles(_0x43ffe9);}),ipcMain['handle']('delete-user',async(_0x46aac6,_0x3db5e0,_0x245874)=>{return new Promise((_0x216bee,_0x57ac6c)=>{const _0x4bcc35=db['prepare']('DELETE\x20FROM\x20'+_0x245874+'\x20WHERE\x20username\x20=\x20?');_0x4bcc35['run'](_0x3db5e0,function(_0x207cd0){_0x207cd0?_0x57ac6c(_0x207cd0):_0x216bee({'status':'success','changes':this['changes']});}),_0x4bcc35['finalize']();});}),ipcMain['handle']('delete-account',async(_0x1c56cd,_0x1791b5)=>{const _0xac938c=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0xac938c['run'](_0x1791b5,function(_0x361b67){_0x361b67&&console['log'](_0x361b67);}),_0xac938c['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x4bf3f8,_0x355e7c)=>{const _0x3b30c2='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x3b30c2,[],(_0x1c3c7a,_0x56a003)=>{_0x1c3c7a?_0x355e7c({'status':'error','message':_0x1c3c7a['message']}):_0x4bf3f8({'status':'success','contactedCount':_0x56a003['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x262f27,_0x339ba0)=>{const _0x5de7f0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x5de7f0,[],(_0x4f6fd5,_0x17c114)=>{_0x4f6fd5?_0x339ba0({'status':'error','message':_0x4f6fd5['message']}):_0x262f27({'status':'success','contactedCount':_0x17c114['contactedCount']});});});});function exportDatabase(_0x341106){return new Promise((_0x2cc6b7,_0x167587)=>{const _0x55f82a='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x341106+'\x0a\x20\x20\x20\x20';db['all'](_0x55f82a,[],async(_0x4d6ee1,_0x250816)=>{if(_0x4d6ee1){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x4d6ee1['message']),_0x167587(_0x4d6ee1);return;}if(!_0x250816||_0x250816['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2cc6b7();return;}const _0x6d94a4=XLSX['utils']['json_to_sheet'](_0x250816),_0x1935ad=XLSX['utils']['sheet_to_csv'](_0x6d94a4);try{const {canceled:_0x4a9a2f,filePath:_0x279dd3}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x341106+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x4a9a2f||!_0x279dd3){console['log']('Speichern\x20abgebrochen.'),_0x2cc6b7();return;}fs['writeFile'](_0x279dd3,_0x1935ad,'utf8',_0x321b1d=>{_0x321b1d?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x321b1d['message']),_0x167587(_0x321b1d)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x279dd3),_0x2cc6b7());});}catch(_0x1ec902){console['error']('Fehler\x20im\x20Speicherdialog:',_0x1ec902),_0x167587(_0x1ec902);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x2e666e,_0x2f0e3e)=>{shell['openExternal'](_0x2f0e3e);});