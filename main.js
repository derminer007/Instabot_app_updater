const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x5cc388,_0x48ca56){try{const _0x5905d2=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x48ca56},'body':JSON['stringify']({'clearname':_0x5cc388})});if(!_0x5905d2['ok']){const _0x4adf5e=await _0x5905d2['text']();throw new Error(_0x5905d2['status']+':\x20'+_0x4adf5e);}const _0x1dc004=await _0x5905d2['json']();return _0x1dc004;}catch(_0x4194d5){console['error']('Error\x20in\x20extractFirstName:',_0x4194d5);throw _0x4194d5;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x15e130=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x15e130['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x15e130['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x2ab802){var _0x28e3d2=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x327b80){console['log']('window\x20id:'+_0x327b80['id']),_0x327b80['id']>0x1&&(_0x28e3d2=!![]);}),console['log']('child\x20opened\x20='+_0x28e3d2);if(!_0x28e3d2){const _0x27d861=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x27d861['loadFile'](_0x2ab802['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));});function initializeDatabase(){const _0x14f19c=require('fs'),_0x120028=path['join'](app['getPath']('userData'),'data'),_0x2ecd0c=['campaign.db','crm.db','igaccounts.db'],_0xca30ab=[];try{_0x14f19c['mkdirSync'](_0x120028,{'recursive':!![]});for(const _0xdc115d of _0x2ecd0c){const _0x1f9837=path['join'](process['resourcesPath'],'app','build','data',_0xdc115d),_0x523fde=path['join'](_0x120028,_0xdc115d);!_0x14f19c['existsSync'](_0x523fde)?(_0x14f19c['copyFileSync'](_0x1f9837,_0x523fde),console['log']('[InitDB]\x20Kopiert\x20'+_0xdc115d+'\x20nach:\x20'+_0x523fde)):console['log']('[InitDB]\x20'+_0xdc115d+'\x20existiert\x20bereits:\x20'+_0x523fde),_0xca30ab['push'](_0x523fde);}}catch(_0x2a672a){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x2a672a);}return _0xca30ab;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x24dd41,AppUpdate:_0x2623b4}=require('electron-updater');_0x24dd41['autoDownload']=![],_0x24dd41['autoInstallOnAppQuit']=!![],_0x24dd41['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x24dd41['on']('update-available',_0x2727bf=>{console['log']('Update\x20verfügbar:',_0x2727bf),_0x24dd41['downloadUpdate']();}),_0x24dd41['on']('update-downloaded',_0x553046=>{console['log']('Update\x20heruntergeladen:',_0x553046),_0x24dd41['quitAndInstall']();}),_0x24dd41['on']('error',_0x3fc3d3=>{console['error']('Fehler\x20beim\x20Updaten:',_0x3fc3d3);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x5c06d8,AppUpdate:_0x4a41e9}=require('electron-updater');_0x5c06d8['autoDownload']=![],_0x5c06d8['autoInstallOnAppQuit']=!![],_0x5c06d8['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x5c06d8['on']('update-available',_0x83f4c8=>{console['log']('Update\x20verfügbar:',_0x83f4c8),_0x5c06d8['downloadUpdate']();}),_0x5c06d8['on']('update-downloaded',_0x478e74=>{console['log']('Update\x20heruntergeladen:',_0x478e74),console['log']('Neustarten\x20zum\x20Updaten');}),_0x5c06d8['on']('error',_0x2dc129=>{console['error']('Fehler\x20beim\x20Updaten:',_0x2dc129);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x5dd56f='',_0x7b1e8c=null;if(process['platform']==='darwin')_0x5dd56f=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x5dd56f=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x5dd56f}),_0x7b1e8c=await browser_login['newPage'](),_0x7b1e8c['setDefaultNavigationTimeout'](0x1d4c),_0x7b1e8c['setDefaultTimeout'](0x1d4c),await _0x7b1e8c['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x7b1e8c;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x12ae43=0x1,_0x6ddedd=0x0){let _0x3a1f10='',_0x5df381=null;const _0x43189a=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x3a1f10=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x3a1f10=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x12ae43===0x0&&!pageStack[_0x6ddedd])return browser=await puppeteer['launch']({'headless':_0x43189a,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3a1f10}),_0x5df381=await browser['newPage'](),_0x5df381['setDefaultNavigationTimeout'](0x1d4c),_0x5df381['setDefaultTimeout'](0x1d4c),await _0x5df381['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x6ddedd]=_0x5df381,_0x5df381;return(browser===null||pageStack[_0x6ddedd]===null||pageStack[_0x6ddedd]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x43189a,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3a1f10})),(pageStack[_0x6ddedd]===null||pageStack[_0x6ddedd]['isClosed']())&&(_0x5df381=await browser['newPage'](),_0x5df381['setDefaultNavigationTimeout'](0x1d4c),_0x5df381['setDefaultTimeout'](0x1d4c),await _0x5df381['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x6ddedd]=_0x5df381),pageStack[_0x6ddedd];}ipcMain['on']('login',async(_0x22d194,_0x351185)=>{const _0x4859a1=await getBrowserPageLogin();await _0x4859a1['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x4859a1,_0x351185),ipcMain['on']('setLoginCookies',async(_0xf27e6e,_0x2862d7)=>{try{await set_login_cookies(_0x4859a1,_0x2862d7);}catch(_0x9f34eb){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x9f34eb);}});}),ipcMain['on']('export-relation',async(_0x4248b7,_0x409b9b)=>{try{await exportDatabase(_0x409b9b),_0x4248b7['reply']('export-relation-response',{'success':!![]});}catch(_0x5b3092){console['error'](_0x5b3092),_0x4248b7['reply']('export-relation-response',{'success':![],'message':_0x5b3092['message']});}}),ipcMain['handle']('sendMessage',async(_0x3b0e4d,_0x4269cd,_0x90d6fd,_0x36f8eb,_0x4be7a7,_0x4288ee,_0x17f8f7,_0x2f8a1a,_0x4d09c7,_0x17d015,_0x3b3a16)=>{isStopping=![];let _0x47bfcb=null;return _0x17f8f7?_0x47bfcb=await getBrowserPage(_0x4be7a7,_0x2f8a1a):_0x47bfcb=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x4269cd),send_message(_0x47bfcb,_0x4269cd,_0x90d6fd,_0x36f8eb,_0x4be7a7,_0x4288ee,_0x4d09c7,_0x17d015,_0x3b3a16);}),ipcMain['handle']('stop-action',async(_0x5d8e51,_0x157fb7)=>{isStopping=!![];const _0x20fe39=await getBrowserPage(0x1,_0x157fb7);await _0x20fe39['close']();}),ipcMain['handle']('fetch_followers',async(_0x78868f,_0x266aa3,_0x100621,_0x73c8ab,_0x3ca091,_0xd2e24e)=>{isStopping=![];const _0x1fdaf0=await getBrowserPage();return fetch_followers_from_account(_0x78868f,_0x1fdaf0,_0x266aa3,_0x100621,_0x73c8ab,_0x3ca091,_0xd2e24e);}),ipcMain['handle']('get-account-details',async(_0x188c71,_0x2a7c22,_0x53dbab,_0x4a860b)=>{isStopping=![];const _0x5710b9=await getBrowserPage();return fetch_account_details(_0x5710b9,_0x2a7c22,_0x53dbab,_0x4a860b);}),ipcMain['handle']('fetch_likes',async(_0x5ec625,_0x4e7399,_0x1ecf40,_0x2535a5,_0x36f297,_0x493974)=>{isStopping=![];const _0xad639c=await getBrowserPage();return fetch_likers_from_post(_0x5ec625,_0xad639c,_0x4e7399,_0x1ecf40,_0x2535a5,_0x36f297,_0x493974);}),ipcMain['handle']('fetch_comments',async(_0x46ab7b,_0x14e3fd,_0xc701a4,_0x5ac4b2,_0x3d71e3,_0x58ec1d)=>{isStopping=![];const _0xd4b189=await getBrowserPage();return fetch_comments_from_post(_0x46ab7b,_0xd4b189,_0x14e3fd,_0xc701a4,_0x5ac4b2,_0x3d71e3,_0x58ec1d);});async function updateAppSilent(){const {spawn:_0x2f83ae}=require('child_process'),_0x1ea5af=require('path'),_0xa4c40e=require('electron-log');return _0xa4c40e['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5d11c5,_0x20c90d)=>{const {updateElectronApp:_0x58f5a7,UpdateSourceType:_0x410a4d}=require('update-electron-app');_0x58f5a7({'updateSource':{'type':_0x410a4d['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xa4c40e}),_0x5d11c5('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x3369ba,_0x361f40)=>{doFullElectronUpdateSilent(),_0x3369ba('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x2da6a7}=require('child_process'),_0xad9998=require('path'),_0x40926f=require('electron-log');return _0x40926f['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5b89be,_0x4a529f)=>{const {updateElectronApp:_0x3eef24,UpdateSourceType:_0x23e246}=require('update-electron-app');_0x3eef24({'updateSource':{'type':_0x23e246['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x40926f}),_0x5b89be('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x25a01c,_0x2eb9da)=>{doFullElectronUpdate(),_0x25a01c('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x391110,_0x3f583a)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x391110('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x4dac49=path['join'](__dirname,'mac-updater-intern.sh'),_0x2e434c=spawn('/bin/bash',[_0x4dac49]);_0x2e434c['stdout']['on']('data',_0x3a71da=>{console['log']('stdout:\x20'+_0x3a71da);}),_0x2e434c['stderr']['on']('data',_0x1ff7ac=>{console['error']('stderr:\x20'+_0x1ff7ac);}),_0x2e434c['on']('close',_0xadf18e=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0xadf18e),_0xadf18e===0x0?_0x391110('Update\x20erfolgreich\x20abgeschlossen.'):_0x3f583a(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0xadf18e));});}else{if(process['platform']==='win32'){const _0x12f570=path['join'](__dirname,'../','../','../');process['chdir'](_0x12f570),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x459086='soft-ui-updater-windows.ps1',_0x1d8bc5=spawn('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x459086]);_0x1d8bc5['stdout']['on']('data',_0x103eb2=>{console['log']('stdout:\x20'+_0x103eb2);}),_0x1d8bc5['stderr']['on']('data',_0x520620=>{console['error']('stderr:\x20'+_0x520620);}),_0x1d8bc5['on']('close',_0x3e5277=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x3e5277),_0x3e5277===0x0?_0x391110('Update\x20erfolgreich\x20abgeschlossen.'):_0x3f583a(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x3e5277));});}else _0x3f583a(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x4c6bce=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0xba6e41,_0x54824a)=>{console['log']('Update\x20Silent:\x20'+_0x54824a);if(_0x54824a){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x470c5b,_0x517a1a){return Math['random']()*(_0x517a1a-_0x470c5b+0x1)+_0x470c5b;}function delay(_0x40c5f0,_0xb1f809){let _0x3c568b=getRnd(_0x40c5f0,_0xb1f809);return new Promise(function(_0x56654f){setTimeout(_0x56654f,_0x3c568b);});}async function scroll(_0x51c503,_0xfe26f,_0x1b5463=0x2,_0x56debc){const _0x8cfdf9=await _0x51c503['waitForSelector'](_0xfe26f);for(let _0x462cf7=0x0;_0x462cf7<_0x1b5463;_0x462cf7++){console['log']('Scrolling\x20'+_0x462cf7),await _0x51c503['evaluate'](_0x1f561f=>{const _0x47f956=document['querySelector'](_0x1f561f);_0x47f956&&_0x47f956['scrollBy'](0x0,0x190);},_0xfe26f),await delay(0x320,0x5dc),_0x56debc();}}async function saveCookies(_0xc0b7c8){let _0x328dc9=await _0xc0b7c8['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x328dc9,null,0x2));}async function notificationClear(_0x298dbe){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x298dbe['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x298dbe['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0xa848ba){console['log']('Notification-Feld\x20übersprungen:\x20'+_0xa848ba);}}async function getTargetProfiles(_0x243606){return new Promise((_0x7e070a,_0x2a258b)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x243606,(_0x2a061d,_0x37313)=>{_0x2a061d?_0x2a258b(_0x2a061d):_0x7e070a(_0x37313);});});}async function login_legacy(_0x25a75b,_0x510765,_0x4f7179){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x25a75b,_0x510765),await createUserIfNotExists(_0x510765,_0x4f7179);}catch(_0x54de1c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x54de1c);}try{await _0x25a75b['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x25a75b['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x25a75b['click']('button._a9--._ap36._a9_0');}catch(_0x6e87ac){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x25a75b['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x25a75b['type']('input[name=\x27username\x27]',_0x510765,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x25a75b['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x25a75b['type']('input[name=\x27password\x27]',_0x4f7179,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x25a75b['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x25a75b['click']('button[type=\x27submit\x27]');}catch(_0x2faf28){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x25a75b),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x25a75b,_0x510765);}catch(_0x2709e6){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x2709e6);}}catch(_0x1e8f9a){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1e8f9a);}}async function login(_0x1a7b15,_0x444d3d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1a7b15,_0x444d3d),await createUserIfNotExists(_0x444d3d);}catch(_0xf7b18){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xf7b18);}try{await _0x1a7b15['goto']('https://www.instagram.com/accounts/login/');}catch(_0xbd33ed){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0xbd33ed);}}async function set_login_cookies(_0x3a992c,_0x1e95b8){try{await saveCookiesForUser(_0x3a992c,_0x1e95b8);}catch(_0xbd4773){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xbd4773);}}async function waitForXPath(_0x5e6d7a,_0x43f101,_0x25e85c={}){return await _0x5e6d7a['waitForFunction'](_0x2dc462=>{return document['evaluate'](_0x2dc462,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x25e85c,_0x43f101),_0x5e6d7a['evaluateHandle'](_0x2e7f8d=>document['evaluate'](_0x2e7f8d,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x43f101);}async function send_message(_0x51721c,_0x29f981,_0x6ebcd2,_0x47a188,_0x333d53,_0x6d2fe8,_0x214f61,_0x37e162,_0x4d1927){return new Promise(async(_0x4e99cb,_0x1ee63b)=>{_0x6d2fe8=_0x6d2fe8['split'](';'),console['log'](_0x6d2fe8[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x333d53);try{await setCookiesForUser(_0x51721c,_0x6d2fe8[0x0]);}catch(_0x4b2ff3){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4b2ff3),_0x1ee63b({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4b2ff3});return;}try{await _0x51721c['goto']('https://www.instagram.com/'+_0x29f981+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x51721c);}catch(_0x1d5ab8){_0x1ee63b({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x1d5ab8});return;}console['log']('UserSkip:\x20'+_0x214f61);if(_0x214f61==0x1)try{const _0x4b4cdb=await _0x51721c['$eval']('._ap3a._aaco._aacw._aad6._aade',_0xe1e7a6=>_0xe1e7a6['textContent']['trim']());console['log'](_0x4b4cdb);if(_0x4b4cdb==='Following'||_0x4b4cdb==='Folge\x20ich')return _0x4e99cb({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x55c8d5){}try{await _0x51721c['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x51721c['click'](K_DIRECT_MSG_BUTTON);}catch(_0x4593d0){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x4593d0);try{await _0x51721c['waitForSelector'](K_OPTIONS_BUTTON),await _0x51721c['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x1696e1=await waitForXPath(_0x51721c,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x1696e1['click']();}catch(_0x1674bb){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x1674bb),_0x4e99cb({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x51721c);}catch(_0x3e8ceb){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x3e8ceb);}try{const _0x446090=await _0x51721c['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x37e162){const _0x1fab89=await _0x51721c['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x1fab89)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x29f981),_0x4e99cb({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x2d53a0=await _0x51721c['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x2d53a0),_0x47a188=_0x47a188['replace']('{USERNAME}',_0x29f981);let _0x951914;if(_0x47a188['includes']('{NAME}')||_0x47a188['includes']('{name}'))try{const _0x4b9026=await extractFirstName(_0x2d53a0,_0x4d1927);console['log']('Response\x20Clearname\x20valid:\x20'+_0x4b9026['valid']),_0x4b9026['valid']?(_0x47a188=_0x47a188['replaceAll'](/{NAME}|{name}/g,_0x4b9026['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x4b9026['name']),_0x951914=_0x4b9026['name']):(_0x47a188=_0x47a188['replaceAll'](/ ?({NAME}|{name})/g,''),_0x951914='UNKNOWN_NAME');}catch(_0x105b71){console['log'](_0x105b71['message']),_0x951914=_0x105b71['message'];let _0x3801d7=_0x2d53a0['replace'](/[^\p{L}\s]/gu,''),_0x24574b=_0x3801d7['split']('\x20')[0x0];_0x24574b['length']>0x2&&!_0x24574b['includes']('Instagram')?_0x47a188=_0x47a188['replaceAll'](/{NAME}|{name}/g,_0x24574b):_0x47a188=_0x47a188['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x446090['type'](_0x47a188,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x1e3c80=await _0x51721c['waitForSelector'](K_SEND_MSG_BUTTON);await _0x1e3c80['click'](),await delay(0x320,0x3e8),_0x4e99cb({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x2d53a0,'extracted_clearname':_0x951914});}catch(_0x39db41){try{await _0x51721c['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x5d3226=await _0x51721c['evaluate'](_0x5bc02a=>{return document['querySelector'](_0x5bc02a)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x5d3226),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x39db41),_0x4e99cb({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x29f981+'\x20überspringen.'});}catch(_0xfa423f){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0xfa423f),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x29f981+'\x20:\x20'+_0xfa423f),_0x4e99cb({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x29f981+'\x20:\x20'+_0xfa423f});}}});}function handle_fail(_0x258c11){if(isStopping)return new Promise(_0x53ffd2=>{_0x53ffd2('Scraper\x20gestoppt.');});else{let _0x4fce92='';switch(_0x258c11){case 0x0:_0x4fce92='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x4fce92='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x4fce92='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x4fce92='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x599ffa,_0x2035d4)=>{_0x2035d4(_0x4fce92);});}}async function fetch_account_details(_0x244b83,_0xcd423,_0x4ba747,_0x297241){try{await setCookiesForUser(_0x244b83,_0x4ba747['username']);}catch(_0x1e7b4e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1e7b4e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1e7b4e);return handle_fail(0x0);}_0x244b83['setDefaultNavigationTimeout'](0x7530),await _0x244b83['goto']('https://www.instagram.com/'+_0xcd423+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x244b83);const _0x389337=await _0x244b83['evaluate'](()=>{const _0x46e1cc=document['querySelector']('meta[property=\x22og:image\x22]');return _0x46e1cc?_0x46e1cc['getAttribute']('content'):null;});await _0x244b83['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0xd4e43e=await _0x244b83['evaluate'](()=>{const _0x30d45e=document['querySelector']('meta[name=\x22description\x22]');if(!_0x30d45e)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x1cf972=_0x30d45e['getAttribute']('content');if(!_0x1cf972)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x1cf972);const _0x4658d2=/\s*[–-]\s*/,_0x49c8fc=_0x1cf972['split'](_0x4658d2);if(_0x49c8fc['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x4c2b03=_0x49c8fc[0x0],_0x3b95d2=_0x49c8fc[0x1],_0x25b53f=_0x4c2b03['split'](',\x20');if(_0x25b53f['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x111b73=_0x25b53f[0x0]['split']('\x20')[0x0],_0x57a2ea=_0x25b53f[0x1]['split']('\x20')[0x0],_0x587d73=_0x25b53f[0x2]['split']('\x20')[0x0];let _0x1c3e6e='',_0x2caa75='';const _0x1630cd='\x20on\x20Instagram:\x20',_0x464b14=_0x3b95d2['split'](_0x1630cd);return _0x1c3e6e=_0x464b14[0x0]['trim'](),_0x1c3e6e=_0x1c3e6e['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x464b14['length']>0x1&&(_0x2caa75=_0x464b14[0x1]['trim'](),_0x2caa75['startsWith']('\x22')&&_0x2caa75['endsWith']('\x22')&&(_0x2caa75=_0x2caa75['substring'](0x1,_0x2caa75['length']-0x1)['trim']()),_0x2caa75=_0x2caa75['replace'](/&quot;/g,'')['trim']()),{'followers':_0x111b73,'following':_0x57a2ea,'posts':_0x587d73,'nameText':_0x1c3e6e,'bio':_0x2caa75};});console['log']('Extracted\x20profile\x20data:',_0xd4e43e);const _0xda625=_0xd4e43e['nameText'],_0x25ba22=_0x389337,_0x3ad4dd=_0xd4e43e['bio'],_0x56b3e6=_0xd4e43e['followers'],_0x3863fe=_0xd4e43e['following'],_0x5d78b9=_0xd4e43e['posts'],_0x3391a8=![],_0x162683=![],_0x40cd42=![],_0x571902='\x0a\x20\x20INSERT\x20INTO\x20'+_0x297241+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x571902,[_0xcd423,_0xda625,_0x25ba22,_0x3ad4dd,_0x56b3e6,_0x3863fe,_0x5d78b9,_0x3391a8,_0x162683,_0x40cd42],function(_0x13e5e9){_0x13e5e9?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x13e5e9['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x63812f,_0x26fec8,_0x28764f,_0x102d3b,_0x4ecd42,_0x392dd,_0x278f9d){let _0x4731fb=0x4,_0x61386e=0x0,_0x34c1cd=0x0;try{await setCookiesForUser(_0x26fec8,_0x392dd['username']);}catch(_0x31fac3){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x31fac3);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x31fac3);return handle_fail(0x0);}let _0x397a38=0x0;try{await _0x26fec8['goto']('https://www.instagram.com/'+_0x28764f+'/'),await notificationClear(_0x26fec8);try{if(_0x102d3b<=0x0){const _0x5770c6=await _0x26fec8['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x4934a4=await _0x26fec8['evaluate'](_0x56db33=>_0x56db33['innerHTML'],_0x5770c6);_0x397a38=Math['ceil'](_0x4934a4/0x4);}else _0x397a38=Math['ceil'](_0x102d3b/0x4);_0x4731fb+=_0x397a38,_0x34c1cd=Math['round'](++_0x61386e/_0x4731fb*0x64),_0x63812f['sender']['send']('fetch-progress',_0x34c1cd,!![]);let _0x142578=await _0x26fec8['waitForSelector']('a[href=\x22/'+_0x28764f+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x142578['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x28764f+'\x20gesichtet'),_0x34c1cd=Math['round'](++_0x61386e/_0x4731fb*0x64),_0x63812f['sender']['send']('fetch-progress',_0x34c1cd,!![]);}catch(_0x25c0c8){console['log']('Follower\x20Liste\x20von\x20'+_0x28764f+'\x20nicht\x20gefunden:'+_0x25c0c8);throw new Error('Follower\x20Liste\x20von\x20'+_0x28764f+'\x20nicht\x20gefunden:'+_0x25c0c8);return handle_fail(0x0);}}catch(_0xb39da9){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xb39da9);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xb39da9);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x397a38),await scroll(_0x26fec8,FOLLOWER_FENSTER,_0x397a38,_0x4ed76e=>{_0x34c1cd=Math['round'](++_0x61386e/_0x4731fb*0x64),_0x63812f['sender']['send']('fetch-progress',_0x34c1cd,!![]);}),await _0x26fec8['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0xdec228=await _0x26fec8['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x3a975c=await _0x26fec8['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x34c1cd=Math['round'](++_0x61386e/_0x4731fb*0x64),_0x63812f['sender']['send']('fetch-progress',_0x34c1cd,!![]);_0x102d3b<=0x0&&(_0x102d3b=_0xdec228['length']);let _0x206c46=[];for(let _0x40325a=0x0;_0x40325a<_0xdec228['length']&&_0x40325a<_0x102d3b;_0x40325a++){_0x206c46['push'](await _0xdec228[_0x40325a]['evaluate'](_0x2df0c9=>_0x2df0c9['textContent']));const _0x3db593='INSERT\x20INTO\x20'+_0x4ecd42+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3db593,[await _0xdec228[_0x40325a]['evaluate'](_0x424728=>_0x424728['textContent']),await _0x3a975c[_0x40325a]['evaluate'](_0x2581b9=>_0x2581b9['textContent'])],function(_0x13f7ad){_0x13f7ad?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4ecd42+'\x27:',_0x13f7ad['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x34c1cd=Math['round'](++_0x61386e/_0x4731fb*0x64),_0x63812f['sender']['send']('fetch-progress',_0x34c1cd,!![]),_0x278f9d&&(_0x63812f['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x63812f,_0x26fec8,_0x392dd,_0x4ecd42,_0x206c46)),new Promise(_0x5cfd9b=>{_0x5cfd9b('Scraping\x20finished!');});}catch(_0x36fa0a){if(_0x278f9d)throw new Error(_0x36fa0a);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x28764f+'\x20nicht\x20gefunden:\x20'+_0x36fa0a);return handle_fail(0x0);}}async function fetch_details_from_list(_0x4badf0,_0x1886c1,_0x24218a,_0x1811db,_0x3b652a){let _0x21b359=0x0,_0x14c378=0x0;for(let _0x3027f8=0x0;_0x3027f8<_0x3b652a['length'];_0x3027f8++){console['log']('Processing\x20profile:',_0x3b652a[_0x3027f8]);try{await fetch_account_details(_0x1886c1,_0x3b652a[_0x3027f8],_0x24218a,_0x1811db);}catch(_0x4564a8){console['error']('Detailed\x20Scraping\x20von:\x20',_0x3b652a[_0x3027f8],_0x4564a8);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x3b652a[_0x3027f8]+'\x20'+_0x4564a8);}_0x14c378=Math['round'](++_0x21b359/_0x3b652a['length']*0x64),_0x4badf0['sender']['send']('fetch-progress',_0x14c378,!![],!![]);}}async function fetch_likers_from_post(_0x27ad0d,_0x5c42a4,_0x8c3c39,_0x344fec,_0x49de6f,_0x817f52,_0x3dc5e8){let _0x5eab5a=0x4,_0x12001f=0x0,_0x3c7051=0x0;try{await setCookiesForUser(_0x5c42a4,_0x817f52['username']);}catch(_0x932c7e){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x932c7e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x932c7e);return handle_fail(0x1);return;}_0x3c7051=Math['round'](++_0x12001f/_0x5eab5a*0x64),_0x27ad0d['sender']['send']('fetch-progress',_0x3c7051,!![]);try{let _0x35f335=_0x8c3c39['substring'](0x0,_0x8c3c39['lastIndexOf']('/')),_0x3d04ea=_0x35f335+'/liked_by';console['log'](_0x3d04ea),await _0x5c42a4['goto'](_0x3d04ea),await delay(0x7d0,0xfa0),await notificationClear(_0x5c42a4),await delay(0xc8,0x1f4),_0x3c7051=Math['round'](++_0x12001f/_0x5eab5a*0x64),_0x27ad0d['sender']['send']('fetch-progress',_0x3c7051,!![]),await _0x5c42a4['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x57aa30=await _0x5c42a4['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x4d3704=await _0x5c42a4['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x57aa30['length']);let _0x201197=path['join'](__dirname,'/likers.csv');_0x3c7051=Math['round'](++_0x12001f/_0x5eab5a*0x64),_0x27ad0d['sender']['send']('fetch-progress',_0x3c7051,!![]);_0x344fec<=0x0&&(_0x344fec=_0x57aa30['length']);try{let _0x4a1a11=[];for(let _0x54b0ea=0x0;_0x54b0ea<_0x57aa30['length']&&_0x54b0ea<_0x344fec;_0x54b0ea++){_0x4a1a11['push'](await _0x57aa30[_0x54b0ea]['evaluate'](_0xdce14b=>_0xdce14b['textContent']));try{const _0x3ea3e4='INSERT\x20INTO\x20'+_0x49de6f+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3ea3e4,[await _0x57aa30[_0x54b0ea]['evaluate'](_0x5d0170=>_0x5d0170['textContent']),await _0x4d3704[_0x54b0ea]['evaluate'](_0x5cad20=>_0x5cad20['textContent'])],function(_0x1cec9c){_0x1cec9c?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x49de6f+'\x27:',_0x1cec9c['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x39626a){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x54b0ea+'\x20:\x20'+_0x39626a);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x54b0ea+'\x20:\x20'+_0x39626a);return handle_fail(0x1);}}return _0x3c7051=Math['round'](++_0x12001f/_0x5eab5a*0x64),_0x27ad0d['sender']['send']('fetch-progress',_0x3c7051,!![]),_0x3dc5e8&&(_0x27ad0d['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x27ad0d,_0x5c42a4,_0x817f52,_0x49de6f,_0x4a1a11)),new Promise(_0x64b5eb=>{_0x64b5eb('Scraping\x20finished!');});}catch(_0x483944){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x483944);return handle_fail(0x1);}}catch(_0x16d77e){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x16d77e);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x16d77e);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x4e93fa,_0x3d00f3,_0x267734,_0xd71b6e,_0x1edd1b,_0x3a7d76,_0x30399c){let _0x21f779=0x3,_0x49ca05=0x0,_0x3dbb69=0x0;try{await setCookiesForUser(_0x3d00f3,_0x3a7d76['username']);}catch(_0x4d3401){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4d3401);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4d3401);return handle_fail(0x2);}try{console['log'](_0x267734),await _0x3d00f3['goto'](_0x267734),await delay(0x7d0,0xfa0),await notificationClear(_0x3d00f3),await delay(0xc8,0x1f4);const _0x3f1c09=COM_COMMENTS_BOX_BODY_DIV;let _0x57dedd;const _0x4e8b4b=await _0x3d00f3['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x43c502=await _0x3d00f3['evaluate'](_0x217ad2=>_0x217ad2['innerHTML'],_0x4e8b4b),_0x313b4c=String(_0x43c502)['replace'](/[^0-9]/g,''),_0x544584=Number(_0x313b4c)/0x14;_0xd71b6e<=0x0?_0x57dedd=Math['ceil'](_0x544584/0x3):_0x57dedd=Math['ceil'](_0xd71b6e/0x3);_0x21f779+=_0x57dedd,_0x3dbb69=Math['round'](++_0x49ca05/_0x21f779*0x64),_0x4e93fa['sender']['send']('fetch-progress',_0x3dbb69,!![]),console['log']('Auto-scrolls:\x20'+_0x57dedd),await scroll(_0x3d00f3,_0x3f1c09,_0x57dedd,_0x4aeeb9=>{_0x3dbb69=Math['round'](++_0x49ca05/_0x21f779*0x64),_0x4e93fa['sender']['send']('fetch-progress',_0x3dbb69,!![]);});try{const _0x166e2d=COM_REPLY_BUTTON_SPAN;await _0x3d00f3['waitForSelector'](_0x166e2d),await delay(0x1f4,0x320);const _0x53432a=await _0x3d00f3['$$'](_0x166e2d);console['log'](_0x53432a);let _0x41250a=_0x53432a['length'];await delay(0xc8,0x1f4);try{for(let _0x460e64=0x0;_0x460e64<_0x41250a;_0x460e64++){_0x53432a[_0x460e64]['click'](),await delay(0x320,0x5dc);}}catch(_0x3fe948){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3fe948);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3fe948);return handle_fail(0x2);}}catch(_0x36d616){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0xa4fb3b=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x3d00f3['waitForSelector'](_0xa4fb3b),await delay(0x1f4,0x320),_0x3dbb69=Math['round'](++_0x49ca05/_0x21f779*0x64),_0x4e93fa['sender']['send']('fetch-progress',_0x3dbb69,!![]);const _0x7c0d6f=await _0x3d00f3['$$'](_0xa4fb3b);let _0x4371ab=path['join'](__dirname,'/comments.csv');_0xd71b6e<=0x0&&(_0xd71b6e=_0x7c0d6f['length']);console['log']('fetch_limit:\x20'+_0xd71b6e),console['log']('comments_len:\x20'+_0x7c0d6f['length']),_0xd71b6e++;try{let _0x2002e5=[];for(let _0x275c0d=0x1;_0x275c0d<_0x7c0d6f['length']&&_0x275c0d<_0xd71b6e;_0x275c0d++){try{_0x2002e5['push'](await _0x7c0d6f[_0x275c0d]['evaluate'](_0x260764=>_0x260764['textContent']));const _0x3d3359=await db['prepare']('INSERT\x20INTO\x20'+_0x1edd1b+'\x20(username)\x20VALUES\x20(?)');await _0x3d3359['run'](await _0x7c0d6f[_0x275c0d]['evaluate'](_0x289338=>_0x289338['textContent']),function(_0x32b54a){_0x32b54a&&console['log']('error\x20in\x20add-user:'+_0x32b54a);}),await _0x3d3359['finalize']();}catch(_0x5c8df4){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x275c0d+'\x20:\x20'+_0x5c8df4);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x275c0d+'\x20:\x20'+_0x5c8df4);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x3dbb69=Math['round'](++_0x49ca05/_0x21f779*0x64),_0x4e93fa['sender']['send']('fetch-progress',_0x3dbb69,!![]),_0x4e93fa['sender']['send']('fetch-progress',0x64,!![]),_0x30399c&&(_0x4e93fa['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4e93fa,_0x3d00f3,_0x3a7d76,_0x1edd1b,_0x2002e5)),_0x4e93fa['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x3cb9af=>{_0x3cb9af('Scraping\x20finished!');});}catch(_0x545a51){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x545a51);return handle_fail(0x2);}}catch(_0x8668e8){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x8668e8);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x8668e8);return handle_fail(0x2);}}async function set_clearname_from_username(_0x4758f9,_0x44fa35,_0x59b0aa=null){try{let _0x40a0b9,_0x24b228;const _0x40c947='SELECT\x20username\x20FROM\x20'+_0x44fa35+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x40c947,[],(_0x4fd3fb,_0x5e4135)=>{_0x4fd3fb&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x4fd3fb['message']),_0x5e4135['length']===0x0&&(_0x24b228=_0x5e4135['length']),_0x40a0b9=_0x5e4135['map'](_0x3ce172=>_0x3ce172['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x24b228);if(_0x24b228===0x0){console['log']('Leave');return;}const _0x59079b=await _0x4758f9['waitForSelector'](IG_SEARCH_BUTTON);await _0x59079b['click'](),await delay(0x4b0,0x7d0);for(let _0x3fe3b8 of _0x40a0b9){const _0x290d10=await _0x4758f9['waitForSelector'](IG_SEARCH_INPUT);await _0x290d10['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x4758f9['type'](IG_SEARCH_INPUT,_0x3fe3b8,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0xa6cc24=0x1;while(_0xa6cc24!=0x14){console['log']('Schleife');try{let _0x38a0f0=IG_NAME_SPAN_PART1+_0xa6cc24+IG_USERNAME_SPAN_PART2;const _0x2c4233=await _0x4758f9['waitForSelector'](_0x38a0f0),_0x443593=await _0x4758f9['evaluate'](_0x3ce487=>_0x3ce487['innerHTML'],_0x2c4233);await delay(0xc8,0x1f4);if(_0x443593==_0x3fe3b8){let _0x7bbe5c=IG_NAME_SPAN_PART1+_0xa6cc24+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x5a8113=await _0x4758f9['waitForSelector'](_0x7bbe5c);let _0x233782=await _0x4758f9['evaluate'](_0x2cd30e=>_0x2cd30e['innerHTML'],_0x5a8113);const _0x110f6a=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x90aa7c=_0x233782['match'](_0x110f6a);_0x90aa7c?_0x233782=_0x90aa7c[0x1]['trim']():_0x233782=_0x233782['trim']();_0x233782['includes']('•')&&(_0x233782=_0x233782['substring'](0x0,_0x233782['indexOf']('•')-0x1));const _0x50ef55='UPDATE\x20'+_0x44fa35+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x50ef55,[_0x233782,_0x443593],function(_0x3d8d75){_0x3d8d75&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x3d8d75['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0xa6cc24++;}catch(_0x331909){const _0x69300='UPDATE\x20'+_0x44fa35+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x69300,['',_0x3fe3b8],function(_0x5e55dc){_0x5e55dc&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x5e55dc['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x331909);break;}}_0x59b0aa&&_0x59b0aa();}await _0x59079b['click']();}catch(_0x136e46){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x136e46);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x1bf633,_0x295e5b)=>{const _0x6bb2a6='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x6bb2a6,[],(_0x22a043,_0x3c802d)=>{_0x22a043?_0x295e5b(_0x22a043):_0x1bf633(_0x3c802d);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x25f601,_0x4a966f)=>{const _0x53a071='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x53a071,[],async(_0x348d4d,_0x1be0cc)=>{if(_0x348d4d)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x348d4d['message']),_0x4a966f({'status':'error','message':_0x348d4d['message']});else try{const _0x102abe=await Promise['all'](_0x1be0cc['map'](_0x57acfc=>{return new Promise(_0x433db5=>{if(!_0x57acfc['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x57acfc['campaign_name']),_0x433db5({'campaign_name':_0x57acfc['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x52fe14='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x57acfc['list_id'],_0x25a2e8='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x57acfc['list_id']+'\x22';db['get'](_0x52fe14,[],(_0x284abe,_0x2612dd)=>{_0x284abe?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x57acfc['campaign_name']+':',_0x284abe['message']),_0x433db5({'campaign_name':_0x57acfc['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x25a2e8,[],(_0xdea7ef,_0x4bdab4)=>{_0xdea7ef?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x57acfc['campaign_name']+':',_0xdea7ef['message']),_0x433db5({'campaign_name':_0x57acfc['campaign_name'],'lead_count':_0x2612dd?_0x2612dd['lead_count']:0x0,'contacted_count':'N/A'})):_0x433db5({'campaign_name':_0x57acfc['campaign_name'],'lead_count':_0x2612dd?_0x2612dd['lead_count']:0x0,'contacted_count':_0x4bdab4?_0x4bdab4['contacted_count']:0x0});});});});}));_0x25f601({'status':'success','campaigns':_0x102abe});}catch(_0x4a1ca5){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x4a1ca5),_0x4a966f({'status':'error','message':_0x4a1ca5['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x340f43,_0xcbea2f)=>{return new Promise((_0x2b300f,_0x868197)=>{const _0x27fb82='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x27fb82,[_0xcbea2f],(_0xfb7c3e,_0x249f81)=>{_0xfb7c3e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0xfb7c3e),_0x868197(_0xfb7c3e)):(console['log']('ROWS'),console['log'](_0x249f81),debugDatabaseContents(),_0x2b300f(_0x249f81));});});});const showTableContents=_0x4e9e2e=>{return new Promise((_0x264cc0,_0xd60993)=>{const _0x49c828='SELECT\x20*\x20FROM\x20'+_0x4e9e2e+';';campaignDB['all'](_0x49c828,(_0x43b98e,_0x5b58a8)=>{_0x43b98e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x4e9e2e+':',_0x43b98e),_0xd60993(_0x43b98e)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x4e9e2e+':',_0x5b58a8),_0x264cc0({'status':'success','message':_0x5b58a8}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x5c1163){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x5c1163);}}ipcMain['handle']('create-campaign',async(_0x214cc4,_0x228568)=>{return new Promise((_0x58319d,_0x529e7f)=>{const _0x5e8eab='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x5e8eab,[String(_0x228568)],function(_0x34ae1c){_0x34ae1c?_0x529e7f(_0x34ae1c):_0x58319d({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x2f4095,_0x47ed21)=>{return new Promise((_0x4d49ef,_0x55845a)=>{const _0x3fc1d='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x3fc1d,[_0x47ed21],function(_0x3adef7){_0x3adef7?_0x55845a(_0x3adef7):_0x4d49ef({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x2cd0b2,_0x4a8793,_0xa8f743,_0x12d785,_0x5938b6,_0x2026ea,_0x5ed363,_0x4576d8)=>{const _0x5aadf7=await createMessageID(_0x5938b6);return new Promise((_0xda6104,_0xf7be1e)=>{if(!_0x4a8793||!_0xa8f743||!_0x12d785||!_0x5aadf7||!_0x2026ea)return _0xf7be1e({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x5aadf7);const _0x3af6db='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x3af6db,[_0xa8f743,_0x12d785,_0x5aadf7,_0x2026ea,_0x5ed363,_0x4576d8,_0x4a8793],function(_0xff3f2c){if(_0xff3f2c)_0xf7be1e({'status':'error','message':_0xff3f2c['message']});else this['changes']===0x0?_0xf7be1e({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0xda6104({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x497d72,_0x1ec14f,_0x3950c9,_0x53b998,_0x3cbc7b)=>{return new Promise((_0x181641,_0x573e37)=>{const _0x4d9255='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4d9255,[_0x1ec14f,_0x3950c9,_0x53b998,_0x3cbc7b],function(_0x276189){return _0x276189?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x276189['message']),_0x573e37('insert-dm-response',{'success':![],'message':_0x276189['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x181641('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x3432e9=>{return new Promise((_0x10e3b2,_0x2da1e0)=>{const _0x2d8a5b='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x2d8a5b,[_0x3432e9],(_0x5d14b2,_0xc159f4)=>{if(_0x5d14b2)_0x2da1e0({'status':'error','message':_0x5d14b2['message']});else{if(_0xc159f4)_0x10e3b2(_0xc159f4['message_id']);else{const _0x1a1402='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x1a1402,[_0x3432e9],function(_0x408ab0){_0x408ab0?_0x2da1e0({'status':'error','message':_0x408ab0['message']}):_0x10e3b2(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x35d5c6,_0x486a1f)=>{return new Promise((_0x511b3e,_0x589b8a)=>{const _0x578378='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x486a1f;db['get'](_0x578378,(_0x548fa7,_0x39acf2)=>{_0x548fa7?_0x589b8a({'status':'error','message':_0x548fa7['message']}):_0x511b3e({'status':'success','count':_0x39acf2['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x24affd,_0x431833){try{const _0x1f317f=await new Promise((_0x165e47,_0xc48a60)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x431833],(_0x30d606,_0x1b490f)=>{if(_0x30d606)_0xc48a60(_0x30d606);else{if(_0x1b490f['length']>0x0){let _0x5654ff=JSON['parse'](_0x1b490f[0x0]['cookie']);console['log'](_0x5654ff),_0x165e47(_0x5654ff);}else _0xc48a60(new Error('User\x20with\x20username\x20'+_0x431833+'\x20does\x20not\x20exist.'));}});});await _0x24affd['setCookie'](..._0x1f317f),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x2d3877){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2d3877);}}async function saveCookiesForUser(_0xfe7236,_0x54c8f9){try{const _0x35fb8e=await _0xfe7236['cookies']();if(!_0x35fb8e||_0x35fb8e['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x54c8f9);const _0x3a6594=JSON['stringify'](_0x35fb8e);if(_0x3a6594['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x54c8f9);return new Promise((_0x235e52,_0xcdbd31)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x54c8f9],(_0x5f2d80,_0x251fb9)=>{if(_0x5f2d80)return console['error']('Error\x20checking\x20user\x20existence:',_0x5f2d80),_0xcdbd31(_0x5f2d80);if(_0x251fb9){const _0x3bfdfb=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x3bfdfb['run'](_0x3a6594,_0x54c8f9,function(_0x16e71f){return _0x16e71f?(console['error']('Error\x20updating\x20cookies:',_0x16e71f),_0xcdbd31(_0x16e71f)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x54c8f9),_0x235e52());});}else{const _0x57b71a=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x57b71a['run'](_0x54c8f9,_0x3a6594,function(_0x216b0e){return _0x216b0e?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x216b0e),_0xcdbd31(_0x216b0e)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x54c8f9),_0x235e52());});}});});}catch(_0x548ac0){console['error']('Error\x20fetching\x20cookies:',_0x548ac0);throw _0x548ac0;}}async function createUserIfNotExists(_0x55a614){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x55a614],(_0x595077,_0x52d57c)=>{if(_0x595077){console['error']('Error\x20checking\x20user\x20existence:',_0x595077);throw _0x595077;}else{if(!_0x52d57c){const _0x59018f=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x59018f['run'](_0x55a614,function(_0x599138){_0x599138?console['error']('Error\x20inserting\x20new\x20user:',_0x599138):console['log']('New\x20user\x20created:',_0x55a614);});}else console['log']('User\x20already\x20exists:',_0x55a614);}});}catch(_0xeaae7){console['error']('Error\x20creating\x20user:',_0xeaae7);throw _0xeaae7;}}ipcMain['handle']('create-relation',async(_0x21627d,_0x2f136f)=>{return new Promise((_0x38c8cf,_0x7bef73)=>{const _0x17667f='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x2f136f+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x17667f,function(_0x4d356d){_0x4d356d?_0x7bef73(_0x4d356d):_0x38c8cf({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x5a4b1a,_0x2e85e6)=>{return console['log']('droping\x20table'+_0x2e85e6),new Promise((_0x373779,_0x5b943f)=>{const _0x331346='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x2e85e6;console['log']('droping\x20table'+_0x2e85e6),db['run'](_0x331346,function(_0xbb133c){_0xbb133c?_0x5b943f(_0xbb133c):_0x373779({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x48e9d1=>{return new Promise((_0x12eb24,_0x396061)=>{const _0x4d1acf='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x4d1acf,[],(_0x2e1667,_0x53d26c)=>{_0x2e1667?_0x396061(_0x2e1667):_0x12eb24(_0x53d26c['map'](_0xe756b2=>_0xe756b2['name']));});});}),ipcMain['handle']('add-user',async(_0x117943,_0x470f15,_0x3fb9b7)=>{return new Promise(_0x50aa5c=>{const _0x113ce7=db['prepare']('INSERT\x20INTO\x20'+_0x3fb9b7+'\x20(username)\x20VALUES\x20(?)');_0x113ce7['run'](_0x470f15,function(_0x5bf370){_0x5bf370?console['log']('error\x20in\x20add-user:'+_0x5bf370):_0x50aa5c({'status':'success','id':this['lastID']});}),_0x113ce7['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x4c36e0,_0x360b6e)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x18be6f,_0x130c49)=>{if(_0x18be6f)_0x360b6e(_0x18be6f);else{_0x4c36e0({'status':'success','users':_0x130c49});for(_0x130c49 of _0x130c49){console['log'](_0x130c49['username']);}}});});}),ipcMain['handle']('get-data',async(_0x1e9de5,_0x2f8a31)=>{return new Promise((_0x293ccd,_0x18c82c)=>{const _0x31201a='SELECT\x20*\x20FROM\x20'+_0x2f8a31;console['log'](_0x31201a),db['all'](_0x31201a,[],(_0x37330e,_0xb78699)=>{_0x37330e?_0x18c82c(_0x37330e):_0x293ccd(_0xb78699);});});}),ipcMain['handle']('get-accounts',async _0x519f7e=>{return new Promise((_0x286d77,_0x5c7c5c)=>{const _0x3cffad='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x3cffad),igaccountsDB['all'](_0x3cffad,[],(_0x29bae2,_0x362011)=>{_0x29bae2?_0x5c7c5c(_0x29bae2):_0x286d77(_0x362011);});});}),ipcMain['handle']('get-targets',async(_0x259512,_0x258e4c)=>{return getTargetProfiles(_0x258e4c);}),ipcMain['handle']('delete-user',async(_0xacf6a0,_0x4989a0,_0x50a6e6)=>{return new Promise((_0x276670,_0xa4efdd)=>{const _0xd2aebc=db['prepare']('DELETE\x20FROM\x20'+_0x50a6e6+'\x20WHERE\x20username\x20=\x20?');_0xd2aebc['run'](_0x4989a0,function(_0x534000){_0x534000?_0xa4efdd(_0x534000):_0x276670({'status':'success','changes':this['changes']});}),_0xd2aebc['finalize']();});}),ipcMain['handle']('delete-account',async(_0x2283d2,_0x3707e5)=>{const _0x437cbe=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x437cbe['run'](_0x3707e5,function(_0x29098a){_0x29098a&&console['log'](_0x29098a);}),_0x437cbe['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x5e919e,_0x594c60)=>{const _0x5c3db0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x5c3db0,[],(_0x51cabc,_0x75d191)=>{_0x51cabc?_0x594c60({'status':'error','message':_0x51cabc['message']}):_0x5e919e({'status':'success','contactedCount':_0x75d191['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x2203a3,_0x4343c3)=>{const _0x529e51='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x529e51,[],(_0x2ecafd,_0x5be888)=>{_0x2ecafd?_0x4343c3({'status':'error','message':_0x2ecafd['message']}):_0x2203a3({'status':'success','contactedCount':_0x5be888['contactedCount']});});});});function exportDatabase(_0x5323a3){return new Promise((_0x2d2bc6,_0x336202)=>{const _0x435df8='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x5323a3+'\x0a\x20\x20\x20\x20';db['all'](_0x435df8,[],async(_0x34c149,_0x78a29a)=>{if(_0x34c149){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x34c149['message']),_0x336202(_0x34c149);return;}if(!_0x78a29a||_0x78a29a['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2d2bc6();return;}const _0x2e67f4=XLSX['utils']['json_to_sheet'](_0x78a29a),_0x47bb60=XLSX['utils']['sheet_to_csv'](_0x2e67f4);try{const {canceled:_0x4dfbd1,filePath:_0x2f62aa}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x5323a3+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x4dfbd1||!_0x2f62aa){console['log']('Speichern\x20abgebrochen.'),_0x2d2bc6();return;}fs['writeFile'](_0x2f62aa,_0x47bb60,'utf8',_0x48824f=>{_0x48824f?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x48824f['message']),_0x336202(_0x48824f)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2f62aa),_0x2d2bc6());});}catch(_0x1db4e8){console['error']('Fehler\x20im\x20Speicherdialog:',_0x1db4e8),_0x336202(_0x1db4e8);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x36843c,_0x2076dd)=>{shell['openExternal'](_0x2076dd);});