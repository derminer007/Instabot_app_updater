const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x34ad11,_0x9b5879){try{const _0xfe5873=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x9b5879},'body':JSON['stringify']({'clearname':_0x34ad11})});if(!_0xfe5873['ok']){const _0x46cdc8=await _0xfe5873['text']();throw new Error(_0xfe5873['status']+':\x20'+_0x46cdc8);}const _0x15b59c=await _0xfe5873['json']();return _0x15b59c;}catch(_0x466de0){console['error']('Error\x20in\x20extractFirstName:',_0x466de0);throw _0x466de0;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x51ca96=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x51ca96['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x51ca96['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x3febc8){var _0x176d34=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x711da){console['log']('window\x20id:'+_0x711da['id']),_0x711da['id']>0x1&&(_0x176d34=!![]);}),console['log']('child\x20opened\x20='+_0x176d34);if(!_0x176d34){const _0x45b0ce=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x45b0ce['loadFile'](_0x3febc8['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0xd232ad=require('fs'),_0xea3020=path['join'](app['getPath']('userData'),'data'),_0x5a7d8e=['campaign.db','crm.db','igaccounts.db'],_0x45cc64=[];try{_0xd232ad['mkdirSync'](_0xea3020,{'recursive':!![]});for(const _0x5e9927 of _0x5a7d8e){const _0x198388=path['join'](process['resourcesPath'],'app','build','data',_0x5e9927),_0x183fb7=path['join'](_0xea3020,_0x5e9927);!_0xd232ad['existsSync'](_0x183fb7)?(_0xd232ad['copyFileSync'](_0x198388,_0x183fb7),console['log']('[InitDB]\x20Kopiert\x20'+_0x5e9927+'\x20nach:\x20'+_0x183fb7)):console['log']('[InitDB]\x20'+_0x5e9927+'\x20existiert\x20bereits:\x20'+_0x183fb7),_0x45cc64['push'](_0x183fb7);}}catch(_0x11d284){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x11d284);}return _0x45cc64;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x3c45bb,AppUpdate:_0x12555d}=require('electron-updater');_0x3c45bb['autoDownload']=![],_0x3c45bb['autoInstallOnAppQuit']=!![],_0x3c45bb['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x3c45bb['on']('update-available',_0xd7e921=>{console['log']('Update\x20verfügbar:',_0xd7e921),_0x3c45bb['downloadUpdate']();}),_0x3c45bb['on']('update-downloaded',_0x1b1b67=>{console['log']('Update\x20heruntergeladen:',_0x1b1b67),_0x3c45bb['quitAndInstall']();}),_0x3c45bb['on']('error',_0x611e02=>{console['error']('Fehler\x20beim\x20Updaten:',_0x611e02);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x223ac8,AppUpdate:_0x502912}=require('electron-updater');_0x223ac8['autoDownload']=![],_0x223ac8['autoInstallOnAppQuit']=!![],_0x223ac8['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x223ac8['on']('update-available',_0x4a418d=>{console['log']('Update\x20verfügbar:',_0x4a418d),_0x223ac8['downloadUpdate']();}),_0x223ac8['on']('update-downloaded',_0x2eae26=>{console['log']('Update\x20heruntergeladen:',_0x2eae26),console['log']('Neustarten\x20zum\x20Updaten');}),_0x223ac8['on']('error',_0x2bde36=>{console['error']('Fehler\x20beim\x20Updaten:',_0x2bde36);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x158ee1='',_0x47ebe0=null;if(process['platform']==='darwin')_0x158ee1=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x158ee1=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x158ee1}),_0x47ebe0=await browser_login['newPage'](),_0x47ebe0['setDefaultNavigationTimeout'](0x1d4c),_0x47ebe0['setDefaultTimeout'](0x1d4c),await _0x47ebe0['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x47ebe0;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x175198=0x1,_0x2202ab=0x0){let _0x2c531c='',_0x2e2c44=null;const _0x27e73b=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x2c531c=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x2c531c=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x175198===0x0&&!pageStack[_0x2202ab])return browser=await puppeteer['launch']({'headless':_0x27e73b,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x2c531c}),_0x2e2c44=await browser['newPage'](),_0x2e2c44['setDefaultNavigationTimeout'](0x1d4c),_0x2e2c44['setDefaultTimeout'](0x1d4c),await _0x2e2c44['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x2202ab]=_0x2e2c44,_0x2e2c44;return(browser===null||pageStack[_0x2202ab]===null||pageStack[_0x2202ab]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x27e73b,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x2c531c})),(pageStack[_0x2202ab]===null||pageStack[_0x2202ab]['isClosed']())&&(_0x2e2c44=await browser['newPage'](),_0x2e2c44['setDefaultNavigationTimeout'](0x1d4c),_0x2e2c44['setDefaultTimeout'](0x1d4c),await _0x2e2c44['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x2202ab]=_0x2e2c44),pageStack[_0x2202ab];}ipcMain['on']('login',async(_0x38bb2d,_0x4345ab)=>{const _0x16d3ac=await getBrowserPageLogin();await _0x16d3ac['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x16d3ac,_0x4345ab),ipcMain['on']('setLoginCookies',async(_0x2a6c3a,_0x583854)=>{try{await set_login_cookies(_0x16d3ac,_0x583854);}catch(_0x372a5e){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x372a5e);}});}),ipcMain['on']('export-relation',async(_0x1cb710,_0x3b9128)=>{try{await exportDatabase(_0x3b9128),_0x1cb710['reply']('export-relation-response',{'success':!![]});}catch(_0x1a1b0d){console['error'](_0x1a1b0d),_0x1cb710['reply']('export-relation-response',{'success':![],'message':_0x1a1b0d['message']});}}),ipcMain['handle']('sendMessage',async(_0x13a455,_0x5297f8,_0x20e537,_0x4f2083,_0x58f5d,_0x15695b,_0x28f0fd,_0xc31dc,_0x1c4460,_0x5ca5f5,_0x22baac)=>{isStopping=![];let _0x22d578=null;return _0x28f0fd?_0x22d578=await getBrowserPage(_0x58f5d,_0xc31dc):_0x22d578=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x5297f8),send_message(_0x22d578,_0x5297f8,_0x20e537,_0x4f2083,_0x58f5d,_0x15695b,_0x1c4460,_0x5ca5f5,_0x22baac);}),ipcMain['handle']('stop-action',async(_0xda810e,_0x21ef47)=>{isStopping=!![];const _0x4b8e51=await getBrowserPage(0x1,_0x21ef47);await _0x4b8e51['close']();}),ipcMain['handle']('fetch_followers',async(_0x4b93dd,_0x1c7ba5,_0x89763a,_0x20fba1,_0x1427c2,_0x1078ac)=>{isStopping=![];const _0x56f214=await getBrowserPage();return fetch_followers_from_account(_0x4b93dd,_0x56f214,_0x1c7ba5,_0x89763a,_0x20fba1,_0x1427c2,_0x1078ac);}),ipcMain['handle']('get-account-details',async(_0x540fac,_0x115086,_0x5b7dd7,_0x330938)=>{isStopping=![];const _0x1cb14f=await getBrowserPage();return fetch_account_details(_0x1cb14f,_0x115086,_0x5b7dd7,_0x330938);}),ipcMain['handle']('fetch_likes',async(_0x208573,_0x1e0afc,_0x3e7116,_0x1e16d3,_0x1e7361,_0x12dea2)=>{isStopping=![];const _0xafe23d=await getBrowserPage();return fetch_likers_from_post(_0x208573,_0xafe23d,_0x1e0afc,_0x3e7116,_0x1e16d3,_0x1e7361,_0x12dea2);}),ipcMain['handle']('fetch_comments',async(_0x39b760,_0x54edd2,_0x29aa1a,_0x588207,_0x1d184b,_0x25d0c6)=>{isStopping=![];const _0x1c64dd=await getBrowserPage();return fetch_comments_from_post(_0x39b760,_0x1c64dd,_0x54edd2,_0x29aa1a,_0x588207,_0x1d184b,_0x25d0c6);});async function updateAppSilent(){const {spawn:_0xe86a42}=require('child_process'),_0x2ee924=require('path'),_0x12b006=require('electron-log');return _0x12b006['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2dc82b,_0x9eba3f)=>{const {updateElectronApp:_0x1e37fa,UpdateSourceType:_0x24b241}=require('update-electron-app');_0x1e37fa({'updateSource':{'type':_0x24b241['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x12b006}),_0x2dc82b('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x3b61bf,_0x40335e)=>{doFullElectronUpdateSilent(),_0x3b61bf('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x340522}=require('child_process'),_0x529c4e=require('path'),_0x1b37e4=require('electron-log');return _0x1b37e4['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x126ca0,_0x5ccb95)=>{const {updateElectronApp:_0x32f3cd,UpdateSourceType:_0xb0b26a}=require('update-electron-app');_0x32f3cd({'updateSource':{'type':_0xb0b26a['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x1b37e4}),_0x126ca0('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x1fe123,_0x1c2a1d)=>{doFullElectronUpdate(),_0x1fe123('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x5840e6,_0x5df07d)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x5840e6('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x2e9d7f=path['join'](__dirname,'mac-updater-intern.sh'),_0x5eab51=spawn('/bin/bash',[_0x2e9d7f],{'detached':!![],'stdio':'ignore'});_0x5eab51['unref'](),setTimeout(()=>{_0x5840e6('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x5df07d(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x5a82a4=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x215f13,_0x1638d3)=>{console['log']('Update\x20Silent:\x20'+_0x1638d3);if(_0x1638d3){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x46c0ed,_0x32198c){return Math['random']()*(_0x32198c-_0x46c0ed+0x1)+_0x46c0ed;}function delay(_0x1e0aa3,_0x243272){let _0xeb45a7=getRnd(_0x1e0aa3,_0x243272);return new Promise(function(_0xea09f7){setTimeout(_0xea09f7,_0xeb45a7);});}async function scroll(_0x1b39c5,_0x11bd8b,_0x736de2=0x2,_0x997daf){const _0x133e53=await _0x1b39c5['waitForSelector'](_0x11bd8b);for(let _0x3ef528=0x0;_0x3ef528<_0x736de2;_0x3ef528++){console['log']('Scrolling\x20'+_0x3ef528),await _0x1b39c5['evaluate'](_0xf6351b=>{const _0x1ce85e=document['querySelector'](_0xf6351b);_0x1ce85e&&_0x1ce85e['scrollBy'](0x0,0x190);},_0x11bd8b),await delay(0x320,0x5dc),_0x997daf();}}async function saveCookies(_0x2211aa){let _0x299ecf=await _0x2211aa['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x299ecf,null,0x2));}async function notificationClear(_0x5b5a73){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x5b5a73['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x5b5a73['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x252a27){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x252a27);}}async function getTargetProfiles(_0x2f58da){return new Promise((_0x1d532d,_0x15d5c9)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x2f58da,(_0x71d2c0,_0x5ad5a1)=>{_0x71d2c0?_0x15d5c9(_0x71d2c0):_0x1d532d(_0x5ad5a1);});});}async function login_legacy(_0x5f3655,_0x1bbc98,_0x4cdd15){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x5f3655,_0x1bbc98),await createUserIfNotExists(_0x1bbc98,_0x4cdd15);}catch(_0x4494b8){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4494b8);}try{await _0x5f3655['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x5f3655['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x5f3655['click']('button._a9--._ap36._a9_0');}catch(_0x5a80e3){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x5f3655['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x5f3655['type']('input[name=\x27username\x27]',_0x1bbc98,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5f3655['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x5f3655['type']('input[name=\x27password\x27]',_0x4cdd15,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5f3655['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x5f3655['click']('button[type=\x27submit\x27]');}catch(_0x47afa1){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x5f3655),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x5f3655,_0x1bbc98);}catch(_0x9c11d4){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x9c11d4);}}catch(_0x39fd2e){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x39fd2e);}}async function login(_0x1f7eb2,_0x3424e8){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1f7eb2,_0x3424e8),await createUserIfNotExists(_0x3424e8);}catch(_0x2ba8a9){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2ba8a9);}try{await _0x1f7eb2['goto']('https://www.instagram.com/accounts/login/');}catch(_0x1f1ff7){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1f1ff7);}}async function set_login_cookies(_0x2eed42,_0x572da5){try{await saveCookiesForUser(_0x2eed42,_0x572da5);}catch(_0x531e74){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x531e74);}}async function waitForXPath(_0x2577af,_0x5ed53f,_0x5dac96={}){return await _0x2577af['waitForFunction'](_0x4a87a2=>{return document['evaluate'](_0x4a87a2,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x5dac96,_0x5ed53f),_0x2577af['evaluateHandle'](_0x30ee74=>document['evaluate'](_0x30ee74,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x5ed53f);}async function send_message(_0x3fb820,_0x25d138,_0x4ed7eb,_0x569580,_0x986af0,_0x2b2d5b,_0x423dfd,_0x1e1c63,_0x28519c){return new Promise(async(_0x21280c,_0x373a4d)=>{_0x2b2d5b=_0x2b2d5b['split'](';'),console['log'](_0x2b2d5b[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x986af0);try{await setCookiesForUser(_0x3fb820,_0x2b2d5b[0x0]);}catch(_0x48cb08){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x48cb08),_0x373a4d({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x48cb08});return;}try{await _0x3fb820['goto']('https://www.instagram.com/'+_0x25d138+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x3fb820);}catch(_0x538831){_0x373a4d({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x538831});return;}console['log']('UserSkip:\x20'+_0x423dfd);if(_0x423dfd==0x1)try{const _0x35f9c2=await _0x3fb820['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4b7933=>_0x4b7933['textContent']['trim']());console['log'](_0x35f9c2);if(_0x35f9c2==='Following'||_0x35f9c2==='Folge\x20ich')return _0x21280c({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x5342f5){}try{await _0x3fb820['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x3fb820['click'](K_DIRECT_MSG_BUTTON);}catch(_0x29c0e2){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x29c0e2);try{await _0x3fb820['waitForSelector'](K_OPTIONS_BUTTON),await _0x3fb820['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x7b6d59=await waitForXPath(_0x3fb820,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x7b6d59['click']();}catch(_0x4a277d){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x4a277d),_0x21280c({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x3fb820);}catch(_0x1cdf94){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x1cdf94);}try{const _0x29cea3=await _0x3fb820['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x1e1c63){const _0x131e2a=await _0x3fb820['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x131e2a)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x25d138),_0x21280c({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x47b06d=await _0x3fb820['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x47b06d),_0x569580=_0x569580['replace']('{USERNAME}',_0x25d138);let _0x883b10;if(_0x569580['includes']('{NAME}')||_0x569580['includes']('{name}'))try{const _0x39a97c=await extractFirstName(_0x47b06d,_0x28519c);console['log']('Response\x20Clearname\x20valid:\x20'+_0x39a97c['valid']),_0x39a97c['valid']?(_0x569580=_0x569580['replaceAll'](/{NAME}|{name}/g,_0x39a97c['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x39a97c['name']),_0x883b10=_0x39a97c['name']):(_0x569580=_0x569580['replaceAll'](/ ?({NAME}|{name})/g,''),_0x883b10='UNKNOWN_NAME');}catch(_0x4ba1e1){console['log'](_0x4ba1e1['message']),_0x883b10=_0x4ba1e1['message'];let _0x260d5b=_0x47b06d['replace'](/[^\p{L}\s]/gu,''),_0x558fc8=_0x260d5b['split']('\x20')[0x0];_0x558fc8['length']>0x2&&!_0x558fc8['includes']('Instagram')?_0x569580=_0x569580['replaceAll'](/{NAME}|{name}/g,_0x558fc8):_0x569580=_0x569580['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x29cea3['type'](_0x569580,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x39792e=await _0x3fb820['waitForSelector'](K_SEND_MSG_BUTTON);await _0x39792e['click'](),await delay(0x320,0x3e8),_0x21280c({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x47b06d,'extracted_clearname':_0x883b10});}catch(_0x1cc535){try{await _0x3fb820['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x4779ba=await _0x3fb820['evaluate'](_0x5b0d1a=>{return document['querySelector'](_0x5b0d1a)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x4779ba),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x1cc535),_0x21280c({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x25d138+'\x20überspringen.'});}catch(_0x270b1e){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x270b1e),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x25d138+'\x20:\x20'+_0x270b1e),_0x21280c({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x25d138+'\x20:\x20'+_0x270b1e});}}});}function handle_fail(_0x40fdeb){if(isStopping)return new Promise(_0x1a09a8=>{_0x1a09a8('Scraper\x20gestoppt.');});else{let _0x4322f6='';switch(_0x40fdeb){case 0x0:_0x4322f6='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x4322f6='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x4322f6='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x4322f6='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x3b36f3,_0x1e0374)=>{_0x1e0374(_0x4322f6);});}}async function fetch_account_details(_0x1c1567,_0x5480e7,_0x4736b5,_0x283ad8){try{await setCookiesForUser(_0x1c1567,_0x4736b5['username']);}catch(_0x1a0d3d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1a0d3d);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1a0d3d);return handle_fail(0x0);}_0x1c1567['setDefaultNavigationTimeout'](0x7530),await _0x1c1567['goto']('https://www.instagram.com/'+_0x5480e7+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x1c1567);const _0x8df0ba=await _0x1c1567['evaluate'](()=>{const _0x40fc91=document['querySelector']('meta[property=\x22og:image\x22]');return _0x40fc91?_0x40fc91['getAttribute']('content'):null;});await _0x1c1567['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x2be7ef=await _0x1c1567['evaluate'](()=>{const _0x578046=document['querySelector']('meta[name=\x22description\x22]');if(!_0x578046)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x2b9a8b=_0x578046['getAttribute']('content');if(!_0x2b9a8b)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x2b9a8b);const _0x315ac7=/\s*[–-]\s*/,_0x48c665=_0x2b9a8b['split'](_0x315ac7);if(_0x48c665['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x29465d=_0x48c665[0x0],_0x3992f6=_0x48c665[0x1],_0x305b0d=_0x29465d['split'](',\x20');if(_0x305b0d['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x4a5ebd=_0x305b0d[0x0]['split']('\x20')[0x0],_0x519db8=_0x305b0d[0x1]['split']('\x20')[0x0],_0x5d7c83=_0x305b0d[0x2]['split']('\x20')[0x0];let _0x3a7885='',_0x23bdc0='';const _0x69530b='\x20on\x20Instagram:\x20',_0x522eab=_0x3992f6['split'](_0x69530b);return _0x3a7885=_0x522eab[0x0]['trim'](),_0x3a7885=_0x3a7885['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x522eab['length']>0x1&&(_0x23bdc0=_0x522eab[0x1]['trim'](),_0x23bdc0['startsWith']('\x22')&&_0x23bdc0['endsWith']('\x22')&&(_0x23bdc0=_0x23bdc0['substring'](0x1,_0x23bdc0['length']-0x1)['trim']()),_0x23bdc0=_0x23bdc0['replace'](/&quot;/g,'')['trim']()),{'followers':_0x4a5ebd,'following':_0x519db8,'posts':_0x5d7c83,'nameText':_0x3a7885,'bio':_0x23bdc0};});console['log']('Extracted\x20profile\x20data:',_0x2be7ef);const _0x34f5e8=_0x2be7ef['nameText'],_0xdf5af0=_0x8df0ba,_0x211d5e=_0x2be7ef['bio'],_0x37720b=_0x2be7ef['followers'],_0x36c247=_0x2be7ef['following'],_0x1fdb59=_0x2be7ef['posts'],_0x230984=![],_0x344fed=![],_0x44fff7=![],_0x2afffa='\x0a\x20\x20INSERT\x20INTO\x20'+_0x283ad8+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x2afffa,[_0x5480e7,_0x34f5e8,_0xdf5af0,_0x211d5e,_0x37720b,_0x36c247,_0x1fdb59,_0x230984,_0x344fed,_0x44fff7],function(_0x1a8c2c){_0x1a8c2c?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x1a8c2c['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x20caea,_0x1c44c1,_0x46d52f,_0x10521,_0x1de374,_0x6ec114,_0x16f34b){let _0x20a131=0x4,_0x1d1785=0x0,_0x2808ee=0x0;try{await setCookiesForUser(_0x1c44c1,_0x6ec114['username']);}catch(_0x503163){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x503163);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x503163);return handle_fail(0x0);}let _0x2dc2c2=0x0;try{await _0x1c44c1['goto']('https://www.instagram.com/'+_0x46d52f+'/'),await notificationClear(_0x1c44c1);try{if(_0x10521<=0x0){const _0x599980=await _0x1c44c1['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0xdb27b1=await _0x1c44c1['evaluate'](_0x32d3dd=>_0x32d3dd['innerHTML'],_0x599980);_0x2dc2c2=Math['ceil'](_0xdb27b1/0x4);}else _0x2dc2c2=Math['ceil'](_0x10521/0x4);_0x20a131+=_0x2dc2c2,_0x2808ee=Math['round'](++_0x1d1785/_0x20a131*0x64),_0x20caea['sender']['send']('fetch-progress',_0x2808ee,!![]);let _0x5bceb6=await _0x1c44c1['waitForSelector']('a[href=\x22/'+_0x46d52f+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x5bceb6['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x46d52f+'\x20gesichtet'),_0x2808ee=Math['round'](++_0x1d1785/_0x20a131*0x64),_0x20caea['sender']['send']('fetch-progress',_0x2808ee,!![]);}catch(_0x3cc8b9){console['log']('Follower\x20Liste\x20von\x20'+_0x46d52f+'\x20nicht\x20gefunden:'+_0x3cc8b9);throw new Error('Follower\x20Liste\x20von\x20'+_0x46d52f+'\x20nicht\x20gefunden:'+_0x3cc8b9);return handle_fail(0x0);}}catch(_0x1a0149){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1a0149);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1a0149);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x2dc2c2),await scroll(_0x1c44c1,FOLLOWER_FENSTER,_0x2dc2c2,_0x3df0d6=>{_0x2808ee=Math['round'](++_0x1d1785/_0x20a131*0x64),_0x20caea['sender']['send']('fetch-progress',_0x2808ee,!![]);}),await _0x1c44c1['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x11a776=await _0x1c44c1['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x2de303=await _0x1c44c1['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x2808ee=Math['round'](++_0x1d1785/_0x20a131*0x64),_0x20caea['sender']['send']('fetch-progress',_0x2808ee,!![]);_0x10521<=0x0&&(_0x10521=_0x11a776['length']);let _0x4d4e4d=[];for(let _0x37ee7c=0x0;_0x37ee7c<_0x11a776['length']&&_0x37ee7c<_0x10521;_0x37ee7c++){_0x4d4e4d['push'](await _0x11a776[_0x37ee7c]['evaluate'](_0x51a8ba=>_0x51a8ba['textContent']));const _0xfb8aa5='INSERT\x20INTO\x20'+_0x1de374+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0xfb8aa5,[await _0x11a776[_0x37ee7c]['evaluate'](_0x481bb9=>_0x481bb9['textContent']),await _0x2de303[_0x37ee7c]['evaluate'](_0x2e8c1d=>_0x2e8c1d['textContent'])],function(_0x34af9e){_0x34af9e?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x1de374+'\x27:',_0x34af9e['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x2808ee=Math['round'](++_0x1d1785/_0x20a131*0x64),_0x20caea['sender']['send']('fetch-progress',_0x2808ee,!![]),_0x16f34b&&(_0x20caea['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x20caea,_0x1c44c1,_0x6ec114,_0x1de374,_0x4d4e4d)),new Promise(_0x2a7ee2=>{_0x2a7ee2('Scraping\x20finished!');});}catch(_0x59dfa0){if(_0x16f34b)throw new Error(_0x59dfa0);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x46d52f+'\x20nicht\x20gefunden:\x20'+_0x59dfa0);return handle_fail(0x0);}}async function fetch_details_from_list(_0x3204ca,_0x58cfbe,_0x2c1cce,_0x156659,_0x3a23b9){let _0x3b4cb9=0x0,_0x731fc9=0x0;for(let _0x24165a=0x0;_0x24165a<_0x3a23b9['length'];_0x24165a++){console['log']('Processing\x20profile:',_0x3a23b9[_0x24165a]);try{await fetch_account_details(_0x58cfbe,_0x3a23b9[_0x24165a],_0x2c1cce,_0x156659);}catch(_0x23de4d){console['error']('Detailed\x20Scraping\x20von:\x20',_0x3a23b9[_0x24165a],_0x23de4d);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x3a23b9[_0x24165a]+'\x20'+_0x23de4d);}_0x731fc9=Math['round'](++_0x3b4cb9/_0x3a23b9['length']*0x64),_0x3204ca['sender']['send']('fetch-progress',_0x731fc9,!![],!![]);}}async function fetch_likers_from_post(_0x60ff5b,_0x383581,_0xb8c608,_0x32214e,_0x1f5b07,_0x4884fe,_0x35fb9b){let _0x433fd0=0x4,_0x57aceb=0x0,_0x745084=0x0;try{await setCookiesForUser(_0x383581,_0x4884fe['username']);}catch(_0x24f251){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x24f251);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x24f251);return handle_fail(0x1);return;}_0x745084=Math['round'](++_0x57aceb/_0x433fd0*0x64),_0x60ff5b['sender']['send']('fetch-progress',_0x745084,!![]);try{let _0x38a235=_0xb8c608['substring'](0x0,_0xb8c608['lastIndexOf']('/')),_0xd6a130=_0x38a235+'/liked_by';console['log'](_0xd6a130),await _0x383581['goto'](_0xd6a130),await delay(0x7d0,0xfa0),await notificationClear(_0x383581),await delay(0xc8,0x1f4),_0x745084=Math['round'](++_0x57aceb/_0x433fd0*0x64),_0x60ff5b['sender']['send']('fetch-progress',_0x745084,!![]),await _0x383581['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x14dfc0=await _0x383581['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0xee0bad=await _0x383581['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x14dfc0['length']);let _0x4f015d=path['join'](__dirname,'/likers.csv');_0x745084=Math['round'](++_0x57aceb/_0x433fd0*0x64),_0x60ff5b['sender']['send']('fetch-progress',_0x745084,!![]);_0x32214e<=0x0&&(_0x32214e=_0x14dfc0['length']);try{let _0xa23f2e=[];for(let _0x2ebdfb=0x0;_0x2ebdfb<_0x14dfc0['length']&&_0x2ebdfb<_0x32214e;_0x2ebdfb++){_0xa23f2e['push'](await _0x14dfc0[_0x2ebdfb]['evaluate'](_0x8995dc=>_0x8995dc['textContent']));try{const _0x2e232f='INSERT\x20INTO\x20'+_0x1f5b07+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x2e232f,[await _0x14dfc0[_0x2ebdfb]['evaluate'](_0x2fb131=>_0x2fb131['textContent']),await _0xee0bad[_0x2ebdfb]['evaluate'](_0x23c5fc=>_0x23c5fc['textContent'])],function(_0x5d27c5){_0x5d27c5?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x1f5b07+'\x27:',_0x5d27c5['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x5e0d62){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2ebdfb+'\x20:\x20'+_0x5e0d62);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2ebdfb+'\x20:\x20'+_0x5e0d62);return handle_fail(0x1);}}return _0x745084=Math['round'](++_0x57aceb/_0x433fd0*0x64),_0x60ff5b['sender']['send']('fetch-progress',_0x745084,!![]),_0x35fb9b&&(_0x60ff5b['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x60ff5b,_0x383581,_0x4884fe,_0x1f5b07,_0xa23f2e)),new Promise(_0x228f1a=>{_0x228f1a('Scraping\x20finished!');});}catch(_0x35b44f){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x35b44f);return handle_fail(0x1);}}catch(_0x3e280f){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x3e280f);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x3e280f);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x33faf5,_0x44e586,_0x468421,_0x30d006,_0x47e319,_0x403ff3,_0x599bb5){let _0x5cad89=0x3,_0x47cb4d=0x0,_0x5a6e89=0x0;try{await setCookiesForUser(_0x44e586,_0x403ff3['username']);}catch(_0x1ddf59){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1ddf59);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1ddf59);return handle_fail(0x2);}try{console['log'](_0x468421),await _0x44e586['goto'](_0x468421),await delay(0x7d0,0xfa0),await notificationClear(_0x44e586),await delay(0xc8,0x1f4);const _0x5dea7f=COM_COMMENTS_BOX_BODY_DIV;let _0x2fdde0;const _0x5a26a7=await _0x44e586['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0xc07659=await _0x44e586['evaluate'](_0x293700=>_0x293700['innerHTML'],_0x5a26a7),_0x444bc2=String(_0xc07659)['replace'](/[^0-9]/g,''),_0x436746=Number(_0x444bc2)/0x14;_0x30d006<=0x0?_0x2fdde0=Math['ceil'](_0x436746/0x3):_0x2fdde0=Math['ceil'](_0x30d006/0x3);_0x5cad89+=_0x2fdde0,_0x5a6e89=Math['round'](++_0x47cb4d/_0x5cad89*0x64),_0x33faf5['sender']['send']('fetch-progress',_0x5a6e89,!![]),console['log']('Auto-scrolls:\x20'+_0x2fdde0),await scroll(_0x44e586,_0x5dea7f,_0x2fdde0,_0xb68812=>{_0x5a6e89=Math['round'](++_0x47cb4d/_0x5cad89*0x64),_0x33faf5['sender']['send']('fetch-progress',_0x5a6e89,!![]);});try{const _0x2219d4=COM_REPLY_BUTTON_SPAN;await _0x44e586['waitForSelector'](_0x2219d4),await delay(0x1f4,0x320);const _0xbb9c0b=await _0x44e586['$$'](_0x2219d4);console['log'](_0xbb9c0b);let _0x2a5d68=_0xbb9c0b['length'];await delay(0xc8,0x1f4);try{for(let _0x538a6f=0x0;_0x538a6f<_0x2a5d68;_0x538a6f++){_0xbb9c0b[_0x538a6f]['click'](),await delay(0x320,0x5dc);}}catch(_0xc087e0){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xc087e0);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xc087e0);return handle_fail(0x2);}}catch(_0x145362){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0xe74be2=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x44e586['waitForSelector'](_0xe74be2),await delay(0x1f4,0x320),_0x5a6e89=Math['round'](++_0x47cb4d/_0x5cad89*0x64),_0x33faf5['sender']['send']('fetch-progress',_0x5a6e89,!![]);const _0x11c6c7=await _0x44e586['$$'](_0xe74be2);let _0x1747e0=path['join'](__dirname,'/comments.csv');_0x30d006<=0x0&&(_0x30d006=_0x11c6c7['length']);console['log']('fetch_limit:\x20'+_0x30d006),console['log']('comments_len:\x20'+_0x11c6c7['length']),_0x30d006++;try{let _0x2d6bf4=[];for(let _0x3fe62a=0x1;_0x3fe62a<_0x11c6c7['length']&&_0x3fe62a<_0x30d006;_0x3fe62a++){try{_0x2d6bf4['push'](await _0x11c6c7[_0x3fe62a]['evaluate'](_0x58d180=>_0x58d180['textContent']));const _0x331630=await db['prepare']('INSERT\x20INTO\x20'+_0x47e319+'\x20(username)\x20VALUES\x20(?)');await _0x331630['run'](await _0x11c6c7[_0x3fe62a]['evaluate'](_0x38ac96=>_0x38ac96['textContent']),function(_0x166184){_0x166184&&console['log']('error\x20in\x20add-user:'+_0x166184);}),await _0x331630['finalize']();}catch(_0x2ea07d){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3fe62a+'\x20:\x20'+_0x2ea07d);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3fe62a+'\x20:\x20'+_0x2ea07d);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x5a6e89=Math['round'](++_0x47cb4d/_0x5cad89*0x64),_0x33faf5['sender']['send']('fetch-progress',_0x5a6e89,!![]),_0x33faf5['sender']['send']('fetch-progress',0x64,!![]),_0x599bb5&&(_0x33faf5['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x33faf5,_0x44e586,_0x403ff3,_0x47e319,_0x2d6bf4)),_0x33faf5['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x2b46ee=>{_0x2b46ee('Scraping\x20finished!');});}catch(_0x4abc33){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x4abc33);return handle_fail(0x2);}}catch(_0xfe1ee1){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0xfe1ee1);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0xfe1ee1);return handle_fail(0x2);}}async function set_clearname_from_username(_0x2b704b,_0x1c5da6,_0x1e9505=null){try{let _0x26093f,_0x42654d;const _0x3a2487='SELECT\x20username\x20FROM\x20'+_0x1c5da6+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x3a2487,[],(_0x3ddcc4,_0x131446)=>{_0x3ddcc4&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x3ddcc4['message']),_0x131446['length']===0x0&&(_0x42654d=_0x131446['length']),_0x26093f=_0x131446['map'](_0x41e9df=>_0x41e9df['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x42654d);if(_0x42654d===0x0){console['log']('Leave');return;}const _0x239f41=await _0x2b704b['waitForSelector'](IG_SEARCH_BUTTON);await _0x239f41['click'](),await delay(0x4b0,0x7d0);for(let _0x4e887a of _0x26093f){const _0xba81dc=await _0x2b704b['waitForSelector'](IG_SEARCH_INPUT);await _0xba81dc['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x2b704b['type'](IG_SEARCH_INPUT,_0x4e887a,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x27a8cf=0x1;while(_0x27a8cf!=0x14){console['log']('Schleife');try{let _0x487c5e=IG_NAME_SPAN_PART1+_0x27a8cf+IG_USERNAME_SPAN_PART2;const _0xf0bda1=await _0x2b704b['waitForSelector'](_0x487c5e),_0x32ab29=await _0x2b704b['evaluate'](_0x5db559=>_0x5db559['innerHTML'],_0xf0bda1);await delay(0xc8,0x1f4);if(_0x32ab29==_0x4e887a){let _0x4dfd92=IG_NAME_SPAN_PART1+_0x27a8cf+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x42864e=await _0x2b704b['waitForSelector'](_0x4dfd92);let _0x8b5f35=await _0x2b704b['evaluate'](_0x3d71a0=>_0x3d71a0['innerHTML'],_0x42864e);const _0x4e8934=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x26edb1=_0x8b5f35['match'](_0x4e8934);_0x26edb1?_0x8b5f35=_0x26edb1[0x1]['trim']():_0x8b5f35=_0x8b5f35['trim']();_0x8b5f35['includes']('•')&&(_0x8b5f35=_0x8b5f35['substring'](0x0,_0x8b5f35['indexOf']('•')-0x1));const _0x4db6ff='UPDATE\x20'+_0x1c5da6+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x4db6ff,[_0x8b5f35,_0x32ab29],function(_0x2e1d5e){_0x2e1d5e&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x2e1d5e['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x27a8cf++;}catch(_0xd35d7){const _0x5c3ee9='UPDATE\x20'+_0x1c5da6+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x5c3ee9,['',_0x4e887a],function(_0x1c5aa4){_0x1c5aa4&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1c5aa4['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0xd35d7);break;}}_0x1e9505&&_0x1e9505();}await _0x239f41['click']();}catch(_0x2ef9bc){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x2ef9bc);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x3fdc85,_0x94d49b)=>{const _0x179d0b='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x179d0b,[],(_0x3da598,_0x493c04)=>{_0x3da598?_0x94d49b(_0x3da598):_0x3fdc85(_0x493c04);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x3e249c,_0x4553e1)=>{const _0x3c6ed4='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x3c6ed4,[],async(_0x45e126,_0x56565c)=>{if(_0x45e126)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x45e126['message']),_0x4553e1({'status':'error','message':_0x45e126['message']});else try{const _0x593b73=await Promise['all'](_0x56565c['map'](_0x573604=>{return new Promise(_0x15ac5e=>{if(!_0x573604['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x573604['campaign_name']),_0x15ac5e({'campaign_name':_0x573604['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x5409b4='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x573604['list_id'],_0x21b3db='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x573604['list_id']+'\x22';db['get'](_0x5409b4,[],(_0x1ffd54,_0x1e9b17)=>{_0x1ffd54?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x573604['campaign_name']+':',_0x1ffd54['message']),_0x15ac5e({'campaign_name':_0x573604['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x21b3db,[],(_0x1e44bc,_0x172be2)=>{_0x1e44bc?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x573604['campaign_name']+':',_0x1e44bc['message']),_0x15ac5e({'campaign_name':_0x573604['campaign_name'],'lead_count':_0x1e9b17?_0x1e9b17['lead_count']:0x0,'contacted_count':'N/A'})):_0x15ac5e({'campaign_name':_0x573604['campaign_name'],'lead_count':_0x1e9b17?_0x1e9b17['lead_count']:0x0,'contacted_count':_0x172be2?_0x172be2['contacted_count']:0x0});});});});}));_0x3e249c({'status':'success','campaigns':_0x593b73});}catch(_0x1a8b9f){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x1a8b9f),_0x4553e1({'status':'error','message':_0x1a8b9f['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xd45185,_0x432d44)=>{return new Promise((_0x6e7559,_0x1f812c)=>{const _0x396aaa='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x396aaa,[_0x432d44],(_0x172fc1,_0x4a68b9)=>{_0x172fc1?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x172fc1),_0x1f812c(_0x172fc1)):(console['log']('ROWS'),console['log'](_0x4a68b9),debugDatabaseContents(),_0x6e7559(_0x4a68b9));});});});const showTableContents=_0x465772=>{return new Promise((_0x5ea033,_0x2e9465)=>{const _0x1cc5f7='SELECT\x20*\x20FROM\x20'+_0x465772+';';campaignDB['all'](_0x1cc5f7,(_0x30baf9,_0x5654e0)=>{_0x30baf9?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x465772+':',_0x30baf9),_0x2e9465(_0x30baf9)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x465772+':',_0x5654e0),_0x5ea033({'status':'success','message':_0x5654e0}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x28962e){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x28962e);}}ipcMain['handle']('create-campaign',async(_0x5b5241,_0x55bfc8)=>{return new Promise((_0x3ba5be,_0x46a44d)=>{const _0x218cde='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x218cde,[String(_0x55bfc8)],function(_0x4403cc){_0x4403cc?_0x46a44d(_0x4403cc):_0x3ba5be({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x1fdcf2,_0x1243a0)=>{return new Promise((_0x528b2b,_0x51ba80)=>{const _0x1a4321='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x1a4321,[_0x1243a0],function(_0x3b1712){_0x3b1712?_0x51ba80(_0x3b1712):_0x528b2b({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0xafdb9b,_0x293b5e,_0x4bd896,_0x2b127d,_0x2570c7,_0x1761ad,_0x15d736,_0x1b01a1)=>{const _0x2d63bd=await createMessageID(_0x2570c7);return new Promise((_0x2b7bab,_0xa0d64a)=>{if(!_0x293b5e||!_0x4bd896||!_0x2b127d||!_0x2d63bd||!_0x1761ad)return _0xa0d64a({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x2d63bd);const _0x266d15='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x266d15,[_0x4bd896,_0x2b127d,_0x2d63bd,_0x1761ad,_0x15d736,_0x1b01a1,_0x293b5e],function(_0x1819da){if(_0x1819da)_0xa0d64a({'status':'error','message':_0x1819da['message']});else this['changes']===0x0?_0xa0d64a({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x2b7bab({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x12d833,_0x2b1463,_0x1537db,_0x233218,_0x57401d)=>{return new Promise((_0x59c58c,_0x2b5d74)=>{const _0x44b753='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x44b753,[_0x2b1463,_0x1537db,_0x233218,_0x57401d],function(_0x2eea10){return _0x2eea10?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x2eea10['message']),_0x2b5d74('insert-dm-response',{'success':![],'message':_0x2eea10['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x59c58c('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x479fb6=>{return new Promise((_0x61c2b,_0x557cee)=>{const _0x339da5='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x339da5,[_0x479fb6],(_0x1d263b,_0x58cda8)=>{if(_0x1d263b)_0x557cee({'status':'error','message':_0x1d263b['message']});else{if(_0x58cda8)_0x61c2b(_0x58cda8['message_id']);else{const _0x5f3666='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x5f3666,[_0x479fb6],function(_0x1bd0af){_0x1bd0af?_0x557cee({'status':'error','message':_0x1bd0af['message']}):_0x61c2b(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x3e6495,_0x34132d)=>{return new Promise((_0x76781f,_0x3513a9)=>{const _0x116bea='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x34132d;db['get'](_0x116bea,(_0x3097f2,_0x264c05)=>{_0x3097f2?_0x3513a9({'status':'error','message':_0x3097f2['message']}):_0x76781f({'status':'success','count':_0x264c05['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x33164e,_0x15147f){try{const _0x3fc478=await new Promise((_0xbd44f2,_0x40bdd9)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x15147f],(_0x4868e6,_0xb5732a)=>{if(_0x4868e6)_0x40bdd9(_0x4868e6);else{if(_0xb5732a['length']>0x0){let _0x45b151=JSON['parse'](_0xb5732a[0x0]['cookie']);console['log'](_0x45b151),_0xbd44f2(_0x45b151);}else _0x40bdd9(new Error('User\x20with\x20username\x20'+_0x15147f+'\x20does\x20not\x20exist.'));}});});await _0x33164e['setCookie'](..._0x3fc478),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x31d967){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x31d967);}}async function saveCookiesForUser(_0x8139af,_0x2372cc){try{const _0x2d0421=await _0x8139af['cookies']();if(!_0x2d0421||_0x2d0421['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x2372cc);const _0x57a3a2=JSON['stringify'](_0x2d0421);if(_0x57a3a2['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x2372cc);return new Promise((_0x34d21e,_0x3b8dce)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x2372cc],(_0x16c963,_0x233593)=>{if(_0x16c963)return console['error']('Error\x20checking\x20user\x20existence:',_0x16c963),_0x3b8dce(_0x16c963);if(_0x233593){const _0x4295eb=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x4295eb['run'](_0x57a3a2,_0x2372cc,function(_0x3385df){return _0x3385df?(console['error']('Error\x20updating\x20cookies:',_0x3385df),_0x3b8dce(_0x3385df)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x2372cc),_0x34d21e());});}else{const _0xf62c20=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0xf62c20['run'](_0x2372cc,_0x57a3a2,function(_0x1e7f97){return _0x1e7f97?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x1e7f97),_0x3b8dce(_0x1e7f97)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x2372cc),_0x34d21e());});}});});}catch(_0x101617){console['error']('Error\x20fetching\x20cookies:',_0x101617);throw _0x101617;}}async function createUserIfNotExists(_0x283bff){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x283bff],(_0x16fd56,_0x2c06e9)=>{if(_0x16fd56){console['error']('Error\x20checking\x20user\x20existence:',_0x16fd56);throw _0x16fd56;}else{if(!_0x2c06e9){const _0x4f733f=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x4f733f['run'](_0x283bff,function(_0x4c6826){_0x4c6826?console['error']('Error\x20inserting\x20new\x20user:',_0x4c6826):console['log']('New\x20user\x20created:',_0x283bff);});}else console['log']('User\x20already\x20exists:',_0x283bff);}});}catch(_0x4fbffb){console['error']('Error\x20creating\x20user:',_0x4fbffb);throw _0x4fbffb;}}ipcMain['handle']('create-relation',async(_0x313399,_0x333302)=>{return new Promise((_0x462759,_0x4ba7b0)=>{const _0x459985='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x333302+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x459985,function(_0x5af7ba){_0x5af7ba?_0x4ba7b0(_0x5af7ba):_0x462759({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x2a9db7,_0x3336c1)=>{return console['log']('droping\x20table'+_0x3336c1),new Promise((_0x445a7b,_0x179dfb)=>{const _0x4d6422='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x3336c1;console['log']('droping\x20table'+_0x3336c1),db['run'](_0x4d6422,function(_0x3d1440){_0x3d1440?_0x179dfb(_0x3d1440):_0x445a7b({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x120cb5=>{return new Promise((_0x13295b,_0x1efd99)=>{const _0x37d5c5='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x37d5c5,[],(_0x186ef3,_0xeaa8d5)=>{_0x186ef3?_0x1efd99(_0x186ef3):_0x13295b(_0xeaa8d5['map'](_0x45f0f8=>_0x45f0f8['name']));});});}),ipcMain['handle']('add-user',async(_0x4ae0fb,_0x1f496c,_0x4a69ae)=>{return new Promise(_0x4e4809=>{const _0x4bfdb3=db['prepare']('INSERT\x20INTO\x20'+_0x4a69ae+'\x20(username)\x20VALUES\x20(?)');_0x4bfdb3['run'](_0x1f496c,function(_0xd32c7a){_0xd32c7a?console['log']('error\x20in\x20add-user:'+_0xd32c7a):_0x4e4809({'status':'success','id':this['lastID']});}),_0x4bfdb3['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x2d67f5,_0x2cc0ef)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x3ad5ae,_0x630d57)=>{if(_0x3ad5ae)_0x2cc0ef(_0x3ad5ae);else{_0x2d67f5({'status':'success','users':_0x630d57});for(_0x630d57 of _0x630d57){console['log'](_0x630d57['username']);}}});});}),ipcMain['handle']('get-data',async(_0x293bd4,_0x5c9bcf)=>{return new Promise((_0x287004,_0x46f58f)=>{const _0x256629='SELECT\x20*\x20FROM\x20'+_0x5c9bcf;console['log'](_0x256629),db['all'](_0x256629,[],(_0xf6afcb,_0x472339)=>{_0xf6afcb?_0x46f58f(_0xf6afcb):_0x287004(_0x472339);});});}),ipcMain['handle']('get-accounts',async _0x29cbae=>{return new Promise((_0x31cff4,_0x56d513)=>{const _0x230910='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x230910),igaccountsDB['all'](_0x230910,[],(_0x561da9,_0x28d9d0)=>{_0x561da9?_0x56d513(_0x561da9):_0x31cff4(_0x28d9d0);});});}),ipcMain['handle']('get-targets',async(_0x37eaf6,_0x2e89a4)=>{return getTargetProfiles(_0x2e89a4);}),ipcMain['handle']('delete-user',async(_0x94890a,_0x13783c,_0x332ba0)=>{return new Promise((_0x12a6be,_0x5c4c12)=>{const _0x2f3e57=db['prepare']('DELETE\x20FROM\x20'+_0x332ba0+'\x20WHERE\x20username\x20=\x20?');_0x2f3e57['run'](_0x13783c,function(_0x376d17){_0x376d17?_0x5c4c12(_0x376d17):_0x12a6be({'status':'success','changes':this['changes']});}),_0x2f3e57['finalize']();});}),ipcMain['handle']('delete-account',async(_0x13ca15,_0x4f68a5)=>{const _0x4f7b5e=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x4f7b5e['run'](_0x4f68a5,function(_0x405fa5){_0x405fa5&&console['log'](_0x405fa5);}),_0x4f7b5e['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x5f0a39,_0x31a024)=>{const _0x4d3e73='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4d3e73,[],(_0x295f52,_0x26be80)=>{_0x295f52?_0x31a024({'status':'error','message':_0x295f52['message']}):_0x5f0a39({'status':'success','contactedCount':_0x26be80['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x4dbad0,_0x405c31)=>{const _0x508481='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x508481,[],(_0x299172,_0x25923f)=>{_0x299172?_0x405c31({'status':'error','message':_0x299172['message']}):_0x4dbad0({'status':'success','contactedCount':_0x25923f['contactedCount']});});});});function exportDatabase(_0x4e4fc1){return new Promise((_0x3c94a0,_0x3dd201)=>{const _0x462936='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x4e4fc1+'\x0a\x20\x20\x20\x20';db['all'](_0x462936,[],async(_0x1e68cb,_0x5bffb7)=>{if(_0x1e68cb){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x1e68cb['message']),_0x3dd201(_0x1e68cb);return;}if(!_0x5bffb7||_0x5bffb7['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x3c94a0();return;}const _0x63b2b1=XLSX['utils']['json_to_sheet'](_0x5bffb7),_0x215888=XLSX['utils']['sheet_to_csv'](_0x63b2b1);try{const {canceled:_0x24d082,filePath:_0x1d14dc}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x4e4fc1+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x24d082||!_0x1d14dc){console['log']('Speichern\x20abgebrochen.'),_0x3c94a0();return;}fs['writeFile'](_0x1d14dc,_0x215888,'utf8',_0x4fce3e=>{_0x4fce3e?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x4fce3e['message']),_0x3dd201(_0x4fce3e)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x1d14dc),_0x3c94a0());});}catch(_0x2bb75a){console['error']('Fehler\x20im\x20Speicherdialog:',_0x2bb75a),_0x3dd201(_0x2bb75a);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x46b1ed,_0x24e3a8)=>{shell['openExternal'](_0x24e3a8);});