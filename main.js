const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x405eb4,_0x135dff){try{const _0xa40a7a=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x135dff},'body':JSON['stringify']({'clearname':_0x405eb4})});if(!_0xa40a7a['ok']){const _0x2c2cd6=await _0xa40a7a['text']();throw new Error(_0xa40a7a['status']+':\x20'+_0x2c2cd6);}const _0x27ea45=await _0xa40a7a['json']();return _0x27ea45;}catch(_0x35f99b){console['error']('Error\x20in\x20extractFirstName:',_0x35f99b);throw _0x35f99b;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x336a85=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x336a85['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x336a85['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x1626a3){var _0x443395=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x352301){console['log']('window\x20id:'+_0x352301['id']),_0x352301['id']>0x1&&(_0x443395=!![]);}),console['log']('child\x20opened\x20='+_0x443395);if(!_0x443395){const _0x2e6bc0=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x2e6bc0['loadFile'](_0x1626a3['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x99050b=require('fs'),_0x2e72ed=path['join'](app['getPath']('userData'),'data'),_0x4c2856=['campaign.db','crm.db','igaccounts.db'],_0x5eb039=[];try{_0x99050b['mkdirSync'](_0x2e72ed,{'recursive':!![]});for(const _0x31400d of _0x4c2856){const _0x16036a=path['join'](process['resourcesPath'],'app','build','data',_0x31400d),_0x234d40=path['join'](_0x2e72ed,_0x31400d);!_0x99050b['existsSync'](_0x234d40)?(_0x99050b['copyFileSync'](_0x16036a,_0x234d40),console['log']('[InitDB]\x20Kopiert\x20'+_0x31400d+'\x20nach:\x20'+_0x234d40)):console['log']('[InitDB]\x20'+_0x31400d+'\x20existiert\x20bereits:\x20'+_0x234d40),_0x5eb039['push'](_0x234d40);}}catch(_0x5ac486){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x5ac486);}return _0x5eb039;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x21d87b,AppUpdate:_0x5b442a}=require('electron-updater');_0x21d87b['autoDownload']=![],_0x21d87b['autoInstallOnAppQuit']=!![],_0x21d87b['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x21d87b['on']('update-available',_0x4d2974=>{console['log']('Update\x20verfügbar:',_0x4d2974),_0x21d87b['downloadUpdate']();}),_0x21d87b['on']('update-downloaded',_0x29558f=>{console['log']('Update\x20heruntergeladen:',_0x29558f),_0x21d87b['quitAndInstall']();}),_0x21d87b['on']('error',_0x176f13=>{console['error']('Fehler\x20beim\x20Updaten:',_0x176f13);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x575d52,AppUpdate:_0x5c7dd1}=require('electron-updater');_0x575d52['autoDownload']=![],_0x575d52['autoInstallOnAppQuit']=!![],_0x575d52['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x575d52['on']('update-available',_0x520f3c=>{console['log']('Update\x20verfügbar:',_0x520f3c),_0x575d52['downloadUpdate']();}),_0x575d52['on']('update-downloaded',_0x1cee00=>{console['log']('Update\x20heruntergeladen:',_0x1cee00),console['log']('Neustarten\x20zum\x20Updaten');}),_0x575d52['on']('error',_0x1aef04=>{console['error']('Fehler\x20beim\x20Updaten:',_0x1aef04);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x116e10='',_0x5db93f=null;if(process['platform']==='darwin')_0x116e10=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x116e10=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x116e10}),_0x5db93f=await browser_login['newPage'](),_0x5db93f['setDefaultNavigationTimeout'](0x1d4c),_0x5db93f['setDefaultTimeout'](0x1d4c),await _0x5db93f['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x5db93f;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x3ad48e=0x1,_0x57c958=0x0){let _0x305384='',_0x1c8abe=null;const _0x12d8bc=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x305384=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x305384=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x3ad48e===0x0&&!pageStack[_0x57c958])return browser=await puppeteer['launch']({'headless':_0x12d8bc,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x305384}),_0x1c8abe=await browser['newPage'](),_0x1c8abe['setDefaultNavigationTimeout'](0x1d4c),_0x1c8abe['setDefaultTimeout'](0x1d4c),await _0x1c8abe['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57c958]=_0x1c8abe,_0x1c8abe;return(browser===null||pageStack[_0x57c958]===null||pageStack[_0x57c958]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x12d8bc,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x305384})),(pageStack[_0x57c958]===null||pageStack[_0x57c958]['isClosed']())&&(_0x1c8abe=await browser['newPage'](),_0x1c8abe['setDefaultNavigationTimeout'](0x1d4c),_0x1c8abe['setDefaultTimeout'](0x1d4c),await _0x1c8abe['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x57c958]=_0x1c8abe),pageStack[_0x57c958];}ipcMain['on']('login',async(_0x24aab8,_0x5a6f54)=>{const _0x41a5d2=await getBrowserPageLogin();await _0x41a5d2['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x41a5d2,_0x5a6f54),ipcMain['on']('setLoginCookies',async(_0x282536,_0x874235)=>{try{await set_login_cookies(_0x41a5d2,_0x874235);}catch(_0x4aecfc){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4aecfc);}});}),ipcMain['on']('export-relation',async(_0x2cddf8,_0x39bd2c)=>{try{await exportDatabase(_0x39bd2c),_0x2cddf8['reply']('export-relation-response',{'success':!![]});}catch(_0x3bdd41){console['error'](_0x3bdd41),_0x2cddf8['reply']('export-relation-response',{'success':![],'message':_0x3bdd41['message']});}}),ipcMain['handle']('sendMessage',async(_0xf16479,_0x2a7e94,_0x54f415,_0x352a59,_0x23ab56,_0xc5029b,_0x4c354d,_0x1d8941,_0x181ba4,_0x3b9243,_0x1f6349)=>{isStopping=![];let _0x4ae25c=null;return _0x4c354d?_0x4ae25c=await getBrowserPage(_0x23ab56,_0x1d8941):_0x4ae25c=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x2a7e94),send_message(_0x4ae25c,_0x2a7e94,_0x54f415,_0x352a59,_0x23ab56,_0xc5029b,_0x181ba4,_0x3b9243,_0x1f6349);}),ipcMain['handle']('stop-action',async(_0x1c3cf5,_0x4bc5f4)=>{isStopping=!![];const _0xd9997a=await getBrowserPage(0x1,_0x4bc5f4);await _0xd9997a['close']();}),ipcMain['handle']('fetch_followers',async(_0x4ed79d,_0x3845bf,_0x25e7d8,_0x122af1,_0x148784,_0x5238b2)=>{isStopping=![];const _0x38fd55=await getBrowserPage();return fetch_followers_from_account(_0x4ed79d,_0x38fd55,_0x3845bf,_0x25e7d8,_0x122af1,_0x148784,_0x5238b2);}),ipcMain['handle']('get-account-details',async(_0x3ad42d,_0x4e89fa,_0x41ee1a,_0x42f2ca)=>{isStopping=![];const _0xb4fa3=await getBrowserPage();return fetch_account_details(_0xb4fa3,_0x4e89fa,_0x41ee1a,_0x42f2ca);}),ipcMain['handle']('fetch_likes',async(_0xea9f47,_0x196c95,_0x3d831c,_0xe7d53,_0x4e61fd,_0x4978dc)=>{isStopping=![];const _0x12b535=await getBrowserPage();return fetch_likers_from_post(_0xea9f47,_0x12b535,_0x196c95,_0x3d831c,_0xe7d53,_0x4e61fd,_0x4978dc);}),ipcMain['handle']('fetch_comments',async(_0x4a3255,_0xe46024,_0x1be482,_0x3dfae0,_0x519071,_0x2ee2ec)=>{isStopping=![];const _0x1048b2=await getBrowserPage();return fetch_comments_from_post(_0x4a3255,_0x1048b2,_0xe46024,_0x1be482,_0x3dfae0,_0x519071,_0x2ee2ec);});async function updateAppSilent(){const {spawn:_0x5d5b18}=require('child_process'),_0x20335a=require('path'),_0x1948eb=require('electron-log');return _0x1948eb['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x403052,_0x3e9f0f)=>{const {updateElectronApp:_0x13abaa,UpdateSourceType:_0x1428b7}=require('update-electron-app');_0x13abaa({'updateSource':{'type':_0x1428b7['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x1948eb}),_0x403052('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x12df3d,_0x3c972f)=>{doFullElectronUpdateSilent(),_0x12df3d('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x55049f}=require('child_process'),_0xa4b723=require('path'),_0xba4014=require('electron-log');return _0xba4014['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x4b17ce,_0x843f9)=>{const {updateElectronApp:_0x5bc1c6,UpdateSourceType:_0x30d29f}=require('update-electron-app');_0x5bc1c6({'updateSource':{'type':_0x30d29f['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xba4014}),_0x4b17ce('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x518843,_0x371c8d)=>{doFullElectronUpdate(),_0x518843('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x5403e8,_0x4b2b5f)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x5403e8('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x3c6b6a=path['join'](__dirname,'mac-updater-intern.sh'),_0x286cc8=spawn('/bin/bash',[_0x3c6b6a],{'detached':!![],'stdio':'ignore'});_0x286cc8['unref'](),setTimeout(()=>{_0x5403e8('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x4b2b5f(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x470b15=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x196b87,_0x116a6d)=>{console['log']('Update\x20Silent:\x20'+_0x116a6d);if(_0x116a6d){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x64b622,_0x4310c9){return Math['random']()*(_0x4310c9-_0x64b622+0x1)+_0x64b622;}function delay(_0x3a324c,_0x26b0b8){let _0x270058=getRnd(_0x3a324c,_0x26b0b8);return new Promise(function(_0x10bffb){setTimeout(_0x10bffb,_0x270058);});}async function scroll(_0x1c3a26,_0x2a4255,_0x598601=0x2,_0x189370){const _0x560ca8=await _0x1c3a26['waitForSelector'](_0x2a4255);for(let _0x1af7ef=0x0;_0x1af7ef<_0x598601;_0x1af7ef++){console['log']('Scrolling\x20'+_0x1af7ef),await _0x1c3a26['evaluate'](_0x4779be=>{const _0x3875d4=document['querySelector'](_0x4779be);_0x3875d4&&_0x3875d4['scrollBy'](0x0,0x190);},_0x2a4255),await delay(0x320,0x5dc),_0x189370();}}async function saveCookies(_0x13eb04){let _0x29ffc8=await _0x13eb04['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x29ffc8,null,0x2));}async function notificationClear(_0x211e90){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x211e90['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x211e90['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x180ced){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x180ced);}}async function getTargetProfiles(_0x1908f9){return new Promise((_0x2e436f,_0x18f395)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x1908f9,(_0x326e93,_0x581538)=>{_0x326e93?_0x18f395(_0x326e93):_0x2e436f(_0x581538);});});}async function login_legacy(_0x20849e,_0x473f2f,_0x28a790){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x20849e,_0x473f2f),await createUserIfNotExists(_0x473f2f,_0x28a790);}catch(_0x2deaa0){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2deaa0);}try{await _0x20849e['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x20849e['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x20849e['click']('button._a9--._ap36._a9_0');}catch(_0xd6df40){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x20849e['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x20849e['type']('input[name=\x27username\x27]',_0x473f2f,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x20849e['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x20849e['type']('input[name=\x27password\x27]',_0x28a790,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x20849e['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x20849e['click']('button[type=\x27submit\x27]');}catch(_0x30fd8f){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x20849e),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x20849e,_0x473f2f);}catch(_0x2ee429){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x2ee429);}}catch(_0x1d1ac1){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1d1ac1);}}async function login(_0x246928,_0x1cc190){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x246928,_0x1cc190),await createUserIfNotExists(_0x1cc190);}catch(_0x20a6e4){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x20a6e4);}try{await _0x246928['goto']('https://www.instagram.com/accounts/login/');}catch(_0x38abe1){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x38abe1);}}async function set_login_cookies(_0x11a0ec,_0x2d70f9){try{await saveCookiesForUser(_0x11a0ec,_0x2d70f9);}catch(_0x445b49){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x445b49);}}async function waitForXPath(_0xf3ccb8,_0x2f59e0,_0x38bc66={}){return await _0xf3ccb8['waitForFunction'](_0x5a5c7e=>{return document['evaluate'](_0x5a5c7e,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x38bc66,_0x2f59e0),_0xf3ccb8['evaluateHandle'](_0x1fe10e=>document['evaluate'](_0x1fe10e,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x2f59e0);}async function send_message(_0x67d203,_0x5423f8,_0x4bc95f,_0x5f4b17,_0x5ebd42,_0x1cf564,_0x22ffa8,_0x4f5615,_0x3e6da3){return new Promise(async(_0x2e9c97,_0x502326)=>{_0x1cf564=_0x1cf564['split'](';'),console['log'](_0x1cf564[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x5ebd42);try{await setCookiesForUser(_0x67d203,_0x1cf564[0x0]);}catch(_0x4752b6){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4752b6),_0x502326({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4752b6});return;}try{await _0x67d203['goto']('https://www.instagram.com/'+_0x5423f8+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x67d203);}catch(_0x9e529c){_0x502326({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x9e529c});return;}console['log']('UserSkip:\x20'+_0x22ffa8);if(_0x22ffa8==0x1)try{const _0x5ca636=await _0x67d203['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4ec967=>_0x4ec967['textContent']['trim']());console['log'](_0x5ca636);if(_0x5ca636==='Following'||_0x5ca636==='Folge\x20ich')return _0x2e9c97({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x4cf41c){}try{await _0x67d203['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x67d203['click'](K_DIRECT_MSG_BUTTON);}catch(_0xac7cee){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0xac7cee);try{await _0x67d203['waitForSelector'](K_OPTIONS_BUTTON),await _0x67d203['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x337076=await waitForXPath(_0x67d203,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x337076['click']();}catch(_0x345b11){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x345b11),_0x2e9c97({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x67d203);}catch(_0xd1e75a){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0xd1e75a);}try{const _0x5979dd=await _0x67d203['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x4f5615){const _0x2b0650=await _0x67d203['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x2b0650)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x5423f8),_0x2e9c97({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x30a644=await _0x67d203['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x30a644),_0x5f4b17=_0x5f4b17['replace']('{USERNAME}',_0x5423f8);let _0x4963ba;if(_0x5f4b17['includes']('{NAME}')||_0x5f4b17['includes']('{name}'))try{const _0x2ffc3b=await extractFirstName(_0x30a644,_0x3e6da3);console['log']('Response\x20Clearname\x20valid:\x20'+_0x2ffc3b['valid']),_0x2ffc3b['valid']?(_0x5f4b17=_0x5f4b17['replaceAll'](/{NAME}|{name}/g,_0x2ffc3b['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x2ffc3b['name']),_0x4963ba=_0x2ffc3b['name']):(_0x5f4b17=_0x5f4b17['replaceAll'](/ ?({NAME}|{name})/g,''),_0x4963ba='UNKNOWN_NAME');}catch(_0x235836){console['log'](_0x235836['message']),_0x4963ba=_0x235836['message'];let _0x3145f1=_0x30a644['replace'](/[^\p{L}\s]/gu,''),_0x7949b=_0x3145f1['split']('\x20')[0x0];_0x7949b['length']>0x2&&!_0x7949b['includes']('Instagram')?_0x5f4b17=_0x5f4b17['replaceAll'](/{NAME}|{name}/g,_0x7949b):_0x5f4b17=_0x5f4b17['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x5979dd['type'](_0x5f4b17,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x1375bc=await _0x67d203['waitForSelector'](K_SEND_MSG_BUTTON);await _0x1375bc['click'](),await delay(0x320,0x3e8),_0x2e9c97({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x30a644,'extracted_clearname':_0x4963ba});}catch(_0x42bed2){try{await _0x67d203['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x529358=await _0x67d203['evaluate'](_0x1a44bb=>{return document['querySelector'](_0x1a44bb)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x529358),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x42bed2),_0x2e9c97({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x5423f8+'\x20überspringen.'});}catch(_0x2a21ac){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x2a21ac),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x5423f8+'\x20:\x20'+_0x2a21ac),_0x2e9c97({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x5423f8+'\x20:\x20'+_0x2a21ac});}}});}function handle_fail(_0x2310c4){if(isStopping)return new Promise(_0x59d762=>{_0x59d762('Scraper\x20gestoppt.');});else{let _0x1d505d='';switch(_0x2310c4){case 0x0:_0x1d505d='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x1d505d='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x1d505d='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x1d505d='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x36f68d,_0x3545a0)=>{_0x3545a0(_0x1d505d);});}}async function fetch_account_details(_0x5d3dae,_0x52f544,_0x3face4,_0xc144af){try{await setCookiesForUser(_0x5d3dae,_0x3face4['username']);}catch(_0x3d3d7f){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3d3d7f);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3d3d7f);return handle_fail(0x0);}_0x5d3dae['setDefaultNavigationTimeout'](0x7530),await _0x5d3dae['goto']('https://www.instagram.com/'+_0x52f544+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x5d3dae);const _0x4bd0bb=await _0x5d3dae['evaluate'](()=>{const _0xfc8c07=document['querySelector']('meta[property=\x22og:image\x22]');return _0xfc8c07?_0xfc8c07['getAttribute']('content'):null;});await _0x5d3dae['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x391cd9=await _0x5d3dae['evaluate'](()=>{const _0x5f10d9=document['querySelector']('meta[name=\x22description\x22]');if(!_0x5f10d9)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x1d5562=_0x5f10d9['getAttribute']('content');if(!_0x1d5562)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x1d5562);const _0x3cf311=/\s*[–-]\s*/,_0x3b866b=_0x1d5562['split'](_0x3cf311);if(_0x3b866b['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x35b208=_0x3b866b[0x0],_0x46205e=_0x3b866b[0x1],_0x53da20=_0x35b208['split'](',\x20');if(_0x53da20['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x31d9f8=_0x53da20[0x0]['split']('\x20')[0x0],_0x4a7056=_0x53da20[0x1]['split']('\x20')[0x0],_0x5940b9=_0x53da20[0x2]['split']('\x20')[0x0];let _0x8faf6a='',_0x3c3282='';const _0x5be2f7='\x20on\x20Instagram:\x20',_0x3ebbcf=_0x46205e['split'](_0x5be2f7);return _0x8faf6a=_0x3ebbcf[0x0]['trim'](),_0x8faf6a=_0x8faf6a['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x3ebbcf['length']>0x1&&(_0x3c3282=_0x3ebbcf[0x1]['trim'](),_0x3c3282['startsWith']('\x22')&&_0x3c3282['endsWith']('\x22')&&(_0x3c3282=_0x3c3282['substring'](0x1,_0x3c3282['length']-0x1)['trim']()),_0x3c3282=_0x3c3282['replace'](/&quot;/g,'')['trim']()),{'followers':_0x31d9f8,'following':_0x4a7056,'posts':_0x5940b9,'nameText':_0x8faf6a,'bio':_0x3c3282};});console['log']('Extracted\x20profile\x20data:',_0x391cd9);const _0x300256=_0x391cd9['nameText'],_0x4c0361=_0x4bd0bb,_0x1e3fc1=_0x391cd9['bio'],_0x3d8e30=_0x391cd9['followers'],_0x28b41a=_0x391cd9['following'],_0x388f66=_0x391cd9['posts'],_0x3c1688=![],_0x5cdcec=![],_0x5a6705=![],_0x27b6eb='\x0a\x20\x20INSERT\x20INTO\x20'+_0xc144af+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x27b6eb,[_0x52f544,_0x300256,_0x4c0361,_0x1e3fc1,_0x3d8e30,_0x28b41a,_0x388f66,_0x3c1688,_0x5cdcec,_0x5a6705],function(_0x39ede7){_0x39ede7?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x39ede7['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x6283a2,_0xe25797,_0x73a586,_0xa1438b,_0x31003b,_0x1ec762,_0x411289){let _0x41a762=0x4,_0x338ddd=0x0,_0x3681d1=0x0;try{await setCookiesForUser(_0xe25797,_0x1ec762['username']);}catch(_0x44c7f4){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x44c7f4);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x44c7f4);return handle_fail(0x0);}let _0xdbe28f=0x0;try{await _0xe25797['goto']('https://www.instagram.com/'+_0x73a586+'/'),await notificationClear(_0xe25797);try{if(_0xa1438b<=0x0){const _0x1f68d6=await _0xe25797['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x3c729a=await _0xe25797['evaluate'](_0x28a533=>_0x28a533['innerHTML'],_0x1f68d6);_0xdbe28f=Math['ceil'](_0x3c729a/0x4);}else _0xdbe28f=Math['ceil'](_0xa1438b/0x4);_0x41a762+=_0xdbe28f,_0x3681d1=Math['round'](++_0x338ddd/_0x41a762*0x64),_0x6283a2['sender']['send']('fetch-progress',_0x3681d1,!![]);let _0x566093=await _0xe25797['waitForSelector']('a[href=\x22/'+_0x73a586+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x566093['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x73a586+'\x20gesichtet'),_0x3681d1=Math['round'](++_0x338ddd/_0x41a762*0x64),_0x6283a2['sender']['send']('fetch-progress',_0x3681d1,!![]);}catch(_0x55964f){console['log']('Follower\x20Liste\x20von\x20'+_0x73a586+'\x20nicht\x20gefunden:'+_0x55964f);throw new Error('Follower\x20Liste\x20von\x20'+_0x73a586+'\x20nicht\x20gefunden:'+_0x55964f);return handle_fail(0x0);}}catch(_0x2a0eec){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2a0eec);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2a0eec);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0xdbe28f),await scroll(_0xe25797,FOLLOWER_FENSTER,_0xdbe28f,_0x4b5114=>{_0x3681d1=Math['round'](++_0x338ddd/_0x41a762*0x64),_0x6283a2['sender']['send']('fetch-progress',_0x3681d1,!![]);}),await _0xe25797['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x12fd8d=await _0xe25797['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x333fe0=await _0xe25797['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x3681d1=Math['round'](++_0x338ddd/_0x41a762*0x64),_0x6283a2['sender']['send']('fetch-progress',_0x3681d1,!![]);_0xa1438b<=0x0&&(_0xa1438b=_0x12fd8d['length']);let _0x2b7d71=[];for(let _0x25ea35=0x0;_0x25ea35<_0x12fd8d['length']&&_0x25ea35<_0xa1438b;_0x25ea35++){_0x2b7d71['push'](await _0x12fd8d[_0x25ea35]['evaluate'](_0x49486b=>_0x49486b['textContent']));const _0x1daa24='INSERT\x20INTO\x20'+_0x31003b+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x1daa24,[await _0x12fd8d[_0x25ea35]['evaluate'](_0x40cd21=>_0x40cd21['textContent']),await _0x333fe0[_0x25ea35]['evaluate'](_0x174fff=>_0x174fff['textContent'])],function(_0x45a5f1){_0x45a5f1?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x31003b+'\x27:',_0x45a5f1['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3681d1=Math['round'](++_0x338ddd/_0x41a762*0x64),_0x6283a2['sender']['send']('fetch-progress',_0x3681d1,!![]),_0x411289&&(_0x6283a2['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x6283a2,_0xe25797,_0x1ec762,_0x31003b,_0x2b7d71)),new Promise(_0x120707=>{_0x120707('Scraping\x20finished!');});}catch(_0x1fee5e){if(_0x411289)throw new Error(_0x1fee5e);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x73a586+'\x20nicht\x20gefunden:\x20'+_0x1fee5e);return handle_fail(0x0);}}async function fetch_details_from_list(_0xa0f2cf,_0x4aa87f,_0x3384d7,_0x4e7a8a,_0x5440c3){let _0x14022f=0x0,_0x2c5cf4=0x0;for(let _0x370720=0x0;_0x370720<_0x5440c3['length'];_0x370720++){console['log']('Processing\x20profile:',_0x5440c3[_0x370720]);try{await fetch_account_details(_0x4aa87f,_0x5440c3[_0x370720],_0x3384d7,_0x4e7a8a);}catch(_0x4a7ea6){console['error']('Detailed\x20Scraping\x20von:\x20',_0x5440c3[_0x370720],_0x4a7ea6);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x5440c3[_0x370720]+'\x20'+_0x4a7ea6);}_0x2c5cf4=Math['round'](++_0x14022f/_0x5440c3['length']*0x64),_0xa0f2cf['sender']['send']('fetch-progress',_0x2c5cf4,!![],!![]);}}async function fetch_likers_from_post(_0x4e06d2,_0xbe5fb4,_0x5e2829,_0x2d6b39,_0x6226e0,_0x2ea731,_0x3a8662){let _0x2e6404=0x4,_0x2f8816=0x0,_0x51f2f5=0x0;try{await setCookiesForUser(_0xbe5fb4,_0x2ea731['username']);}catch(_0x3dcfd8){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3dcfd8);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3dcfd8);return handle_fail(0x1);return;}_0x51f2f5=Math['round'](++_0x2f8816/_0x2e6404*0x64),_0x4e06d2['sender']['send']('fetch-progress',_0x51f2f5,!![]);try{let _0x29e8f2=_0x5e2829['substring'](0x0,_0x5e2829['lastIndexOf']('/')),_0x554e61=_0x29e8f2+'/liked_by';console['log'](_0x554e61),await _0xbe5fb4['goto'](_0x554e61),await delay(0x7d0,0xfa0),await notificationClear(_0xbe5fb4),await delay(0xc8,0x1f4),_0x51f2f5=Math['round'](++_0x2f8816/_0x2e6404*0x64),_0x4e06d2['sender']['send']('fetch-progress',_0x51f2f5,!![]),await _0xbe5fb4['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x4dd202=await _0xbe5fb4['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0xd426a3=await _0xbe5fb4['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x4dd202['length']);let _0x2dd59f=path['join'](__dirname,'/likers.csv');_0x51f2f5=Math['round'](++_0x2f8816/_0x2e6404*0x64),_0x4e06d2['sender']['send']('fetch-progress',_0x51f2f5,!![]);_0x2d6b39<=0x0&&(_0x2d6b39=_0x4dd202['length']);try{let _0x4b9297=[];for(let _0xd4752e=0x0;_0xd4752e<_0x4dd202['length']&&_0xd4752e<_0x2d6b39;_0xd4752e++){_0x4b9297['push'](await _0x4dd202[_0xd4752e]['evaluate'](_0x35481d=>_0x35481d['textContent']));try{const _0x59361b='INSERT\x20INTO\x20'+_0x6226e0+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x59361b,[await _0x4dd202[_0xd4752e]['evaluate'](_0x1f33a3=>_0x1f33a3['textContent']),await _0xd426a3[_0xd4752e]['evaluate'](_0x3f5993=>_0x3f5993['textContent'])],function(_0x371641){_0x371641?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x6226e0+'\x27:',_0x371641['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x33f246){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0xd4752e+'\x20:\x20'+_0x33f246);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0xd4752e+'\x20:\x20'+_0x33f246);return handle_fail(0x1);}}return _0x51f2f5=Math['round'](++_0x2f8816/_0x2e6404*0x64),_0x4e06d2['sender']['send']('fetch-progress',_0x51f2f5,!![]),_0x3a8662&&(_0x4e06d2['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4e06d2,_0xbe5fb4,_0x2ea731,_0x6226e0,_0x4b9297)),new Promise(_0x2829b9=>{_0x2829b9('Scraping\x20finished!');});}catch(_0x507384){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x507384);return handle_fail(0x1);}}catch(_0x5cef05){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x5cef05);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x5cef05);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x348e40,_0x38ea07,_0x18f956,_0x550e4d,_0x484ab7,_0x20bab8,_0x1045d6){let _0x1ace79=0x3,_0xcd1e96=0x0,_0x215087=0x0;try{await setCookiesForUser(_0x38ea07,_0x20bab8['username']);}catch(_0x4fb9e4){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4fb9e4);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4fb9e4);return handle_fail(0x2);}try{console['log'](_0x18f956),await _0x38ea07['goto'](_0x18f956),await delay(0x7d0,0xfa0),await notificationClear(_0x38ea07),await delay(0xc8,0x1f4);const _0x557260=COM_COMMENTS_BOX_BODY_DIV;let _0x3111d9;const _0x454b28=await _0x38ea07['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x162aa0=await _0x38ea07['evaluate'](_0x426dd8=>_0x426dd8['innerHTML'],_0x454b28),_0x324014=String(_0x162aa0)['replace'](/[^0-9]/g,''),_0x26b7be=Number(_0x324014)/0x14;_0x550e4d<=0x0?_0x3111d9=Math['ceil'](_0x26b7be/0x3):_0x3111d9=Math['ceil'](_0x550e4d/0x3);_0x1ace79+=_0x3111d9,_0x215087=Math['round'](++_0xcd1e96/_0x1ace79*0x64),_0x348e40['sender']['send']('fetch-progress',_0x215087,!![]),console['log']('Auto-scrolls:\x20'+_0x3111d9),await scroll(_0x38ea07,_0x557260,_0x3111d9,_0xb8a25e=>{_0x215087=Math['round'](++_0xcd1e96/_0x1ace79*0x64),_0x348e40['sender']['send']('fetch-progress',_0x215087,!![]);});try{const _0x4479ce=COM_REPLY_BUTTON_SPAN;await _0x38ea07['waitForSelector'](_0x4479ce),await delay(0x1f4,0x320);const _0x3250de=await _0x38ea07['$$'](_0x4479ce);console['log'](_0x3250de);let _0x32fcfe=_0x3250de['length'];await delay(0xc8,0x1f4);try{for(let _0x12c654=0x0;_0x12c654<_0x32fcfe;_0x12c654++){_0x3250de[_0x12c654]['click'](),await delay(0x320,0x5dc);}}catch(_0x3b404e){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3b404e);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3b404e);return handle_fail(0x2);}}catch(_0x508bb6){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x18b434=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x38ea07['waitForSelector'](_0x18b434),await delay(0x1f4,0x320),_0x215087=Math['round'](++_0xcd1e96/_0x1ace79*0x64),_0x348e40['sender']['send']('fetch-progress',_0x215087,!![]);const _0x5ee8b0=await _0x38ea07['$$'](_0x18b434);let _0x4910a4=path['join'](__dirname,'/comments.csv');_0x550e4d<=0x0&&(_0x550e4d=_0x5ee8b0['length']);console['log']('fetch_limit:\x20'+_0x550e4d),console['log']('comments_len:\x20'+_0x5ee8b0['length']),_0x550e4d++;try{let _0x13a922=[];for(let _0x5e5bbe=0x1;_0x5e5bbe<_0x5ee8b0['length']&&_0x5e5bbe<_0x550e4d;_0x5e5bbe++){try{_0x13a922['push'](await _0x5ee8b0[_0x5e5bbe]['evaluate'](_0x5ecded=>_0x5ecded['textContent']));const _0x348119=await db['prepare']('INSERT\x20INTO\x20'+_0x484ab7+'\x20(username)\x20VALUES\x20(?)');await _0x348119['run'](await _0x5ee8b0[_0x5e5bbe]['evaluate'](_0x40fed0=>_0x40fed0['textContent']),function(_0x5a294c){_0x5a294c&&console['log']('error\x20in\x20add-user:'+_0x5a294c);}),await _0x348119['finalize']();}catch(_0x515df5){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x5e5bbe+'\x20:\x20'+_0x515df5);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x5e5bbe+'\x20:\x20'+_0x515df5);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x215087=Math['round'](++_0xcd1e96/_0x1ace79*0x64),_0x348e40['sender']['send']('fetch-progress',_0x215087,!![]),_0x348e40['sender']['send']('fetch-progress',0x64,!![]),_0x1045d6&&(_0x348e40['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x348e40,_0x38ea07,_0x20bab8,_0x484ab7,_0x13a922)),_0x348e40['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x6e6ca2=>{_0x6e6ca2('Scraping\x20finished!');});}catch(_0x3360f3){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x3360f3);return handle_fail(0x2);}}catch(_0x37a975){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x37a975);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x37a975);return handle_fail(0x2);}}async function set_clearname_from_username(_0x5462ea,_0x260ab8,_0x2a57b2=null){try{let _0x176bf1,_0x1171bd;const _0x21de71='SELECT\x20username\x20FROM\x20'+_0x260ab8+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x21de71,[],(_0x59d6dc,_0x15889d)=>{_0x59d6dc&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x59d6dc['message']),_0x15889d['length']===0x0&&(_0x1171bd=_0x15889d['length']),_0x176bf1=_0x15889d['map'](_0x25b369=>_0x25b369['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x1171bd);if(_0x1171bd===0x0){console['log']('Leave');return;}const _0x4d0851=await _0x5462ea['waitForSelector'](IG_SEARCH_BUTTON);await _0x4d0851['click'](),await delay(0x4b0,0x7d0);for(let _0x653b3c of _0x176bf1){const _0x5688ec=await _0x5462ea['waitForSelector'](IG_SEARCH_INPUT);await _0x5688ec['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x5462ea['type'](IG_SEARCH_INPUT,_0x653b3c,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x291cd4=0x1;while(_0x291cd4!=0x14){console['log']('Schleife');try{let _0x52cffc=IG_NAME_SPAN_PART1+_0x291cd4+IG_USERNAME_SPAN_PART2;const _0x4cf8ae=await _0x5462ea['waitForSelector'](_0x52cffc),_0x21765e=await _0x5462ea['evaluate'](_0x1c2f3e=>_0x1c2f3e['innerHTML'],_0x4cf8ae);await delay(0xc8,0x1f4);if(_0x21765e==_0x653b3c){let _0x2e97ed=IG_NAME_SPAN_PART1+_0x291cd4+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x2ab226=await _0x5462ea['waitForSelector'](_0x2e97ed);let _0x5afe6e=await _0x5462ea['evaluate'](_0x51d634=>_0x51d634['innerHTML'],_0x2ab226);const _0x224a7a=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x1a79f8=_0x5afe6e['match'](_0x224a7a);_0x1a79f8?_0x5afe6e=_0x1a79f8[0x1]['trim']():_0x5afe6e=_0x5afe6e['trim']();_0x5afe6e['includes']('•')&&(_0x5afe6e=_0x5afe6e['substring'](0x0,_0x5afe6e['indexOf']('•')-0x1));const _0x27c61d='UPDATE\x20'+_0x260ab8+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x27c61d,[_0x5afe6e,_0x21765e],function(_0x38083d){_0x38083d&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x38083d['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x291cd4++;}catch(_0x7126c9){const _0x483399='UPDATE\x20'+_0x260ab8+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x483399,['',_0x653b3c],function(_0x1e69c2){_0x1e69c2&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1e69c2['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x7126c9);break;}}_0x2a57b2&&_0x2a57b2();}await _0x4d0851['click']();}catch(_0x372ff8){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x372ff8);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x341633,_0x4b0c20)=>{const _0x2e22a7='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x2e22a7,[],(_0x10d6d8,_0x53685a)=>{_0x10d6d8?_0x4b0c20(_0x10d6d8):_0x341633(_0x53685a);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x390eed,_0x44f794)=>{const _0x605877='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x605877,[],async(_0xa8afb0,_0x16c7d3)=>{if(_0xa8afb0)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0xa8afb0['message']),_0x44f794({'status':'error','message':_0xa8afb0['message']});else try{const _0x2c669f=await Promise['all'](_0x16c7d3['map'](_0x5a695e=>{return new Promise(_0x110a00=>{if(!_0x5a695e['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x5a695e['campaign_name']),_0x110a00({'campaign_name':_0x5a695e['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x550111='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x5a695e['list_id'],_0x350161='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x5a695e['list_id']+'\x22';db['get'](_0x550111,[],(_0x406d09,_0x503e3f)=>{_0x406d09?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x5a695e['campaign_name']+':',_0x406d09['message']),_0x110a00({'campaign_name':_0x5a695e['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x350161,[],(_0x33971d,_0x7ad928)=>{_0x33971d?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x5a695e['campaign_name']+':',_0x33971d['message']),_0x110a00({'campaign_name':_0x5a695e['campaign_name'],'lead_count':_0x503e3f?_0x503e3f['lead_count']:0x0,'contacted_count':'N/A'})):_0x110a00({'campaign_name':_0x5a695e['campaign_name'],'lead_count':_0x503e3f?_0x503e3f['lead_count']:0x0,'contacted_count':_0x7ad928?_0x7ad928['contacted_count']:0x0});});});});}));_0x390eed({'status':'success','campaigns':_0x2c669f});}catch(_0x441af5){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x441af5),_0x44f794({'status':'error','message':_0x441af5['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x312bc5,_0x4efcdf)=>{return new Promise((_0x3af018,_0x19f73b)=>{const _0x44b23a='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x44b23a,[_0x4efcdf],(_0x2f15b7,_0x220e50)=>{_0x2f15b7?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x2f15b7),_0x19f73b(_0x2f15b7)):(console['log']('ROWS'),console['log'](_0x220e50),debugDatabaseContents(),_0x3af018(_0x220e50));});});});const showTableContents=_0x21355a=>{return new Promise((_0x56742d,_0x2b2531)=>{const _0x5d8397='SELECT\x20*\x20FROM\x20'+_0x21355a+';';campaignDB['all'](_0x5d8397,(_0x4a90e4,_0x4d0305)=>{_0x4a90e4?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x21355a+':',_0x4a90e4),_0x2b2531(_0x4a90e4)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x21355a+':',_0x4d0305),_0x56742d({'status':'success','message':_0x4d0305}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x3d2d77){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x3d2d77);}}ipcMain['handle']('create-campaign',async(_0x2eced3,_0x867925)=>{return new Promise((_0x42b16e,_0x2a0399)=>{const _0x19206d='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x19206d,[String(_0x867925)],function(_0x37260e){_0x37260e?_0x2a0399(_0x37260e):_0x42b16e({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x329874,_0x1c2e80)=>{return new Promise((_0x3b550e,_0x586943)=>{const _0x13e2c9='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x13e2c9,[_0x1c2e80],function(_0xf353d4){_0xf353d4?_0x586943(_0xf353d4):_0x3b550e({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x42a099,_0xbcd0a6,_0x17e179,_0x25c61c,_0x450eef,_0x1bf02f,_0x26d910,_0x1802ef)=>{const _0x53ead0=await createMessageID(_0x450eef);return new Promise((_0x197b62,_0x32fdbc)=>{if(!_0xbcd0a6||!_0x17e179||!_0x25c61c||!_0x53ead0||!_0x1bf02f)return _0x32fdbc({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x53ead0);const _0x58fd57='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x58fd57,[_0x17e179,_0x25c61c,_0x53ead0,_0x1bf02f,_0x26d910,_0x1802ef,_0xbcd0a6],function(_0x5a3767){if(_0x5a3767)_0x32fdbc({'status':'error','message':_0x5a3767['message']});else this['changes']===0x0?_0x32fdbc({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x197b62({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x38cb3f,_0x4fc4e2,_0x56666d,_0x161c3e,_0x538169)=>{return new Promise((_0x137cb1,_0x2060a9)=>{const _0x4f77f2='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4f77f2,[_0x4fc4e2,_0x56666d,_0x161c3e,_0x538169],function(_0x225453){return _0x225453?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x225453['message']),_0x2060a9('insert-dm-response',{'success':![],'message':_0x225453['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x137cb1('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x261aa7=>{return new Promise((_0x212638,_0x491369)=>{const _0x1965bb='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x1965bb,[_0x261aa7],(_0x3ccb07,_0x2cdc0)=>{if(_0x3ccb07)_0x491369({'status':'error','message':_0x3ccb07['message']});else{if(_0x2cdc0)_0x212638(_0x2cdc0['message_id']);else{const _0x463dff='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x463dff,[_0x261aa7],function(_0x4a1d27){_0x4a1d27?_0x491369({'status':'error','message':_0x4a1d27['message']}):_0x212638(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x5b1607,_0x68bbb)=>{return new Promise((_0xfe532e,_0xf0d141)=>{const _0x563c34='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x68bbb;db['get'](_0x563c34,(_0xfed499,_0x3409a9)=>{_0xfed499?_0xf0d141({'status':'error','message':_0xfed499['message']}):_0xfe532e({'status':'success','count':_0x3409a9['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x2cb20e,_0xc0ce83){try{const _0x424468=await new Promise((_0x8d68cd,_0x27ff33)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0xc0ce83],(_0x10d844,_0x4d93f9)=>{if(_0x10d844)_0x27ff33(_0x10d844);else{if(_0x4d93f9['length']>0x0){let _0x488ec5=JSON['parse'](_0x4d93f9[0x0]['cookie']);console['log'](_0x488ec5),_0x8d68cd(_0x488ec5);}else _0x27ff33(new Error('User\x20with\x20username\x20'+_0xc0ce83+'\x20does\x20not\x20exist.'));}});});await _0x2cb20e['setCookie'](..._0x424468),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x44b327){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x44b327);}}async function saveCookiesForUser(_0x34b36e,_0x181d89){try{const _0xbfaba3=await _0x34b36e['cookies']();if(!_0xbfaba3||_0xbfaba3['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x181d89);const _0x58ccfd=JSON['stringify'](_0xbfaba3);if(_0x58ccfd['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x181d89);return new Promise((_0x46f0de,_0x2cf21d)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x181d89],(_0x51c669,_0x942b83)=>{if(_0x51c669)return console['error']('Error\x20checking\x20user\x20existence:',_0x51c669),_0x2cf21d(_0x51c669);if(_0x942b83){const _0x5b336e=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x5b336e['run'](_0x58ccfd,_0x181d89,function(_0x16d038){return _0x16d038?(console['error']('Error\x20updating\x20cookies:',_0x16d038),_0x2cf21d(_0x16d038)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x181d89),_0x46f0de());});}else{const _0xdfba2f=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0xdfba2f['run'](_0x181d89,_0x58ccfd,function(_0x3d05c6){return _0x3d05c6?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x3d05c6),_0x2cf21d(_0x3d05c6)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x181d89),_0x46f0de());});}});});}catch(_0x39fd60){console['error']('Error\x20fetching\x20cookies:',_0x39fd60);throw _0x39fd60;}}async function createUserIfNotExists(_0x1cfd1a){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x1cfd1a],(_0x2e12f7,_0x4c674f)=>{if(_0x2e12f7){console['error']('Error\x20checking\x20user\x20existence:',_0x2e12f7);throw _0x2e12f7;}else{if(!_0x4c674f){const _0x274911=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x274911['run'](_0x1cfd1a,function(_0x37636d){_0x37636d?console['error']('Error\x20inserting\x20new\x20user:',_0x37636d):console['log']('New\x20user\x20created:',_0x1cfd1a);});}else console['log']('User\x20already\x20exists:',_0x1cfd1a);}});}catch(_0x582e2c){console['error']('Error\x20creating\x20user:',_0x582e2c);throw _0x582e2c;}}ipcMain['handle']('create-relation',async(_0x38d380,_0x5d8078)=>{return new Promise((_0x455547,_0x448c87)=>{const _0x1bd6ea='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x5d8078+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x1bd6ea,function(_0x33fa32){_0x33fa32?_0x448c87(_0x33fa32):_0x455547({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x32e2d9,_0x2a001d)=>{return console['log']('droping\x20table'+_0x2a001d),new Promise((_0x458f0e,_0xb0d37b)=>{const _0x3571c1='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x2a001d;console['log']('droping\x20table'+_0x2a001d),db['run'](_0x3571c1,function(_0x298094){_0x298094?_0xb0d37b(_0x298094):_0x458f0e({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x2ec405=>{return new Promise((_0x3e307a,_0x3ad1ee)=>{const _0x22035c='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x22035c,[],(_0x4f1c9d,_0x1bd4ed)=>{_0x4f1c9d?_0x3ad1ee(_0x4f1c9d):_0x3e307a(_0x1bd4ed['map'](_0x670ec2=>_0x670ec2['name']));});});}),ipcMain['handle']('add-user',async(_0x122bbd,_0x310754,_0x2c88c5)=>{return new Promise(_0x36f6d5=>{const _0x4ae2b8=db['prepare']('INSERT\x20INTO\x20'+_0x2c88c5+'\x20(username)\x20VALUES\x20(?)');_0x4ae2b8['run'](_0x310754,function(_0x232396){_0x232396?console['log']('error\x20in\x20add-user:'+_0x232396):_0x36f6d5({'status':'success','id':this['lastID']});}),_0x4ae2b8['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x11904f,_0x4952aa)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x2acac6,_0x4cc555)=>{if(_0x2acac6)_0x4952aa(_0x2acac6);else{_0x11904f({'status':'success','users':_0x4cc555});for(_0x4cc555 of _0x4cc555){console['log'](_0x4cc555['username']);}}});});}),ipcMain['handle']('get-data',async(_0x19ee6a,_0x5ba56e)=>{return new Promise((_0x121e23,_0x45858a)=>{const _0x2877a4='SELECT\x20*\x20FROM\x20'+_0x5ba56e;console['log'](_0x2877a4),db['all'](_0x2877a4,[],(_0x47d4aa,_0x516d1f)=>{_0x47d4aa?_0x45858a(_0x47d4aa):_0x121e23(_0x516d1f);});});}),ipcMain['handle']('get-accounts',async _0x338142=>{return new Promise((_0x5d6d57,_0x22df80)=>{const _0x48346f='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x48346f),igaccountsDB['all'](_0x48346f,[],(_0x4412cc,_0x914a11)=>{_0x4412cc?_0x22df80(_0x4412cc):_0x5d6d57(_0x914a11);});});}),ipcMain['handle']('get-targets',async(_0x5743dd,_0x5a0206)=>{return getTargetProfiles(_0x5a0206);}),ipcMain['handle']('delete-user',async(_0x51b77b,_0x41f093,_0x1835b6)=>{return new Promise((_0x4e5836,_0x56d498)=>{const _0x3935ad=db['prepare']('DELETE\x20FROM\x20'+_0x1835b6+'\x20WHERE\x20username\x20=\x20?');_0x3935ad['run'](_0x41f093,function(_0xa15c8d){_0xa15c8d?_0x56d498(_0xa15c8d):_0x4e5836({'status':'success','changes':this['changes']});}),_0x3935ad['finalize']();});}),ipcMain['handle']('delete-account',async(_0x467315,_0x281a8c)=>{const _0x2e886e=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x2e886e['run'](_0x281a8c,function(_0x542f3d){_0x542f3d&&console['log'](_0x542f3d);}),_0x2e886e['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x5c1b61,_0x1de38f)=>{const _0x29208b='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x29208b,[],(_0x1a5e9a,_0x33eeae)=>{_0x1a5e9a?_0x1de38f({'status':'error','message':_0x1a5e9a['message']}):_0x5c1b61({'status':'success','contactedCount':_0x33eeae['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0xd5d5fb,_0x20d27a)=>{const _0x92faa4='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x92faa4,[],(_0x1b59db,_0x3051ef)=>{_0x1b59db?_0x20d27a({'status':'error','message':_0x1b59db['message']}):_0xd5d5fb({'status':'success','contactedCount':_0x3051ef['contactedCount']});});});});function exportDatabase(_0x1a68a7){return new Promise((_0x6ecb11,_0x43b0d0)=>{const _0x2e8970='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x1a68a7+'\x0a\x20\x20\x20\x20';db['all'](_0x2e8970,[],async(_0x1ceb7c,_0x3847b2)=>{if(_0x1ceb7c){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x1ceb7c['message']),_0x43b0d0(_0x1ceb7c);return;}if(!_0x3847b2||_0x3847b2['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x6ecb11();return;}const _0x16e5a8=XLSX['utils']['json_to_sheet'](_0x3847b2),_0x2fece8=XLSX['utils']['sheet_to_csv'](_0x16e5a8);try{const {canceled:_0x1cb330,filePath:_0x23dec3}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x1a68a7+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x1cb330||!_0x23dec3){console['log']('Speichern\x20abgebrochen.'),_0x6ecb11();return;}fs['writeFile'](_0x23dec3,_0x2fece8,'utf8',_0x47bae9=>{_0x47bae9?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x47bae9['message']),_0x43b0d0(_0x47bae9)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x23dec3),_0x6ecb11());});}catch(_0x2bb990){console['error']('Fehler\x20im\x20Speicherdialog:',_0x2bb990),_0x43b0d0(_0x2bb990);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x4492e4,_0x21f426)=>{shell['openExternal'](_0x21f426);});