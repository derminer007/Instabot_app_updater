const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x2fa5d7,_0x3166e9){try{const _0x58f7ac=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x3166e9},'body':JSON['stringify']({'clearname':_0x2fa5d7})});if(!_0x58f7ac['ok']){const _0x5e1ce0=await _0x58f7ac['text']();throw new Error(_0x58f7ac['status']+':\x20'+_0x5e1ce0);}const _0x171efe=await _0x58f7ac['json']();return _0x171efe;}catch(_0x402922){console['error']('Error\x20in\x20extractFirstName:',_0x402922);throw _0x402922;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x4a2fa1=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x4a2fa1['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x4a2fa1['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x2aa99d){var _0x4a11af=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xc12600){console['log']('window\x20id:'+_0xc12600['id']),_0xc12600['id']>0x1&&(_0x4a11af=!![]);}),console['log']('child\x20opened\x20='+_0x4a11af);if(!_0x4a11af){const _0x9fbc0f=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x9fbc0f['loadFile'](_0x2aa99d['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x9bab45=require('fs'),_0x581c78=path['join'](app['getPath']('userData'),'data'),_0x5c8032=['campaign.db','crm.db','igaccounts.db'],_0x4dd196=[];try{_0x9bab45['mkdirSync'](_0x581c78,{'recursive':!![]});for(const _0xf77ff7 of _0x5c8032){const _0x156a34=path['join'](process['resourcesPath'],'app','build','data',_0xf77ff7),_0x4deb78=path['join'](_0x581c78,_0xf77ff7);!_0x9bab45['existsSync'](_0x4deb78)?(_0x9bab45['copyFileSync'](_0x156a34,_0x4deb78),console['log']('[InitDB]\x20Kopiert\x20'+_0xf77ff7+'\x20nach:\x20'+_0x4deb78)):console['log']('[InitDB]\x20'+_0xf77ff7+'\x20existiert\x20bereits:\x20'+_0x4deb78),_0x4dd196['push'](_0x4deb78);}}catch(_0x2de96a){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x2de96a);}return _0x4dd196;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x4fc233,AppUpdate:_0x124dfc}=require('electron-updater');_0x4fc233['autoDownload']=![],_0x4fc233['autoInstallOnAppQuit']=!![],_0x4fc233['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x4fc233['on']('update-available',_0x529749=>{console['log']('Update\x20verfügbar:',_0x529749),_0x4fc233['downloadUpdate']();}),_0x4fc233['on']('update-downloaded',_0x10281a=>{console['log']('Update\x20heruntergeladen:',_0x10281a),_0x4fc233['quitAndInstall']();}),_0x4fc233['on']('error',_0x24403f=>{console['error']('Fehler\x20beim\x20Updaten:',_0x24403f);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x342eb3,AppUpdate:_0x3dfabe}=require('electron-updater');_0x342eb3['autoDownload']=![],_0x342eb3['autoInstallOnAppQuit']=!![],_0x342eb3['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x342eb3['on']('update-available',_0x4df2bf=>{console['log']('Update\x20verfügbar:',_0x4df2bf),_0x342eb3['downloadUpdate']();}),_0x342eb3['on']('update-downloaded',_0x1eafd5=>{console['log']('Update\x20heruntergeladen:',_0x1eafd5),console['log']('Neustarten\x20zum\x20Updaten');}),_0x342eb3['on']('error',_0x221359=>{console['error']('Fehler\x20beim\x20Updaten:',_0x221359);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0xee0514='',_0x36d49b=null;if(process['platform']==='darwin')_0xee0514=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0xee0514=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0xee0514}),_0x36d49b=await browser_login['newPage'](),_0x36d49b['setDefaultNavigationTimeout'](0x1d4c),_0x36d49b['setDefaultTimeout'](0x1d4c),await _0x36d49b['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x36d49b;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x4ab9e7=0x1,_0x1bf442=0x0){let _0x31fdf2='',_0x76bab6=null;const _0x53f28d=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x31fdf2=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x31fdf2=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x4ab9e7===0x0&&!pageStack[_0x1bf442])return browser=await puppeteer['launch']({'headless':_0x53f28d,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x31fdf2}),_0x76bab6=await browser['newPage'](),_0x76bab6['setDefaultNavigationTimeout'](0x1d4c),_0x76bab6['setDefaultTimeout'](0x1d4c),await _0x76bab6['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1bf442]=_0x76bab6,_0x76bab6;return(browser===null||pageStack[_0x1bf442]===null||pageStack[_0x1bf442]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x53f28d,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x31fdf2})),(pageStack[_0x1bf442]===null||pageStack[_0x1bf442]['isClosed']())&&(_0x76bab6=await browser['newPage'](),_0x76bab6['setDefaultNavigationTimeout'](0x1d4c),_0x76bab6['setDefaultTimeout'](0x1d4c),await _0x76bab6['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1bf442]=_0x76bab6),pageStack[_0x1bf442];}ipcMain['on']('login',async(_0x1d2073,_0x37ae34)=>{const _0xe0df26=await getBrowserPageLogin();await _0xe0df26['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0xe0df26,_0x37ae34),ipcMain['on']('setLoginCookies',async(_0x26d64a,_0x170d72)=>{try{await set_login_cookies(_0xe0df26,_0x170d72);}catch(_0x4acee7){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4acee7);}});}),ipcMain['on']('export-relation',async(_0x41aa3d,_0x5ad0bb)=>{try{await exportDatabase(_0x5ad0bb),_0x41aa3d['reply']('export-relation-response',{'success':!![]});}catch(_0x18e8f7){console['error'](_0x18e8f7),_0x41aa3d['reply']('export-relation-response',{'success':![],'message':_0x18e8f7['message']});}}),ipcMain['handle']('sendMessage',async(_0x17b7bb,_0x23933c,_0x23c613,_0x557318,_0x66638f,_0x5f55ff,_0x50349d,_0x2da502,_0x3394bc,_0x25114d,_0x2570ee)=>{isStopping=![];let _0x17821e=null;return _0x50349d?_0x17821e=await getBrowserPage(_0x66638f,_0x2da502):_0x17821e=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x23933c),send_message(_0x17821e,_0x23933c,_0x23c613,_0x557318,_0x66638f,_0x5f55ff,_0x3394bc,_0x25114d,_0x2570ee);}),ipcMain['handle']('stop-action',async(_0x4c189f,_0xda2e71)=>{isStopping=!![];const _0x2817e5=await getBrowserPage(0x1,_0xda2e71);await _0x2817e5['close']();}),ipcMain['handle']('fetch_followers',async(_0x38cc7d,_0x482f53,_0x259751,_0x1caa50,_0x58fdb8,_0x232992)=>{isStopping=![];const _0x754cf7=await getBrowserPage();return fetch_followers_from_account(_0x38cc7d,_0x754cf7,_0x482f53,_0x259751,_0x1caa50,_0x58fdb8,_0x232992);}),ipcMain['handle']('get-account-details',async(_0x1b3f1f,_0x3e92a9,_0x27ca22,_0x1dc593)=>{isStopping=![];const _0x3e96c0=await getBrowserPage();return fetch_account_details(_0x3e96c0,_0x3e92a9,_0x27ca22,_0x1dc593);}),ipcMain['handle']('fetch_likes',async(_0x907223,_0x263174,_0x13cd12,_0x3bde42,_0x1f2457,_0x59ae00)=>{isStopping=![];const _0x1ae687=await getBrowserPage();return fetch_likers_from_post(_0x907223,_0x1ae687,_0x263174,_0x13cd12,_0x3bde42,_0x1f2457,_0x59ae00);}),ipcMain['handle']('fetch_comments',async(_0x4cc1fa,_0x14050a,_0x19cc6e,_0xabdda0,_0x1525cf,_0x410e97)=>{isStopping=![];const _0x10221f=await getBrowserPage();return fetch_comments_from_post(_0x4cc1fa,_0x10221f,_0x14050a,_0x19cc6e,_0xabdda0,_0x1525cf,_0x410e97);});async function updateAppSilent(){const {spawn:_0xa08751}=require('child_process'),_0x4ebe96=require('path'),_0x3af312=require('electron-log');return _0x3af312['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x13961a,_0x3f1907)=>{const {updateElectronApp:_0x4a9e12,UpdateSourceType:_0x1937c5}=require('update-electron-app');_0x4a9e12({'updateSource':{'type':_0x1937c5['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x3af312}),_0x13961a('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x57028c,_0x59f671)=>{doFullElectronUpdateSilent(),_0x57028c('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x3a8076}=require('child_process'),_0x51a0be=require('path'),_0x13c84f=require('electron-log');return _0x13c84f['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2b653a,_0x1ed11f)=>{const {updateElectronApp:_0x27bb48,UpdateSourceType:_0x1603d4}=require('update-electron-app');_0x27bb48({'updateSource':{'type':_0x1603d4['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x13c84f}),_0x2b653a('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0xe43638,_0x175cf9)=>{doFullElectronUpdate(),_0xe43638('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x547cb3,_0x53eac)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x547cb3('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0xb81afa=path['join'](__dirname,'mac-updater-intern.sh'),_0x4e7b27=spawn('/bin/bash',[_0xb81afa],{'detached':!![],'stdio':'ignore'});_0x4e7b27['unref'](),setTimeout(()=>{_0x547cb3('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x53eac(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x430753=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x522dac,_0x4c5225)=>{console['log']('Update\x20Silent:\x20'+_0x4c5225);if(_0x4c5225){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x3a62c1,_0xd916df){return Math['random']()*(_0xd916df-_0x3a62c1+0x1)+_0x3a62c1;}function delay(_0x32cdd7,_0x5a6070){let _0x4bfcba=getRnd(_0x32cdd7,_0x5a6070);return new Promise(function(_0x2ca1ee){setTimeout(_0x2ca1ee,_0x4bfcba);});}async function scroll(_0x4aa996,_0x3b6d78,_0xcf517e=0x2,_0xfedf04){const _0x1ee1ac=await _0x4aa996['waitForSelector'](_0x3b6d78);for(let _0x5ad1ca=0x0;_0x5ad1ca<_0xcf517e;_0x5ad1ca++){console['log']('Scrolling\x20'+_0x5ad1ca),await _0x4aa996['evaluate'](_0xf44950=>{const _0x132bfa=document['querySelector'](_0xf44950);_0x132bfa&&_0x132bfa['scrollBy'](0x0,0x190);},_0x3b6d78),await delay(0x320,0x5dc),_0xfedf04();}}async function saveCookies(_0x37fa90){let _0x39047d=await _0x37fa90['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x39047d,null,0x2));}async function notificationClear(_0x1cca39){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x1cca39['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x1cca39['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x264d5a){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x264d5a);}}async function getTargetProfiles(_0x21b913){return new Promise((_0x3c692d,_0x54a1d5)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x21b913,(_0x43dd87,_0x475c0c)=>{_0x43dd87?_0x54a1d5(_0x43dd87):_0x3c692d(_0x475c0c);});});}async function login_legacy(_0x323a18,_0x287a39,_0x91cb7d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x323a18,_0x287a39),await createUserIfNotExists(_0x287a39,_0x91cb7d);}catch(_0xc86625){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xc86625);}try{await _0x323a18['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x323a18['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x323a18['click']('button._a9--._ap36._a9_0');}catch(_0x58485a){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x323a18['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x323a18['type']('input[name=\x27username\x27]',_0x287a39,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x323a18['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x323a18['type']('input[name=\x27password\x27]',_0x91cb7d,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x323a18['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x323a18['click']('button[type=\x27submit\x27]');}catch(_0x5a9663){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x323a18),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x323a18,_0x287a39);}catch(_0x112be2){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x112be2);}}catch(_0x31f4db){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x31f4db);}}async function login(_0x15ca9f,_0xc8e471){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x15ca9f,_0xc8e471),await createUserIfNotExists(_0xc8e471);}catch(_0x580286){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x580286);}try{await _0x15ca9f['goto']('https://www.instagram.com/accounts/login/');}catch(_0x1dc187){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1dc187);}}async function set_login_cookies(_0x1099a4,_0x436238){try{await saveCookiesForUser(_0x1099a4,_0x436238);}catch(_0x49136c){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x49136c);}}async function waitForXPath(_0x4fdf56,_0x39f656,_0xc9cb63={}){return await _0x4fdf56['waitForFunction'](_0x18521b=>{return document['evaluate'](_0x18521b,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0xc9cb63,_0x39f656),_0x4fdf56['evaluateHandle'](_0x4f2701=>document['evaluate'](_0x4f2701,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x39f656);}async function send_message(_0x3be1fa,_0x403d04,_0x1b7a88,_0x1f01c1,_0x1b1762,_0x527330,_0x451125,_0x5b211e,_0x47254d){return new Promise(async(_0x2793b3,_0xfffc23)=>{_0x527330=_0x527330['split'](';'),console['log'](_0x527330[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x1b1762);try{await setCookiesForUser(_0x3be1fa,_0x527330[0x0]);}catch(_0xb08c9c){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0xb08c9c),_0xfffc23({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0xb08c9c});return;}try{await _0x3be1fa['goto']('https://www.instagram.com/'+_0x403d04+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x3be1fa);}catch(_0x471fed){_0xfffc23({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x471fed});return;}console['log']('UserSkip:\x20'+_0x451125);if(_0x451125==0x1)try{const _0x520df1=await _0x3be1fa['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4b39ab=>_0x4b39ab['textContent']['trim']());console['log'](_0x520df1);if(_0x520df1==='Following'||_0x520df1==='Folge\x20ich')return _0x2793b3({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x483ed5){}try{await _0x3be1fa['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x3be1fa['click'](K_DIRECT_MSG_BUTTON);}catch(_0x2de432){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x2de432);try{await _0x3be1fa['waitForSelector'](K_OPTIONS_BUTTON),await _0x3be1fa['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x11c303=await waitForXPath(_0x3be1fa,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x11c303['click']();}catch(_0x5ed57c){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x5ed57c),_0x2793b3({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x3be1fa);}catch(_0x310946){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x310946);}try{const _0x5da385=await _0x3be1fa['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x5b211e){const _0x4c6bf0=await _0x3be1fa['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x4c6bf0)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x403d04),_0x2793b3({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x76cfe9=await _0x3be1fa['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x76cfe9),_0x1f01c1=_0x1f01c1['replace']('{USERNAME}',_0x403d04);let _0x58bbde;if(_0x1f01c1['includes']('{NAME}')||_0x1f01c1['includes']('{name}'))try{const _0x507dab=await extractFirstName(_0x76cfe9,_0x47254d);console['log']('Response\x20Clearname\x20valid:\x20'+_0x507dab['valid']),_0x507dab['valid']?(_0x1f01c1=_0x1f01c1['replaceAll'](/{NAME}|{name}/g,_0x507dab['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x507dab['name']),_0x58bbde=_0x507dab['name']):(_0x1f01c1=_0x1f01c1['replaceAll'](/ ?({NAME}|{name})/g,''),_0x58bbde='UNKNOWN_NAME');}catch(_0x5daa7a){console['log'](_0x5daa7a['message']),_0x58bbde=_0x5daa7a['message'];let _0x1efd6a=_0x76cfe9['replace'](/[^\p{L}\s]/gu,''),_0x33191f=_0x1efd6a['split']('\x20')[0x0];_0x33191f['length']>0x2&&!_0x33191f['includes']('Instagram')?_0x1f01c1=_0x1f01c1['replaceAll'](/{NAME}|{name}/g,_0x33191f):_0x1f01c1=_0x1f01c1['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x5da385['type'](_0x1f01c1,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x1f9297=await _0x3be1fa['waitForSelector'](K_SEND_MSG_BUTTON);await _0x1f9297['click'](),await delay(0x320,0x3e8),_0x2793b3({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x76cfe9,'extracted_clearname':_0x58bbde});}catch(_0x30bc55){try{await _0x3be1fa['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x4aa6a2=await _0x3be1fa['evaluate'](_0x57a5c9=>{return document['querySelector'](_0x57a5c9)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x4aa6a2),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x30bc55),_0x2793b3({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x403d04+'\x20überspringen.'});}catch(_0xdb62fb){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0xdb62fb),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x403d04+'\x20:\x20'+_0xdb62fb),_0x2793b3({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x403d04+'\x20:\x20'+_0xdb62fb});}}});}function handle_fail(_0x31ca34){if(isStopping)return new Promise(_0x32ae1d=>{_0x32ae1d('Scraper\x20gestoppt.');});else{let _0x2bc403='';switch(_0x31ca34){case 0x0:_0x2bc403='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x2bc403='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x2bc403='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x2bc403='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x3e0173,_0xca0a74)=>{_0xca0a74(_0x2bc403);});}}async function fetch_account_details(_0x95c761,_0xba33c,_0x5ef63c,_0x22554a){try{await setCookiesForUser(_0x95c761,_0x5ef63c['username']);}catch(_0x14f943){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x14f943);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x14f943);return handle_fail(0x0);}_0x95c761['setDefaultNavigationTimeout'](0x7530),await _0x95c761['goto']('https://www.instagram.com/'+_0xba33c+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x95c761);const _0x3f4851=await _0x95c761['evaluate'](()=>{const _0x443fed=document['querySelector']('meta[property=\x22og:image\x22]');return _0x443fed?_0x443fed['getAttribute']('content'):null;});await _0x95c761['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x48b6f3=await _0x95c761['evaluate'](()=>{const _0x1a2abd=document['querySelector']('meta[name=\x22description\x22]');if(!_0x1a2abd)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x53243c=_0x1a2abd['getAttribute']('content');if(!_0x53243c)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x53243c);const _0x1ec175=/\s*[–-]\s*/,_0x25c90a=_0x53243c['split'](_0x1ec175);if(_0x25c90a['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x22ba01=_0x25c90a[0x0],_0xfba445=_0x25c90a[0x1],_0x3faaf0=_0x22ba01['split'](',\x20');if(_0x3faaf0['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x1d55ae=_0x3faaf0[0x0]['split']('\x20')[0x0],_0xc3a704=_0x3faaf0[0x1]['split']('\x20')[0x0],_0x31550c=_0x3faaf0[0x2]['split']('\x20')[0x0];let _0x217e37='',_0x3125e9='';const _0x39ad34='\x20on\x20Instagram:\x20',_0x39f4fa=_0xfba445['split'](_0x39ad34);return _0x217e37=_0x39f4fa[0x0]['trim'](),_0x217e37=_0x217e37['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x39f4fa['length']>0x1&&(_0x3125e9=_0x39f4fa[0x1]['trim'](),_0x3125e9['startsWith']('\x22')&&_0x3125e9['endsWith']('\x22')&&(_0x3125e9=_0x3125e9['substring'](0x1,_0x3125e9['length']-0x1)['trim']()),_0x3125e9=_0x3125e9['replace'](/&quot;/g,'')['trim']()),{'followers':_0x1d55ae,'following':_0xc3a704,'posts':_0x31550c,'nameText':_0x217e37,'bio':_0x3125e9};});console['log']('Extracted\x20profile\x20data:',_0x48b6f3);const _0x26ab6c=_0x48b6f3['nameText'],_0x961808=_0x3f4851,_0x419b88=_0x48b6f3['bio'],_0xbd97=_0x48b6f3['followers'],_0x1a01a1=_0x48b6f3['following'],_0x43bbb6=_0x48b6f3['posts'],_0x1aace4=![],_0x3cce9f=![],_0x407e60=![],_0x547e96='\x0a\x20\x20INSERT\x20INTO\x20'+_0x22554a+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x547e96,[_0xba33c,_0x26ab6c,_0x961808,_0x419b88,_0xbd97,_0x1a01a1,_0x43bbb6,_0x1aace4,_0x3cce9f,_0x407e60],function(_0x124d1f){_0x124d1f?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x124d1f['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4c3029,_0x3599d5,_0x49a861,_0x135a03,_0x1ac391,_0x3c3acc,_0x3bad78){let _0x16fab4=0x4,_0x31aa02=0x0,_0x2b7e39=0x0;try{await setCookiesForUser(_0x3599d5,_0x3c3acc['username']);}catch(_0x20fe79){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x20fe79);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x20fe79);return handle_fail(0x0);}let _0x4d92d7=0x0;try{await _0x3599d5['goto']('https://www.instagram.com/'+_0x49a861+'/'),await notificationClear(_0x3599d5);try{if(_0x135a03<=0x0){const _0x439b04=await _0x3599d5['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x5d2604=await _0x3599d5['evaluate'](_0x5e1d4c=>_0x5e1d4c['innerHTML'],_0x439b04);_0x4d92d7=Math['ceil'](_0x5d2604/0x4);}else _0x4d92d7=Math['ceil'](_0x135a03/0x4);_0x16fab4+=_0x4d92d7,_0x2b7e39=Math['round'](++_0x31aa02/_0x16fab4*0x64),_0x4c3029['sender']['send']('fetch-progress',_0x2b7e39,!![]);let _0x19ee0a=await _0x3599d5['waitForSelector']('a[href=\x22/'+_0x49a861+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x19ee0a['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x49a861+'\x20gesichtet'),_0x2b7e39=Math['round'](++_0x31aa02/_0x16fab4*0x64),_0x4c3029['sender']['send']('fetch-progress',_0x2b7e39,!![]);}catch(_0x20064a){console['log']('Follower\x20Liste\x20von\x20'+_0x49a861+'\x20nicht\x20gefunden:'+_0x20064a);throw new Error('Follower\x20Liste\x20von\x20'+_0x49a861+'\x20nicht\x20gefunden:'+_0x20064a);return handle_fail(0x0);}}catch(_0x3ae92c){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x3ae92c);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x3ae92c);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x4d92d7),await scroll(_0x3599d5,FOLLOWER_FENSTER,_0x4d92d7,_0x403dab=>{_0x2b7e39=Math['round'](++_0x31aa02/_0x16fab4*0x64),_0x4c3029['sender']['send']('fetch-progress',_0x2b7e39,!![]);}),await _0x3599d5['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x5bbf88=await _0x3599d5['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x50d54e=await _0x3599d5['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x2b7e39=Math['round'](++_0x31aa02/_0x16fab4*0x64),_0x4c3029['sender']['send']('fetch-progress',_0x2b7e39,!![]);_0x135a03<=0x0&&(_0x135a03=_0x5bbf88['length']);let _0x49d150=[];for(let _0x5966ec=0x0;_0x5966ec<_0x5bbf88['length']&&_0x5966ec<_0x135a03;_0x5966ec++){_0x49d150['push'](await _0x5bbf88[_0x5966ec]['evaluate'](_0x347d4b=>_0x347d4b['textContent']));const _0x3702f8='INSERT\x20INTO\x20'+_0x1ac391+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3702f8,[await _0x5bbf88[_0x5966ec]['evaluate'](_0x177362=>_0x177362['textContent']),await _0x50d54e[_0x5966ec]['evaluate'](_0x4b2036=>_0x4b2036['textContent'])],function(_0x360588){_0x360588?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x1ac391+'\x27:',_0x360588['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x2b7e39=Math['round'](++_0x31aa02/_0x16fab4*0x64),_0x4c3029['sender']['send']('fetch-progress',_0x2b7e39,!![]),_0x3bad78&&(_0x4c3029['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4c3029,_0x3599d5,_0x3c3acc,_0x1ac391,_0x49d150)),new Promise(_0x2c941c=>{_0x2c941c('Scraping\x20finished!');});}catch(_0x2c3286){if(_0x3bad78)throw new Error(_0x2c3286);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x49a861+'\x20nicht\x20gefunden:\x20'+_0x2c3286);return handle_fail(0x0);}}async function fetch_details_from_list(_0x25242b,_0x3cd299,_0x1c6849,_0x552fb0,_0x53a021){let _0x38861d=0x0,_0x2ea370=0x0;for(let _0xf42ef8=0x0;_0xf42ef8<_0x53a021['length'];_0xf42ef8++){console['log']('Processing\x20profile:',_0x53a021[_0xf42ef8]);try{await fetch_account_details(_0x3cd299,_0x53a021[_0xf42ef8],_0x1c6849,_0x552fb0);}catch(_0x4f7b2b){console['error']('Detailed\x20Scraping\x20von:\x20',_0x53a021[_0xf42ef8],_0x4f7b2b);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x53a021[_0xf42ef8]+'\x20'+_0x4f7b2b);}_0x2ea370=Math['round'](++_0x38861d/_0x53a021['length']*0x64),_0x25242b['sender']['send']('fetch-progress',_0x2ea370,!![],!![]);}}async function fetch_likers_from_post(_0x13820c,_0x17112c,_0x2aa495,_0x2e831e,_0x32fdbc,_0x4caa41,_0x3b7663){let _0x379bbe=0x4,_0x112ba4=0x0,_0x3695cc=0x0;try{await setCookiesForUser(_0x17112c,_0x4caa41['username']);}catch(_0x2e4497){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2e4497);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2e4497);return handle_fail(0x1);return;}_0x3695cc=Math['round'](++_0x112ba4/_0x379bbe*0x64),_0x13820c['sender']['send']('fetch-progress',_0x3695cc,!![]);try{let _0x575423=_0x2aa495['substring'](0x0,_0x2aa495['lastIndexOf']('/')),_0x30cef4=_0x575423+'/liked_by';console['log'](_0x30cef4),await _0x17112c['goto'](_0x30cef4),await delay(0x7d0,0xfa0),await notificationClear(_0x17112c),await delay(0xc8,0x1f4),_0x3695cc=Math['round'](++_0x112ba4/_0x379bbe*0x64),_0x13820c['sender']['send']('fetch-progress',_0x3695cc,!![]),await _0x17112c['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x2d025f=await _0x17112c['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x34cbf7=await _0x17112c['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x2d025f['length']);let _0x4e0940=path['join'](__dirname,'/likers.csv');_0x3695cc=Math['round'](++_0x112ba4/_0x379bbe*0x64),_0x13820c['sender']['send']('fetch-progress',_0x3695cc,!![]);_0x2e831e<=0x0&&(_0x2e831e=_0x2d025f['length']);try{let _0x20af08=[];for(let _0x4e27a4=0x0;_0x4e27a4<_0x2d025f['length']&&_0x4e27a4<_0x2e831e;_0x4e27a4++){_0x20af08['push'](await _0x2d025f[_0x4e27a4]['evaluate'](_0x1cd5e8=>_0x1cd5e8['textContent']));try{const _0x1dd3eb='INSERT\x20INTO\x20'+_0x32fdbc+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x1dd3eb,[await _0x2d025f[_0x4e27a4]['evaluate'](_0x4b8017=>_0x4b8017['textContent']),await _0x34cbf7[_0x4e27a4]['evaluate'](_0x3401fb=>_0x3401fb['textContent'])],function(_0xb8c925){_0xb8c925?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x32fdbc+'\x27:',_0xb8c925['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x2c85d9){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x4e27a4+'\x20:\x20'+_0x2c85d9);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x4e27a4+'\x20:\x20'+_0x2c85d9);return handle_fail(0x1);}}return _0x3695cc=Math['round'](++_0x112ba4/_0x379bbe*0x64),_0x13820c['sender']['send']('fetch-progress',_0x3695cc,!![]),_0x3b7663&&(_0x13820c['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x13820c,_0x17112c,_0x4caa41,_0x32fdbc,_0x20af08)),new Promise(_0x4be9bd=>{_0x4be9bd('Scraping\x20finished!');});}catch(_0x938459){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x938459);return handle_fail(0x1);}}catch(_0x222f9b){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x222f9b);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x222f9b);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x4dee42,_0x2598e8,_0x694f5a,_0x91865a,_0x27d674,_0x321521,_0x14679a){let _0x295256=0x3,_0x261a44=0x0,_0x2433fc=0x0;try{await setCookiesForUser(_0x2598e8,_0x321521['username']);}catch(_0x537afb){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x537afb);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x537afb);return handle_fail(0x2);}try{console['log'](_0x694f5a),await _0x2598e8['goto'](_0x694f5a),await delay(0x7d0,0xfa0),await notificationClear(_0x2598e8),await delay(0xc8,0x1f4);const _0x1a990c=COM_COMMENTS_BOX_BODY_DIV;let _0x1c86f1;const _0x31a8c8=await _0x2598e8['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x3c85fe=await _0x2598e8['evaluate'](_0xa93144=>_0xa93144['innerHTML'],_0x31a8c8),_0x4eda30=String(_0x3c85fe)['replace'](/[^0-9]/g,''),_0x5b9578=Number(_0x4eda30)/0x14;_0x91865a<=0x0?_0x1c86f1=Math['ceil'](_0x5b9578/0x3):_0x1c86f1=Math['ceil'](_0x91865a/0x3);_0x295256+=_0x1c86f1,_0x2433fc=Math['round'](++_0x261a44/_0x295256*0x64),_0x4dee42['sender']['send']('fetch-progress',_0x2433fc,!![]),console['log']('Auto-scrolls:\x20'+_0x1c86f1),await scroll(_0x2598e8,_0x1a990c,_0x1c86f1,_0x5cd162=>{_0x2433fc=Math['round'](++_0x261a44/_0x295256*0x64),_0x4dee42['sender']['send']('fetch-progress',_0x2433fc,!![]);});try{const _0x2bd465=COM_REPLY_BUTTON_SPAN;await _0x2598e8['waitForSelector'](_0x2bd465),await delay(0x1f4,0x320);const _0xa26842=await _0x2598e8['$$'](_0x2bd465);console['log'](_0xa26842);let _0x268991=_0xa26842['length'];await delay(0xc8,0x1f4);try{for(let _0x3af73c=0x0;_0x3af73c<_0x268991;_0x3af73c++){_0xa26842[_0x3af73c]['click'](),await delay(0x320,0x5dc);}}catch(_0xdbe273){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xdbe273);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0xdbe273);return handle_fail(0x2);}}catch(_0xff02aa){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x224d8a=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x2598e8['waitForSelector'](_0x224d8a),await delay(0x1f4,0x320),_0x2433fc=Math['round'](++_0x261a44/_0x295256*0x64),_0x4dee42['sender']['send']('fetch-progress',_0x2433fc,!![]);const _0x422a3d=await _0x2598e8['$$'](_0x224d8a);let _0x17b37c=path['join'](__dirname,'/comments.csv');_0x91865a<=0x0&&(_0x91865a=_0x422a3d['length']);console['log']('fetch_limit:\x20'+_0x91865a),console['log']('comments_len:\x20'+_0x422a3d['length']),_0x91865a++;try{let _0x429fb4=[];for(let _0x56c055=0x1;_0x56c055<_0x422a3d['length']&&_0x56c055<_0x91865a;_0x56c055++){try{_0x429fb4['push'](await _0x422a3d[_0x56c055]['evaluate'](_0x4771d1=>_0x4771d1['textContent']));const _0x464c5c=await db['prepare']('INSERT\x20INTO\x20'+_0x27d674+'\x20(username)\x20VALUES\x20(?)');await _0x464c5c['run'](await _0x422a3d[_0x56c055]['evaluate'](_0x292a1b=>_0x292a1b['textContent']),function(_0x1eeef1){_0x1eeef1&&console['log']('error\x20in\x20add-user:'+_0x1eeef1);}),await _0x464c5c['finalize']();}catch(_0x2aa6a7){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x56c055+'\x20:\x20'+_0x2aa6a7);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x56c055+'\x20:\x20'+_0x2aa6a7);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x2433fc=Math['round'](++_0x261a44/_0x295256*0x64),_0x4dee42['sender']['send']('fetch-progress',_0x2433fc,!![]),_0x4dee42['sender']['send']('fetch-progress',0x64,!![]),_0x14679a&&(_0x4dee42['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4dee42,_0x2598e8,_0x321521,_0x27d674,_0x429fb4)),_0x4dee42['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x57d749=>{_0x57d749('Scraping\x20finished!');});}catch(_0x17993f){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x17993f);return handle_fail(0x2);}}catch(_0x237140){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x237140);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x237140);return handle_fail(0x2);}}async function set_clearname_from_username(_0x125f5b,_0x184702,_0x4537f1=null){try{let _0x110c70,_0x454176;const _0x4dae76='SELECT\x20username\x20FROM\x20'+_0x184702+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x4dae76,[],(_0x5c8484,_0x599af6)=>{_0x5c8484&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x5c8484['message']),_0x599af6['length']===0x0&&(_0x454176=_0x599af6['length']),_0x110c70=_0x599af6['map'](_0x4057e9=>_0x4057e9['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x454176);if(_0x454176===0x0){console['log']('Leave');return;}const _0x1c5bc6=await _0x125f5b['waitForSelector'](IG_SEARCH_BUTTON);await _0x1c5bc6['click'](),await delay(0x4b0,0x7d0);for(let _0x33892c of _0x110c70){const _0xdbb426=await _0x125f5b['waitForSelector'](IG_SEARCH_INPUT);await _0xdbb426['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x125f5b['type'](IG_SEARCH_INPUT,_0x33892c,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x1ae5d8=0x1;while(_0x1ae5d8!=0x14){console['log']('Schleife');try{let _0x3d364f=IG_NAME_SPAN_PART1+_0x1ae5d8+IG_USERNAME_SPAN_PART2;const _0x422991=await _0x125f5b['waitForSelector'](_0x3d364f),_0x4e5db4=await _0x125f5b['evaluate'](_0x19e4c4=>_0x19e4c4['innerHTML'],_0x422991);await delay(0xc8,0x1f4);if(_0x4e5db4==_0x33892c){let _0x183223=IG_NAME_SPAN_PART1+_0x1ae5d8+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x4441c6=await _0x125f5b['waitForSelector'](_0x183223);let _0x2d0a0c=await _0x125f5b['evaluate'](_0x3d4dff=>_0x3d4dff['innerHTML'],_0x4441c6);const _0x251c9b=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x5e8a3a=_0x2d0a0c['match'](_0x251c9b);_0x5e8a3a?_0x2d0a0c=_0x5e8a3a[0x1]['trim']():_0x2d0a0c=_0x2d0a0c['trim']();_0x2d0a0c['includes']('•')&&(_0x2d0a0c=_0x2d0a0c['substring'](0x0,_0x2d0a0c['indexOf']('•')-0x1));const _0x56a81c='UPDATE\x20'+_0x184702+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x56a81c,[_0x2d0a0c,_0x4e5db4],function(_0x3b78a8){_0x3b78a8&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x3b78a8['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x1ae5d8++;}catch(_0x4f1bf4){const _0xe17bdd='UPDATE\x20'+_0x184702+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0xe17bdd,['',_0x33892c],function(_0x1fcef1){_0x1fcef1&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1fcef1['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x4f1bf4);break;}}_0x4537f1&&_0x4537f1();}await _0x1c5bc6['click']();}catch(_0x2fffa0){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x2fffa0);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x13e0bd,_0x1e9fe9)=>{const _0x906dee='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x906dee,[],(_0x55fe28,_0x2fcc1a)=>{_0x55fe28?_0x1e9fe9(_0x55fe28):_0x13e0bd(_0x2fcc1a);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x5c0f58,_0x222336)=>{const _0x48f145='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x48f145,[],async(_0x5d8416,_0x2c8809)=>{if(_0x5d8416)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x5d8416['message']),_0x222336({'status':'error','message':_0x5d8416['message']});else try{const _0x5b910c=await Promise['all'](_0x2c8809['map'](_0x50e576=>{return new Promise(_0xf99aa1=>{if(!_0x50e576['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x50e576['campaign_name']),_0xf99aa1({'campaign_name':_0x50e576['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x4c4b60='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x50e576['list_id'],_0x4504ca='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x50e576['list_id']+'\x22';db['get'](_0x4c4b60,[],(_0x26bf9d,_0x4e5ead)=>{_0x26bf9d?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x50e576['campaign_name']+':',_0x26bf9d['message']),_0xf99aa1({'campaign_name':_0x50e576['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x4504ca,[],(_0xeebae,_0xd496e9)=>{_0xeebae?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x50e576['campaign_name']+':',_0xeebae['message']),_0xf99aa1({'campaign_name':_0x50e576['campaign_name'],'lead_count':_0x4e5ead?_0x4e5ead['lead_count']:0x0,'contacted_count':'N/A'})):_0xf99aa1({'campaign_name':_0x50e576['campaign_name'],'lead_count':_0x4e5ead?_0x4e5ead['lead_count']:0x0,'contacted_count':_0xd496e9?_0xd496e9['contacted_count']:0x0});});});});}));_0x5c0f58({'status':'success','campaigns':_0x5b910c});}catch(_0x13a79a){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x13a79a),_0x222336({'status':'error','message':_0x13a79a['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xfd41ed,_0x5d6457)=>{return new Promise((_0x3dac35,_0x8b99ca)=>{const _0x5d94f8='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x5d94f8,[_0x5d6457],(_0x3aafb5,_0x1f6bee)=>{_0x3aafb5?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x3aafb5),_0x8b99ca(_0x3aafb5)):(console['log']('ROWS'),console['log'](_0x1f6bee),debugDatabaseContents(),_0x3dac35(_0x1f6bee));});});});const showTableContents=_0x469e19=>{return new Promise((_0x25c33a,_0x54e354)=>{const _0xf9ef1='SELECT\x20*\x20FROM\x20'+_0x469e19+';';campaignDB['all'](_0xf9ef1,(_0x1cffa4,_0x1cd170)=>{_0x1cffa4?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x469e19+':',_0x1cffa4),_0x54e354(_0x1cffa4)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x469e19+':',_0x1cd170),_0x25c33a({'status':'success','message':_0x1cd170}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x491755){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x491755);}}ipcMain['handle']('create-campaign',async(_0x5012fe,_0x384809)=>{return new Promise((_0x5a58d4,_0x123084)=>{const _0x54df17='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x54df17,[String(_0x384809)],function(_0x16507f){_0x16507f?_0x123084(_0x16507f):_0x5a58d4({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x3e5aaf,_0xde24fe)=>{return new Promise((_0x3cc90b,_0x4eb6d0)=>{const _0x5daef2='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x5daef2,[_0xde24fe],function(_0x1d9cf8){_0x1d9cf8?_0x4eb6d0(_0x1d9cf8):_0x3cc90b({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x20aacc,_0x5ecc03,_0x5a85fb,_0x3d9b8b,_0x2cf877,_0x39b1d6,_0xbf50b4,_0x3f668a)=>{const _0x135056=await createMessageID(_0x2cf877);return new Promise((_0x19336f,_0x3d1a15)=>{if(!_0x5ecc03||!_0x5a85fb||!_0x3d9b8b||!_0x135056||!_0x39b1d6)return _0x3d1a15({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x135056);const _0x4f14ae='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x4f14ae,[_0x5a85fb,_0x3d9b8b,_0x135056,_0x39b1d6,_0xbf50b4,_0x3f668a,_0x5ecc03],function(_0x145033){if(_0x145033)_0x3d1a15({'status':'error','message':_0x145033['message']});else this['changes']===0x0?_0x3d1a15({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x19336f({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x13e4e3,_0x4b4d07,_0x5a1255,_0xa87f9e,_0x231b5b)=>{return new Promise((_0x3adbc4,_0x2e3ad6)=>{const _0x2c513e='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x2c513e,[_0x4b4d07,_0x5a1255,_0xa87f9e,_0x231b5b],function(_0x28675f){return _0x28675f?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x28675f['message']),_0x2e3ad6('insert-dm-response',{'success':![],'message':_0x28675f['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x3adbc4('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x18e14a=>{return new Promise((_0x1248f9,_0x147233)=>{const _0x2fc6f2='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x2fc6f2,[_0x18e14a],(_0x17669a,_0x40cec8)=>{if(_0x17669a)_0x147233({'status':'error','message':_0x17669a['message']});else{if(_0x40cec8)_0x1248f9(_0x40cec8['message_id']);else{const _0x36fdbe='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x36fdbe,[_0x18e14a],function(_0x125e0e){_0x125e0e?_0x147233({'status':'error','message':_0x125e0e['message']}):_0x1248f9(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x17c27b,_0x9bff22)=>{return new Promise((_0x52c74d,_0x467cf8)=>{const _0x9e4327='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x9bff22;db['get'](_0x9e4327,(_0x7d7177,_0x6562c9)=>{_0x7d7177?_0x467cf8({'status':'error','message':_0x7d7177['message']}):_0x52c74d({'status':'success','count':_0x6562c9['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x3e3658,_0x3c3bd8){try{const _0x200caf=await new Promise((_0x1ed07d,_0x197c21)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x3c3bd8],(_0x5e4f03,_0x4ee433)=>{if(_0x5e4f03)_0x197c21(_0x5e4f03);else{if(_0x4ee433['length']>0x0){let _0x29b716=JSON['parse'](_0x4ee433[0x0]['cookie']);console['log'](_0x29b716),_0x1ed07d(_0x29b716);}else _0x197c21(new Error('User\x20with\x20username\x20'+_0x3c3bd8+'\x20does\x20not\x20exist.'));}});});await _0x3e3658['setCookie'](..._0x200caf),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x5c06e7){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5c06e7);}}async function saveCookiesForUser(_0x308311,_0x227bf6){try{const _0x1a1da2=await _0x308311['cookies']();if(!_0x1a1da2||_0x1a1da2['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x227bf6);const _0x1b28d0=JSON['stringify'](_0x1a1da2);if(_0x1b28d0['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x227bf6);return new Promise((_0x38cf83,_0x4b76e5)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x227bf6],(_0x5e3ebe,_0x13704f)=>{if(_0x5e3ebe)return console['error']('Error\x20checking\x20user\x20existence:',_0x5e3ebe),_0x4b76e5(_0x5e3ebe);if(_0x13704f){const _0x286713=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x286713['run'](_0x1b28d0,_0x227bf6,function(_0x3624b0){return _0x3624b0?(console['error']('Error\x20updating\x20cookies:',_0x3624b0),_0x4b76e5(_0x3624b0)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x227bf6),_0x38cf83());});}else{const _0x16e6e9=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x16e6e9['run'](_0x227bf6,_0x1b28d0,function(_0x258997){return _0x258997?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x258997),_0x4b76e5(_0x258997)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x227bf6),_0x38cf83());});}});});}catch(_0x1bb020){console['error']('Error\x20fetching\x20cookies:',_0x1bb020);throw _0x1bb020;}}async function createUserIfNotExists(_0x578dc2){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x578dc2],(_0x205564,_0x13756b)=>{if(_0x205564){console['error']('Error\x20checking\x20user\x20existence:',_0x205564);throw _0x205564;}else{if(!_0x13756b){const _0x270b21=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x270b21['run'](_0x578dc2,function(_0x1adddf){_0x1adddf?console['error']('Error\x20inserting\x20new\x20user:',_0x1adddf):console['log']('New\x20user\x20created:',_0x578dc2);});}else console['log']('User\x20already\x20exists:',_0x578dc2);}});}catch(_0x2c647f){console['error']('Error\x20creating\x20user:',_0x2c647f);throw _0x2c647f;}}ipcMain['handle']('create-relation',async(_0x8d0b9b,_0xfc75ee)=>{return new Promise((_0x4f18aa,_0x3250b5)=>{const _0x265431='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0xfc75ee+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x265431,function(_0x5ca04f){_0x5ca04f?_0x3250b5(_0x5ca04f):_0x4f18aa({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x342452,_0x45e3d3)=>{return console['log']('droping\x20table'+_0x45e3d3),new Promise((_0x4d7c7e,_0x259ea3)=>{const _0x483bb2='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x45e3d3;console['log']('droping\x20table'+_0x45e3d3),db['run'](_0x483bb2,function(_0x352298){_0x352298?_0x259ea3(_0x352298):_0x4d7c7e({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x9c900f=>{return new Promise((_0x54f4ff,_0x57465f)=>{const _0x4d53b='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x4d53b,[],(_0x24f394,_0x31b1ce)=>{_0x24f394?_0x57465f(_0x24f394):_0x54f4ff(_0x31b1ce['map'](_0x3a8889=>_0x3a8889['name']));});});}),ipcMain['handle']('add-user',async(_0x47ba0d,_0x36f325,_0x151db1)=>{return new Promise(_0x38c697=>{const _0x5e0951=db['prepare']('INSERT\x20INTO\x20'+_0x151db1+'\x20(username)\x20VALUES\x20(?)');_0x5e0951['run'](_0x36f325,function(_0x17861e){_0x17861e?console['log']('error\x20in\x20add-user:'+_0x17861e):_0x38c697({'status':'success','id':this['lastID']});}),_0x5e0951['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x57bb83,_0x2e12ba)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x54ed74,_0x5dec20)=>{if(_0x54ed74)_0x2e12ba(_0x54ed74);else{_0x57bb83({'status':'success','users':_0x5dec20});for(_0x5dec20 of _0x5dec20){console['log'](_0x5dec20['username']);}}});});}),ipcMain['handle']('get-data',async(_0x3d094e,_0x283e20)=>{return new Promise((_0x255501,_0x5d7e1b)=>{const _0x358b16='SELECT\x20*\x20FROM\x20'+_0x283e20;console['log'](_0x358b16),db['all'](_0x358b16,[],(_0x1e0101,_0x5ccb77)=>{_0x1e0101?_0x5d7e1b(_0x1e0101):_0x255501(_0x5ccb77);});});}),ipcMain['handle']('get-accounts',async _0x544c13=>{return new Promise((_0x5f11b2,_0x36a3f4)=>{const _0x2b01a5='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x2b01a5),igaccountsDB['all'](_0x2b01a5,[],(_0x2a573e,_0x37b06c)=>{_0x2a573e?_0x36a3f4(_0x2a573e):_0x5f11b2(_0x37b06c);});});}),ipcMain['handle']('get-targets',async(_0x327bbb,_0x455991)=>{return getTargetProfiles(_0x455991);}),ipcMain['handle']('delete-user',async(_0x4dbdce,_0x13a3eb,_0x5a41ae)=>{return new Promise((_0x16c685,_0x517c0e)=>{const _0x5be6ae=db['prepare']('DELETE\x20FROM\x20'+_0x5a41ae+'\x20WHERE\x20username\x20=\x20?');_0x5be6ae['run'](_0x13a3eb,function(_0x346309){_0x346309?_0x517c0e(_0x346309):_0x16c685({'status':'success','changes':this['changes']});}),_0x5be6ae['finalize']();});}),ipcMain['handle']('delete-account',async(_0x1e135b,_0x30cd8c)=>{const _0x45a537=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x45a537['run'](_0x30cd8c,function(_0x46ba5f){_0x46ba5f&&console['log'](_0x46ba5f);}),_0x45a537['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0xb38828,_0x166e18)=>{const _0x54ddf9='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x54ddf9,[],(_0x381457,_0xe7c3eb)=>{_0x381457?_0x166e18({'status':'error','message':_0x381457['message']}):_0xb38828({'status':'success','contactedCount':_0xe7c3eb['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x168165,_0x25f12c)=>{const _0x19169c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x19169c,[],(_0x4009a9,_0x2e4e49)=>{_0x4009a9?_0x25f12c({'status':'error','message':_0x4009a9['message']}):_0x168165({'status':'success','contactedCount':_0x2e4e49['contactedCount']});});});});function exportDatabase(_0x3ae2d0){return new Promise((_0x2e4a0f,_0x36047a)=>{const _0x135caf='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x3ae2d0+'\x0a\x20\x20\x20\x20';db['all'](_0x135caf,[],async(_0x3eb234,_0xde1bf5)=>{if(_0x3eb234){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x3eb234['message']),_0x36047a(_0x3eb234);return;}if(!_0xde1bf5||_0xde1bf5['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2e4a0f();return;}const _0x1ba8ea=XLSX['utils']['json_to_sheet'](_0xde1bf5),_0xf5fc8c=XLSX['utils']['sheet_to_csv'](_0x1ba8ea);try{const {canceled:_0x22ae0e,filePath:_0x410c3b}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x3ae2d0+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x22ae0e||!_0x410c3b){console['log']('Speichern\x20abgebrochen.'),_0x2e4a0f();return;}fs['writeFile'](_0x410c3b,_0xf5fc8c,'utf8',_0x4b2350=>{_0x4b2350?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x4b2350['message']),_0x36047a(_0x4b2350)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x410c3b),_0x2e4a0f());});}catch(_0x2bd9fc){console['error']('Fehler\x20im\x20Speicherdialog:',_0x2bd9fc),_0x36047a(_0x2bd9fc);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x23cf1f,_0x4c5884)=>{shell['openExternal'](_0x4c5884);});