const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x5e506a,_0x1199a2){try{const _0x130f60=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x1199a2},'body':JSON['stringify']({'clearname':_0x5e506a})});if(!_0x130f60['ok']){const _0x47a809=await _0x130f60['text']();throw new Error(_0x130f60['status']+':\x20'+_0x47a809);}const _0x14c70c=await _0x130f60['json']();return _0x14c70c;}catch(_0x5a0373){console['error']('Error\x20in\x20extractFirstName:',_0x5a0373);throw _0x5a0373;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0xb6afa9=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0xb6afa9['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0xb6afa9['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x4ab164){var _0x37ece9=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x48ea12){console['log']('window\x20id:'+_0x48ea12['id']),_0x48ea12['id']>0x1&&(_0x37ece9=!![]);}),console['log']('child\x20opened\x20='+_0x37ece9);if(!_0x37ece9){const _0x47a7e9=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x47a7e9['loadFile'](_0x4ab164['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));});function initializeDatabase(){const _0x2c6f33=require('fs'),_0xcc4820=path['join'](app['getPath']('userData'),'data'),_0xc5bb41=['campaign.db','crm.db','igaccounts.db'],_0x45f8db=[];try{_0x2c6f33['mkdirSync'](_0xcc4820,{'recursive':!![]});for(const _0x16069d of _0xc5bb41){const _0x36cb27=path['join'](process['resourcesPath'],'app','build','data',_0x16069d),_0x5afb47=path['join'](_0xcc4820,_0x16069d);!_0x2c6f33['existsSync'](_0x5afb47)?(_0x2c6f33['copyFileSync'](_0x36cb27,_0x5afb47),console['log']('[InitDB]\x20Kopiert\x20'+_0x16069d+'\x20nach:\x20'+_0x5afb47)):console['log']('[InitDB]\x20'+_0x16069d+'\x20existiert\x20bereits:\x20'+_0x5afb47),_0x45f8db['push'](_0x5afb47);}}catch(_0x4b1100){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x4b1100);}return _0x45f8db;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x4810ad,AppUpdate:_0x2a539f}=require('electron-updater');_0x4810ad['autoDownload']=![],_0x4810ad['autoInstallOnAppQuit']=!![],_0x4810ad['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x4810ad['on']('update-available',_0x3baa7e=>{console['log']('Update\x20verfügbar:',_0x3baa7e),_0x4810ad['downloadUpdate']();}),_0x4810ad['on']('update-downloaded',_0x8df711=>{console['log']('Update\x20heruntergeladen:',_0x8df711),_0x4810ad['quitAndInstall']();}),_0x4810ad['on']('error',_0x334a50=>{console['error']('Fehler\x20beim\x20Updaten:',_0x334a50);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x26bae0,AppUpdate:_0x11d68f}=require('electron-updater');_0x26bae0['autoDownload']=![],_0x26bae0['autoInstallOnAppQuit']=!![],_0x26bae0['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x26bae0['on']('update-available',_0x2b3691=>{console['log']('Update\x20verfügbar:',_0x2b3691),_0x26bae0['downloadUpdate']();}),_0x26bae0['on']('update-downloaded',_0x1a9f76=>{console['log']('Update\x20heruntergeladen:',_0x1a9f76),console['log']('Neustarten\x20zum\x20Updaten');}),_0x26bae0['on']('error',_0x4b7630=>{console['error']('Fehler\x20beim\x20Updaten:',_0x4b7630);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x547665='',_0x395a3e=null;if(process['platform']==='darwin')_0x547665=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x547665=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x547665}),_0x395a3e=await browser_login['newPage'](),_0x395a3e['setDefaultNavigationTimeout'](0x1d4c),_0x395a3e['setDefaultTimeout'](0x1d4c),await _0x395a3e['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x395a3e;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x402e12=0x1,_0x1e1311=0x0){let _0x1457af='',_0x4a21d2=null;const _0x3658e7=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x1457af=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1457af=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x402e12===0x0&&!pageStack[_0x1e1311])return browser=await puppeteer['launch']({'headless':_0x3658e7,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1457af}),_0x4a21d2=await browser['newPage'](),_0x4a21d2['setDefaultNavigationTimeout'](0x1d4c),_0x4a21d2['setDefaultTimeout'](0x1d4c),await _0x4a21d2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1e1311]=_0x4a21d2,_0x4a21d2;return(browser===null||pageStack[_0x1e1311]===null||pageStack[_0x1e1311]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x3658e7,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1457af})),(pageStack[_0x1e1311]===null||pageStack[_0x1e1311]['isClosed']())&&(_0x4a21d2=await browser['newPage'](),_0x4a21d2['setDefaultNavigationTimeout'](0x1d4c),_0x4a21d2['setDefaultTimeout'](0x1d4c),await _0x4a21d2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1e1311]=_0x4a21d2),pageStack[_0x1e1311];}ipcMain['on']('login',async(_0x4e55fa,_0x211b59)=>{const _0x12afdd=await getBrowserPageLogin();await _0x12afdd['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x12afdd,_0x211b59),ipcMain['on']('setLoginCookies',async(_0x247b68,_0x8685f1)=>{try{await set_login_cookies(_0x12afdd,_0x8685f1);}catch(_0x497765){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x497765);}});}),ipcMain['on']('export-relation',async(_0x34ff7e,_0x545b65)=>{try{await exportDatabase(_0x545b65),_0x34ff7e['reply']('export-relation-response',{'success':!![]});}catch(_0x1c6f60){console['error'](_0x1c6f60),_0x34ff7e['reply']('export-relation-response',{'success':![],'message':_0x1c6f60['message']});}}),ipcMain['handle']('sendMessage',async(_0xd1bbf6,_0x5cc396,_0x4fd728,_0x52bd9d,_0x150229,_0x16f3c3,_0x37b87e,_0x3b2faf,_0x52a134,_0x111e9c,_0x30b389)=>{isStopping=![];let _0x6b7995=null;return _0x37b87e?_0x6b7995=await getBrowserPage(_0x150229,_0x3b2faf):_0x6b7995=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x5cc396),send_message(_0x6b7995,_0x5cc396,_0x4fd728,_0x52bd9d,_0x150229,_0x16f3c3,_0x52a134,_0x111e9c,_0x30b389);}),ipcMain['handle']('stop-action',async(_0x424623,_0x16b474)=>{isStopping=!![];const _0x324119=await getBrowserPage(0x1,_0x16b474);await _0x324119['close']();}),ipcMain['handle']('fetch_followers',async(_0x5acfe9,_0x5ae374,_0x546176,_0x46b482,_0x5085e0,_0x234aee)=>{isStopping=![];const _0x38bd9b=await getBrowserPage();return fetch_followers_from_account(_0x5acfe9,_0x38bd9b,_0x5ae374,_0x546176,_0x46b482,_0x5085e0,_0x234aee);}),ipcMain['handle']('get-account-details',async(_0x38173e,_0x1c435c,_0x1e4f2e,_0x17aa00)=>{isStopping=![];const _0x318c81=await getBrowserPage();return fetch_account_details(_0x318c81,_0x1c435c,_0x1e4f2e,_0x17aa00);}),ipcMain['handle']('fetch_likes',async(_0x59268d,_0x5cb693,_0x32a42d,_0x92412b,_0x220e21,_0x475a82)=>{isStopping=![];const _0x29eaef=await getBrowserPage();return fetch_likers_from_post(_0x59268d,_0x29eaef,_0x5cb693,_0x32a42d,_0x92412b,_0x220e21,_0x475a82);}),ipcMain['handle']('fetch_comments',async(_0x599d47,_0x5f321d,_0x12d6b6,_0x399309,_0x4a889a,_0x52e2a6)=>{isStopping=![];const _0xb87a16=await getBrowserPage();return fetch_comments_from_post(_0x599d47,_0xb87a16,_0x5f321d,_0x12d6b6,_0x399309,_0x4a889a,_0x52e2a6);});async function updateAppSilent(){const {spawn:_0x441433}=require('child_process'),_0x23a4ac=require('path'),_0xe1023e=require('electron-log');return _0xe1023e['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x5d8877,_0x3fa9d7)=>{const {updateElectronApp:_0x10e1a3,UpdateSourceType:_0x8d43c7}=require('update-electron-app');_0x10e1a3({'updateSource':{'type':_0x8d43c7['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xe1023e}),_0x5d8877('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x13d2eb,_0x492b83)=>{doFullElectronUpdateSilent(),_0x13d2eb('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x2846fc}=require('child_process'),_0x531aea=require('path'),_0x11e91a=require('electron-log');return _0x11e91a['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x426c54,_0x3f3791)=>{const {updateElectronApp:_0x58105c,UpdateSourceType:_0x4f91c9}=require('update-electron-app');_0x58105c({'updateSource':{'type':_0x4f91c9['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x11e91a}),_0x426c54('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x55e865,_0x2d2600)=>{doFullElectronUpdate(),_0x55e865('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x2fb70f,_0x5008a9)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x2fb70f('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x1256ca=path['join'](__dirname,'mac-updater-intern.sh'),_0x538f90=spawn('/bin/bash',[_0x1256ca]);_0x538f90['stdout']['on']('data',_0x5048ed=>{console['log']('stdout:\x20'+_0x5048ed);}),_0x538f90['stderr']['on']('data',_0x53b528=>{console['error']('stderr:\x20'+_0x53b528);}),_0x538f90['on']('close',_0x321947=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x321947),_0x321947===0x0?_0x2fb70f('Update\x20erfolgreich\x20abgeschlossen.'):_0x5008a9(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x321947));});}else{if(process['platform']==='win32'){const _0x1016c1=path['join'](__dirname,'../','../','../');process['chdir'](_0x1016c1),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x352f58='soft-ui-updater-windows.ps1',_0x518e56=spawn('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x352f58]);_0x518e56['stdout']['on']('data',_0x494f33=>{console['log']('stdout:\x20'+_0x494f33);}),_0x518e56['stderr']['on']('data',_0x588f6a=>{console['error']('stderr:\x20'+_0x588f6a);}),_0x518e56['on']('close',_0x409e20=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x409e20),_0x409e20===0x0?_0x2fb70f('Update\x20erfolgreich\x20abgeschlossen.'):_0x5008a9(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x409e20));});}else _0x5008a9(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x55339a=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x174a67,_0x13d470)=>{console['log']('Update\x20Silent:\x20'+_0x13d470);if(_0x13d470){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x1a0bac,_0x11299f){return Math['random']()*(_0x11299f-_0x1a0bac+0x1)+_0x1a0bac;}function delay(_0x3c180a,_0x29a7da){let _0x2679c1=getRnd(_0x3c180a,_0x29a7da);return new Promise(function(_0x52c081){setTimeout(_0x52c081,_0x2679c1);});}async function scroll(_0xb9c63,_0x15a3c1,_0x486b0f=0x2,_0xc43d29){const _0x471914=await _0xb9c63['waitForSelector'](_0x15a3c1);for(let _0x268a6f=0x0;_0x268a6f<_0x486b0f;_0x268a6f++){console['log']('Scrolling\x20'+_0x268a6f),await _0xb9c63['evaluate'](_0x338926=>{const _0x14cfb8=document['querySelector'](_0x338926);_0x14cfb8&&_0x14cfb8['scrollBy'](0x0,0x190);},_0x15a3c1),await delay(0x320,0x5dc),_0xc43d29();}}async function saveCookies(_0xc0520d){let _0x3f23c1=await _0xc0520d['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x3f23c1,null,0x2));}async function notificationClear(_0x4c0422){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x4c0422['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x4c0422['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x250943){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x250943);}}async function getTargetProfiles(_0x5ea758){return new Promise((_0x3b4d9e,_0x262384)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x5ea758,(_0x41b8c8,_0xd65b87)=>{_0x41b8c8?_0x262384(_0x41b8c8):_0x3b4d9e(_0xd65b87);});});}async function login_legacy(_0x289ce3,_0x307b1f,_0x5bd30e){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x289ce3,_0x307b1f),await createUserIfNotExists(_0x307b1f,_0x5bd30e);}catch(_0x45a22f){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x45a22f);}try{await _0x289ce3['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x289ce3['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x289ce3['click']('button._a9--._ap36._a9_0');}catch(_0x364a5d){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x289ce3['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x289ce3['type']('input[name=\x27username\x27]',_0x307b1f,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x289ce3['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x289ce3['type']('input[name=\x27password\x27]',_0x5bd30e,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x289ce3['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x289ce3['click']('button[type=\x27submit\x27]');}catch(_0x4cf7cb){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x289ce3),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x289ce3,_0x307b1f);}catch(_0x256fa1){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x256fa1);}}catch(_0x1bd9ac){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1bd9ac);}}async function login(_0x51e1ec,_0xa6b7ab){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x51e1ec,_0xa6b7ab),await createUserIfNotExists(_0xa6b7ab);}catch(_0x2cedff){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2cedff);}try{await _0x51e1ec['goto']('https://www.instagram.com/accounts/login/');}catch(_0x1d53f6){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x1d53f6);}}async function set_login_cookies(_0x453d5c,_0x4568d7){try{await saveCookiesForUser(_0x453d5c,_0x4568d7);}catch(_0x3dd35c){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x3dd35c);}}async function waitForXPath(_0x5c9dbb,_0x432550,_0x36a68d={}){return await _0x5c9dbb['waitForFunction'](_0x882266=>{return document['evaluate'](_0x882266,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x36a68d,_0x432550),_0x5c9dbb['evaluateHandle'](_0x4bda84=>document['evaluate'](_0x4bda84,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x432550);}async function send_message(_0x162c4d,_0x186d5b,_0x5bf572,_0x5549a1,_0x324cdb,_0x3b5d04,_0x2e6925,_0x290819,_0x23369b){return new Promise(async(_0x261955,_0x3bb8cd)=>{_0x3b5d04=_0x3b5d04['split'](';'),console['log'](_0x3b5d04[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x324cdb);try{await setCookiesForUser(_0x162c4d,_0x3b5d04[0x0]);}catch(_0x31080c){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x31080c),_0x3bb8cd({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x31080c});return;}try{await _0x162c4d['goto']('https://www.instagram.com/'+_0x186d5b+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x162c4d);}catch(_0xec1973){_0x3bb8cd({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0xec1973});return;}console['log']('UserSkip:\x20'+_0x2e6925);if(_0x2e6925==0x1)try{const _0x53d501=await _0x162c4d['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x394747=>_0x394747['textContent']['trim']());console['log'](_0x53d501);if(_0x53d501==='Following'||_0x53d501==='Folge\x20ich')return _0x261955({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x14e226){}try{await _0x162c4d['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x162c4d['click'](K_DIRECT_MSG_BUTTON);}catch(_0x1c78e8){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x1c78e8);try{await _0x162c4d['waitForSelector'](K_OPTIONS_BUTTON),await _0x162c4d['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x2fe18c=await waitForXPath(_0x162c4d,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x2fe18c['click']();}catch(_0x8084f2){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x8084f2),_0x261955({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x162c4d);}catch(_0x144341){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x144341);}try{const _0x176b30=await _0x162c4d['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x290819){const _0x56ff29=await _0x162c4d['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x56ff29)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x186d5b),_0x261955({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x3972b1=await _0x162c4d['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x3972b1),_0x5549a1=_0x5549a1['replace']('{USERNAME}',_0x186d5b);let _0x178f92;if(_0x5549a1['includes']('{NAME}')||_0x5549a1['includes']('{name}'))try{const _0x39603c=await extractFirstName(_0x3972b1,_0x23369b);console['log']('Response\x20Clearname\x20valid:\x20'+_0x39603c['valid']),_0x39603c['valid']?(_0x5549a1=_0x5549a1['replaceAll'](/{NAME}|{name}/g,_0x39603c['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x39603c['name']),_0x178f92=_0x39603c['name']):(_0x5549a1=_0x5549a1['replaceAll'](/ ?({NAME}|{name})/g,''),_0x178f92='UNKNOWN_NAME');}catch(_0x78918c){console['log'](_0x78918c['message']),_0x178f92=_0x78918c['message'];let _0x4bdcca=_0x3972b1['replace'](/[^\p{L}\s]/gu,''),_0x27e410=_0x4bdcca['split']('\x20')[0x0];_0x27e410['length']>0x2&&!_0x27e410['includes']('Instagram')?_0x5549a1=_0x5549a1['replaceAll'](/{NAME}|{name}/g,_0x27e410):_0x5549a1=_0x5549a1['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x176b30['type'](_0x5549a1,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x35ab24=await _0x162c4d['waitForSelector'](K_SEND_MSG_BUTTON);await _0x35ab24['click'](),await delay(0x320,0x3e8),_0x261955({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x3972b1,'extracted_clearname':_0x178f92});}catch(_0x28d574){try{await _0x162c4d['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x5757ff=await _0x162c4d['evaluate'](_0x5d1b5d=>{return document['querySelector'](_0x5d1b5d)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x5757ff),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x28d574),_0x261955({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x186d5b+'\x20überspringen.'});}catch(_0x3f51f5){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x3f51f5),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x186d5b+'\x20:\x20'+_0x3f51f5),_0x261955({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x186d5b+'\x20:\x20'+_0x3f51f5});}}});}function handle_fail(_0x117fb5){if(isStopping)return new Promise(_0x3cac3e=>{_0x3cac3e('Scraper\x20gestoppt.');});else{let _0x1d574c='';switch(_0x117fb5){case 0x0:_0x1d574c='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x1d574c='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x1d574c='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x1d574c='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x67df8c,_0x43341e)=>{_0x43341e(_0x1d574c);});}}async function fetch_account_details(_0x4696c7,_0x19766a,_0x5b8448,_0x1a7482){try{await setCookiesForUser(_0x4696c7,_0x5b8448['username']);}catch(_0x2c889b){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2c889b);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2c889b);return handle_fail(0x0);}_0x4696c7['setDefaultNavigationTimeout'](0x7530),await _0x4696c7['goto']('https://www.instagram.com/'+_0x19766a+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x4696c7);const _0x155a75=await _0x4696c7['evaluate'](()=>{const _0x5c4473=document['querySelector']('meta[property=\x22og:image\x22]');return _0x5c4473?_0x5c4473['getAttribute']('content'):null;});await _0x4696c7['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x12e70e=await _0x4696c7['evaluate'](()=>{const _0x239eba=document['querySelector']('meta[name=\x22description\x22]');if(!_0x239eba)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x423b85=_0x239eba['getAttribute']('content');if(!_0x423b85)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x423b85);const _0x39dd20=/\s*[–-]\s*/,_0x20b4c0=_0x423b85['split'](_0x39dd20);if(_0x20b4c0['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x112f9c=_0x20b4c0[0x0],_0x5809dc=_0x20b4c0[0x1],_0x28152e=_0x112f9c['split'](',\x20');if(_0x28152e['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x2ca55f=_0x28152e[0x0]['split']('\x20')[0x0],_0x2c7736=_0x28152e[0x1]['split']('\x20')[0x0],_0x31e016=_0x28152e[0x2]['split']('\x20')[0x0];let _0x54eaf0='',_0x379165='';const _0x24a5db='\x20on\x20Instagram:\x20',_0x11aa7c=_0x5809dc['split'](_0x24a5db);return _0x54eaf0=_0x11aa7c[0x0]['trim'](),_0x54eaf0=_0x54eaf0['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x11aa7c['length']>0x1&&(_0x379165=_0x11aa7c[0x1]['trim'](),_0x379165['startsWith']('\x22')&&_0x379165['endsWith']('\x22')&&(_0x379165=_0x379165['substring'](0x1,_0x379165['length']-0x1)['trim']()),_0x379165=_0x379165['replace'](/&quot;/g,'')['trim']()),{'followers':_0x2ca55f,'following':_0x2c7736,'posts':_0x31e016,'nameText':_0x54eaf0,'bio':_0x379165};});console['log']('Extracted\x20profile\x20data:',_0x12e70e);const _0xf44f56=_0x12e70e['nameText'],_0x46d4ab=_0x155a75,_0x3b2a83=_0x12e70e['bio'],_0x428c64=_0x12e70e['followers'],_0x6af65a=_0x12e70e['following'],_0x15f38e=_0x12e70e['posts'],_0x4a4104=![],_0x40ae56=![],_0x4c1135=![],_0x21705d='\x0a\x20\x20INSERT\x20INTO\x20'+_0x1a7482+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x21705d,[_0x19766a,_0xf44f56,_0x46d4ab,_0x3b2a83,_0x428c64,_0x6af65a,_0x15f38e,_0x4a4104,_0x40ae56,_0x4c1135],function(_0x27505e){_0x27505e?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x27505e['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x3bccf4,_0x522eac,_0x5ef83a,_0x758a35,_0x5d44d0,_0x4048f2,_0x41f103){let _0x53a5b5=0x4,_0x93e1bf=0x0,_0x8b0296=0x0;try{await setCookiesForUser(_0x522eac,_0x4048f2['username']);}catch(_0x4fc988){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4fc988);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4fc988);return handle_fail(0x0);}let _0x42987e=0x0;try{await _0x522eac['goto']('https://www.instagram.com/'+_0x5ef83a+'/'),await notificationClear(_0x522eac);try{if(_0x758a35<=0x0){const _0x25c3fd=await _0x522eac['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x34f179=await _0x522eac['evaluate'](_0x427a7d=>_0x427a7d['innerHTML'],_0x25c3fd);_0x42987e=Math['ceil'](_0x34f179/0x4);}else _0x42987e=Math['ceil'](_0x758a35/0x4);_0x53a5b5+=_0x42987e,_0x8b0296=Math['round'](++_0x93e1bf/_0x53a5b5*0x64),_0x3bccf4['sender']['send']('fetch-progress',_0x8b0296,!![]);let _0x36c91f=await _0x522eac['waitForSelector']('a[href=\x22/'+_0x5ef83a+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x36c91f['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x5ef83a+'\x20gesichtet'),_0x8b0296=Math['round'](++_0x93e1bf/_0x53a5b5*0x64),_0x3bccf4['sender']['send']('fetch-progress',_0x8b0296,!![]);}catch(_0x4ce7c1){console['log']('Follower\x20Liste\x20von\x20'+_0x5ef83a+'\x20nicht\x20gefunden:'+_0x4ce7c1);throw new Error('Follower\x20Liste\x20von\x20'+_0x5ef83a+'\x20nicht\x20gefunden:'+_0x4ce7c1);return handle_fail(0x0);}}catch(_0x2142b8){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2142b8);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2142b8);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x42987e),await scroll(_0x522eac,FOLLOWER_FENSTER,_0x42987e,_0x22c2aa=>{_0x8b0296=Math['round'](++_0x93e1bf/_0x53a5b5*0x64),_0x3bccf4['sender']['send']('fetch-progress',_0x8b0296,!![]);}),await _0x522eac['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x3c03a7=await _0x522eac['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x5080cb=await _0x522eac['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x8b0296=Math['round'](++_0x93e1bf/_0x53a5b5*0x64),_0x3bccf4['sender']['send']('fetch-progress',_0x8b0296,!![]);_0x758a35<=0x0&&(_0x758a35=_0x3c03a7['length']);let _0x221ed8=[];for(let _0xf014af=0x0;_0xf014af<_0x3c03a7['length']&&_0xf014af<_0x758a35;_0xf014af++){_0x221ed8['push'](await _0x3c03a7[_0xf014af]['evaluate'](_0xc70060=>_0xc70060['textContent']));const _0x26b217='INSERT\x20INTO\x20'+_0x5d44d0+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x26b217,[await _0x3c03a7[_0xf014af]['evaluate'](_0x299cd3=>_0x299cd3['textContent']),await _0x5080cb[_0xf014af]['evaluate'](_0x244f4a=>_0x244f4a['textContent'])],function(_0x4fa68e){_0x4fa68e?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x5d44d0+'\x27:',_0x4fa68e['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x8b0296=Math['round'](++_0x93e1bf/_0x53a5b5*0x64),_0x3bccf4['sender']['send']('fetch-progress',_0x8b0296,!![]),_0x41f103&&(_0x3bccf4['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3bccf4,_0x522eac,_0x4048f2,_0x5d44d0,_0x221ed8)),new Promise(_0x5f6c67=>{_0x5f6c67('Scraping\x20finished!');});}catch(_0x1309a0){if(_0x41f103)throw new Error(_0x1309a0);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x5ef83a+'\x20nicht\x20gefunden:\x20'+_0x1309a0);return handle_fail(0x0);}}async function fetch_details_from_list(_0x23199a,_0x5e52a5,_0x490bef,_0x6875d6,_0xc52820){let _0x5bb11b=0x0,_0x5aa498=0x0;for(let _0x3d5aa7=0x0;_0x3d5aa7<_0xc52820['length'];_0x3d5aa7++){console['log']('Processing\x20profile:',_0xc52820[_0x3d5aa7]);try{await fetch_account_details(_0x5e52a5,_0xc52820[_0x3d5aa7],_0x490bef,_0x6875d6);}catch(_0x1e83e2){console['error']('Detailed\x20Scraping\x20von:\x20',_0xc52820[_0x3d5aa7],_0x1e83e2);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0xc52820[_0x3d5aa7]+'\x20'+_0x1e83e2);}_0x5aa498=Math['round'](++_0x5bb11b/_0xc52820['length']*0x64),_0x23199a['sender']['send']('fetch-progress',_0x5aa498,!![],!![]);}}async function fetch_likers_from_post(_0x3f5a53,_0x3ac474,_0x2fbdbe,_0x138453,_0x46e302,_0x2549a9,_0x2d1ad3){let _0x166eb4=0x4,_0x1d49fd=0x0,_0x4c64cc=0x0;try{await setCookiesForUser(_0x3ac474,_0x2549a9['username']);}catch(_0x490480){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x490480);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x490480);return handle_fail(0x1);return;}_0x4c64cc=Math['round'](++_0x1d49fd/_0x166eb4*0x64),_0x3f5a53['sender']['send']('fetch-progress',_0x4c64cc,!![]);try{let _0x1716f2=_0x2fbdbe['substring'](0x0,_0x2fbdbe['lastIndexOf']('/')),_0xcda4b4=_0x1716f2+'/liked_by';console['log'](_0xcda4b4),await _0x3ac474['goto'](_0xcda4b4),await delay(0x7d0,0xfa0),await notificationClear(_0x3ac474),await delay(0xc8,0x1f4),_0x4c64cc=Math['round'](++_0x1d49fd/_0x166eb4*0x64),_0x3f5a53['sender']['send']('fetch-progress',_0x4c64cc,!![]),await _0x3ac474['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x803dda=await _0x3ac474['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x63cdf7=await _0x3ac474['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x803dda['length']);let _0x506227=path['join'](__dirname,'/likers.csv');_0x4c64cc=Math['round'](++_0x1d49fd/_0x166eb4*0x64),_0x3f5a53['sender']['send']('fetch-progress',_0x4c64cc,!![]);_0x138453<=0x0&&(_0x138453=_0x803dda['length']);try{let _0x1e979f=[];for(let _0x2bbd62=0x0;_0x2bbd62<_0x803dda['length']&&_0x2bbd62<_0x138453;_0x2bbd62++){_0x1e979f['push'](await _0x803dda[_0x2bbd62]['evaluate'](_0x10290e=>_0x10290e['textContent']));try{const _0x44f388='INSERT\x20INTO\x20'+_0x46e302+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x44f388,[await _0x803dda[_0x2bbd62]['evaluate'](_0x530b51=>_0x530b51['textContent']),await _0x63cdf7[_0x2bbd62]['evaluate'](_0xf59470=>_0xf59470['textContent'])],function(_0xf2e645){_0xf2e645?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x46e302+'\x27:',_0xf2e645['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x5f313e){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2bbd62+'\x20:\x20'+_0x5f313e);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2bbd62+'\x20:\x20'+_0x5f313e);return handle_fail(0x1);}}return _0x4c64cc=Math['round'](++_0x1d49fd/_0x166eb4*0x64),_0x3f5a53['sender']['send']('fetch-progress',_0x4c64cc,!![]),_0x2d1ad3&&(_0x3f5a53['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3f5a53,_0x3ac474,_0x2549a9,_0x46e302,_0x1e979f)),new Promise(_0x13ba9c=>{_0x13ba9c('Scraping\x20finished!');});}catch(_0x29915b){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x29915b);return handle_fail(0x1);}}catch(_0x5f4d3e){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x5f4d3e);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x5f4d3e);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x54826f,_0x2d2d0d,_0x340139,_0x54087d,_0x38a757,_0x4790d7,_0x3e9108){let _0x1e23e1=0x3,_0x494ce3=0x0,_0x5cf6c7=0x0;try{await setCookiesForUser(_0x2d2d0d,_0x4790d7['username']);}catch(_0x53cc06){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x53cc06);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x53cc06);return handle_fail(0x2);}try{console['log'](_0x340139),await _0x2d2d0d['goto'](_0x340139),await delay(0x7d0,0xfa0),await notificationClear(_0x2d2d0d),await delay(0xc8,0x1f4);const _0x459750=COM_COMMENTS_BOX_BODY_DIV;let _0x4a5c1a;const _0x398c8d=await _0x2d2d0d['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0xceccc=await _0x2d2d0d['evaluate'](_0x268bd5=>_0x268bd5['innerHTML'],_0x398c8d),_0x520523=String(_0xceccc)['replace'](/[^0-9]/g,''),_0x15cc6f=Number(_0x520523)/0x14;_0x54087d<=0x0?_0x4a5c1a=Math['ceil'](_0x15cc6f/0x3):_0x4a5c1a=Math['ceil'](_0x54087d/0x3);_0x1e23e1+=_0x4a5c1a,_0x5cf6c7=Math['round'](++_0x494ce3/_0x1e23e1*0x64),_0x54826f['sender']['send']('fetch-progress',_0x5cf6c7,!![]),console['log']('Auto-scrolls:\x20'+_0x4a5c1a),await scroll(_0x2d2d0d,_0x459750,_0x4a5c1a,_0x21c543=>{_0x5cf6c7=Math['round'](++_0x494ce3/_0x1e23e1*0x64),_0x54826f['sender']['send']('fetch-progress',_0x5cf6c7,!![]);});try{const _0x40dd36=COM_REPLY_BUTTON_SPAN;await _0x2d2d0d['waitForSelector'](_0x40dd36),await delay(0x1f4,0x320);const _0x4ab5ce=await _0x2d2d0d['$$'](_0x40dd36);console['log'](_0x4ab5ce);let _0x3f377b=_0x4ab5ce['length'];await delay(0xc8,0x1f4);try{for(let _0x4db460=0x0;_0x4db460<_0x3f377b;_0x4db460++){_0x4ab5ce[_0x4db460]['click'](),await delay(0x320,0x5dc);}}catch(_0x52cc30){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x52cc30);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x52cc30);return handle_fail(0x2);}}catch(_0x28df6e){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x4107ef=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x2d2d0d['waitForSelector'](_0x4107ef),await delay(0x1f4,0x320),_0x5cf6c7=Math['round'](++_0x494ce3/_0x1e23e1*0x64),_0x54826f['sender']['send']('fetch-progress',_0x5cf6c7,!![]);const _0x5446d6=await _0x2d2d0d['$$'](_0x4107ef);let _0x16a238=path['join'](__dirname,'/comments.csv');_0x54087d<=0x0&&(_0x54087d=_0x5446d6['length']);console['log']('fetch_limit:\x20'+_0x54087d),console['log']('comments_len:\x20'+_0x5446d6['length']),_0x54087d++;try{let _0x1c3c27=[];for(let _0x33db4a=0x1;_0x33db4a<_0x5446d6['length']&&_0x33db4a<_0x54087d;_0x33db4a++){try{_0x1c3c27['push'](await _0x5446d6[_0x33db4a]['evaluate'](_0xd2fde5=>_0xd2fde5['textContent']));const _0xbef0ac=await db['prepare']('INSERT\x20INTO\x20'+_0x38a757+'\x20(username)\x20VALUES\x20(?)');await _0xbef0ac['run'](await _0x5446d6[_0x33db4a]['evaluate'](_0x5660bc=>_0x5660bc['textContent']),function(_0x1282a5){_0x1282a5&&console['log']('error\x20in\x20add-user:'+_0x1282a5);}),await _0xbef0ac['finalize']();}catch(_0x598e9){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x33db4a+'\x20:\x20'+_0x598e9);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x33db4a+'\x20:\x20'+_0x598e9);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x5cf6c7=Math['round'](++_0x494ce3/_0x1e23e1*0x64),_0x54826f['sender']['send']('fetch-progress',_0x5cf6c7,!![]),_0x54826f['sender']['send']('fetch-progress',0x64,!![]),_0x3e9108&&(_0x54826f['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x54826f,_0x2d2d0d,_0x4790d7,_0x38a757,_0x1c3c27)),_0x54826f['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x49d572=>{_0x49d572('Scraping\x20finished!');});}catch(_0x5b63dd){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x5b63dd);return handle_fail(0x2);}}catch(_0x1ca1af){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x1ca1af);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x1ca1af);return handle_fail(0x2);}}async function set_clearname_from_username(_0x2d2614,_0x3d6975,_0x93a913=null){try{let _0x240917,_0x4d88c3;const _0x1f9c63='SELECT\x20username\x20FROM\x20'+_0x3d6975+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x1f9c63,[],(_0x232632,_0x34deb1)=>{_0x232632&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x232632['message']),_0x34deb1['length']===0x0&&(_0x4d88c3=_0x34deb1['length']),_0x240917=_0x34deb1['map'](_0x27c6d6=>_0x27c6d6['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x4d88c3);if(_0x4d88c3===0x0){console['log']('Leave');return;}const _0x4f6606=await _0x2d2614['waitForSelector'](IG_SEARCH_BUTTON);await _0x4f6606['click'](),await delay(0x4b0,0x7d0);for(let _0x556521 of _0x240917){const _0x33f9b6=await _0x2d2614['waitForSelector'](IG_SEARCH_INPUT);await _0x33f9b6['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x2d2614['type'](IG_SEARCH_INPUT,_0x556521,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x2f3981=0x1;while(_0x2f3981!=0x14){console['log']('Schleife');try{let _0x189cb8=IG_NAME_SPAN_PART1+_0x2f3981+IG_USERNAME_SPAN_PART2;const _0x85374e=await _0x2d2614['waitForSelector'](_0x189cb8),_0x12a350=await _0x2d2614['evaluate'](_0xa661e6=>_0xa661e6['innerHTML'],_0x85374e);await delay(0xc8,0x1f4);if(_0x12a350==_0x556521){let _0x4b6bfe=IG_NAME_SPAN_PART1+_0x2f3981+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x1b3e12=await _0x2d2614['waitForSelector'](_0x4b6bfe);let _0x28b6a8=await _0x2d2614['evaluate'](_0x4bfc29=>_0x4bfc29['innerHTML'],_0x1b3e12);const _0x280c3e=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x54684e=_0x28b6a8['match'](_0x280c3e);_0x54684e?_0x28b6a8=_0x54684e[0x1]['trim']():_0x28b6a8=_0x28b6a8['trim']();_0x28b6a8['includes']('•')&&(_0x28b6a8=_0x28b6a8['substring'](0x0,_0x28b6a8['indexOf']('•')-0x1));const _0x1a9429='UPDATE\x20'+_0x3d6975+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x1a9429,[_0x28b6a8,_0x12a350],function(_0x17775b){_0x17775b&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x17775b['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x2f3981++;}catch(_0x5744da){const _0x551e0a='UPDATE\x20'+_0x3d6975+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x551e0a,['',_0x556521],function(_0x140651){_0x140651&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x140651['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x5744da);break;}}_0x93a913&&_0x93a913();}await _0x4f6606['click']();}catch(_0x2516b5){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x2516b5);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0xe6de57,_0x40ee84)=>{const _0x5db02c='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x5db02c,[],(_0x4696c3,_0x578aa4)=>{_0x4696c3?_0x40ee84(_0x4696c3):_0xe6de57(_0x578aa4);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0xb93219,_0xbfc4b5)=>{const _0x495bac='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x495bac,[],async(_0x4dbbf7,_0x1e91ca)=>{if(_0x4dbbf7)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x4dbbf7['message']),_0xbfc4b5({'status':'error','message':_0x4dbbf7['message']});else try{const _0x5e5b0f=await Promise['all'](_0x1e91ca['map'](_0x549f9d=>{return new Promise(_0x392586=>{if(!_0x549f9d['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x549f9d['campaign_name']),_0x392586({'campaign_name':_0x549f9d['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x528bb5='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x549f9d['list_id'],_0x57966d='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x549f9d['list_id']+'\x22';db['get'](_0x528bb5,[],(_0x3c159c,_0x18cb90)=>{_0x3c159c?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x549f9d['campaign_name']+':',_0x3c159c['message']),_0x392586({'campaign_name':_0x549f9d['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x57966d,[],(_0x2cb361,_0x353a82)=>{_0x2cb361?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x549f9d['campaign_name']+':',_0x2cb361['message']),_0x392586({'campaign_name':_0x549f9d['campaign_name'],'lead_count':_0x18cb90?_0x18cb90['lead_count']:0x0,'contacted_count':'N/A'})):_0x392586({'campaign_name':_0x549f9d['campaign_name'],'lead_count':_0x18cb90?_0x18cb90['lead_count']:0x0,'contacted_count':_0x353a82?_0x353a82['contacted_count']:0x0});});});});}));_0xb93219({'status':'success','campaigns':_0x5e5b0f});}catch(_0x1e5499){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x1e5499),_0xbfc4b5({'status':'error','message':_0x1e5499['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x1dad9b,_0x1416dd)=>{return new Promise((_0x2dedba,_0x4d82fb)=>{const _0x328e62='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x328e62,[_0x1416dd],(_0x5efa5c,_0x5b1c0a)=>{_0x5efa5c?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x5efa5c),_0x4d82fb(_0x5efa5c)):(console['log']('ROWS'),console['log'](_0x5b1c0a),debugDatabaseContents(),_0x2dedba(_0x5b1c0a));});});});const showTableContents=_0x2f2281=>{return new Promise((_0x4538cf,_0x450871)=>{const _0x274c7e='SELECT\x20*\x20FROM\x20'+_0x2f2281+';';campaignDB['all'](_0x274c7e,(_0x3844c1,_0x2c62c8)=>{_0x3844c1?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x2f2281+':',_0x3844c1),_0x450871(_0x3844c1)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x2f2281+':',_0x2c62c8),_0x4538cf({'status':'success','message':_0x2c62c8}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x2542a3){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x2542a3);}}ipcMain['handle']('create-campaign',async(_0xd57520,_0x1a1a6c)=>{return new Promise((_0x1a2ea1,_0x15273e)=>{const _0x4d1d73='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x4d1d73,[String(_0x1a1a6c)],function(_0x258a81){_0x258a81?_0x15273e(_0x258a81):_0x1a2ea1({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x5d95ea,_0x13d7dc)=>{return new Promise((_0x170fad,_0x1cfdca)=>{const _0x161524='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x161524,[_0x13d7dc],function(_0x2b5a15){_0x2b5a15?_0x1cfdca(_0x2b5a15):_0x170fad({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x1fb4da,_0x10157b,_0x688216,_0x28bda4,_0x5815a9,_0x476c08,_0x5244b9,_0xd473d5)=>{const _0x314131=await createMessageID(_0x5815a9);return new Promise((_0x13bf0e,_0x5c44bb)=>{if(!_0x10157b||!_0x688216||!_0x28bda4||!_0x314131||!_0x476c08)return _0x5c44bb({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x314131);const _0x1dcb9a='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x1dcb9a,[_0x688216,_0x28bda4,_0x314131,_0x476c08,_0x5244b9,_0xd473d5,_0x10157b],function(_0x17a2ff){if(_0x17a2ff)_0x5c44bb({'status':'error','message':_0x17a2ff['message']});else this['changes']===0x0?_0x5c44bb({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x13bf0e({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x16a381,_0x4af4a4,_0x247240,_0x1a50f0,_0xeccef)=>{return new Promise((_0x5b5630,_0x29e338)=>{const _0xecdcf4='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0xecdcf4,[_0x4af4a4,_0x247240,_0x1a50f0,_0xeccef],function(_0x4b48fb){return _0x4b48fb?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x4b48fb['message']),_0x29e338('insert-dm-response',{'success':![],'message':_0x4b48fb['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x5b5630('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xe54b40=>{return new Promise((_0x11c5d6,_0x2dd9da)=>{const _0xea33e8='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0xea33e8,[_0xe54b40],(_0x144bbc,_0x7e0921)=>{if(_0x144bbc)_0x2dd9da({'status':'error','message':_0x144bbc['message']});else{if(_0x7e0921)_0x11c5d6(_0x7e0921['message_id']);else{const _0x15742f='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x15742f,[_0xe54b40],function(_0xec8b72){_0xec8b72?_0x2dd9da({'status':'error','message':_0xec8b72['message']}):_0x11c5d6(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x2c54c8,_0x21a04e)=>{return new Promise((_0x5e3e81,_0x5b99bf)=>{const _0x24b6c8='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x21a04e;db['get'](_0x24b6c8,(_0x648806,_0x1d8d22)=>{_0x648806?_0x5b99bf({'status':'error','message':_0x648806['message']}):_0x5e3e81({'status':'success','count':_0x1d8d22['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x4c7889,_0x2c19df){try{const _0x1e59d3=await new Promise((_0x430ae8,_0x1a9054)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x2c19df],(_0x4b14ea,_0x51faba)=>{if(_0x4b14ea)_0x1a9054(_0x4b14ea);else{if(_0x51faba['length']>0x0){let _0xcdc1dc=JSON['parse'](_0x51faba[0x0]['cookie']);console['log'](_0xcdc1dc),_0x430ae8(_0xcdc1dc);}else _0x1a9054(new Error('User\x20with\x20username\x20'+_0x2c19df+'\x20does\x20not\x20exist.'));}});});await _0x4c7889['setCookie'](..._0x1e59d3),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x122fee){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x122fee);}}async function saveCookiesForUser(_0x3a070b,_0x3d8f20){try{const _0xda0de7=await _0x3a070b['cookies']();if(!_0xda0de7||_0xda0de7['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x3d8f20);const _0x4272af=JSON['stringify'](_0xda0de7);if(_0x4272af['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x3d8f20);return new Promise((_0x434e7e,_0x3d4da0)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x3d8f20],(_0x56de9e,_0x55cb4b)=>{if(_0x56de9e)return console['error']('Error\x20checking\x20user\x20existence:',_0x56de9e),_0x3d4da0(_0x56de9e);if(_0x55cb4b){const _0x2f31b5=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x2f31b5['run'](_0x4272af,_0x3d8f20,function(_0x1af063){return _0x1af063?(console['error']('Error\x20updating\x20cookies:',_0x1af063),_0x3d4da0(_0x1af063)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x3d8f20),_0x434e7e());});}else{const _0x4d3148=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x4d3148['run'](_0x3d8f20,_0x4272af,function(_0x5f00ee){return _0x5f00ee?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x5f00ee),_0x3d4da0(_0x5f00ee)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x3d8f20),_0x434e7e());});}});});}catch(_0x57de98){console['error']('Error\x20fetching\x20cookies:',_0x57de98);throw _0x57de98;}}async function createUserIfNotExists(_0x14aa60){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x14aa60],(_0x5b43d2,_0x5151b9)=>{if(_0x5b43d2){console['error']('Error\x20checking\x20user\x20existence:',_0x5b43d2);throw _0x5b43d2;}else{if(!_0x5151b9){const _0x1305ee=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x1305ee['run'](_0x14aa60,function(_0x911dd9){_0x911dd9?console['error']('Error\x20inserting\x20new\x20user:',_0x911dd9):console['log']('New\x20user\x20created:',_0x14aa60);});}else console['log']('User\x20already\x20exists:',_0x14aa60);}});}catch(_0x412319){console['error']('Error\x20creating\x20user:',_0x412319);throw _0x412319;}}ipcMain['handle']('create-relation',async(_0x38a8b8,_0x2706a9)=>{return new Promise((_0xc7b988,_0x2ebdb5)=>{const _0x437760='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x2706a9+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x437760,function(_0x54e1ec){_0x54e1ec?_0x2ebdb5(_0x54e1ec):_0xc7b988({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x12dd64,_0x51771)=>{return console['log']('droping\x20table'+_0x51771),new Promise((_0x1a9cbb,_0x3fc03f)=>{const _0x4f2b51='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x51771;console['log']('droping\x20table'+_0x51771),db['run'](_0x4f2b51,function(_0x83c08d){_0x83c08d?_0x3fc03f(_0x83c08d):_0x1a9cbb({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x3ee7c9=>{return new Promise((_0x16d0fa,_0xd175c3)=>{const _0x322331='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x322331,[],(_0x4c41f1,_0x1e87f7)=>{_0x4c41f1?_0xd175c3(_0x4c41f1):_0x16d0fa(_0x1e87f7['map'](_0x549e6b=>_0x549e6b['name']));});});}),ipcMain['handle']('add-user',async(_0x3e2554,_0x123131,_0x402268)=>{return new Promise(_0x280fab=>{const _0x3b7c4b=db['prepare']('INSERT\x20INTO\x20'+_0x402268+'\x20(username)\x20VALUES\x20(?)');_0x3b7c4b['run'](_0x123131,function(_0x5bb397){_0x5bb397?console['log']('error\x20in\x20add-user:'+_0x5bb397):_0x280fab({'status':'success','id':this['lastID']});}),_0x3b7c4b['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x50d4bf,_0x46cbaa)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x32d2a0,_0x362aca)=>{if(_0x32d2a0)_0x46cbaa(_0x32d2a0);else{_0x50d4bf({'status':'success','users':_0x362aca});for(_0x362aca of _0x362aca){console['log'](_0x362aca['username']);}}});});}),ipcMain['handle']('get-data',async(_0x178823,_0x4ed82c)=>{return new Promise((_0x48f230,_0x553d00)=>{const _0x518c40='SELECT\x20*\x20FROM\x20'+_0x4ed82c;console['log'](_0x518c40),db['all'](_0x518c40,[],(_0x4128ae,_0x573208)=>{_0x4128ae?_0x553d00(_0x4128ae):_0x48f230(_0x573208);});});}),ipcMain['handle']('get-accounts',async _0x10f48c=>{return new Promise((_0x4cd4c4,_0x25a488)=>{const _0x21ff3f='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x21ff3f),igaccountsDB['all'](_0x21ff3f,[],(_0x17a09d,_0x36c664)=>{_0x17a09d?_0x25a488(_0x17a09d):_0x4cd4c4(_0x36c664);});});}),ipcMain['handle']('get-targets',async(_0x322bd1,_0x4c2c3e)=>{return getTargetProfiles(_0x4c2c3e);}),ipcMain['handle']('delete-user',async(_0x248bee,_0x5d62d0,_0x2094ed)=>{return new Promise((_0x13830f,_0x17ee85)=>{const _0xc69572=db['prepare']('DELETE\x20FROM\x20'+_0x2094ed+'\x20WHERE\x20username\x20=\x20?');_0xc69572['run'](_0x5d62d0,function(_0x388d91){_0x388d91?_0x17ee85(_0x388d91):_0x13830f({'status':'success','changes':this['changes']});}),_0xc69572['finalize']();});}),ipcMain['handle']('delete-account',async(_0x4b3c2e,_0x2e61c9)=>{const _0x14e635=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x14e635['run'](_0x2e61c9,function(_0x21616d){_0x21616d&&console['log'](_0x21616d);}),_0x14e635['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0xf6c44f,_0x12f95c)=>{const _0x4e944d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4e944d,[],(_0xf58e31,_0x4ec83e)=>{_0xf58e31?_0x12f95c({'status':'error','message':_0xf58e31['message']}):_0xf6c44f({'status':'success','contactedCount':_0x4ec83e['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0xfbadfe,_0x2e09e8)=>{const _0x22e9c9='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x22e9c9,[],(_0x509278,_0x178581)=>{_0x509278?_0x2e09e8({'status':'error','message':_0x509278['message']}):_0xfbadfe({'status':'success','contactedCount':_0x178581['contactedCount']});});});});function exportDatabase(_0x567ac9){return new Promise((_0x356339,_0x1302d9)=>{const _0x47b46c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x567ac9+'\x0a\x20\x20\x20\x20';db['all'](_0x47b46c,[],async(_0x123788,_0x33ef0d)=>{if(_0x123788){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x123788['message']),_0x1302d9(_0x123788);return;}if(!_0x33ef0d||_0x33ef0d['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x356339();return;}const _0xb6be33=XLSX['utils']['json_to_sheet'](_0x33ef0d),_0x57259e=XLSX['utils']['sheet_to_csv'](_0xb6be33);try{const {canceled:_0x201057,filePath:_0x5189e8}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x567ac9+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x201057||!_0x5189e8){console['log']('Speichern\x20abgebrochen.'),_0x356339();return;}fs['writeFile'](_0x5189e8,_0x57259e,'utf8',_0x388d6c=>{_0x388d6c?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x388d6c['message']),_0x1302d9(_0x388d6c)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x5189e8),_0x356339());});}catch(_0x48bc7d){console['error']('Fehler\x20im\x20Speicherdialog:',_0x48bc7d),_0x1302d9(_0x48bc7d);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x2a90e0,_0x39fa80)=>{shell['openExternal'](_0x39fa80);});