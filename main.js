const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x160eba,_0x1ad68b){try{const _0x129158=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x1ad68b},'body':JSON['stringify']({'clearname':_0x160eba})});if(!_0x129158['ok']){const _0x2bf404=await _0x129158['text']();throw new Error(_0x129158['status']+':\x20'+_0x2bf404);}const _0x2a3f81=await _0x129158['json']();return _0x2a3f81;}catch(_0xe41cf6){console['error']('Error\x20in\x20extractFirstName:',_0xe41cf6);throw _0xe41cf6;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Double\x20tap\x20to\x20like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x3d8308=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x3d8308['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x3d8308['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x23ada9){var _0xccf19d=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x38eb87){console['log']('window\x20id:'+_0x38eb87['id']),_0x38eb87['id']>0x1&&(_0xccf19d=!![]);}),console['log']('child\x20opened\x20='+_0xccf19d);if(!_0xccf19d){const _0x56be17=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x56be17['loadFile'](_0x23ada9['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x10a6da=require('fs'),_0x849a24=path['join'](app['getPath']('userData'),'data'),_0x4fa69f=['campaign.db','crm.db','igaccounts.db'],_0x1a243b=[];try{_0x10a6da['mkdirSync'](_0x849a24,{'recursive':!![]});for(const _0x32ab07 of _0x4fa69f){const _0x2937e9=path['join'](process['resourcesPath'],'app','build','data',_0x32ab07),_0x78cb19=path['join'](_0x849a24,_0x32ab07);!_0x10a6da['existsSync'](_0x78cb19)?(_0x10a6da['copyFileSync'](_0x2937e9,_0x78cb19),console['log']('[InitDB]\x20Kopiert\x20'+_0x32ab07+'\x20nach:\x20'+_0x78cb19)):console['log']('[InitDB]\x20'+_0x32ab07+'\x20existiert\x20bereits:\x20'+_0x78cb19),_0x1a243b['push'](_0x78cb19);}}catch(_0x215415){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x215415);}return _0x1a243b;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0xf1cc6a,AppUpdate:_0x509999}=require('electron-updater');_0xf1cc6a['autoDownload']=![],_0xf1cc6a['autoInstallOnAppQuit']=!![],_0xf1cc6a['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0xf1cc6a['on']('update-available',_0x4e4ccb=>{console['log']('Update\x20verfügbar:',_0x4e4ccb),_0xf1cc6a['downloadUpdate']();}),_0xf1cc6a['on']('update-downloaded',_0x3c384f=>{console['log']('Update\x20heruntergeladen:',_0x3c384f),_0xf1cc6a['quitAndInstall']();}),_0xf1cc6a['on']('error',_0x2b86d5=>{console['error']('Fehler\x20beim\x20Updaten:',_0x2b86d5);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x45a172,AppUpdate:_0x50f4e3}=require('electron-updater');_0x45a172['autoDownload']=![],_0x45a172['autoInstallOnAppQuit']=!![],_0x45a172['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x45a172['on']('update-available',_0x4c6c8b=>{console['log']('Update\x20verfügbar:',_0x4c6c8b),_0x45a172['downloadUpdate']();}),_0x45a172['on']('update-downloaded',_0x89630e=>{console['log']('Update\x20heruntergeladen:',_0x89630e),console['log']('Neustarten\x20zum\x20Updaten');}),_0x45a172['on']('error',_0x12ef98=>{console['error']('Fehler\x20beim\x20Updaten:',_0x12ef98);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x3d8d1e='',_0xef1842=null;if(process['platform']==='darwin')_0x3d8d1e=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x3d8d1e=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3d8d1e}),_0xef1842=await browser_login['newPage'](),_0xef1842['setDefaultNavigationTimeout'](0x1d4c),_0xef1842['setDefaultTimeout'](0x1d4c),await _0xef1842['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0xef1842;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x3bfb58=0x1,_0x27acf4=0x0){try{let _0x563715='',_0x459198=null;const _0x5d417c=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x563715=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x563715=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x3bfb58===0x0&&!pageStack[_0x27acf4])return browser=await puppeteer['launch']({'headless':_0x5d417c,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x563715}),_0x459198=await browser['newPage'](),_0x459198['setDefaultNavigationTimeout'](0x1d4c),_0x459198['setDefaultTimeout'](0x1d4c),await _0x459198['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x27acf4]=_0x459198,_0x459198;return(browser===null||pageStack[_0x27acf4]===null||pageStack[_0x27acf4]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x5d417c,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x563715})),(pageStack[_0x27acf4]===null||pageStack[_0x27acf4]['isClosed']())&&(_0x459198=await browser['newPage'](),_0x459198['setDefaultNavigationTimeout'](0x1d4c),_0x459198['setDefaultTimeout'](0x1d4c),await _0x459198['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x27acf4]=_0x459198),pageStack[_0x27acf4];}catch(_0x25c92b){console['error']('Failed\x20to\x20launch\x20browser:',_0x25c92b);const _0x43f52b=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x25c92b);throw _0x43f52b;}}ipcMain['on']('login',async(_0x405a7f,_0x2aa0e3)=>{const _0x567127=await getBrowserPageLogin();await _0x567127['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x567127,_0x2aa0e3),ipcMain['on']('setLoginCookies',async(_0x1a0e4e,_0x100142)=>{try{await set_login_cookies(_0x567127,_0x100142);}catch(_0x176753){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x176753);}});}),ipcMain['on']('export-relation',async(_0x6263eb,_0x24bbaf)=>{try{await exportDatabase(_0x24bbaf),_0x6263eb['reply']('export-relation-response',{'success':!![]});}catch(_0x498928){console['error'](_0x498928),_0x6263eb['reply']('export-relation-response',{'success':![],'message':_0x498928['message']});}}),ipcMain['handle']('sendMessage',async(_0x5e3a93,_0x37fb26,_0x202b8b,_0x4a4fa5,_0x428aa8,_0x2b2566,_0xa6ec85,_0x3a4e2b,_0x158527,_0x122d14,_0x107dba)=>{isStopping=![];let _0x5b8011=null;return _0xa6ec85?_0x5b8011=await getBrowserPage(_0x428aa8,_0x3a4e2b):_0x5b8011=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x37fb26),send_message(_0x5b8011,_0x37fb26,_0x202b8b,_0x4a4fa5,_0x428aa8,_0x2b2566,_0x158527,_0x122d14,_0x107dba);}),ipcMain['handle']('stop-action',async(_0x3f86c8,_0x431bab)=>{isStopping=!![];const _0x1007cc=await getBrowserPage(0x1,_0x431bab);await _0x1007cc['close']();}),ipcMain['handle']('fetch_followers',async(_0x575bc9,_0x3119f2,_0x4c23b6,_0x544761,_0x547158,_0xc284b4)=>{isStopping=![];const _0x133eb4=await getBrowserPage();return fetch_followers_from_account(_0x575bc9,_0x133eb4,_0x3119f2,_0x4c23b6,_0x544761,_0x547158,_0xc284b4);}),ipcMain['handle']('get-account-details',async(_0x302f3a,_0x7f4ac9,_0x4685ac,_0x11a432)=>{isStopping=![];const _0x47cef9=await getBrowserPage();return fetch_account_details(_0x47cef9,_0x7f4ac9,_0x4685ac,_0x11a432);}),ipcMain['handle']('fetch_likes',async(_0x132726,_0x38513e,_0x578af4,_0x326835,_0x42e607,_0x1b1e4e)=>{isStopping=![];const _0xa8c8e4=await getBrowserPage();return fetch_likers_from_post(_0x132726,_0xa8c8e4,_0x38513e,_0x578af4,_0x326835,_0x42e607,_0x1b1e4e);}),ipcMain['handle']('fetch_comments',async(_0x6eaf55,_0x2ac7e9,_0x7b81a8,_0x3889df,_0x375279,_0x538436)=>{isStopping=![];const _0x2c262c=await getBrowserPage();return fetch_comments_from_post(_0x6eaf55,_0x2c262c,_0x2ac7e9,_0x7b81a8,_0x3889df,_0x375279,_0x538436);});async function updateAppSilent(){const {spawn:_0x1b4d10}=require('child_process'),_0x21fe79=require('path'),_0x170478=require('electron-log');return _0x170478['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x7c5558,_0x27036a)=>{const {updateElectronApp:_0x5720e3,UpdateSourceType:_0x238a95}=require('update-electron-app');_0x5720e3({'updateSource':{'type':_0x238a95['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x170478}),_0x7c5558('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2094da,_0x55eb9a)=>{doFullElectronUpdateSilent(),_0x2094da('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x11e2c8}=require('child_process'),_0x2a8f28=require('path'),_0x5d43fb=require('electron-log');return _0x5d43fb['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x1f94fe,_0x1fb755)=>{const {updateElectronApp:_0xde570d,UpdateSourceType:_0x43bac5}=require('update-electron-app');_0xde570d({'updateSource':{'type':_0x43bac5['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x5d43fb}),_0x1f94fe('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x411faf,_0x3c2120)=>{doFullElectronUpdate(),_0x411faf('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x141cf0,_0x228fd5)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x141cf0('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x1ba399=path['join'](__dirname,'mac-updater-intern.sh'),_0x41293d=spawn('/bin/bash',[_0x1ba399],{'detached':!![],'stdio':'ignore'});_0x41293d['unref'](),setTimeout(()=>{_0x141cf0('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x228fd5(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x147ae0=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x2f52b4,_0x2aab77)=>{console['log']('Update\x20Silent:\x20'+_0x2aab77);if(_0x2aab77){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x304a28,_0x5a87cd){return Math['random']()*(_0x5a87cd-_0x304a28+0x1)+_0x304a28;}function delay(_0x3c9763,_0x550707){let _0x47b38d=getRnd(_0x3c9763,_0x550707);return new Promise(function(_0x17b70b){setTimeout(_0x17b70b,_0x47b38d);});}async function scroll(_0x388963,_0x5aa497,_0x1da6eb=0x2,_0x49c3a5){const _0x2c9ce9=await _0x388963['waitForSelector'](_0x5aa497);for(let _0x4e1e7e=0x0;_0x4e1e7e<_0x1da6eb;_0x4e1e7e++){console['log']('Scrolling\x20'+_0x4e1e7e),await _0x388963['evaluate'](_0x4a9443=>{const _0x1d7f54=document['querySelector'](_0x4a9443);_0x1d7f54&&_0x1d7f54['scrollBy'](0x0,0x190);},_0x5aa497),await delay(0x320,0x5dc),_0x49c3a5();}}async function saveCookies(_0x521d4a){let _0x592a1b=await _0x521d4a['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x592a1b,null,0x2));}async function notificationClear(_0x3cd5b3){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x3cd5b3['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x3cd5b3['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x3bf1ff){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x3bf1ff);}}async function getTargetProfiles(_0x494a38){return new Promise((_0x1a9331,_0x4a8a42)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x494a38,(_0xf1efff,_0x3fb03a)=>{_0xf1efff?_0x4a8a42(_0xf1efff):_0x1a9331(_0x3fb03a);});});}async function login_legacy(_0x191a5f,_0x2bdda8,_0x133bc0){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x191a5f,_0x2bdda8),await createUserIfNotExists(_0x2bdda8,_0x133bc0);}catch(_0x25a887){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x25a887);}try{await _0x191a5f['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x191a5f['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x191a5f['click']('button._a9--._ap36._a9_0');}catch(_0x895b0a){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x191a5f['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x191a5f['type']('input[name=\x27username\x27]',_0x2bdda8,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x191a5f['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x191a5f['type']('input[name=\x27password\x27]',_0x133bc0,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x191a5f['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x191a5f['click']('button[type=\x27submit\x27]');}catch(_0x49e72a){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x191a5f),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x191a5f,_0x2bdda8);}catch(_0x4e5955){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4e5955);}}catch(_0x5938bd){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x5938bd);}}async function login(_0x247a4f,_0x5f21eb){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x247a4f,_0x5f21eb),await createUserIfNotExists(_0x5f21eb);}catch(_0x1dc734){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1dc734);}try{await _0x247a4f['goto']('https://www.instagram.com/accounts/login/');}catch(_0x521c48){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x521c48);}}async function set_login_cookies(_0x484fcb,_0x104d22){try{await saveCookiesForUser(_0x484fcb,_0x104d22);}catch(_0x304b19){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x304b19);}}async function waitForXPath(_0x5825dd,_0x590539,_0x296d30={}){return await _0x5825dd['waitForFunction'](_0x57be9c=>{return document['evaluate'](_0x57be9c,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x296d30,_0x590539),_0x5825dd['evaluateHandle'](_0x32fde8=>document['evaluate'](_0x32fde8,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x590539);}async function waitForSelectorWithFallbacks(_0x416991,_0x35116b,_0x5e3374={}){!Array['isArray'](_0x35116b)&&(_0x35116b=[_0x35116b]);for(let _0x1d3a9f=0x0;_0x1d3a9f<_0x35116b['length'];_0x1d3a9f++){const _0x43aa93=_0x35116b[_0x1d3a9f],_0x139770=_0x43aa93['startsWith']('//')||_0x43aa93['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x139770?'XPath':'Selector')+'\x20'+(_0x1d3a9f+0x1)+'/'+_0x35116b['length']+':\x20'+_0x43aa93['substring'](0x0,0x32)+'...');const _0x3f4554=_0x1d3a9f===0x0?_0x5e3374['timeout']||0x1388:0x7d0;let _0x3b4865;if(_0x139770){const _0x572200=await waitForXPath(_0x416991,_0x43aa93,{..._0x5e3374,'timeout':_0x3f4554});if(!_0x572200)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x3b4865=_0x572200;}else _0x3b4865=await _0x416991['waitForSelector'](_0x43aa93,{..._0x5e3374,'timeout':_0x3f4554});return console['log']((_0x139770?'XPath':'Selector')+'\x20'+(_0x1d3a9f+0x1)+'\x20gefunden!'),_0x3b4865;}catch(_0x454a77){console['log']((_0x139770?'XPath':'Selector')+'\x20'+(_0x1d3a9f+0x1)+'\x20nicht\x20gefunden:\x20'+_0x454a77['message']);if(_0x1d3a9f===_0x35116b['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x35116b['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x454a77['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x52269e,_0x111cc1,_0x1daaa0={}){return await _0x52269e['waitForFunction'](_0x4dc79f=>{return document['evaluate'](_0x4dc79f,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x1daaa0,_0x111cc1),_0x52269e['evaluateHandle'](_0x12ce7f=>{const _0x2125e5=document['evaluate'](_0x12ce7f,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x8bfd3c=[];for(let _0x544e50=0x0;_0x544e50<_0x2125e5['snapshotLength'];_0x544e50++){_0x8bfd3c['push'](_0x2125e5['snapshotItem'](_0x544e50));}return _0x8bfd3c;},_0x111cc1)['then'](_0x4cb40a=>_0x4cb40a['getProperties']());}async function checkLoginStatus(_0x1a7e97){const _0x43330b=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x138cc1=null;try{_0x138cc1=await waitForSelectorWithFallbacks(_0x1a7e97,_0x43330b,{'timeout':0x7d0});}catch(_0x4d74bc){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x4d74bc),!![];}if(_0x138cc1){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function send_message(_0x56108c,_0x263de1,_0xde827,_0x3293a1,_0x1eb32c,_0x54f5b8,_0x2a7d19,_0x1facd3,_0x56cd71){return new Promise(async(_0x2142cc,_0x53d14c)=>{_0x54f5b8=_0x54f5b8['split'](';'),console['log'](_0x54f5b8[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x1eb32c);try{await setCookiesForUser(_0x56108c,_0x54f5b8[0x0]);}catch(_0x4f09d3){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4f09d3),_0x2142cc({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4f09d3});return;}await delay(0x6a4,0x7d0);try{await _0x56108c['goto']('https://www.instagram.com/'+_0x263de1+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x56108c);}catch(_0x3f1690){_0x2142cc({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x3f1690});return;}try{await checkLoginStatus(_0x56108c);}catch(_0x2effa6){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x2effa6),_0x53d14c('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}console['log']('UserSkip:\x20'+_0x2a7d19);if(_0x2a7d19==0x1)try{const _0x5f137e=await _0x56108c['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x260b90=>_0x260b90['textContent']['trim']());console['log'](_0x5f137e);if(_0x5f137e==='Following'||_0x5f137e==='Folge\x20ich')return _0x2142cc({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x657cf7){}try{const _0x438a27=await waitForSelectorWithFallbacks(_0x56108c,K_DIRECT_MSG_BUTTON);await _0x438a27['click']();}catch(_0xf98435){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0xf98435);try{try{const _0x4d7c81=await waitForSelectorWithFallbacks(_0x56108c,K_OPTIONS_BUTTON);await _0x4d7c81['click']();}catch(_0x56bf5b){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x56bf5b),_0x2142cc({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x56bf5b});return;}await delay(0x1f4,0x320);const _0x32742c=await waitForXPath(_0x56108c,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x32742c['click']();}catch(_0x2fa7f1){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x2fa7f1),_0x2142cc({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x56108c);}catch(_0x5d259d){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x5d259d);}try{const _0x34d0e4=await waitForSelectorWithFallbacks(_0x56108c,K_CHAT_INPUT_FIELD);if(_0x1facd3){const _0x52df63=await _0x56108c['$'](K_ALREADY_CHATTED);if(_0x52df63)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x263de1),_0x2142cc({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x2fa4a6=await _0x56108c['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x2fa4a6),_0x3293a1=_0x3293a1['replace']('{USERNAME}',_0x263de1);let _0x51c8ea;if(_0x3293a1['includes']('{NAME}')||_0x3293a1['includes']('{name}'))try{const _0x5cbc9a=await extractFirstName(_0x2fa4a6,_0x56cd71);console['log']('Response\x20Clearname\x20valid:\x20'+_0x5cbc9a['valid']),_0x5cbc9a['valid']?(_0x3293a1=_0x3293a1['replaceAll'](/{NAME}|{name}/g,_0x5cbc9a['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x5cbc9a['name']),_0x51c8ea=_0x5cbc9a['name']):(_0x3293a1=_0x3293a1['replaceAll'](/ ?({NAME}|{name})/g,''),_0x51c8ea='UNKNOWN_NAME');}catch(_0x1e0ae3){console['log'](_0x1e0ae3['message']),_0x51c8ea=_0x1e0ae3['message'];let _0x3d873f=_0x2fa4a6['replace'](/[^\p{L}\s]/gu,''),_0x592d68=_0x3d873f['split']('\x20')[0x0];_0x592d68['length']>0x2&&!_0x592d68['includes']('Instagram')?_0x3293a1=_0x3293a1['replaceAll'](/{NAME}|{name}/g,_0x592d68):_0x3293a1=_0x3293a1['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x3293a1);const _0x3f344a=_0x3293a1['split']('\x0a');await _0x34d0e4['type'](_0x3f344a[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x403f3f=0x1;_0x403f3f<_0x3f344a['length'];_0x403f3f++){await _0x56108c['keyboard']['down']('Shift'),await _0x56108c['keyboard']['press']('Enter'),await _0x56108c['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x3f344a[_0x403f3f]['length']>0x0&&await _0x34d0e4['type'](_0x3f344a[_0x403f3f],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x3b754f=await waitForSelectorWithFallbacks(_0x56108c,K_SEND_MSG_BUTTON);await _0x3b754f['click']();}catch(_0x57ca46){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x57ca46),_0x2142cc({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x263de1+'\x20überspringen.','error':_0x57ca46['message']});}await delay(0x320,0x3e8),_0x2142cc({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x2fa4a6,'extracted_clearname':_0x51c8ea});}catch(_0x4cc760){let _0x52e5be=_0x4cc760;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x52e5be),_0x2142cc({'status':0x1f4,'message':'Error\x20500:\x20'+_0x52e5be});}});}function handle_fail(_0x1d35b0){if(isStopping)return new Promise(_0x3f83ae=>{_0x3f83ae('Scraper\x20gestoppt.');});else{let _0x1b5e71='';switch(_0x1d35b0){case 0x0:_0x1b5e71='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x1b5e71='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x1b5e71='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x1b5e71='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x1fd42e,_0x34ddc4)=>{_0x34ddc4(_0x1b5e71);});}}async function fetch_account_details(_0x46406f,_0x391c54,_0x4c4cdf,_0x276f55){try{await setCookiesForUser(_0x46406f,_0x4c4cdf['username']);}catch(_0xd74712){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0xd74712);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0xd74712);return handle_fail(0x0);}_0x46406f['setDefaultNavigationTimeout'](0x7530),await _0x46406f['goto']('https://www.instagram.com/'+_0x391c54+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x46406f);const _0x51c8dc=await _0x46406f['evaluate'](()=>{const _0x2d1aa8=document['querySelector']('meta[property=\x22og:image\x22]');return _0x2d1aa8?_0x2d1aa8['getAttribute']('content'):null;});await _0x46406f['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x46f8ff=await _0x46406f['evaluate'](()=>{const _0x26871a=document['querySelector']('meta[name=\x22description\x22]');if(!_0x26871a)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x3203e4=_0x26871a['getAttribute']('content');if(!_0x3203e4)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x3203e4);const _0x2279f3=/\s*[–-]\s*/,_0x3839ea=_0x3203e4['split'](_0x2279f3);if(_0x3839ea['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x1059cd=_0x3839ea[0x0],_0x310ed1=_0x3839ea[0x1],_0x28930e=_0x1059cd['split'](',\x20');if(_0x28930e['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x308140=_0x28930e[0x0]['split']('\x20')[0x0],_0x3904f3=_0x28930e[0x1]['split']('\x20')[0x0],_0x53e4d0=_0x28930e[0x2]['split']('\x20')[0x0];let _0x2ec221='',_0x23d9f0='';const _0x266c1f='\x20on\x20Instagram:\x20',_0x50c7f4=_0x310ed1['split'](_0x266c1f);return _0x2ec221=_0x50c7f4[0x0]['trim'](),_0x2ec221=_0x2ec221['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x50c7f4['length']>0x1&&(_0x23d9f0=_0x50c7f4[0x1]['trim'](),_0x23d9f0['startsWith']('\x22')&&_0x23d9f0['endsWith']('\x22')&&(_0x23d9f0=_0x23d9f0['substring'](0x1,_0x23d9f0['length']-0x1)['trim']()),_0x23d9f0=_0x23d9f0['replace'](/&quot;/g,'')['trim']()),{'followers':_0x308140,'following':_0x3904f3,'posts':_0x53e4d0,'nameText':_0x2ec221,'bio':_0x23d9f0};});console['log']('Extracted\x20profile\x20data:',_0x46f8ff);const _0x15e934=_0x46f8ff['nameText'],_0x3e7314=_0x51c8dc,_0x3d9ed9=_0x46f8ff['bio'],_0x466773=_0x46f8ff['followers'],_0x2145e1=_0x46f8ff['following'],_0x2f69df=_0x46f8ff['posts'],_0x2f3502=![],_0x1b30f0=![],_0x4e7975=![],_0x1398bf='\x0a\x20\x20INSERT\x20INTO\x20'+_0x276f55+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x1398bf,[_0x391c54,_0x15e934,_0x3e7314,_0x3d9ed9,_0x466773,_0x2145e1,_0x2f69df,_0x2f3502,_0x1b30f0,_0x4e7975],function(_0x4c05f0){_0x4c05f0?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x4c05f0['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x2cdf60,_0x5c8301,_0x2e63a4,_0xfeb79c,_0x23c054,_0x1b769b,_0x1d1aa2){let _0x1ae7fc=0x4,_0x47b6bb=0x0,_0x184310=0x0;try{await setCookiesForUser(_0x5c8301,_0x1b769b['username']);}catch(_0x218087){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x218087);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x218087);return handle_fail(0x0);}let _0x41f8fc=0x0;try{await _0x5c8301['goto']('https://www.instagram.com/'+_0x2e63a4+'/'),await notificationClear(_0x5c8301);try{if(_0xfeb79c<=0x0){const _0x58839f=await _0x5c8301['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x85db3b=await _0x5c8301['evaluate'](_0x451a65=>_0x451a65['innerHTML'],_0x58839f);_0x41f8fc=Math['ceil'](_0x85db3b/0x4);}else _0x41f8fc=Math['ceil'](_0xfeb79c/0x4);_0x1ae7fc+=_0x41f8fc,_0x184310=Math['round'](++_0x47b6bb/_0x1ae7fc*0x64),_0x2cdf60['sender']['send']('fetch-progress',_0x184310,!![]);let _0x5cb0f0=await _0x5c8301['waitForSelector']('a[href=\x22/'+_0x2e63a4+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x5cb0f0['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x2e63a4+'\x20gesichtet'),_0x184310=Math['round'](++_0x47b6bb/_0x1ae7fc*0x64),_0x2cdf60['sender']['send']('fetch-progress',_0x184310,!![]);}catch(_0x538b74){console['log']('Follower\x20Liste\x20von\x20'+_0x2e63a4+'\x20nicht\x20gefunden:'+_0x538b74);throw new Error('Follower\x20Liste\x20von\x20'+_0x2e63a4+'\x20nicht\x20gefunden:'+_0x538b74);return handle_fail(0x0);}}catch(_0x2e5470){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2e5470);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2e5470);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x41f8fc),await scroll(_0x5c8301,FOLLOWER_FENSTER,_0x41f8fc,_0x15285d=>{_0x184310=Math['round'](++_0x47b6bb/_0x1ae7fc*0x64),_0x2cdf60['sender']['send']('fetch-progress',_0x184310,!![]);}),await _0x5c8301['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x212ec9=await _0x5c8301['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x358fb1=await _0x5c8301['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x184310=Math['round'](++_0x47b6bb/_0x1ae7fc*0x64),_0x2cdf60['sender']['send']('fetch-progress',_0x184310,!![]);_0xfeb79c<=0x0&&(_0xfeb79c=_0x212ec9['length']);let _0x31c902=[];for(let _0x3c519f=0x0;_0x3c519f<_0x212ec9['length']&&_0x3c519f<_0xfeb79c;_0x3c519f++){_0x31c902['push'](await _0x212ec9[_0x3c519f]['evaluate'](_0xc4c352=>_0xc4c352['textContent']));const _0x507470='INSERT\x20INTO\x20'+_0x23c054+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x507470,[await _0x212ec9[_0x3c519f]['evaluate'](_0x292f73=>_0x292f73['textContent']),await _0x358fb1[_0x3c519f]['evaluate'](_0x455a44=>_0x455a44['textContent'])],function(_0x53ad46){_0x53ad46?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x23c054+'\x27:',_0x53ad46['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x184310=Math['round'](++_0x47b6bb/_0x1ae7fc*0x64),_0x2cdf60['sender']['send']('fetch-progress',_0x184310,!![]),_0x1d1aa2&&(_0x2cdf60['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2cdf60,_0x5c8301,_0x1b769b,_0x23c054,_0x31c902)),new Promise(_0x1d9c61=>{_0x1d9c61('Scraping\x20finished!');});}catch(_0x41458a){if(_0x1d1aa2)throw new Error(_0x41458a);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x2e63a4+'\x20nicht\x20gefunden:\x20'+_0x41458a);return handle_fail(0x0);}}async function fetch_details_from_list(_0x533b1b,_0x4fbb92,_0x82b735,_0x2c4224,_0x13041f){let _0x44dd84=0x0,_0x559496=0x0;for(let _0x372e6f=0x0;_0x372e6f<_0x13041f['length'];_0x372e6f++){console['log']('Processing\x20profile:',_0x13041f[_0x372e6f]);try{await fetch_account_details(_0x4fbb92,_0x13041f[_0x372e6f],_0x82b735,_0x2c4224);}catch(_0xc354aa){console['error']('Detailed\x20Scraping\x20von:\x20',_0x13041f[_0x372e6f],_0xc354aa);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x13041f[_0x372e6f]+'\x20'+_0xc354aa);}_0x559496=Math['round'](++_0x44dd84/_0x13041f['length']*0x64),_0x533b1b['sender']['send']('fetch-progress',_0x559496,!![],!![]);}}async function fetch_likers_from_post(_0x531204,_0x14a389,_0x89d945,_0x23e689,_0x43a7a9,_0x539469,_0x17dc8d){let _0x3151ae=0x4,_0x37b60d=0x0,_0xe17176=0x0;try{await setCookiesForUser(_0x14a389,_0x539469['username']);}catch(_0x148b1f){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x148b1f);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x148b1f);return handle_fail(0x1);return;}_0xe17176=Math['round'](++_0x37b60d/_0x3151ae*0x64),_0x531204['sender']['send']('fetch-progress',_0xe17176,!![]);try{let _0x100524=_0x89d945['substring'](0x0,_0x89d945['lastIndexOf']('/'));_0x100524['includes']('/reel/')&&(_0x100524=_0x100524['replace']('/reel/','/p/'));let _0x793834=_0x100524+'/liked_by';console['log'](_0x793834),await _0x14a389['goto'](_0x793834),await delay(0x7d0,0xfa0),await notificationClear(_0x14a389),await delay(0xc8,0x1f4),_0xe17176=Math['round'](++_0x37b60d/_0x3151ae*0x64),_0x531204['sender']['send']('fetch-progress',_0xe17176,!![]),await _0x14a389['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x19f11f=await _0x14a389['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x17fe8b=await _0x14a389['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x19f11f['length']);let _0x58391f=path['join'](__dirname,'/likers.csv');_0xe17176=Math['round'](++_0x37b60d/_0x3151ae*0x64),_0x531204['sender']['send']('fetch-progress',_0xe17176,!![]);_0x23e689<=0x0&&(_0x23e689=_0x19f11f['length']);try{let _0x9401e=[];for(let _0x1908d3=0x0;_0x1908d3<_0x19f11f['length']&&_0x1908d3<_0x23e689;_0x1908d3++){_0x9401e['push'](await _0x19f11f[_0x1908d3]['evaluate'](_0x2416e0=>_0x2416e0['textContent']));try{const _0x3c6877='INSERT\x20INTO\x20'+_0x43a7a9+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3c6877,[await _0x19f11f[_0x1908d3]['evaluate'](_0x45d66f=>_0x45d66f['textContent']),await _0x17fe8b[_0x1908d3]['evaluate'](_0x4cfb25=>_0x4cfb25['textContent'])],function(_0x4c9673){_0x4c9673?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x43a7a9+'\x27:',_0x4c9673['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x30d0a9){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1908d3+'\x20:\x20'+_0x30d0a9);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1908d3+'\x20:\x20'+_0x30d0a9);return handle_fail(0x1);}}return _0xe17176=Math['round'](++_0x37b60d/_0x3151ae*0x64),_0x531204['sender']['send']('fetch-progress',_0xe17176,!![]),_0x17dc8d&&(_0x531204['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x531204,_0x14a389,_0x539469,_0x43a7a9,_0x9401e)),new Promise(_0x28c990=>{_0x28c990('Scraping\x20finished!');});}catch(_0xd7153a){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0xd7153a);return handle_fail(0x1);}}catch(_0x210952){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x210952);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x210952);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x48885d,_0x1768e7,_0x13468b,_0x4590c2,_0x55f257,_0x13401d,_0x5db277){let _0x1b3704=0x3,_0x223b49=0x0,_0x49e8e7=0x0;try{await setCookiesForUser(_0x1768e7,_0x13401d['username']);}catch(_0x57844a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x57844a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x57844a);return handle_fail(0x2);}try{console['log'](_0x13468b),await _0x1768e7['goto'](_0x13468b),await delay(0x7d0,0xfa0),await notificationClear(_0x1768e7),await delay(0xc8,0x1f4);const _0x5e40cb=COM_COMMENTS_BOX_BODY_DIV;let _0xc2cecd;const _0x51f078=await _0x1768e7['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x20b3b2=await _0x1768e7['evaluate'](_0x55a1b5=>_0x55a1b5['innerHTML'],_0x51f078),_0x4cb98d=String(_0x20b3b2)['replace'](/[^0-9]/g,''),_0x418b61=Number(_0x4cb98d)/0x14;_0x4590c2<=0x0?_0xc2cecd=Math['ceil'](_0x418b61/0x3):_0xc2cecd=Math['ceil'](_0x4590c2/0x3);_0x1b3704+=_0xc2cecd,_0x49e8e7=Math['round'](++_0x223b49/_0x1b3704*0x64),_0x48885d['sender']['send']('fetch-progress',_0x49e8e7,!![]),console['log']('Auto-scrolls:\x20'+_0xc2cecd),await scroll(_0x1768e7,_0x5e40cb,_0xc2cecd,_0x3153c4=>{_0x49e8e7=Math['round'](++_0x223b49/_0x1b3704*0x64),_0x48885d['sender']['send']('fetch-progress',_0x49e8e7,!![]);});try{const _0x376fbf=COM_REPLY_BUTTON_SPAN,_0x493f35=await waitForXPathAll(_0x1768e7,_0x376fbf);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x493f35['size']),await delay(0x1f4,0x320);let _0x40ede9=_0x493f35['size'],_0x3343a2=[];for(const [_0x47216e,_0x5aa2de]of _0x493f35){_0x3343a2['push'](_0x5aa2de);}console['log']('Alle\x20Reply-Buttons:',_0x3343a2['length']);try{for(let _0x39258b=0x0;_0x39258b<_0x40ede9;_0x39258b++){await _0x3343a2[_0x39258b]['click'](),await delay(0x320,0x5dc);}}catch(_0x218fdd){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x218fdd);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x218fdd);return handle_fail(0x2);}}catch(_0x30dfe8){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x469f2a=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x1768e7['waitForSelector'](_0x469f2a),await delay(0x1f4,0x320),_0x49e8e7=Math['round'](++_0x223b49/_0x1b3704*0x64),_0x48885d['sender']['send']('fetch-progress',_0x49e8e7,!![]);const _0x147e39=await _0x1768e7['$$'](_0x469f2a);let _0x5f316e=path['join'](__dirname,'/comments.csv');_0x4590c2<=0x0&&(_0x4590c2=_0x147e39['length']);console['log']('fetch_limit:\x20'+_0x4590c2),console['log']('comments_len:\x20'+_0x147e39['length']),_0x4590c2++;try{let _0x49bc90=[];for(let _0x282eff=0x1;_0x282eff<_0x147e39['length']&&_0x282eff<_0x4590c2;_0x282eff++){try{_0x49bc90['push'](await _0x147e39[_0x282eff]['evaluate'](_0x20f014=>_0x20f014['textContent']));const _0x5be773=await db['prepare']('INSERT\x20INTO\x20'+_0x55f257+'\x20(username)\x20VALUES\x20(?)');await _0x5be773['run'](await _0x147e39[_0x282eff]['evaluate'](_0x541cb2=>_0x541cb2['textContent']),function(_0x3c68a5){_0x3c68a5&&console['log']('error\x20in\x20add-user:'+_0x3c68a5);}),await _0x5be773['finalize']();}catch(_0xf0642f){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x282eff+'\x20:\x20'+_0xf0642f);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x282eff+'\x20:\x20'+_0xf0642f);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x49e8e7=Math['round'](++_0x223b49/_0x1b3704*0x64),_0x48885d['sender']['send']('fetch-progress',_0x49e8e7,!![]),_0x48885d['sender']['send']('fetch-progress',0x64,!![]),_0x5db277&&(_0x48885d['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x48885d,_0x1768e7,_0x13401d,_0x55f257,_0x49bc90)),_0x48885d['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x578e32=>{_0x578e32('Scraping\x20finished!');});}catch(_0x4ecfbd){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x4ecfbd);return handle_fail(0x2);}}catch(_0x52f55b){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x52f55b);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x52f55b);return handle_fail(0x2);}}async function set_clearname_from_username(_0x19b74b,_0x38059b,_0x525faa=null){try{let _0x3c6a21,_0x55f4eb;const _0x27bdaa='SELECT\x20username\x20FROM\x20'+_0x38059b+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x27bdaa,[],(_0x1369b4,_0x2f460e)=>{_0x1369b4&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x1369b4['message']),_0x2f460e['length']===0x0&&(_0x55f4eb=_0x2f460e['length']),_0x3c6a21=_0x2f460e['map'](_0x2ca1f4=>_0x2ca1f4['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x55f4eb);if(_0x55f4eb===0x0){console['log']('Leave');return;}const _0x455784=await _0x19b74b['waitForSelector'](IG_SEARCH_BUTTON);await _0x455784['click'](),await delay(0x4b0,0x7d0);for(let _0x1925ee of _0x3c6a21){const _0x549625=await _0x19b74b['waitForSelector'](IG_SEARCH_INPUT);await _0x549625['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x19b74b['type'](IG_SEARCH_INPUT,_0x1925ee,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x57b07d=0x1;while(_0x57b07d!=0x14){console['log']('Schleife');try{let _0x5ebc14=IG_NAME_SPAN_PART1+_0x57b07d+IG_USERNAME_SPAN_PART2;const _0x4b87a3=await _0x19b74b['waitForSelector'](_0x5ebc14),_0x2afd53=await _0x19b74b['evaluate'](_0x394211=>_0x394211['innerHTML'],_0x4b87a3);await delay(0xc8,0x1f4);if(_0x2afd53==_0x1925ee){let _0x3e8627=IG_NAME_SPAN_PART1+_0x57b07d+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x322f75=await _0x19b74b['waitForSelector'](_0x3e8627);let _0x4012ca=await _0x19b74b['evaluate'](_0xdbec79=>_0xdbec79['innerHTML'],_0x322f75);const _0x3a6567=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x1dfc23=_0x4012ca['match'](_0x3a6567);_0x1dfc23?_0x4012ca=_0x1dfc23[0x1]['trim']():_0x4012ca=_0x4012ca['trim']();_0x4012ca['includes']('•')&&(_0x4012ca=_0x4012ca['substring'](0x0,_0x4012ca['indexOf']('•')-0x1));const _0x10419d='UPDATE\x20'+_0x38059b+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x10419d,[_0x4012ca,_0x2afd53],function(_0x12b041){_0x12b041&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x12b041['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x57b07d++;}catch(_0x27afbf){const _0x22144a='UPDATE\x20'+_0x38059b+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x22144a,['',_0x1925ee],function(_0x1b71bf){_0x1b71bf&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1b71bf['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x27afbf);break;}}_0x525faa&&_0x525faa();}await _0x455784['click']();}catch(_0x1c1e4c){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x1c1e4c);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x57575b,_0x5bb97e)=>{const _0x296e6e='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x296e6e,[],(_0x415c78,_0x44c913)=>{_0x415c78?_0x5bb97e(_0x415c78):_0x57575b(_0x44c913);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x5454bb,_0x22aa69)=>{const _0x1760ad='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x1760ad,[],async(_0x56e7a6,_0x58b676)=>{if(_0x56e7a6)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x56e7a6['message']),_0x22aa69({'status':'error','message':_0x56e7a6['message']});else try{const _0x2953ae=await Promise['all'](_0x58b676['map'](_0x1b1215=>{return new Promise(_0x5ed50c=>{if(!_0x1b1215['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x1b1215['campaign_name']),_0x5ed50c({'campaign_name':_0x1b1215['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x541054='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x1b1215['list_id'],_0x45f7ee='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x1b1215['list_id']+'\x22';db['get'](_0x541054,[],(_0x4107e3,_0x378cb2)=>{_0x4107e3?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x1b1215['campaign_name']+':',_0x4107e3['message']),_0x5ed50c({'campaign_name':_0x1b1215['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x45f7ee,[],(_0x5b85ea,_0xc28396)=>{_0x5b85ea?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x1b1215['campaign_name']+':',_0x5b85ea['message']),_0x5ed50c({'campaign_name':_0x1b1215['campaign_name'],'lead_count':_0x378cb2?_0x378cb2['lead_count']:0x0,'contacted_count':'N/A'})):_0x5ed50c({'campaign_name':_0x1b1215['campaign_name'],'lead_count':_0x378cb2?_0x378cb2['lead_count']:0x0,'contacted_count':_0xc28396?_0xc28396['contacted_count']:0x0});});});});}));_0x5454bb({'status':'success','campaigns':_0x2953ae});}catch(_0x12b4da){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x12b4da),_0x22aa69({'status':'error','message':_0x12b4da['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x2744f5,_0x5f7704)=>{return new Promise((_0x4c66ad,_0x26a5c4)=>{const _0x11e7bd='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x11e7bd,[_0x5f7704],(_0xbe848d,_0x3604ab)=>{_0xbe848d?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0xbe848d),_0x26a5c4(_0xbe848d)):(console['log']('ROWS'),console['log'](_0x3604ab),debugDatabaseContents(),_0x4c66ad(_0x3604ab));});});});const showTableContents=_0x443339=>{return new Promise((_0x2912e7,_0x10b219)=>{const _0x57e855='SELECT\x20*\x20FROM\x20'+_0x443339+';';campaignDB['all'](_0x57e855,(_0x2cde1d,_0x1786cf)=>{_0x2cde1d?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x443339+':',_0x2cde1d),_0x10b219(_0x2cde1d)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x443339+':',_0x1786cf),_0x2912e7({'status':'success','message':_0x1786cf}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x165efc){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x165efc);}}ipcMain['handle']('create-campaign',async(_0x4376b6,_0x464ca8)=>{return new Promise((_0x66d167,_0x260bd6)=>{const _0x5851c3='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x5851c3,[String(_0x464ca8)],function(_0x313d98){_0x313d98?_0x260bd6(_0x313d98):_0x66d167({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x308352,_0x53fc20)=>{return new Promise((_0x23120c,_0x20f68e)=>{const _0x4f43e0='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x4f43e0,[_0x53fc20],function(_0xbf316e){_0xbf316e?_0x20f68e(_0xbf316e):_0x23120c({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x2ce10e,_0x2ef76a,_0x44117f,_0xe9fe5d,_0x500e57,_0x323bfb,_0x442758,_0x2c0425)=>{const _0x1926f3=await createMessageID(_0x500e57);return new Promise((_0x53b7fa,_0x2d763f)=>{if(!_0x2ef76a||!_0x44117f||!_0xe9fe5d||!_0x1926f3||!_0x323bfb)return _0x2d763f({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x1926f3);const _0x42dcbd='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x42dcbd,[_0x44117f,_0xe9fe5d,_0x1926f3,_0x323bfb,_0x442758,_0x2c0425,_0x2ef76a],function(_0x15d027){if(_0x15d027)_0x2d763f({'status':'error','message':_0x15d027['message']});else this['changes']===0x0?_0x2d763f({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x53b7fa({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x20af42,_0x174264,_0x431b26,_0x45cd8d,_0x8b8818)=>{return new Promise((_0x56b9fc,_0x1a4ce6)=>{const _0x432018='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x432018,[_0x174264,_0x431b26,_0x45cd8d,_0x8b8818],function(_0xf71269){return _0xf71269?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0xf71269['message']),_0x1a4ce6('insert-dm-response',{'success':![],'message':_0xf71269['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x56b9fc('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xeffc7=>{return new Promise((_0x233dea,_0x1e1209)=>{const _0x414aee='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x414aee,[_0xeffc7],(_0x5cdc95,_0x50ac5f)=>{if(_0x5cdc95)_0x1e1209({'status':'error','message':_0x5cdc95['message']});else{if(_0x50ac5f)_0x233dea(_0x50ac5f['message_id']);else{const _0x327774='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x327774,[_0xeffc7],function(_0x3a8079){_0x3a8079?_0x1e1209({'status':'error','message':_0x3a8079['message']}):_0x233dea(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x46fbf5,_0xd90222)=>{return new Promise((_0x4632de,_0x3b6d6d)=>{const _0x165077='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0xd90222;db['get'](_0x165077,(_0x9a501a,_0x494799)=>{_0x9a501a?_0x3b6d6d({'status':'error','message':_0x9a501a['message']}):_0x4632de({'status':'success','count':_0x494799['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x44dac5,_0x5a3847){try{const _0x13c80e=await new Promise((_0x400277,_0x2a9d60)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5a3847],(_0x4e35a8,_0x484ea7)=>{if(_0x4e35a8)_0x2a9d60(_0x4e35a8);else{if(_0x484ea7['length']>0x0){let _0x210bba=JSON['parse'](_0x484ea7[0x0]['cookie']);console['log'](_0x210bba),_0x400277(_0x210bba);}else _0x2a9d60(new Error('User\x20with\x20username\x20'+_0x5a3847+'\x20does\x20not\x20exist.'));}});});await _0x44dac5['setCookie'](..._0x13c80e),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x2ab6a7){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2ab6a7);}}async function saveCookiesForUser(_0x402fa9,_0x1e214c){try{const _0x53311a=await _0x402fa9['cookies']();if(!_0x53311a||_0x53311a['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x1e214c);const _0x5c5866=JSON['stringify'](_0x53311a);if(_0x5c5866['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x1e214c);return new Promise((_0x1f81b1,_0x30b7a8)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x1e214c],(_0x4e551c,_0x268f48)=>{if(_0x4e551c)return console['error']('Error\x20checking\x20user\x20existence:',_0x4e551c),_0x30b7a8(_0x4e551c);if(_0x268f48){const _0x92a82f=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x92a82f['run'](_0x5c5866,_0x1e214c,function(_0x4bcec9){return _0x4bcec9?(console['error']('Error\x20updating\x20cookies:',_0x4bcec9),_0x30b7a8(_0x4bcec9)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x1e214c),_0x1f81b1());});}else{const _0x5f58c1=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x5f58c1['run'](_0x1e214c,_0x5c5866,function(_0x5c7058){return _0x5c7058?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x5c7058),_0x30b7a8(_0x5c7058)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x1e214c),_0x1f81b1());});}});});}catch(_0x5a7f99){console['error']('Error\x20fetching\x20cookies:',_0x5a7f99);throw _0x5a7f99;}}async function createUserIfNotExists(_0x3d6ca0){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x3d6ca0],(_0x105b34,_0x406ead)=>{if(_0x105b34){console['error']('Error\x20checking\x20user\x20existence:',_0x105b34);throw _0x105b34;}else{if(!_0x406ead){const _0x40727b=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x40727b['run'](_0x3d6ca0,function(_0x63a4d8){_0x63a4d8?console['error']('Error\x20inserting\x20new\x20user:',_0x63a4d8):console['log']('New\x20user\x20created:',_0x3d6ca0);});}else console['log']('User\x20already\x20exists:',_0x3d6ca0);}});}catch(_0x58e804){console['error']('Error\x20creating\x20user:',_0x58e804);throw _0x58e804;}}ipcMain['handle']('create-relation',async(_0x16c488,_0x526723)=>{return new Promise((_0x39835d,_0x55ec6e)=>{const _0x431f32='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x526723+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x431f32,function(_0xe53b3){_0xe53b3?_0x55ec6e(_0xe53b3):_0x39835d({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x1e23d7,_0x5de904)=>{return console['log']('droping\x20table'+_0x5de904),new Promise((_0x3b025a,_0x522fb7)=>{const _0x54329b='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x5de904;console['log']('droping\x20table'+_0x5de904),db['run'](_0x54329b,function(_0x2c981f){_0x2c981f?_0x522fb7(_0x2c981f):_0x3b025a({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x4c1e42=>{return new Promise((_0x116b42,_0x3b0809)=>{const _0x2cb5f7='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x2cb5f7,[],(_0x54b343,_0x296a99)=>{_0x54b343?_0x3b0809(_0x54b343):_0x116b42(_0x296a99['map'](_0x240552=>_0x240552['name']));});});}),ipcMain['handle']('add-user',async(_0xa02932,_0x4e55cd,_0x5a68ac)=>{return new Promise(_0x29833a=>{const _0x41f192=db['prepare']('INSERT\x20INTO\x20'+_0x5a68ac+'\x20(username)\x20VALUES\x20(?)');_0x41f192['run'](_0x4e55cd,function(_0x38c677){_0x38c677?console['log']('error\x20in\x20add-user:'+_0x38c677):_0x29833a({'status':'success','id':this['lastID']});}),_0x41f192['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x7d5f20,_0x34fbb6)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x426fbf,_0x3f4a1b)=>{if(_0x426fbf)_0x34fbb6(_0x426fbf);else{_0x7d5f20({'status':'success','users':_0x3f4a1b});for(_0x3f4a1b of _0x3f4a1b){console['log'](_0x3f4a1b['username']);}}});});}),ipcMain['handle']('get-data',async(_0x179679,_0x4b4f4e)=>{return new Promise((_0x30724b,_0x117f56)=>{const _0x310682='SELECT\x20*\x20FROM\x20'+_0x4b4f4e;console['log'](_0x310682),db['all'](_0x310682,[],(_0x38b35a,_0x2ee4c8)=>{_0x38b35a?_0x117f56(_0x38b35a):_0x30724b(_0x2ee4c8);});});}),ipcMain['handle']('get-accounts',async _0x48d089=>{return new Promise((_0x5795c7,_0xdf34b9)=>{const _0x2f8f9d='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x2f8f9d),igaccountsDB['all'](_0x2f8f9d,[],(_0x1deb5d,_0x171205)=>{_0x1deb5d?_0xdf34b9(_0x1deb5d):_0x5795c7(_0x171205);});});}),ipcMain['handle']('get-targets',async(_0x4e4894,_0x247a01)=>{return getTargetProfiles(_0x247a01);}),ipcMain['handle']('delete-user',async(_0x3afa70,_0x18cec8,_0x214c4d)=>{return new Promise((_0x63d909,_0x8cd4c9)=>{const _0x57d5fd=db['prepare']('DELETE\x20FROM\x20'+_0x214c4d+'\x20WHERE\x20username\x20=\x20?');_0x57d5fd['run'](_0x18cec8,function(_0x47651d){_0x47651d?_0x8cd4c9(_0x47651d):_0x63d909({'status':'success','changes':this['changes']});}),_0x57d5fd['finalize']();});}),ipcMain['handle']('delete-account',async(_0xaed3b2,_0x41c91d)=>{const _0x340c6b=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x340c6b['run'](_0x41c91d,function(_0x596831){_0x596831&&console['log'](_0x596831);}),_0x340c6b['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x1290cd,_0x5472d0)=>{const _0x4226ea='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4226ea,[],(_0x24d516,_0x13b06a)=>{_0x24d516?_0x5472d0({'status':'error','message':_0x24d516['message']}):_0x1290cd({'status':'success','contactedCount':_0x13b06a['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x2e4866,_0x2f35ea)=>{const _0x42bccb='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x42bccb,[],(_0x1e058e,_0x339d64)=>{_0x1e058e?_0x2f35ea({'status':'error','message':_0x1e058e['message']}):_0x2e4866({'status':'success','contactedCount':_0x339d64['contactedCount']});});});});function exportDatabase(_0x50f1df){return new Promise((_0x19dcf7,_0x3b0427)=>{const _0x77ac60='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x50f1df+'\x0a\x20\x20\x20\x20';db['all'](_0x77ac60,[],async(_0x114c7b,_0x3aa6e1)=>{if(_0x114c7b){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x114c7b['message']),_0x3b0427(_0x114c7b);return;}if(!_0x3aa6e1||_0x3aa6e1['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x19dcf7();return;}const _0x3a2897=XLSX['utils']['json_to_sheet'](_0x3aa6e1),_0x20996c=XLSX['utils']['sheet_to_csv'](_0x3a2897);try{const {canceled:_0x4f539a,filePath:_0x3d9808}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x50f1df+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x4f539a||!_0x3d9808){console['log']('Speichern\x20abgebrochen.'),_0x19dcf7();return;}fs['writeFile'](_0x3d9808,_0x20996c,'utf8',_0x21307b=>{_0x21307b?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x21307b['message']),_0x3b0427(_0x21307b)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x3d9808),_0x19dcf7());});}catch(_0x443a68){console['error']('Fehler\x20im\x20Speicherdialog:',_0x443a68),_0x3b0427(_0x443a68);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x3b1139,_0x194191)=>{shell['openExternal'](_0x194191);});