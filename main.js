const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x4a0e59,_0x2d45a1){try{const _0x395168=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x2d45a1},'body':JSON['stringify']({'clearname':_0x4a0e59})});if(!_0x395168['ok']){const _0x41e67a=await _0x395168['text']();throw new Error(_0x395168['status']+':\x20'+_0x41e67a);}const _0x2d94c0=await _0x395168['json']();return _0x2d94c0;}catch(_0x11b115){console['error']('Error\x20in\x20extractFirstName:',_0x11b115);throw _0x11b115;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x28d090=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x28d090['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x28d090['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x29982e){var _0x1d0964=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x58984d){console['log']('window\x20id:'+_0x58984d['id']),_0x58984d['id']>0x1&&(_0x1d0964=!![]);}),console['log']('child\x20opened\x20='+_0x1d0964);if(!_0x1d0964){const _0xa81007=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0xa81007['loadFile'](_0x29982e['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0xdcbfc=require('fs'),_0x424837=path['join'](app['getPath']('userData'),'data'),_0x2fc7ff=['campaign.db','crm.db','igaccounts.db'],_0x3f633c=[];try{_0xdcbfc['mkdirSync'](_0x424837,{'recursive':!![]});for(const _0x2f01ed of _0x2fc7ff){const _0x492ff4=path['join'](process['resourcesPath'],'app','build','data',_0x2f01ed),_0x3d8fb9=path['join'](_0x424837,_0x2f01ed);!_0xdcbfc['existsSync'](_0x3d8fb9)?(_0xdcbfc['copyFileSync'](_0x492ff4,_0x3d8fb9),console['log']('[InitDB]\x20Kopiert\x20'+_0x2f01ed+'\x20nach:\x20'+_0x3d8fb9)):console['log']('[InitDB]\x20'+_0x2f01ed+'\x20existiert\x20bereits:\x20'+_0x3d8fb9),_0x3f633c['push'](_0x3d8fb9);}}catch(_0x38914c){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x38914c);}return _0x3f633c;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x56dc37,AppUpdate:_0x3f9c45}=require('electron-updater');_0x56dc37['autoDownload']=![],_0x56dc37['autoInstallOnAppQuit']=!![],_0x56dc37['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x56dc37['on']('update-available',_0x4b52a3=>{console['log']('Update\x20verfügbar:',_0x4b52a3),_0x56dc37['downloadUpdate']();}),_0x56dc37['on']('update-downloaded',_0x596339=>{console['log']('Update\x20heruntergeladen:',_0x596339),_0x56dc37['quitAndInstall']();}),_0x56dc37['on']('error',_0x351798=>{console['error']('Fehler\x20beim\x20Updaten:',_0x351798);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x26a285,AppUpdate:_0x4e3f42}=require('electron-updater');_0x26a285['autoDownload']=![],_0x26a285['autoInstallOnAppQuit']=!![],_0x26a285['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x26a285['on']('update-available',_0x28a4b4=>{console['log']('Update\x20verfügbar:',_0x28a4b4),_0x26a285['downloadUpdate']();}),_0x26a285['on']('update-downloaded',_0x2e8753=>{console['log']('Update\x20heruntergeladen:',_0x2e8753),console['log']('Neustarten\x20zum\x20Updaten');}),_0x26a285['on']('error',_0x54ed61=>{console['error']('Fehler\x20beim\x20Updaten:',_0x54ed61);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let isHeadless=!![],browser_login=null;async function getBrowserPageLogin(){let _0x258403='',_0x5205c7=null;if(process['platform']==='darwin')_0x258403=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x258403=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x258403}),_0x5205c7=await browser_login['newPage'](),_0x5205c7['setDefaultNavigationTimeout'](0x3a98),_0x5205c7['setDefaultTimeout'](0x3a98),await _0x5205c7['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x5205c7;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x38d33e=0x1,_0xa388d=0x0){try{let _0x3ab65b='',_0x34b467=null;const _0x115c00=isHeadless;if(process['platform']==='darwin')_0x3ab65b=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x3ab65b=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x38d33e===0x0&&!pageStack[_0xa388d])return browser=await puppeteer['launch']({'headless':_0x115c00,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3ab65b}),_0x34b467=await browser['newPage'](),_0x34b467['setDefaultNavigationTimeout'](0x3a98),_0x34b467['setDefaultTimeout'](0x3a98),await _0x34b467['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0xa388d]=_0x34b467,_0x34b467;return(browser===null||pageStack[_0xa388d]===null||pageStack[_0xa388d]['isClosed']())&&(browser=await puppeteer['launch']({'headless':isHeadless,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3ab65b})),(pageStack[_0xa388d]===null||pageStack[_0xa388d]['isClosed']())&&(_0x34b467=await browser['newPage'](),_0x34b467['setDefaultNavigationTimeout'](0x1d4c),_0x34b467['setDefaultTimeout'](0x1d4c),await _0x34b467['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0xa388d]=_0x34b467),pageStack[_0xa388d];}catch(_0x408248){console['error']('Failed\x20to\x20launch\x20browser:',_0x408248);const _0x427023=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x408248);throw _0x427023;}}ipcMain['on']('login',async(_0x187171,_0x1e5fe9)=>{const _0x108551=await getBrowserPageLogin();await _0x108551['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x108551,_0x1e5fe9),ipcMain['on']('setLoginCookies',async(_0x377b83,_0x297658)=>{try{await set_login_cookies(_0x108551,_0x297658);}catch(_0x11ea07){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x11ea07);}});}),ipcMain['handle']('set-headless',async(_0x4e222a,_0x3c3def)=>{return isHeadless=!!_0x3c3def,console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20auf:',isHeadless),{'ok':!![],'headless':isHeadless};}),ipcMain['handle']('get-headless',async()=>{return{'headless':isHeadless};}),ipcMain['on']('export-relation',async(_0x47c2e8,_0x49c352)=>{try{await exportDatabase(_0x49c352),_0x47c2e8['reply']('export-relation-response',{'success':!![]});}catch(_0x56f6f7){console['error'](_0x56f6f7),_0x47c2e8['reply']('export-relation-response',{'success':![],'message':_0x56f6f7['message']});}}),ipcMain['handle']('sendMessage',async(_0x1fbd1e,_0x1e2e94,_0x5d7adf,_0x37cb27,_0x58a7cf,_0x450bd8,_0x39aac7,_0xfca091,_0x1d902f,_0x5c6c56,_0x11f935,_0xda7d0c,_0x1fde4f)=>{isStopping=![];let _0x5844d2=null;return _0x39aac7?_0x5844d2=await getBrowserPage(_0x58a7cf,_0xfca091):_0x5844d2=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x1e2e94),send_message(_0x5844d2,_0x1e2e94,_0x5d7adf,_0x37cb27,_0x58a7cf,_0x450bd8,_0x1d902f,_0x5c6c56,_0x11f935,_0xda7d0c,_0x1fde4f);}),ipcMain['handle']('stop-action',async(_0x5937b0,_0x4cc79b)=>{isStopping=!![];const _0x11c201=await getBrowserPage(0x1,_0x4cc79b);await _0x11c201['close']();}),ipcMain['handle']('fetch_followers',async(_0x8f43f8,_0x1270de,_0x477edc,_0xd73a1f,_0x593b3d,_0xeb6040,_0x609ee5)=>{isStopping=![];const _0x3fabaf=await getBrowserPage();return fetch_followers_from_account(_0x8f43f8,_0x3fabaf,_0x1270de,_0x477edc,_0xd73a1f,_0x593b3d,_0xeb6040,_0x609ee5);}),ipcMain['handle']('get-account-details',async(_0x535f6a,_0x7a4888,_0x1ce92f,_0x4271c9)=>{isStopping=![];const _0xd00240=await getBrowserPage();return fetch_account_details(_0xd00240,_0x7a4888,_0x1ce92f,_0x4271c9);}),ipcMain['handle']('fetch_likes',async(_0x3b9038,_0x267fc8,_0x302db1,_0x303b92,_0x526c15,_0x1281fa,_0x32b470)=>{isStopping=![];const _0x53ada0=await getBrowserPage();return fetch_likers_from_post(_0x3b9038,_0x53ada0,_0x267fc8,_0x302db1,_0x303b92,_0x526c15,_0x1281fa,_0x32b470);}),ipcMain['handle']('fetch_comments',async(_0x567263,_0x1a4c9b,_0x19e3b2,_0x4ae1f8,_0x526ec0,_0x54a939,_0x4133a3)=>{isStopping=![];const _0x56d471=await getBrowserPage();return fetch_comments_from_post(_0x567263,_0x56d471,_0x1a4c9b,_0x19e3b2,_0x4ae1f8,_0x526ec0,_0x54a939,_0x4133a3);});async function updateAppSilent(){const {spawn:_0x42d5c}=require('child_process'),_0x3d3cde=require('path'),_0x18c95f=require('electron-log');return _0x18c95f['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0xdf9e7e,_0x21063d)=>{const {updateElectronApp:_0x1871df,UpdateSourceType:_0x39f440}=require('update-electron-app');_0x1871df({'updateSource':{'type':_0x39f440['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x18c95f}),_0xdf9e7e('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x3a3994,_0x8b400e)=>{doFullElectronUpdateSilent(),_0x3a3994('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x5ce68b}=require('child_process'),_0x1dc21b=require('path'),_0x9c6755=require('electron-log');return _0x9c6755['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x328dc0,_0x20d0b9)=>{const {updateElectronApp:_0x51a4a0,UpdateSourceType:_0x537989}=require('update-electron-app');_0x51a4a0({'updateSource':{'type':_0x537989['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x9c6755}),_0x328dc0('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0xf4cafa,_0x3d400b)=>{doFullElectronUpdate(),_0xf4cafa('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x3d9312,_0x10967a)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x3d9312('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x3b9ca8=path['join'](__dirname,'mac-updater-intern.sh'),_0x4bc36b=spawn('/bin/bash',[_0x3b9ca8],{'detached':!![],'stdio':'ignore'});_0x4bc36b['unref'](),setTimeout(()=>{_0x3d9312('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x10967a(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0xf12a62=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x3739a6,_0x10fc80)=>{console['log']('Update\x20Silent:\x20'+_0x10fc80);if(_0x10fc80){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x3c9515,_0x3e8379){return Math['random']()*(_0x3e8379-_0x3c9515+0x1)+_0x3c9515;}function delay(_0x1541bf,_0x171450){let _0xb9ca4c=getRnd(_0x1541bf,_0x171450);return new Promise(function(_0x2d3ea8){setTimeout(_0x2d3ea8,_0xb9ca4c);});}async function scroll(_0x57e4eb,_0x5d686e,_0x59a416=0x2,_0x113429){const _0x4a5927=await _0x57e4eb['waitForSelector'](_0x5d686e);for(let _0x3b664c=0x0;_0x3b664c<_0x59a416;_0x3b664c++){console['log']('Scrolling\x20'+_0x3b664c),await _0x57e4eb['evaluate'](_0x31ebbb=>{const _0x31226f=document['querySelector'](_0x31ebbb);_0x31226f&&_0x31226f['scrollBy'](0x0,0x190);},_0x5d686e),await delay(0x320,0x5dc),_0x113429();}}async function saveCookies(_0x23a27f){let _0x525639=await _0x23a27f['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x525639,null,0x2));}async function notificationClear(_0xd50191){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0xd50191['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0xd50191['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x1f4eda){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x1f4eda);}}async function getTargetProfiles(_0x16f055){return new Promise((_0x116836,_0x3bde9c)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x16f055,(_0x58d97a,_0x5035aa)=>{_0x58d97a?_0x3bde9c(_0x58d97a):_0x116836(_0x5035aa);});});}async function login_legacy(_0x4f23a9,_0x331c07,_0x4c6a40){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4f23a9,_0x331c07),await createUserIfNotExists(_0x331c07,_0x4c6a40);}catch(_0x517ec9){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x517ec9);}try{await _0x4f23a9['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x4f23a9['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x4f23a9['click']('button._a9--._ap36._a9_0');}catch(_0x2536de){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x4f23a9['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x4f23a9['type']('input[name=\x27username\x27]',_0x331c07,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4f23a9['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x4f23a9['type']('input[name=\x27password\x27]',_0x4c6a40,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4f23a9['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x4f23a9['click']('button[type=\x27submit\x27]');}catch(_0x53c01c){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x4f23a9),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x4f23a9,_0x331c07);}catch(_0x5143b3){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x5143b3);}}catch(_0x2bb591){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2bb591);}}async function login(_0x4a5525,_0x11380a){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4a5525,_0x11380a),await createUserIfNotExists(_0x11380a);}catch(_0x171e0d){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x171e0d);}try{await _0x4a5525['goto']('https://www.instagram.com/accounts/login/');}catch(_0x289461){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x289461);}}async function set_login_cookies(_0x542214,_0x47f881){try{await saveCookiesForUser(_0x542214,_0x47f881);}catch(_0x358c23){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x358c23);}}async function waitForXPath(_0x55cc53,_0x1a1789,_0x5be15a={}){return await _0x55cc53['waitForFunction'](_0x17e2bc=>{return document['evaluate'](_0x17e2bc,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x5be15a,_0x1a1789),_0x55cc53['evaluateHandle'](_0x47fb29=>document['evaluate'](_0x47fb29,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x1a1789);}async function waitForSelectorWithFallbacks(_0x35a6e8,_0xb0e00c,_0xef8d4a={}){!Array['isArray'](_0xb0e00c)&&(_0xb0e00c=[_0xb0e00c]);for(let _0x51dd10=0x0;_0x51dd10<_0xb0e00c['length'];_0x51dd10++){const _0x4b2e04=_0xb0e00c[_0x51dd10],_0x3c8cd4=_0x4b2e04['startsWith']('//')||_0x4b2e04['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x3c8cd4?'XPath':'Selector')+'\x20'+(_0x51dd10+0x1)+'/'+_0xb0e00c['length']+':\x20'+_0x4b2e04['substring'](0x0,0x32)+'...');const _0x1b21cc=_0x51dd10===0x0?_0xef8d4a['timeout']||0x1388:0x7d0;let _0x17dd52;if(_0x3c8cd4){const _0x5f1edd=await waitForXPath(_0x35a6e8,_0x4b2e04,{..._0xef8d4a,'timeout':_0x1b21cc});if(!_0x5f1edd)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x17dd52=_0x5f1edd;}else _0x17dd52=await _0x35a6e8['waitForSelector'](_0x4b2e04,{..._0xef8d4a,'timeout':_0x1b21cc});return console['log']((_0x3c8cd4?'XPath':'Selector')+'\x20'+(_0x51dd10+0x1)+'\x20gefunden!'),_0x17dd52;}catch(_0x196bac){console['log']((_0x3c8cd4?'XPath':'Selector')+'\x20'+(_0x51dd10+0x1)+'\x20nicht\x20gefunden:\x20'+_0x196bac['message']);if(_0x51dd10===_0xb0e00c['length']-0x1)throw new Error('Keiner\x20der\x20'+_0xb0e00c['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x196bac['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x24e237,_0x3f735b,_0x530a22={}){return await _0x24e237['waitForFunction'](_0xd0edcd=>{return document['evaluate'](_0xd0edcd,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x530a22,_0x3f735b),_0x24e237['evaluateHandle'](_0x1c3385=>{const _0x49e63c=document['evaluate'](_0x1c3385,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x426ff3=[];for(let _0x41b88d=0x0;_0x41b88d<_0x49e63c['snapshotLength'];_0x41b88d++){_0x426ff3['push'](_0x49e63c['snapshotItem'](_0x41b88d));}return _0x426ff3;},_0x3f735b)['then'](_0x373d42=>_0x373d42['getProperties']());}ipcMain['handle']('check-login',async(_0x560359,_0x97756e)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x1800c5){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x2a397a){}browser=null;}const _0x5cdd6c=await getBrowserPage(0x0,0x0),_0x5c75b3=await checkCookiesSession(_0x5cdd6c,_0x97756e);return _0x5c75b3;});async function checkCookiesSession(_0x5a2ff9,_0xe1b73e){try{await setCookiesForUser(_0x5a2ff9,_0xe1b73e),console['log']('Cookies\x20für\x20'+_0xe1b73e+'\x20erfolgreich\x20geladen');}catch(_0x273284){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0xe1b73e+':',_0x273284),![];}try{await _0x5a2ff9['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x2d8d0f){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x2d8d0f);}await delay(0x6a4,0x7d0);try{const _0x49d110=await checkLoginStatus(_0x5a2ff9);return console['log']('Login-Status\x20für\x20'+_0xe1b73e+':\x20'+_0x49d110),_0x49d110;}catch(_0x255f82){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0xe1b73e+':',_0x255f82['message']),![];}}async function checkLoginStatus(_0x1a0ccc){const _0xef7105=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x1449ed=null;try{_0x1449ed=await waitForSelectorWithFallbacks(_0x1a0ccc,_0xef7105,{'timeout':0x7d0});}catch(_0x32d3bf){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x32d3bf),!![];}if(_0x1449ed){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x1ef8d8){const _0x942239=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x3fcad3=null;try{_0x3fcad3=await waitForSelectorWithFallbacks(_0x1ef8d8,_0x942239,{'timeout':0x7d0});}catch(_0x721825){return console['log']('Seite\x20existiert:\x20'+_0x721825),!![];}if(_0x3fcad3){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x4a90eb){try{const _0x2f6059=await _0x4a90eb['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x2f6059['length']);if(_0x2f6059&&_0x2f6059['length']>0x0){const _0x31ae44=_0x2f6059[0x0];await _0x31ae44['click'](),await delay(0xaf0,0xbb8);const _0x1adde5=await _0x4a90eb['evaluate'](()=>{const _0x31bcc9=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x31bcc9;});if(_0x1adde5){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x1cc0c0=await _0x4a90eb['$$'](K_BEITRAG_LIKE_BUTTON),_0x63a48b=_0x1cc0c0[0x0];await delay(0x514,0x5dc),await _0x4a90eb['evaluate'](_0x2a52f2=>{_0x2a52f2['click']();},_0x63a48b);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x4a90eb['goBack'](),await delay(0x7d0,0x898);}}catch(_0x3d27b9){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x3d27b9);throw new Error('Like_Posts:\x20'+_0x3d27b9);}}async function likeFirstStory(_0x5f185e){try{const _0x39e2e4=await _0x5f185e['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x39e2e4['length']);if(_0x39e2e4&&_0x39e2e4['length']>0x0){const _0x2da70c=_0x39e2e4[0x0];await _0x2da70c['click'](),await delay(0xaf0,0xbb8);const _0x3feb31=await _0x5f185e['evaluate'](()=>{const _0x140663=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x140663;});if(_0x3feb31){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x113177=await _0x5f185e['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5f185e['click'](_0x113177);}catch(_0x58348f){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x58348f);try{const _0x1f9703=await _0x5f185e['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5f185e['evaluateHandle'](_0x56b30e=>{_0x56b30e['click']();},_0x1f9703);}catch(_0x43c6ba){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x43c6ba),await _0x5f185e['evaluate'](()=>{const _0x13affc=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x13affc)_0x13affc['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x5f185e['goBack'](),await delay(0x7d0,0x898);}}catch(_0x9d3b97){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x9d3b97);throw new Error('Like_Storys:\x20'+_0x9d3b97);}}async function send_message(_0x20c1bf,_0x1db2cf,_0x28635f,_0x483d35,_0x1d07b8,_0xc0f285,_0xba9e14,_0x229948,_0xe0830,_0x22e180,_0x4de22e){return new Promise(async(_0x2df2f5,_0x579d73)=>{_0xc0f285=_0xc0f285['split'](';'),console['log'](_0xc0f285[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x1d07b8);if(_0x483d35===null||_0x483d35===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x579d73('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x20c1bf,_0xc0f285[0x0]);}catch(_0x1fa9eb){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1fa9eb),_0x2df2f5({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1fa9eb});return;}await delay(0x6a4,0x7d0);try{await _0x20c1bf['goto']('https://www.instagram.com/'+_0x1db2cf+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x20c1bf);}catch(_0x125d96){_0x2df2f5({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x125d96});return;}try{await checkLoginStatus(_0x20c1bf);}catch(_0x25a014){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x25a014),_0x579d73('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0xe0830==0x1)try{await likeFirstPost(_0x20c1bf);}catch(_0xc51c0e){_0x579d73(_0xc51c0e);}if(_0x22e180==0x1)try{await likeFirstStory(_0x20c1bf);}catch(_0x301623){_0x579d73(_0x301623);}console['log']('UserSkip:\x20'+_0xba9e14);if(_0xba9e14==0x1)try{const _0x5b3980=await _0x20c1bf['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4feaa4=>_0x4feaa4['textContent']['trim']());console['log'](_0x5b3980);if(_0x5b3980==='Following'||_0x5b3980==='Folge\x20ich')return _0x2df2f5({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x1b0f5a){}try{const _0x4008cb=await waitForSelectorWithFallbacks(_0x20c1bf,K_DIRECT_MSG_BUTTON);await _0x4008cb['click'](),await delay(0x6a4,0x7d0);try{const _0x1d7fcb=await waitForSelectorWithFallbacks(_0x20c1bf,K_EXPAND_MSG_BUTTON);await _0x1d7fcb['click']();}catch(_0x8f2c3e){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x8f2c3e);}}catch(_0x1c7ec1){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x1c7ec1);try{await delay(0x6a4,0x7d0);try{const _0x1dd3d0=await waitForSelectorWithFallbacks(_0x20c1bf,K_OPTIONS_BUTTON);await _0x1dd3d0['click']();}catch(_0x316af1){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x316af1),_0x2df2f5({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x316af1});return;}await delay(0x3e8,0x44c);const _0x1850d1=await waitForXPath(_0x20c1bf,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x1850d1['click']();}catch(_0x299079){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x299079),_0x2df2f5({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x20c1bf);}catch(_0x2fe1e7){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x2fe1e7);}try{await delay(0x708,0x7d0);const _0x41f2df=await waitForSelectorWithFallbacks(_0x20c1bf,K_CHAT_INPUT_FIELD,{'visible':!![],'timeout':0x3a98});if(_0x229948){const _0x3df084=await _0x20c1bf['$'](K_ALREADY_CHATTED);if(_0x3df084)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x1db2cf),_0x2df2f5({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x2026b6=await _0x20c1bf['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x2026b6),_0x483d35=_0x483d35['replace']('{USERNAME}',_0x1db2cf);let _0x508be4;if(_0x483d35['includes']('{NAME}')||_0x483d35['includes']('{name}'))try{const _0x4dd7c2=await extractFirstName(_0x2026b6,_0x4de22e);console['log']('Response\x20Clearname\x20valid:\x20'+_0x4dd7c2['valid']),_0x4dd7c2['valid']?(_0x483d35=_0x483d35['replaceAll'](/{NAME}|{name}/g,_0x4dd7c2['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x4dd7c2['name']),_0x508be4=_0x4dd7c2['name']):(_0x483d35=_0x483d35['replaceAll'](/ ?({NAME}|{name})/g,''),_0x508be4='UNKNOWN_NAME');}catch(_0x185a78){console['log'](_0x185a78['message']),_0x508be4=_0x185a78['message'];const _0x237fa9=_0x2026b6?_0x2026b6['replace'](/[^\p{L}\s]/gu,''):'',_0x3a0e43=_0x237fa9['split']('\x20')[0x0]||'';_0x3a0e43['length']>0x2&&!_0x3a0e43['includes']('Instagram')?_0x483d35=_0x483d35['replaceAll'](/{NAME}|{name}/g,_0x3a0e43):_0x483d35=_0x483d35['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x483d35);const _0x2fb97d=_0x483d35['split']('\x0a');await _0x41f2df['type'](_0x2fb97d[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x3a9504=0x1;_0x3a9504<_0x2fb97d['length'];_0x3a9504++){await _0x20c1bf['keyboard']['down']('Shift'),await _0x20c1bf['keyboard']['press']('Enter'),await _0x20c1bf['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x2fb97d[_0x3a9504]['length']>0x0&&await _0x41f2df['type'](_0x2fb97d[_0x3a9504],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0xa85204=await waitForSelectorWithFallbacks(_0x20c1bf,K_SEND_MSG_BUTTON);await _0xa85204['click']();}catch(_0x4b4f71){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x4b4f71),_0x2df2f5({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x1db2cf+'\x20überspringen.','error':_0x4b4f71['message']});}await delay(0x320,0x3e8),_0x2df2f5({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x2026b6,'extracted_clearname':_0x508be4});}catch(_0x3922c8){let _0x1171ee=_0x3922c8;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x1171ee),_0x2df2f5({'status':0x1f4,'message':'Error\x20500:\x20'+_0x1171ee});}});}function handle_fail(_0x2f7cc6){if(isStopping)return new Promise(_0x5286d2=>{_0x5286d2('Scraper\x20gestoppt.');});else{let _0x3d62b9='';switch(_0x2f7cc6){case 0x0:_0x3d62b9='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x3d62b9='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x3d62b9='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x3d62b9='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x1aece8,_0x131b5)=>{_0x131b5(_0x3d62b9);});}}async function fetch_account_details(_0x509738,_0x128b4c,_0x53d105,_0x20978e){try{await setCookiesForUser(_0x509738,_0x53d105['username']);}catch(_0x5c70a5){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5c70a5);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5c70a5);return handle_fail(0x0);}_0x509738['setDefaultNavigationTimeout'](0x7530),await _0x509738['goto']('https://www.instagram.com/'+_0x128b4c+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x509738);const _0xc2c50f=await _0x509738['evaluate'](()=>{const _0xd5b991=document['querySelector']('meta[property=\x22og:image\x22]');return _0xd5b991?_0xd5b991['getAttribute']('content'):null;});await _0x509738['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x1ba1ff=await _0x509738['evaluate'](()=>{const _0x5942e1=document['querySelector']('meta[name=\x22description\x22]');if(!_0x5942e1)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x25db45=_0x5942e1['getAttribute']('content');if(!_0x25db45)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x25db45);const _0x427f0f=/\s*[–-]\s*/,_0x3ab422=_0x25db45['split'](_0x427f0f);if(_0x3ab422['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x1ffc8e=_0x3ab422[0x0],_0x3e21c0=_0x3ab422[0x1],_0x3cabdb=_0x1ffc8e['split'](',\x20');if(_0x3cabdb['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x53d4be=_0x3cabdb[0x0]['split']('\x20')[0x0],_0x363716=_0x3cabdb[0x1]['split']('\x20')[0x0],_0x4b74c8=_0x3cabdb[0x2]['split']('\x20')[0x0];let _0x41d632='',_0x2883ff='';const _0x54616d='\x20on\x20Instagram:\x20',_0x6f1ea6=_0x3e21c0['split'](_0x54616d);return _0x41d632=_0x6f1ea6[0x0]['trim'](),_0x41d632=_0x41d632['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x6f1ea6['length']>0x1&&(_0x2883ff=_0x6f1ea6[0x1]['trim'](),_0x2883ff['startsWith']('\x22')&&_0x2883ff['endsWith']('\x22')&&(_0x2883ff=_0x2883ff['substring'](0x1,_0x2883ff['length']-0x1)['trim']()),_0x2883ff=_0x2883ff['replace'](/&quot;/g,'')['trim']()),{'followers':_0x53d4be,'following':_0x363716,'posts':_0x4b74c8,'nameText':_0x41d632,'bio':_0x2883ff};});console['log']('Extracted\x20profile\x20data:',_0x1ba1ff);const _0x4cdd6d=_0x1ba1ff['nameText'],_0x7cea08=_0xc2c50f,_0x4c08ac=_0x1ba1ff['bio'],_0xd408f2=_0x1ba1ff['followers'],_0x3d039e=_0x1ba1ff['following'],_0x52b607=_0x1ba1ff['posts'],_0x35a747=![],_0xf87f4d=![],_0x4902c3=![],_0x484ba5='\x0a\x20\x20INSERT\x20INTO\x20'+_0x20978e+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x484ba5,[_0x128b4c,_0x4cdd6d,_0x7cea08,_0x4c08ac,_0xd408f2,_0x3d039e,_0x52b607,_0x35a747,_0xf87f4d,_0x4902c3],function(_0x3738e7){_0x3738e7?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x3738e7['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4b95b5,_0x253351,_0x449b71,_0x5cbffa,_0x57075f,_0x13ee83,_0x5942f9,_0x12004e){let _0x1a69b7=0x4,_0x10f367=0x0,_0x1baf2b=0x0;try{await setCookiesForUser(_0x253351,_0x13ee83['username']);}catch(_0x49693d){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x49693d);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x49693d);return handle_fail(0x0);}let _0x4442e5=0x0;try{await _0x253351['goto']('https://www.instagram.com/'+_0x449b71+'/'),await notificationClear(_0x253351);try{await checkLoginStatus(_0x253351);}catch(_0x589908){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x589908);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x253351);}catch(_0xd3ff37){console['log']('Username\x20nicht\x20gefunden:\x20'+_0xd3ff37);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x5cbffa<=0x0){const _0x191d6f=await _0x253351['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x3cce21=await _0x253351['evaluate'](_0x71142b=>_0x71142b['innerHTML'],_0x191d6f);_0x4442e5=Math['ceil'](_0x3cce21/0x4);}else _0x4442e5=Math['ceil'](_0x5cbffa/0x4);_0x1a69b7+=_0x4442e5,_0x1baf2b=Math['round'](++_0x10f367/_0x1a69b7*0x64),_0x4b95b5['sender']['send']('fetch-progress',_0x1baf2b,!![]);let _0x50b501=await _0x253351['waitForSelector']('a[href=\x22/'+_0x449b71+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x50b501['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x449b71+'\x20gesichtet'),_0x1baf2b=Math['round'](++_0x10f367/_0x1a69b7*0x64),_0x4b95b5['sender']['send']('fetch-progress',_0x1baf2b,!![]);}catch(_0x87e505){console['log']('Follower\x20Liste\x20von\x20'+_0x449b71+'\x20nicht\x20gefunden:'+_0x87e505);throw new Error('Follower\x20Liste\x20von\x20'+_0x449b71+'\x20nicht\x20gefunden:'+_0x87e505);return handle_fail(0x0);}}catch(_0xfe8cb6){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xfe8cb6);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xfe8cb6);return handle_fail(0x0);}try{await delay(0x12c0,0x1388),console['log']('Auto-scrolls:\x20'+_0x4442e5),await scroll(_0x253351,FOLLOWER_FENSTER,_0x4442e5,_0x381c4c=>{_0x1baf2b=Math['round'](++_0x10f367/_0x1a69b7*0x64),_0x4b95b5['sender']['send']('fetch-progress',_0x1baf2b,!![]);}),await _0x253351['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x1a623a=await _0x253351['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0xf50e9=await _0x253351['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x1baf2b=Math['round'](++_0x10f367/_0x1a69b7*0x64),_0x4b95b5['sender']['send']('fetch-progress',_0x1baf2b,!![]);_0x5cbffa<=0x0&&(_0x5cbffa=_0x1a623a['length']);let _0x14be63=[];for(let _0x1fac5f=0x0;_0x1fac5f<_0x1a623a['length']&&_0x1fac5f<_0x5cbffa;_0x1fac5f++){const _0x443562=await _0x1a623a[_0x1fac5f]['evaluate'](_0x3a9409=>_0x3a9409['textContent']),_0x4712d4=await _0xf50e9[_0x1fac5f]['evaluate'](_0x503d5b=>_0x503d5b['textContent']);if(_0x12004e){const _0x4fda6f=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x13ee83['username'],_0x443562]);if(_0x4fda6f){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x443562);continue;}}_0x14be63['push'](_0x443562);const _0xac82fe='INSERT\x20INTO\x20'+_0x57075f+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0xac82fe,[_0x443562,_0x4712d4],function(_0x5637c5){_0x5637c5?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x57075f+'\x27:',_0x5637c5['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x1baf2b=Math['round'](++_0x10f367/_0x1a69b7*0x64),_0x4b95b5['sender']['send']('fetch-progress',_0x1baf2b,!![]),_0x5942f9&&(_0x4b95b5['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4b95b5,_0x253351,_0x13ee83,_0x57075f,_0x14be63)),new Promise(_0x598e5c=>{_0x598e5c('Scraping\x20finished!');});}catch(_0x512bd8){if(_0x5942f9)throw new Error(_0x512bd8);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x449b71+'\x20nicht\x20gefunden:\x20'+_0x512bd8);return handle_fail(0x0);}}async function fetch_details_from_list(_0x219361,_0x3225df,_0xc41696,_0x30f0d0,_0x1d0c72){let _0x334276=0x0,_0x40b0da=0x0;for(let _0x577f61=0x0;_0x577f61<_0x1d0c72['length'];_0x577f61++){console['log']('Processing\x20profile:',_0x1d0c72[_0x577f61]);try{await fetch_account_details(_0x3225df,_0x1d0c72[_0x577f61],_0xc41696,_0x30f0d0);}catch(_0x1b6a65){console['error']('Detailed\x20Scraping\x20von:\x20',_0x1d0c72[_0x577f61],_0x1b6a65);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x1d0c72[_0x577f61]+'\x20'+_0x1b6a65);}_0x40b0da=Math['round'](++_0x334276/_0x1d0c72['length']*0x64),_0x219361['sender']['send']('fetch-progress',_0x40b0da,!![],!![]);}}async function fetch_likers_from_post(_0x133c43,_0x52ab1d,_0x43b7ca,_0x13849f,_0x59d8a5,_0x3e5cbe,_0x654cf6,_0x2bb873){let _0x1a0965=0x4,_0x5aeb7f=0x0,_0x3b41d4=0x0;try{await setCookiesForUser(_0x52ab1d,_0x3e5cbe['username']);}catch(_0x35cd16){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x35cd16);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x35cd16);return handle_fail(0x1);}_0x3b41d4=Math['round'](++_0x5aeb7f/_0x1a0965*0x64),_0x133c43['sender']['send']('fetch-progress',_0x3b41d4,!![]);try{let _0x5ce895=_0x43b7ca['substring'](0x0,_0x43b7ca['lastIndexOf']('/'));_0x5ce895['includes']('/reel/')&&(_0x5ce895=_0x5ce895['replace']('/reel/','/p/'));let _0x17d014=_0x5ce895+'/liked_by';console['log'](_0x17d014),await _0x52ab1d['goto'](_0x17d014),await delay(0x7d0,0xfa0),await notificationClear(_0x52ab1d),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x52ab1d);}catch(_0x3e8c80){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x3e8c80);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x52ab1d);}catch(_0x1b45c3){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x1b45c3);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x3b41d4=Math['round'](++_0x5aeb7f/_0x1a0965*0x64),_0x133c43['sender']['send']('fetch-progress',_0x3b41d4,!![]),await _0x52ab1d['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x27eb32=await _0x52ab1d['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x17d7bf=await _0x52ab1d['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x27eb32['length']);let _0x5b192e=path['join'](__dirname,'/likers.csv');_0x3b41d4=Math['round'](++_0x5aeb7f/_0x1a0965*0x64),_0x133c43['sender']['send']('fetch-progress',_0x3b41d4,!![]);_0x13849f<=0x0&&(_0x13849f=_0x27eb32['length']);try{let _0x46ead7=[];for(let _0x28f6f8=0x0;_0x28f6f8<_0x27eb32['length']&&_0x28f6f8<_0x13849f;_0x28f6f8++){const _0x54a611=await _0x27eb32[_0x28f6f8]['evaluate'](_0x2f360e=>_0x2f360e['textContent']),_0x175ec9=await _0x17d7bf[_0x28f6f8]['evaluate'](_0x561087=>_0x561087['textContent']);if(_0x2bb873){const _0x71b23c=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3e5cbe['username'],_0x54a611]);if(_0x71b23c){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x54a611);continue;}}_0x46ead7['push'](_0x54a611);const _0x5bbeea='INSERT\x20INTO\x20'+_0x59d8a5+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x5bbeea,[_0x54a611,_0x175ec9],function(_0x5c08cc){_0x5c08cc?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x59d8a5+'\x27:',_0x5c08cc['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3b41d4=Math['round'](++_0x5aeb7f/_0x1a0965*0x64),_0x133c43['sender']['send']('fetch-progress',_0x3b41d4,!![]),_0x654cf6&&(_0x133c43['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x133c43,_0x52ab1d,_0x3e5cbe,_0x59d8a5,_0x46ead7)),new Promise(_0x8ecff7=>{_0x8ecff7('Scraping\x20finished!');});}catch(_0x189c60){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x189c60);return handle_fail(0x1);}}catch(_0x2d54a8){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x2d54a8);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x2d54a8);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x236b4f,_0x5a16e5,_0x1ef40e,_0x5d9a52,_0x3bd373,_0x3431e4,_0x29739d,_0x1308cd){let _0x48fe15=0x3,_0x3acc97=0x0,_0x4dc816=0x0;try{await setCookiesForUser(_0x5a16e5,_0x3431e4['username']);}catch(_0x2edfae){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2edfae);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2edfae);return handle_fail(0x2);}try{console['log'](_0x1ef40e),await _0x5a16e5['goto'](_0x1ef40e),await delay(0x7d0,0xfa0),await notificationClear(_0x5a16e5),await delay(0xc8,0x1f4);const _0x53986f=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x5a16e5);}catch(_0x5132bf){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x5132bf);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x5a16e5);}catch(_0x3c9817){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x3c9817);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x563df3;const _0x233b18=await _0x5a16e5['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x5c1c3f=await _0x5a16e5['evaluate'](_0x2751f0=>_0x2751f0['innerHTML'],_0x233b18),_0xedd2d7=String(_0x5c1c3f)['replace'](/[^0-9]/g,''),_0x413385=Number(_0xedd2d7)/0x14;_0x5d9a52<=0x0?_0x563df3=Math['ceil'](_0x413385/0x3):_0x563df3=Math['ceil'](_0x5d9a52/0x3);_0x48fe15+=_0x563df3,_0x4dc816=Math['round'](++_0x3acc97/_0x48fe15*0x64),_0x236b4f['sender']['send']('fetch-progress',_0x4dc816,!![]),console['log']('Auto-scrolls:\x20'+_0x563df3),await scroll(_0x5a16e5,_0x53986f,_0x563df3,_0x38c279=>{_0x4dc816=Math['round'](++_0x3acc97/_0x48fe15*0x64),_0x236b4f['sender']['send']('fetch-progress',_0x4dc816,!![]);});try{const _0x3e9db6=COM_REPLY_BUTTON_SPAN,_0x30998c=await waitForXPathAll(_0x5a16e5,_0x3e9db6);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x30998c['size']),await delay(0x1f4,0x320);let _0x396aab=_0x30998c['size'],_0x3e9719=[];for(const [_0x360c9b,_0xf102da]of _0x30998c){_0x3e9719['push'](_0xf102da);}console['log']('Alle\x20Reply-Buttons:',_0x3e9719['length']);try{for(let _0x4975e6=0x0;_0x4975e6<_0x396aab;_0x4975e6++){await _0x3e9719[_0x4975e6]['click'](),await delay(0x320,0x5dc);}}catch(_0x5f3020){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x5f3020);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x5f3020);return handle_fail(0x2);}}catch(_0xd5283e){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x53c6d6=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x5a16e5['waitForSelector'](_0x53c6d6),await delay(0x1f4,0x320),_0x4dc816=Math['round'](++_0x3acc97/_0x48fe15*0x64),_0x236b4f['sender']['send']('fetch-progress',_0x4dc816,!![]);const _0x10b0bc=await _0x5a16e5['$$'](_0x53c6d6);let _0x56791e=path['join'](__dirname,'/comments.csv');_0x5d9a52<=0x0&&(_0x5d9a52=_0x10b0bc['length']);console['log']('fetch_limit:\x20'+_0x5d9a52),console['log']('comments_len:\x20'+_0x10b0bc['length']),_0x5d9a52++;try{let _0x391b6d=[];for(let _0x2e2dc3=0x1;_0x2e2dc3<_0x10b0bc['length']&&_0x2e2dc3<_0x5d9a52;_0x2e2dc3++){const _0x59d7d5=await _0x10b0bc[_0x2e2dc3]['evaluate'](_0x1c34f5=>_0x1c34f5['textContent']);if(_0x1308cd){const _0x5730ad=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3431e4['username'],_0x59d7d5]);if(_0x5730ad){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x59d7d5);continue;}}try{_0x391b6d['push'](_0x59d7d5);const _0x2d8d8c='INSERT\x20INTO\x20'+_0x3bd373+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x2d8d8c,[_0x59d7d5],function(_0x402669){_0x402669&&console['log']('error\x20in\x20add-user:'+_0x402669);});}catch(_0x420194){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2e2dc3+'\x20:\x20'+_0x420194);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2e2dc3+'\x20:\x20'+_0x420194);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x4dc816=Math['round'](++_0x3acc97/_0x48fe15*0x64),_0x236b4f['sender']['send']('fetch-progress',_0x4dc816,!![]),_0x236b4f['sender']['send']('fetch-progress',0x64,!![]),_0x29739d&&(_0x236b4f['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x236b4f,_0x5a16e5,_0x3431e4,_0x3bd373,_0x391b6d)),_0x236b4f['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x4b22c8=>{_0x4b22c8('Scraping\x20finished!');});}catch(_0x2acded){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x2acded);return handle_fail(0x2);}}catch(_0x1f2d77){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x1f2d77);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x1f2d77);return handle_fail(0x2);}}async function set_clearname_from_username(_0x45f31c,_0x4f54c6,_0x121ca8=null){try{let _0x2e50c1,_0x2f6e76;const _0x1f0965='SELECT\x20username\x20FROM\x20'+_0x4f54c6+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x1f0965,[],(_0x36cfa4,_0x411243)=>{_0x36cfa4&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x36cfa4['message']),_0x411243['length']===0x0&&(_0x2f6e76=_0x411243['length']),_0x2e50c1=_0x411243['map'](_0x1ccacd=>_0x1ccacd['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x2f6e76);if(_0x2f6e76===0x0){console['log']('Leave');return;}const _0x1ab887=await _0x45f31c['waitForSelector'](IG_SEARCH_BUTTON);await _0x1ab887['click'](),await delay(0x4b0,0x7d0);for(let _0x21015d of _0x2e50c1){const _0x2d0333=await _0x45f31c['waitForSelector'](IG_SEARCH_INPUT);await _0x2d0333['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x45f31c['type'](IG_SEARCH_INPUT,_0x21015d,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0xab8945=0x1;while(_0xab8945!=0x14){console['log']('Schleife');try{let _0x312e59=IG_NAME_SPAN_PART1+_0xab8945+IG_USERNAME_SPAN_PART2;const _0x2e9528=await _0x45f31c['waitForSelector'](_0x312e59),_0x396de9=await _0x45f31c['evaluate'](_0xfe3a06=>_0xfe3a06['innerHTML'],_0x2e9528);await delay(0xc8,0x1f4);if(_0x396de9==_0x21015d){let _0x150ff0=IG_NAME_SPAN_PART1+_0xab8945+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x2c1ba8=await _0x45f31c['waitForSelector'](_0x150ff0);let _0xd2c60e=await _0x45f31c['evaluate'](_0x1dba4a=>_0x1dba4a['innerHTML'],_0x2c1ba8);const _0x39b8fc=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x57defe=_0xd2c60e['match'](_0x39b8fc);_0x57defe?_0xd2c60e=_0x57defe[0x1]['trim']():_0xd2c60e=_0xd2c60e['trim']();_0xd2c60e['includes']('•')&&(_0xd2c60e=_0xd2c60e['substring'](0x0,_0xd2c60e['indexOf']('•')-0x1));const _0x15a65f='UPDATE\x20'+_0x4f54c6+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x15a65f,[_0xd2c60e,_0x396de9],function(_0xb34c4b){_0xb34c4b&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0xb34c4b['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0xab8945++;}catch(_0x459b16){const _0x513f81='UPDATE\x20'+_0x4f54c6+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x513f81,['',_0x21015d],function(_0x30d287){_0x30d287&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x30d287['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x459b16);break;}}_0x121ca8&&_0x121ca8();}await _0x1ab887['click']();}catch(_0x4f722b){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x4f722b);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x43c3c8,_0x4e8de9)=>{const _0x2392cb='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x2392cb,[],(_0x7542f5,_0x3ad33a)=>{_0x7542f5?_0x4e8de9(_0x7542f5):_0x43c3c8(_0x3ad33a);});});});const sqlGet=(_0x13a7e6,_0x2c6521,_0xeb60b8=[])=>new Promise((_0x4c8c05,_0x450e82)=>_0x13a7e6['get'](_0x2c6521,_0xeb60b8,(_0xd3592a,_0x2a061b)=>_0xd3592a?_0x450e82(_0xd3592a):_0x4c8c05(_0x2a061b))),sqlAll=(_0x39c7a5,_0x42cf32,_0x36ee62=[])=>new Promise((_0x457b77,_0x47ff1b)=>_0x39c7a5['all'](_0x42cf32,_0x36ee62,(_0x3dc2f9,_0x5554b5)=>_0x3dc2f9?_0x47ff1b(_0x3dc2f9):_0x457b77(_0x5554b5)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x5a2ed6=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x5de836=await Promise['all'](_0x5a2ed6['map'](async _0x3784e8=>{const _0x4a19b9=[];if(!_0x3784e8['list_id'])_0x4a19b9['push']('Liste');if(!_0x3784e8['zeitabstand'])_0x4a19b9['push']('Zeitabstand');if(!_0x3784e8['account'])_0x4a19b9['push']('Instagram\x20Account');if(_0x3784e8['account'])try{const _0x377ee0=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x3784e8['account']]);if(!_0x377ee0)_0x4a19b9['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x313d5f=_0x377ee0['cookie']&&_0x377ee0['cookie']['trim']()!==''&&_0x377ee0['cookie']['trim']()!=='[]';if(!_0x313d5f)_0x4a19b9['push']('Instagram\x20Login');}}catch(_0x37f62b){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x37f62b['message']),_0x4a19b9['push']('Instagram\x20Account');}let _0x3765be='N/A',_0x5bafda='N/A';if(!_0x4a19b9['includes']('Liste')){try{const _0xfe5f0d=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x3784e8['list_id']);_0x3765be=_0xfe5f0d?.['lead_count']??0x0;}catch(_0x2564a2){if(/no such table/i['test'](_0x2564a2['message']))_0x4a19b9['push']('Liste\x20nicht\x20vorhanden');}try{const _0x4d124a=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x3784e8['list_id']]);_0x5bafda=_0x4d124a?.['contacted_count']??0x0;}catch(_0x174059){}}return{'campaign_name':_0x3784e8['campaign_name'],'lead_count':_0x3765be,'contacted_count':_0x5bafda,'status':_0x4a19b9['length']===0x0?'Positiv':'Fehler:\x20'+_0x4a19b9['join'](',\x20')};}));return{'status':'success','campaigns':_0x5de836};}catch(_0x371633){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x371633['message']),{'status':'error','message':_0x371633['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x184206,_0x3de8c2)=>{return new Promise((_0x435571,_0x57a786)=>{const _0x27755c='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x27755c,[_0x3de8c2],(_0x6c1b80,_0x5a5d6a)=>{_0x6c1b80?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x6c1b80),_0x57a786(_0x6c1b80)):(console['log']('ROWS'),console['log'](_0x5a5d6a),debugDatabaseContents(),_0x435571(_0x5a5d6a));});});});const showTableContents=_0x305be9=>{return new Promise((_0x1cfbbf,_0x33065e)=>{const _0x4a5361='SELECT\x20*\x20FROM\x20'+_0x305be9+';';campaignDB['all'](_0x4a5361,(_0x59f98e,_0x386e2f)=>{_0x59f98e?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x305be9+':',_0x59f98e),_0x33065e(_0x59f98e)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x305be9+':',_0x386e2f),_0x1cfbbf({'status':'success','message':_0x386e2f}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x2165fd){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x2165fd);}}ipcMain['handle']('create-campaign',async(_0x1c4601,_0x1e18f8)=>{return new Promise((_0x3cd40a,_0x22e22d)=>{const _0x935bd3='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x935bd3,[String(_0x1e18f8)],function(_0x37ec19){_0x37ec19?_0x22e22d(_0x37ec19):_0x3cd40a({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x1708f7,_0x5231b6)=>{return new Promise((_0x3a29f1,_0x55232b)=>{const _0x25da88='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x25da88,[_0x5231b6],function(_0x468ceb){_0x468ceb?_0x55232b(_0x468ceb):_0x3a29f1({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x39aab0,_0x846859,_0x138356,_0x16a763,_0x29ae3f,_0x445ddb,_0x2858d0,_0x2e26d8,_0x1eb26a,_0x28aad5)=>{const _0x4afd87=await createMessageID(_0x29ae3f);return new Promise((_0x35c903,_0x1bf381)=>{console['log']('ZEITABSTAND:\x20'+_0x16a763);if(!_0x846859||!_0x138356||_0x16a763===undefined||_0x16a763===null||_0x16a763===''||!_0x4afd87||!_0x445ddb)return _0x1bf381({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x4afd87);const _0xd13e07='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0xd13e07,[_0x138356,_0x16a763,_0x4afd87,_0x445ddb,_0x2858d0,_0x2e26d8,_0x1eb26a,_0x28aad5,_0x846859],function(_0x2ec1c9){if(_0x2ec1c9)_0x1bf381({'status':'error','message':_0x2ec1c9['message']});else this['changes']===0x0?_0x1bf381({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x35c903({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0xf39608,_0x37643e,_0x2a5757,_0x7f58f6,_0x1685b8)=>{return new Promise((_0x4fce4e,_0x562da1)=>{const _0x54787a='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x54787a,[_0x37643e,_0x2a5757,_0x7f58f6,_0x1685b8],function(_0x5562d7){return _0x5562d7?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x5562d7['message']),_0x562da1('insert-dm-response',{'success':![],'message':_0x5562d7['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x4fce4e('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x4ef381=>{return new Promise((_0x38dcd8,_0x3f6f78)=>{const _0x5f023b='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x5f023b,[_0x4ef381],(_0x5a8212,_0x41275c)=>{if(_0x5a8212)_0x3f6f78({'status':'error','message':_0x5a8212['message']});else{if(_0x41275c)_0x38dcd8(_0x41275c['message_id']);else{const _0x7dce45='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x7dce45,[_0x4ef381],function(_0x1bc270){_0x1bc270?_0x3f6f78({'status':'error','message':_0x1bc270['message']}):_0x38dcd8(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x212612,_0xb5dbb2)=>{return new Promise((_0x485fec,_0x461d9d)=>{const _0xce7188='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0xb5dbb2;db['get'](_0xce7188,(_0x3a4c33,_0xd172cd)=>{_0x3a4c33?_0x461d9d({'status':'error','message':_0x3a4c33['message']}):_0x485fec({'status':'success','count':_0xd172cd['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x4d7777,_0x2e6e53){try{const _0x323e6c=await new Promise((_0x477266,_0x11cf9b)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x2e6e53],(_0x2484ce,_0x17d22f)=>{if(_0x2484ce)_0x11cf9b(_0x2484ce);else{if(_0x17d22f['length']>0x0){let _0x16ae98=JSON['parse'](_0x17d22f[0x0]['cookie']);console['log'](_0x16ae98),_0x477266(_0x16ae98);}else _0x11cf9b(new Error('User\x20with\x20username\x20'+_0x2e6e53+'\x20does\x20not\x20exist.'));}});});await _0x4d7777['setCookie'](..._0x323e6c),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0xfce3cf){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0xfce3cf);}}async function saveCookiesForUser(_0x3c88d0,_0x36387b){try{const _0x14d67d=await _0x3c88d0['cookies']();if(!_0x14d67d||_0x14d67d['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x36387b);const _0x203212=JSON['stringify'](_0x14d67d);if(_0x203212['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x36387b);return new Promise((_0x55b9a2,_0x2897eb)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x36387b],(_0x1b1446,_0x592add)=>{if(_0x1b1446)return console['error']('Error\x20checking\x20user\x20existence:',_0x1b1446),_0x2897eb(_0x1b1446);if(_0x592add){const _0x40c649=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x40c649['run'](_0x203212,_0x36387b,function(_0x4884d1){return _0x4884d1?(console['error']('Error\x20updating\x20cookies:',_0x4884d1),_0x2897eb(_0x4884d1)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x36387b),_0x55b9a2());});}else{const _0x54d8a8=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x54d8a8['run'](_0x36387b,_0x203212,function(_0x53729a){return _0x53729a?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x53729a),_0x2897eb(_0x53729a)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x36387b),_0x55b9a2());});}});});}catch(_0x25114f){console['error']('Error\x20fetching\x20cookies:',_0x25114f);throw _0x25114f;}}async function createUserIfNotExists(_0x591dfe){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x591dfe],(_0x9bf8a8,_0x45669a)=>{if(_0x9bf8a8){console['error']('Error\x20checking\x20user\x20existence:',_0x9bf8a8);throw _0x9bf8a8;}else{if(!_0x45669a){const _0x12c283=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x12c283['run'](_0x591dfe,function(_0x5a698e){_0x5a698e?console['error']('Error\x20inserting\x20new\x20user:',_0x5a698e):console['log']('New\x20user\x20created:',_0x591dfe);});}else console['log']('User\x20already\x20exists:',_0x591dfe);}});}catch(_0x2d3421){console['error']('Error\x20creating\x20user:',_0x2d3421);throw _0x2d3421;}}ipcMain['handle']('create-relation',async(_0x1ed911,_0x555537)=>{return new Promise((_0x5e3e45,_0x2b25dd)=>{const _0x50da4c='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x555537+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x50da4c,function(_0x466f60){_0x466f60?_0x2b25dd(_0x466f60):_0x5e3e45({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x268575,_0x1e823f)=>{return console['log']('droping\x20table'+_0x1e823f),new Promise((_0x56ac84,_0xd028b6)=>{const _0x56b36c='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x1e823f;console['log']('droping\x20table'+_0x1e823f),db['run'](_0x56b36c,function(_0x40d0ec){_0x40d0ec?_0xd028b6(_0x40d0ec):_0x56ac84({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x171d78=>{return new Promise((_0x188fd7,_0x14baf6)=>{const _0x457f43='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x457f43,[],(_0x3ef105,_0x807310)=>{_0x3ef105?_0x14baf6(_0x3ef105):_0x188fd7(_0x807310['map'](_0x4cd799=>_0x4cd799['name']));});});}),ipcMain['handle']('add-user',async(_0x93d5ab,_0x4f286f,_0x1f5eab)=>{return new Promise(_0x4500f8=>{const _0x30791e=db['prepare']('INSERT\x20INTO\x20'+_0x1f5eab+'\x20(username)\x20VALUES\x20(?)');_0x30791e['run'](_0x4f286f,function(_0x45250f){_0x45250f?console['log']('error\x20in\x20add-user:'+_0x45250f):_0x4500f8({'status':'success','id':this['lastID']});}),_0x30791e['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0xe0cb07,_0x519613)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x20c397,_0x11f535)=>{if(_0x20c397)_0x519613(_0x20c397);else{_0xe0cb07({'status':'success','users':_0x11f535});for(_0x11f535 of _0x11f535){console['log'](_0x11f535['username']);}}});});}),ipcMain['handle']('get-data',async(_0x20dcf4,_0x53d764)=>{return new Promise((_0x32cbe1,_0x2523d1)=>{const _0x158b98='SELECT\x20*\x20FROM\x20'+_0x53d764;console['log'](_0x158b98),db['all'](_0x158b98,[],(_0x3e77b2,_0x1ae9a3)=>{_0x3e77b2?_0x2523d1(_0x3e77b2):_0x32cbe1(_0x1ae9a3);});});}),ipcMain['handle']('get-accounts',async _0x970b46=>{return new Promise((_0x53b701,_0x28bf73)=>{const _0x103157='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x103157),igaccountsDB['all'](_0x103157,[],(_0x4b48f3,_0x45ac5e)=>{_0x4b48f3?_0x28bf73(_0x4b48f3):_0x53b701(_0x45ac5e);});});}),ipcMain['handle']('get-targets',async(_0x2b4ee9,_0x694c6a)=>{return getTargetProfiles(_0x694c6a);}),ipcMain['handle']('delete-user',async(_0x5a7ab5,_0xa85a86,_0x32afe4)=>{return new Promise((_0x51842b,_0x5d4e05)=>{const _0x2e6c44=db['prepare']('DELETE\x20FROM\x20'+_0x32afe4+'\x20WHERE\x20username\x20=\x20?');_0x2e6c44['run'](_0xa85a86,function(_0x316c6f){_0x316c6f?_0x5d4e05(_0x316c6f):_0x51842b({'status':'success','changes':this['changes']});}),_0x2e6c44['finalize']();});}),ipcMain['handle']('delete-account',async(_0x9d4121,_0xddee35)=>{const _0xeef171=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0xeef171['run'](_0xddee35,function(_0x482277){_0x482277&&console['log'](_0x482277);}),_0xeef171['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x3019d1,_0x3ee4e0)=>{const _0x300323='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x300323,[],(_0x1006a6,_0x5cc66e)=>{_0x1006a6?_0x3ee4e0({'status':'error','message':_0x1006a6['message']}):_0x3019d1({'status':'success','contactedCount':_0x5cc66e['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x5c9b97,_0x12c8e2)=>{const _0x1412cc='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x1412cc,[],(_0x2b4713,_0x1d13aa)=>{_0x2b4713?_0x12c8e2({'status':'error','message':_0x2b4713['message']}):_0x5c9b97({'status':'success','contactedCount':_0x1d13aa['contactedCount']});});});});function exportDatabase(_0x2d39b7){return new Promise((_0xf1f8be,_0x5354b6)=>{const _0x284342='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x2d39b7+'\x0a\x20\x20\x20\x20';db['all'](_0x284342,[],async(_0x343953,_0x53c063)=>{if(_0x343953){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x343953['message']),_0x5354b6(_0x343953);return;}if(!_0x53c063||_0x53c063['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0xf1f8be();return;}const _0x2110be=XLSX['utils']['json_to_sheet'](_0x53c063),_0x326a35=XLSX['utils']['sheet_to_csv'](_0x2110be);try{const {canceled:_0x43f583,filePath:_0x157915}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x2d39b7+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x43f583||!_0x157915){console['log']('Speichern\x20abgebrochen.'),_0xf1f8be();return;}fs['writeFile'](_0x157915,_0x326a35,'utf8',_0x30c6a7=>{_0x30c6a7?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x30c6a7['message']),_0x5354b6(_0x30c6a7)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x157915),_0xf1f8be());});}catch(_0xf8fc9a){console['error']('Fehler\x20im\x20Speicherdialog:',_0xf8fc9a),_0x5354b6(_0xf8fc9a);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x289bf4,_0x13f417)=>{shell['openExternal'](_0x13f417);});