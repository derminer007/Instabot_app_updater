const {app,BrowserWindow,ipcMain,dialog}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),sqlite3=require('sqlite3')['verbose']();function createWindow(){const _0x117627=new BrowserWindow({'width':0x320,'height':0x258,'webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x117627['loadFile'](path['join'](__dirname,'index.html'));}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x1b0cb1){var _0x49fbbd=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2a59e2){console['log']('window\x20id:'+_0x2a59e2['id']),_0x2a59e2['id']>0x1&&(_0x49fbbd=!![]);}),console['log']('child\x20opened\x20='+_0x49fbbd);if(!_0x49fbbd){const _0xf9ee6f=new BrowserWindow({'width':0x320,'height':0x258,'webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0xf9ee6f['loadFile'](_0x1b0cb1['url']);}else console['log']('child\x20window\x20opened\x20already');}let browser=null,page=null,isStopping=![];async function getBrowserPage(){let _0x1c0448='';if(process['platform']==='darwin')_0x1c0448='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome';else{if(process['platform']==='win32')_0x1c0448='chromium_local/chrome-win/chrome.exe';else{if(process['platform']==='linux'){}}}return(browser===null||page['isClosed']())&&(browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'executablePath':_0x1c0448})),(page===null||page['isClosed']())&&(page=await browser['newPage'](),page['setDefaultNavigationTimeout'](0x1d4c),page['setDefaultTimeout'](0x1d4c)),page;}ipcMain['on']('login',async(_0x200fea,_0x41f42c,_0x650cad)=>{const _0x35d1fb=await getBrowserPage();await _0x35d1fb['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x35d1fb,_0x41f42c,_0x650cad),setTimeout(async()=>{await browser['close']();},0x1388);}),ipcMain['handle']('sendMessage',async(_0x13ad1a,_0x49e5d1,_0x1fc135,_0x301b86,_0x3a1c57)=>{isStopping=![];const _0x8c7477=await getBrowserPage();return console['log']('send\x20Message\x20gestartet'),console['log'](_0x49e5d1),new Promise((_0x54d9f4,_0x2a6939)=>{send_message(_0x8c7477,_0x49e5d1,_0x1fc135,_0x301b86,_0x3a1c57)['then'](_0x10a8d0=>_0x54d9f4(_0x10a8d0))['catch'](_0x573c18=>_0x2a6939(_0x573c18));});}),ipcMain['handle']('stop-action',async _0xe0af30=>{isStopping=!![];const _0x46a44d=await getBrowserPage();await _0x46a44d['close']();}),ipcMain['handle']('fetch_followers',async(_0x38e3b1,_0x181bd3,_0x1a6b23,_0x2677dc,_0x44b54d)=>{isStopping=![];const _0x25eafc=await getBrowserPage();return fetch_followers_from_account(_0x25eafc,_0x181bd3,_0x1a6b23,_0x2677dc,_0x44b54d);}),ipcMain['handle']('fetch_likes',async(_0x51dabc,_0x364a80,_0x57bbae,_0x215df4,_0x19d6e3)=>{isStopping=![];const _0x3a35ed=await getBrowserPage();return fetch_likers_from_post(_0x3a35ed,_0x364a80,_0x57bbae,_0x215df4,_0x19d6e3);}),ipcMain['handle']('fetch_comments',async(_0x48c8b5,_0x1aa3b1,_0x4658ac,_0x55be07,_0x48beca)=>{isStopping=![];const _0x5e31b2=await getBrowserPage();return fetch_comments_from_post(_0x5e31b2,_0x1aa3b1,_0x4658ac,_0x55be07,_0x48beca);});function getRnd(_0xf6c5cc,_0x769682){return Math['random']()*(_0x769682-_0xf6c5cc+0x1)+_0xf6c5cc;}function delay(_0x29e016,_0x511e2a){let _0xc20683=getRnd(_0x29e016,_0x511e2a);return new Promise(function(_0x366692){setTimeout(_0x366692,_0xc20683);});}async function scroll(_0xe31c57,_0xff9882,_0x1dc693=0x2){const _0x507d2e=await _0xe31c57['waitForSelector'](_0xff9882);for(let _0x356cd6=0x0;_0x356cd6<_0x1dc693;_0x356cd6++){console['log']('Scrolling\x20'+_0x356cd6),await _0xe31c57['evaluate'](_0x3daf08=>{const _0x4c998d=document['querySelector'](_0x3daf08);_0x4c998d&&_0x4c998d['scrollBy'](0x0,0x190);},_0xff9882),await delay(0x320,0x5dc);}}async function saveCookies(_0x1e56f2){let _0x3ebd48=await _0x1e56f2['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x3ebd48,null,0x2));}async function notificationClear(_0x54dbf8){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x54dbf8['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x54dbf8['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x4a985e){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x4a985e);}}async function getTargetProfiles(_0x30d052){return new Promise((_0x266532,_0x3d666a)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x30d052,(_0x1deea5,_0x51f863)=>{_0x1deea5?_0x3d666a(_0x1deea5):_0x266532(_0x51f863);});});}async function login(_0x5ce9f1,_0x25e869,_0x4d8b13){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x5ce9f1,_0x25e869),await createUserIfNotExists(_0x25e869,_0x4d8b13);}catch(_0xa62629){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xa62629);}try{await _0x5ce9f1['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x5ce9f1['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x5ce9f1['click']('button._a9--._ap36._a9_0');}catch(_0x4b706d){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x5ce9f1['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x5ce9f1['type']('input[name=\x27username\x27]',_0x25e869,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5ce9f1['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x5ce9f1['type']('input[name=\x27password\x27]',_0x4d8b13,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5ce9f1['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x5ce9f1['click']('button[type=\x27submit\x27]');}catch(_0x1a5fbc){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x5ce9f1),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x5ce9f1,_0x25e869);}catch(_0x154a48){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x154a48);}}catch(_0x42e1e5){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x42e1e5);}}async function send_message(_0x5adfe0,_0x36a455,_0x1ab1d2,_0x5d41b8,_0x51688b){console['log'](_0x51688b),console['log']('Anfang'),console['log']('Counter:\x20'+_0x5d41b8);if(_0x5d41b8==0x0){try{console['log'](_0x51688b),await login(_0x5adfe0,_0x51688b['username'],_0x51688b['password']);}catch(_0x41ae80){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x41ae80);return;}await _0x5adfe0['goto']('https://www.instagram.com/direct/inbox/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x5adfe0);}try{try{const _0xb34acd='div.x1i10hfl.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.x6s0dn4.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x1ypdohk.x78zum5.xl56j7k.x1y1aw1k.x1sxyh0.xwib8y2.xurb0ha.xcdnw81';await delay(0xfa0,0x1d4c),await _0x5adfe0['waitForSelector'](_0xb34acd),await _0x5adfe0['click'](_0xb34acd),console['log']('Message-Button\x20geklickt'),console['log'](_0x36a455+'\x20'+_0x1ab1d2),await delay(0xfa0,0x1d4c);try{const _0x45093f='input[name=\x22queryBox\x22]',_0x3ec258='body\x20>\x20div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x10l6tqk.x17qophe.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.x1q0g3np.x1a02dak.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20input';await _0x5adfe0['waitForSelector'](_0x3ec258),await _0x5adfe0['click'](_0x3ec258),await delay(0xfa0,0x1d4c),await _0x5adfe0['waitForSelector'](_0x45093f),await _0x5adfe0['click'](_0x45093f),await delay(0xfa0,0x1d4c),await _0x5adfe0['type'](_0x45093f,_0x36a455,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),console['log']('Account\x20Name\x20eingefügt');const _0x59e551='div.xnkg4db.x1xling4.x13ywhbb.x178cd7z.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x17qophe.x10l6tqk.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x6ikm8r.x1rife3k.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div:nth-child(',_0x12ce02=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1pi30zi.x1swvt13.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z.x78zum5.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span';let _0x461530=0x1;try{while(_0x461530!=0x14){console['log']('Schleife');let _0x56cd61=_0x59e551+_0x461530+_0x12ce02;const _0x34619f=await _0x5adfe0['waitForSelector'](_0x56cd61),_0x5a0eba=await _0x5adfe0['evaluate'](_0x1cbb08=>_0x1cbb08['innerHTML'],_0x34619f);console['log'](_0x5a0eba+'\x20'+_0x36a455),delay(0x3e8,0xbb8);if(_0x5a0eba==_0x36a455){console['log']('Account\x20gefunden'),await _0x5adfe0['click'](_0x56cd61);break;}_0x461530++;}try{await delay(0xbb8,0x1388);const _0x2427e6=await _0x5adfe0['waitForSelector']('div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.x972fbf.xcfux6l.x1qhh985.xm0m39n.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.xexx8yu.x18d9i69.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1lq5wgf.xgqcy7u.x30kzoy.x9jhf4c.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x9bdzbf.x1ypdohk.x78zum5.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x1n2onr6.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xn3w4p2.x5ib6vp.xc73u3c.x1tu34mt.xzloghq');console['log'](_0x2427e6),await delay(0xbb8,0x1388),await _0x2427e6['click']();try{await delay(0xbb8,0x1388);const _0x2f4775=await _0x5adfe0['waitForSelector']('div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1i64zmx.xw3qccf.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f.notranslate');await _0x2f4775['type'](_0x1ab1d2,{'delay':getRnd(0x50,0x78)}),await delay(0xbb8,0x1388);try{const _0x5aae1b=await _0x5adfe0['waitForSelector']('div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.xfs2ol5[role=\x22button\x22][tabindex=\x220\x22]');return await _0x5aae1b['click'](),await delay(0xbb8,0x1388),new Promise(_0x222a84=>{_0x222a84('Nachricht\x20erfolgreich\x20verschickt!');});}catch(_0x1ba108){console['log']('Message-Button\x20nicht\x20geklickt:\x20'+_0x1ba108);}}catch(_0x3b6355){console['log']('Chat-Fenster\x20nicht\x20gefunden:\x20'+_0x3b6355);}}catch(_0x4a9084){console['log']('error:\x20'+_0x4a9084);}}catch(_0x1f92b4){console['log']('User\x20nicht\x20gefunden:'+_0x1f92b4);}}catch(_0x52b2d4){console['log']('DM-Fenster\x20nicht\x20gefunden:'+_0x52b2d4);}}catch(_0x41cf89){console['log']('Message-Button\x20nicht\x20geklickt:'+_0x41cf89);}}catch(_0x1dda2d){console['log']('Nachricht\x20senden\x20fehlgeschlagen:\x20'+_0x1dda2d);}return console['log']('Ende'),new Promise((_0x4e4389,_0x64dfc3)=>{_0x64dfc3('Fehler\x20beim\x20Anschreiben.\x20Lade\x20bitte\x20die\x20neuste\x20Version\x20herunter');});}function handle_fail(_0x575ed2){if(isStopping)return new Promise(_0x1c53bb=>{_0x1c53bb('Scraper\x20gestoppt.');});else{let _0x2b363b='';switch(_0x575ed2){case 0x0:_0x2b363b='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x2b363b='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x2b363b='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x2b363b='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x2d00bb,_0x5ad2d2)=>{_0x5ad2d2(_0x2b363b);});}}async function fetch_followers_from_account(_0x2c5509,_0x489682,_0x330d7e,_0x30b445,_0x2d6b29){try{await login(_0x2c5509,_0x2d6b29['username'],_0x2d6b29['password']);}catch(_0x14a70c){return console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x14a70c),handle_fail(0x0);}let _0x133b7c=0x0;try{await _0x2c5509['goto']('https://www.instagram.com/'+_0x489682+'/'),await notificationClear(_0x2c5509);try{if(_0x330d7e<=0x0){const _0x450858=await _0x2c5509['waitForSelector']('div.x9f619.x1n2onr6\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span');await delay(0x12c,0x320);const _0x5c2253=await _0x2c5509['evaluate'](_0x51a94d=>_0x51a94d['innerHTML'],_0x450858);_0x133b7c=Math['ceil'](_0x5c2253/0x4);}else _0x133b7c=Math['ceil'](_0x330d7e/0x4);let _0x2c2b6d=await _0x2c5509['waitForSelector']('div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a');await delay(0xbb8,0x1388),await _0x2c2b6d['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x489682+'\x20gesichtet');}catch(_0x2b4462){return console['log']('Follower\x20Liste\x20von\x20'+_0x489682+'\x20nicht\x20gefunden:'+_0x2b4462),handle_fail(0x0);}}catch(_0x48e38d){return console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x48e38d),handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x133b7c),await scroll(_0x2c5509,'div.xnkg4db.x1xling4\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x1h91t0o\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x7r02ix.xf1ldfh\x20>\x20div\x20>\x20div\x20>\x20div.xyi19xy.x1pc53ja.x1lliihq.x1iyjqo2',_0x133b7c),await _0x2c5509['waitForSelector']('a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd');const _0x22d25c=await _0x2c5509['$$']('a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd');_0x330d7e<=0x0&&(_0x330d7e=_0x22d25c['length']);for(let _0x44bdf7=0x0;_0x44bdf7<_0x22d25c['length']&&_0x44bdf7<_0x330d7e;_0x44bdf7++){console['log'](await _0x22d25c[_0x44bdf7]['evaluate'](_0x48b68d=>_0x48b68d['textContent']));const _0x702f25=await db['prepare']('INSERT\x20INTO\x20'+_0x30b445+'\x20(username)\x20VALUES\x20(?)');await _0x702f25['run'](await _0x22d25c[_0x44bdf7]['evaluate'](_0x4042ef=>_0x4042ef['textContent']),function(_0x12776e){_0x12776e&&console['log']('error\x20in\x20add-user:'+_0x12776e);}),await _0x702f25['finalize']();}return new Promise(_0x569722=>{_0x569722('Scraping\x20finished!');});}catch(_0x36f1a7){return console['log']('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x489682+'\x20nicht\x20gefunden:'+_0x36f1a7),handle_fail(0x0);}}async function fetch_likers_from_post(_0x30ba8d,_0x4ed050,_0x4abc4c,_0x3efb19,_0x15cc67){try{await login(_0x30ba8d,_0x15cc67['username'],_0x15cc67['password']);}catch(_0x1dc00c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1dc00c);return handle_fail(0x1);return;}try{let _0x507f44=_0x4ed050['substring'](0x0,_0x4ed050['lastIndexOf']('/')),_0x18f5e3=_0x507f44+'/liked_by';console['log'](_0x18f5e3),await _0x30ba8d['goto'](_0x18f5e3),await delay(0x7d0,0xfa0),await notificationClear(_0x30ba8d),await delay(0xc8,0x1f4);let _0x255fc2='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd';await _0x30ba8d['waitForSelector'](_0x255fc2),await delay(0x1f4,0x320);const _0x373eaf=await _0x30ba8d['$$'](_0x255fc2);await delay(0x1f4,0x320),console['log'](_0x373eaf['length']);let _0x490516=path['join'](__dirname,'/likers.csv');_0x4abc4c<=0x0&&(_0x4abc4c=_0x373eaf['length']);try{for(let _0x31eb5d=0x0;_0x31eb5d<_0x373eaf['length']&&_0x31eb5d<_0x4abc4c;_0x31eb5d++){console['log'](await _0x373eaf[_0x31eb5d]['evaluate'](_0x2ea2dc=>_0x2ea2dc['textContent']));try{const _0x115dc3=await db['prepare']('INSERT\x20INTO\x20'+_0x3efb19+'\x20(username)\x20VALUES\x20(?)');await _0x115dc3['run'](await _0x373eaf[_0x31eb5d]['evaluate'](_0x3ba514=>_0x3ba514['textContent']),function(_0x3a33e8){_0x3a33e8&&console['log']('error\x20in\x20add-user:'+_0x3a33e8);}),await _0x115dc3['finalize']();}catch(_0x4b4c03){return console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x31eb5d+'\x20:\x20'+_0x4b4c03),handle_fail(0x1);}}return new Promise(_0x634a6e=>{_0x634a6e('Scraping\x20finished!');});}catch(_0x95a6f0){return console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben'),handle_fail(0x1);}}catch(_0x511920){return console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x511920),handle_fail(0x1);}}async function fetch_comments_from_post(_0x501efa,_0x3718e5,_0x5ceced,_0x48205f,_0x592325){try{await login(_0x501efa,_0x592325['username'],_0x592325['password']);}catch(_0x2e756a){return console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2e756a),handle_fail(0x2);}try{console['log'](_0x3718e5),await _0x501efa['goto'](_0x3718e5),await delay(0x7d0,0xfa0),await notificationClear(_0x501efa),await delay(0xc8,0x1f4);const _0x5cb945='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6';let _0x508a56;if(_0x5ceced<=0x0){const _0x5e1686=await _0x501efa['waitForSelector']('div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span');await delay(0x12c,0x320);let _0x4dce1f=await _0x501efa['evaluate'](_0x437993=>_0x437993['innerHTML'],_0x5e1686),_0x276b72=String(_0x4dce1f)['replace'](/[^0-9]/g,''),_0x3cb074=Number(_0x276b72)/0x14;_0x508a56=Math['ceil'](_0x3cb074/0x3);}else _0x508a56=Math['ceil'](_0x5ceced/0x3);console['log']('Auto-scrolls:\x20'+_0x508a56),await scroll(_0x501efa,_0x5cb945,_0x508a56);try{const _0x5b3a13='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span';await _0x501efa['waitForSelector'](_0x5b3a13),await delay(0x1f4,0x320);const _0x5c467a=await _0x501efa['$$'](_0x5b3a13);console['log'](_0x5c467a),await delay(0xc8,0x1f4);try{for(let _0x335e07=0x0;_0x335e07<_0x5c467a['length'];_0x335e07++){_0x5c467a[_0x335e07]['click'](),await delay(0x320,0x5dc);}}catch(_0x12ce6d){return console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x12ce6d),handle_fail(0x2);}}catch(_0x5a7345){return console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt'),handle_fail(0x2);}const _0x4eeca5='span._ap3a._aaco._aacw._aacx._aad7._aade';await _0x501efa['waitForSelector'](_0x4eeca5),await delay(0x1f4,0x320);const _0x334e45=await _0x501efa['$$'](_0x4eeca5);let _0x2d30cb=path['join'](__dirname,'/comments.csv');_0x5ceced<=0x0&&(_0x5ceced=_0x334e45['length']);console['log']('fetch_limit:\x20'+_0x5ceced),console['log']('comments_len:\x20'+_0x334e45['length']),_0x5ceced++;try{for(let _0x249b7c=0x1;_0x249b7c<_0x334e45['length']&&_0x249b7c<_0x5ceced;_0x249b7c++){try{console['log'](await _0x334e45[_0x249b7c]['evaluate'](_0x133731=>_0x133731['textContent']));const _0x1a0f1b=await db['prepare']('INSERT\x20INTO\x20'+_0x48205f+'\x20(username)\x20VALUES\x20(?)');await _0x1a0f1b['run'](await _0x334e45[_0x249b7c]['evaluate'](_0x6f467c=>_0x6f467c['textContent']),function(_0x949709){_0x949709&&console['log']('error\x20in\x20add-user:'+_0x949709);}),await _0x1a0f1b['finalize']();}catch(_0x4fc4d6){return console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x249b7c+'\x20:\x20'+_0x4fc4d6),handle_fail(0x2);}}return new Promise(_0x194223=>{_0x194223('Scraping\x20finished!');});}catch(_0x49953f){return console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben'),handle_fail(0x2);}}catch(_0x3ce169){return console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x3ce169),handle_fail(0x2);}}const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20password\x20TEXT,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0xd68e42,_0x25d9ac){try{const _0x118211=await new Promise((_0x4e04e8,_0x5957df)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x25d9ac],(_0x53d1dd,_0x301674)=>{if(_0x53d1dd)_0x5957df(_0x53d1dd);else{if(_0x301674['length']>0x0){let _0x3489b7=JSON['parse'](_0x301674[0x0]['cookie']);console['log'](_0x3489b7),_0x4e04e8(_0x3489b7);}else _0x5957df(new Error('User\x20with\x20username\x20'+_0x25d9ac+'\x20does\x20not\x20exist.'));}});});await _0xd68e42['setCookie'](..._0x118211),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x56cdab){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x56cdab);}}async function saveCookiesForUser(_0x3707a3,_0x24f395){try{let _0x5b3e97=await _0x3707a3['cookies']();_0x5b3e97=JSON['stringify'](_0x5b3e97),igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x24f395],(_0x2ce52f,_0x2551c0)=>{if(_0x2ce52f){console['error']('Error\x20checking\x20user\x20existence:',_0x2ce52f);throw _0x2ce52f;}else{if(_0x2551c0){const _0x49d586=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x49d586['run'](_0x5b3e97,_0x24f395,function(_0x35f447){_0x35f447?console['error']('Error\x20updating\x20cookies:',_0x35f447):console['log']('Cookies\x20updated\x20for\x20user:',_0x24f395);});}else{const _0x52d01e=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x52d01e['run'](_0x24f395,_0x5b3e97,function(_0x153498){_0x153498?console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x153498):console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x24f395);});}}});}catch(_0x253198){console['error']('Error\x20fetching\x20cookies:',_0x253198);throw _0x253198;}}async function createUserIfNotExists(_0x3ce816,_0x7b2fae){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x3ce816],(_0x3b06a4,_0x1bdff3)=>{if(_0x3b06a4){console['error']('Error\x20checking\x20user\x20existence:',_0x3b06a4);throw _0x3b06a4;}else{if(!_0x1bdff3){const _0x3e1860=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20password)\x20VALUES\x20(?,\x20?)');_0x3e1860['run'](_0x3ce816,_0x7b2fae,function(_0x159254){_0x159254?console['error']('Error\x20inserting\x20new\x20user:',_0x159254):console['log']('New\x20user\x20created:',_0x3ce816);});}else console['log']('User\x20already\x20exists:',_0x3ce816);}});}catch(_0x5ca200){console['error']('Error\x20creating\x20user:',_0x5ca200);throw _0x5ca200;}}ipcMain['handle']('create-relation',async(_0x2f041c,_0x14a456)=>{return new Promise((_0x2d8211,_0x181832)=>{const _0x1fa6db='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x14a456+'\x20(username\x20TEXT\x20PRIMARY\x20KEY)';db['run'](_0x1fa6db,function(_0x4b14ae){_0x4b14ae?_0x181832(_0x4b14ae):_0x2d8211({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x422d74,_0x4a99e1)=>{return console['log']('droping\x20table'+_0x4a99e1),new Promise((_0x3daa89,_0x3b3411)=>{const _0x48f914='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x4a99e1;console['log']('droping\x20table'+_0x4a99e1),db['run'](_0x48f914,function(_0x329e6d){_0x329e6d?_0x3b3411(_0x329e6d):_0x3daa89({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x293e7d=>{return new Promise((_0x5571a0,_0x29ffeb)=>{const _0x460c49='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x460c49,[],(_0x4fad12,_0x318408)=>{_0x4fad12?_0x29ffeb(_0x4fad12):_0x5571a0(_0x318408['map'](_0x16b3b3=>_0x16b3b3['name']));});});}),ipcMain['handle']('add-user',async(_0x241414,_0x1cfbad,_0x442ed)=>{return new Promise(_0x3934e9=>{const _0x58c2fa=db['prepare']('INSERT\x20INTO\x20'+_0x442ed+'\x20(username)\x20VALUES\x20(?)');_0x58c2fa['run'](_0x1cfbad,function(_0x36a8e1){_0x36a8e1?console['log']('error\x20in\x20add-user:'+_0x36a8e1):_0x3934e9({'status':'success','id':this['lastID']});}),_0x58c2fa['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x166b31,_0x1f7a4d)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x27b221,_0x24d471)=>{if(_0x27b221)_0x1f7a4d(_0x27b221);else{_0x166b31({'status':'success','users':_0x24d471});for(_0x24d471 of _0x24d471){console['log'](_0x24d471['username']);}}});});}),ipcMain['handle']('get-data',async(_0x466d0b,_0x35ca8b)=>{return new Promise((_0x170a87,_0x3087a2)=>{const _0x1b9cb2='SELECT\x20*\x20FROM\x20'+_0x35ca8b;console['log'](_0x1b9cb2),db['all'](_0x1b9cb2,[],(_0x5288e6,_0x19adaf)=>{_0x5288e6?_0x3087a2(_0x5288e6):_0x170a87(_0x19adaf);});});}),ipcMain['handle']('get-accounts',async _0x2f18f2=>{return new Promise((_0x4781ff,_0x576600)=>{const _0x1917bb='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x1917bb),igaccountsDB['all'](_0x1917bb,[],(_0x50efe7,_0x2c1513)=>{_0x50efe7?_0x576600(_0x50efe7):_0x4781ff(_0x2c1513);});});}),ipcMain['handle']('get-targets',async(_0x34b796,_0x3dcc2e)=>{return getTargetProfiles(_0x3dcc2e);}),ipcMain['handle']('delete-user',async(_0x16a0ea,_0x1aedc9,_0x23af0d)=>{return new Promise((_0x2e5433,_0x4ebd01)=>{const _0x145f36=db['prepare']('DELETE\x20FROM\x20'+_0x23af0d+'\x20WHERE\x20username\x20=\x20?');_0x145f36['run'](_0x1aedc9,function(_0x4c2edb){_0x4c2edb?_0x4ebd01(_0x4c2edb):_0x2e5433({'status':'success','changes':this['changes']});}),_0x145f36['finalize']();});}),ipcMain['handle']('delete-account',async(_0x4af017,_0x270d1a)=>{const _0x5846db=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x5846db['run'](_0x270d1a,function(_0x3aef5f){_0x3aef5f&&console['log'](_0x3aef5f);}),_0x5846db['finalize']();});