const {app,BrowserWindow,ipcMain,dialog}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='a.x1i10hfl.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.x1ypdohk.xt0psk2.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.notranslate._a6hd',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_NEW_MSG_BUTTON='div.x1i10hfl.x972fbf.xcfux6l.x1qhh985.xm0m39n.x9f619.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x16tdsg8.x1hl2dhg.xggy1nq.x1a2a7pz.x6s0dn4.xjbqb8w.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x1ypdohk.x78zum5.xl56j7k.x1y1aw1k.x1sxyh0.xwib8y2.xurb0ha.xcdnw81',K_SEARCH_BAR_INPUT='body\x20>\x20div.x1n2onr6.xzkaem6\x20>\x20div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div.x1uvtmcs.x4k7w5x.x1h91t0o.x1beo9mf.xaigb6o.x12ejxvf.x3igimt.xarpa2k.xedcshv.x1lytzrv.x1t2pt76.x7ja8zs.x1n2onr6.x1qrby5j.x1jfb8zj\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x1k90msu.x6o7n8i.x1qfuztq.x10l6tqk.x17qophe.x13vifvy.x1hc1fzr.x71s49j.xh8yej3\x20>\x20div\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.x1q0g3np.x1a02dak.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20input',K_USERNAME_SPALTE_PART1='div:nth-child(',K_CLEARNAME_SPALTE_PART2=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1pi30zi.x1swvt13.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span\x20>\x20span',K_CHAT_BUTTON_DIV='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.x972fbf.xcfux6l.x1qhh985.xm0m39n.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.x2lwn1j.xeuugli.xexx8yu.x18d9i69.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1lq5wgf.xgqcy7u.x30kzoy.x9jhf4c.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x9bdzbf.x1ypdohk.x78zum5.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x1n2onr6.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xn3w4p2.x5ib6vp.xc73u3c.x1tu34mt.xzloghq',K_NACHRICHT_SCHREIBEN_INPUT_DIV='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1i64zmx.xw3qccf.x1uhb9sk.x1plvlek.xryxfnj.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f.notranslate',K_SENDEN_BUTTON_DIV='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x3b2322=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x3b2322['loadFile'](path['join'](__dirname,'index.html'));}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0xcbb99d){var _0xed25ca=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x42b11b){console['log']('window\x20id:'+_0x42b11b['id']),_0x42b11b['id']>0x1&&(_0xed25ca=!![]);}),console['log']('child\x20opened\x20='+_0xed25ca);if(!_0xed25ca){const _0x227c2e=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x227c2e['loadFile'](_0xcbb99d['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0);});const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x48252d='',_0x1b2f82=null;if(process['platform']==='darwin')_0x48252d=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x48252d=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x48252d}),_0x1b2f82=await browser_login['newPage'](),_0x1b2f82['setDefaultNavigationTimeout'](0x1d4c),_0x1b2f82['setDefaultTimeout'](0x1d4c),_0x1b2f82;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x53cf09=0x1,_0x388550=0x0){let _0x463e30='',_0x524b79=null;if(process['platform']==='darwin')_0x463e30=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x463e30=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x53cf09===0x0&&!pageStack[_0x388550])return browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x463e30}),_0x524b79=await browser['newPage'](),_0x524b79['setDefaultNavigationTimeout'](0x1d4c),_0x524b79['setDefaultTimeout'](0x1d4c),pageStack[_0x388550]=_0x524b79,_0x524b79;return(browser===null||pageStack[_0x388550]===null||pageStack[_0x388550]['isClosed']())&&(browser=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x463e30})),(pageStack[_0x388550]===null||pageStack[_0x388550]['isClosed']())&&(_0x524b79=await browser['newPage'](),_0x524b79['setDefaultNavigationTimeout'](0x1d4c),_0x524b79['setDefaultTimeout'](0x1d4c),pageStack[_0x388550]=_0x524b79),pageStack[_0x388550];}ipcMain['on']('login',async(_0x42f575,_0x3366d5)=>{const _0x1ab6b0=await getBrowserPageLogin();await _0x1ab6b0['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x1ab6b0,_0x3366d5);}),ipcMain['on']('setLoginCookies',async(_0x41de3a,_0x53eb97)=>{const _0x455503=await getBrowserPage();await set_login_cookies(_0x455503,_0x53eb97),await browser_login['close']();}),ipcMain['on']('export-relation',async(_0x43306b,_0xc9e4a3)=>{try{await exportDatabaseToExcel(_0xc9e4a3),_0x43306b['reply']('export-relation-response',{'success':!![]});}catch(_0xd9dc94){console['error'](_0xd9dc94),_0x43306b['reply']('export-relation-response',{'success':![],'message':_0xd9dc94['message']});}}),ipcMain['handle']('sendMessage',async(_0x18ff04,_0xa5c7d3,_0x214b19,_0xf80f91,_0x82dcaf,_0x1cacc5,_0x2b259c,_0x1f098b)=>{isStopping=![];let _0x6ced44=null;return _0x2b259c?_0x6ced44=await getBrowserPage(_0x82dcaf,_0x1f098b):_0x6ced44=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0xa5c7d3),new Promise((_0xee7c0f,_0x1a73b1)=>{send_message(_0x6ced44,_0xa5c7d3,_0x214b19,_0xf80f91,_0x82dcaf,_0x1cacc5)['then'](_0x3fb2f2=>_0xee7c0f(_0x3fb2f2))['catch'](_0x58588d=>_0x1a73b1(_0x58588d));});}),ipcMain['handle']('stop-action',async(_0x415a34,_0x2d80f4)=>{isStopping=!![];const _0x2e9bee=await getBrowserPage(0x1,_0x2d80f4);await _0x2e9bee['close']();}),ipcMain['handle']('fetch_followers',async(_0x1a08ed,_0x377c91,_0x162318,_0xf486a,_0x424793,_0x12f6a5)=>{isStopping=![];const _0x50a5b8=await getBrowserPage();return fetch_followers_from_account(_0x1a08ed,_0x50a5b8,_0x377c91,_0x162318,_0xf486a,_0x424793,_0x12f6a5);}),ipcMain['handle']('get-account-details',async(_0xa319cb,_0x2c93c5,_0x52c92a,_0x3902d1)=>{isStopping=![];const _0x4ad187=await getBrowserPage();return fetch_account_details(_0x4ad187,_0x2c93c5,_0x52c92a,_0x3902d1);}),ipcMain['handle']('fetch_likes',async(_0x34780d,_0x153201,_0x22f514,_0x58bb28,_0x2e7010,_0x573858)=>{isStopping=![];const _0x1d0eaa=await getBrowserPage();return fetch_likers_from_post(_0x34780d,_0x1d0eaa,_0x153201,_0x22f514,_0x58bb28,_0x2e7010,_0x573858);}),ipcMain['handle']('fetch_comments',async(_0x4b2a78,_0x68778f,_0x5c3ff4,_0x240552,_0x222704,_0x1f40d6)=>{isStopping=![];const _0x106a4d=await getBrowserPage();return fetch_comments_from_post(_0x4b2a78,_0x106a4d,_0x68778f,_0x5c3ff4,_0x240552,_0x222704,_0x1f40d6);}),ipcMain['handle']('update-app',async _0x49b702=>{const {spawn:_0x16a0cd}=require('child_process'),_0x48636a=require('path');if(process['platform']==='darwin'){const _0x5d2e3a=_0x48636a['join'](__dirname,'mac-updater-intern.sh'),_0x2fc983=_0x16a0cd('/bin/bash',[_0x5d2e3a]);_0x2fc983['stdout']['on']('data',_0x5151c8=>{console['log']('stdout:\x20'+_0x5151c8);}),_0x2fc983['stderr']['on']('data',_0x11acba=>{console['error']('stderr:\x20'+_0x11acba);}),_0x2fc983['on']('close',_0xc89a29=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0xc89a29);});}else{if(process['platform']==='win32'){const _0xd88b61=_0x48636a['join'](__dirname,'../','../','../');process['chdir'](_0xd88b61),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x3cd6e6='soft-ui-updater-windows.ps1',_0x3aa1a9='soft-ui-updater-windows.exe',_0x2c39f4=_0x16a0cd('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x3cd6e6]);console['log']('Windows\x20Pfad:\x20'+_0xd88b61),_0x2c39f4['stdout']['on']('data',_0x2f8e87=>{console['log']('stdout:\x20'+_0x2f8e87);}),_0x2c39f4['stderr']['on']('data',_0x48072a=>{console['error']('stderr:\x20'+_0x48072a);}),_0x2c39f4['on']('close',_0x308b34=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x308b34);});}}});function getRnd(_0x9e5d2,_0x4613bf){return Math['random']()*(_0x4613bf-_0x9e5d2+0x1)+_0x9e5d2;}function delay(_0x401117,_0x582916){let _0x44b1e3=getRnd(_0x401117,_0x582916);return new Promise(function(_0x567c17){setTimeout(_0x567c17,_0x44b1e3);});}async function scroll(_0x1c182f,_0x4b287b,_0x1fbb22=0x2,_0x521070){const _0x23ad4=await _0x1c182f['waitForSelector'](_0x4b287b);for(let _0x238bbe=0x0;_0x238bbe<_0x1fbb22;_0x238bbe++){console['log']('Scrolling\x20'+_0x238bbe),await _0x1c182f['evaluate'](_0x122af6=>{const _0x80c699=document['querySelector'](_0x122af6);_0x80c699&&_0x80c699['scrollBy'](0x0,0x190);},_0x4b287b),await delay(0x320,0x5dc),_0x521070();}}async function saveCookies(_0x597ea3){let _0x597306=await _0x597ea3['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x597306,null,0x2));}async function notificationClear(_0x5b7144){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x5b7144['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x5b7144['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x1d2c0f){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x1d2c0f);}}async function getTargetProfiles(_0x2a380d){return new Promise((_0x3ccb71,_0x391e51)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x2a380d,(_0x52beda,_0x49ab60)=>{_0x52beda?_0x391e51(_0x52beda):_0x3ccb71(_0x49ab60);});});}async function login_legacy(_0x390ae4,_0x55082c,_0x2f2098){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x390ae4,_0x55082c),await createUserIfNotExists(_0x55082c,_0x2f2098);}catch(_0x5f154a){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5f154a);}try{await _0x390ae4['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x390ae4['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x390ae4['click']('button._a9--._ap36._a9_0');}catch(_0x44170e){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x390ae4['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x390ae4['type']('input[name=\x27username\x27]',_0x55082c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x390ae4['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x390ae4['type']('input[name=\x27password\x27]',_0x2f2098,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x390ae4['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x390ae4['click']('button[type=\x27submit\x27]');}catch(_0x25ad09){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x390ae4),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x390ae4,_0x55082c);}catch(_0x33c8de){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x33c8de);}}catch(_0x465987){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x465987);}}async function login(_0x1a6dbb,_0x3905ea){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1a6dbb,_0x3905ea),await createUserIfNotExists(_0x3905ea);}catch(_0x4382fb){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4382fb);}try{await _0x1a6dbb['goto']('https://www.instagram.com/accounts/login/');}catch(_0x3c8967){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x3c8967);}}async function set_login_cookies(_0x362a05,_0x50e400){try{await saveCookiesForUser(_0x362a05,_0x50e400);}catch(_0xd28800){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xd28800);}}async function send_message(_0x43590d,_0x1b018e,_0x42214a,_0x5d6a5c,_0x2f98b2,_0x3c6fce){_0x3c6fce=_0x3c6fce['split'](';'),console['log'](_0x3c6fce[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x2f98b2);if(_0x2f98b2==0x0){try{await login(_0x43590d,_0x3c6fce[0x0]);}catch(_0x18e29c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x18e29c);return;}await _0x43590d['goto']('https://www.instagram.com/direct/inbox/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x43590d);}let _0x169fd4;await set_clearname_from_username(_0x43590d,_0x42214a);const _0x3f532b='SELECT\x20clearname\x20FROM\x20'+_0x42214a+'\x20WHERE\x20username\x20IS\x20?';db['all'](_0x3f532b,[_0x1b018e],(_0x24a653,_0x1db3b0)=>{_0x24a653&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x24a653['message']);if(_0x1db3b0['length']===0x0)return;_0x169fd4=_0x1db3b0['map'](_0x42c817=>_0x42c817['clearname']);});try{try{const _0x464eed=K_NEW_MSG_BUTTON;await delay(0xfa0,0x1d4c),await _0x43590d['waitForSelector'](_0x464eed),await _0x43590d['click'](_0x464eed),console['log']('Message-Button\x20geklickt'),console['log'](_0x1b018e+'\x20'+_0x5d6a5c),await delay(0xfa0,0x1d4c);try{const _0x56c8be='input[name=\x22queryBox\x22]',_0x136a13=K_SEARCH_BAR_INPUT;await _0x43590d['waitForSelector'](_0x136a13),await _0x43590d['click'](_0x136a13),await delay(0xfa0,0x1d4c),await _0x43590d['waitForSelector'](_0x56c8be),await _0x43590d['click'](_0x56c8be),await delay(0xfa0,0x1d4c),await _0x43590d['type'](_0x56c8be,_0x1b018e,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),console['log']('Account\x20Name\x20eingefügt');const _0xd3931c=K_USERNAME_SPALTE_PART1,_0x9b89a6=K_CLEARNAME_SPALTE_PART2;let _0x3aa08a=0x1;try{while(_0x3aa08a!=0x14){console['log']('Schleife');let _0x41d329=_0xd3931c+_0x3aa08a+_0x9b89a6;const _0x5bf1ce=await _0x43590d['waitForSelector'](_0x41d329),_0x3de2c5=await _0x43590d['evaluate'](_0x44ae99=>_0x44ae99['innerHTML'],_0x5bf1ce);console['log'](_0x3de2c5+';'+_0x169fd4+';'+_0x1b018e),delay(0x3e8,0xbb8);if(_0x3de2c5['includes'](_0x169fd4)){console['log']('Account\x20gefunden'),await _0x43590d['click'](_0x41d329);break;}else{if(_0x3de2c5==_0x1b018e){console['log']('Account\x20gefunden'),await _0x43590d['click'](_0x41d329);break;}}_0x3aa08a++;}try{await delay(0xbb8,0x1388);const _0x3764ae=await _0x43590d['waitForSelector'](K_CHAT_BUTTON_DIV);console['log'](_0x3764ae),await delay(0xbb8,0x1388),await _0x3764ae['click']();try{await delay(0xbb8,0x1388);const _0x55ffb9=await _0x43590d['waitForSelector'](K_NACHRICHT_SCHREIBEN_INPUT_DIV);_0x5d6a5c=_0x5d6a5c['replace']('{USERNAME}',_0x1b018e),_0x5d6a5c=_0x5d6a5c['replace']('{username}',_0x169fd4),_0x5d6a5c=_0x5d6a5c['replace']('{NAME}',_0x169fd4['split']('\x20')[0x0]),_0x5d6a5c=_0x5d6a5c['replace']('{name}',_0x169fd4['split']('\x20')[0x0]),await _0x55ffb9['type'](_0x5d6a5c,{'delay':getRnd(0x50,0x78)}),await delay(0xbb8,0x1388);try{const _0x15d8ed=await _0x43590d['waitForSelector'](K_SENDEN_BUTTON_DIV);return await _0x15d8ed['click'](),await delay(0xbb8,0x1388),new Promise(_0x2c2489=>{_0x2c2489('Nachricht\x20erfolgreich\x20verschickt!');});}catch(_0x1b9d27){console['log']('Message-Button\x20nicht\x20geklickt:\x20'+_0x1b9d27);}}catch(_0x4f1b89){console['log']('Chat-Fenster\x20nicht\x20gefunden:\x20'+_0x4f1b89);}}catch(_0x1d17cc){console['log']('error:\x20'+_0x1d17cc);}}catch(_0x1129bf){return console['log']('User\x20nicht\x20gefunden:'+_0x1129bf),await _0x43590d['goto']('https://www.instagram.com/direct/inbox/'),new Promise((_0x12cf53,_0x2fc836)=>{_0x2fc836('user_not_found');});}}catch(_0x982289){console['log']('DM-Fenster\x20nicht\x20gefunden:'+_0x982289);}}catch(_0xf4c26){console['log']('Message-Button\x20nicht\x20geklickt:'+_0xf4c26);}}catch(_0x3e03ae){console['log']('Nachricht\x20senden\x20fehlgeschlagen:\x20'+_0x3e03ae);}return console['log']('Ende'),await _0x43590d['goto']('https://www.instagram.com/direct/inbox/'),new Promise((_0xee2156,_0xcccef5)=>{_0xcccef5('ig_update');});}function handle_fail(_0xef31a4){if(isStopping)return new Promise(_0x25c91a=>{_0x25c91a('Scraper\x20gestoppt.');});else{let _0x1aaa28='';switch(_0xef31a4){case 0x0:_0x1aaa28='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x1aaa28='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x1aaa28='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x1aaa28='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x5df874,_0x56ae47)=>{_0x56ae47(_0x1aaa28);});}}async function fetch_account_details(_0x209136,_0xae4ee5,_0x4838d3,_0x14d5c7){try{await login(_0x209136,_0x4838d3['username']);}catch(_0x412d57){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x412d57);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x412d57);return handle_fail(0x0);}_0x209136['setDefaultNavigationTimeout'](0x7530),await _0x209136['goto']('https://www.instagram.com/'+_0xae4ee5+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x209136);const _0x2f6d1a=await _0x209136['evaluate'](()=>{const _0x3fe9ff=document['querySelector']('meta[property=\x22og:image\x22]');return _0x3fe9ff?_0x3fe9ff['getAttribute']('content'):null;});await _0x209136['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x2153e0=await _0x209136['evaluate'](()=>{const _0x4c600f=document['querySelector']('meta[name=\x22description\x22]');if(!_0x4c600f)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x201359=_0x4c600f['getAttribute']('content');if(!_0x201359)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x201359);const _0x17a471=/\s*[–-]\s*/,_0x3744ab=_0x201359['split'](_0x17a471);if(_0x3744ab['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x5b00ff=_0x3744ab[0x0],_0x4a1510=_0x3744ab[0x1],_0x143d68=_0x5b00ff['split'](',\x20');if(_0x143d68['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x3112e9=_0x143d68[0x0]['split']('\x20')[0x0],_0x20d588=_0x143d68[0x1]['split']('\x20')[0x0],_0x3b7283=_0x143d68[0x2]['split']('\x20')[0x0];let _0x346de3='',_0x5d6c14='';const _0x4514c3='\x20on\x20Instagram:\x20',_0x158242=_0x4a1510['split'](_0x4514c3);return _0x346de3=_0x158242[0x0]['trim'](),_0x158242['length']>0x1&&(_0x5d6c14=_0x158242[0x1]['trim'](),_0x5d6c14['startsWith']('\x22')&&_0x5d6c14['endsWith']('\x22')&&(_0x5d6c14=_0x5d6c14['substring'](0x1,_0x5d6c14['length']-0x1)['trim']()),_0x5d6c14=_0x5d6c14['replace'](/&quot;/g,'')['trim']()),{'followers':_0x3112e9,'following':_0x20d588,'posts':_0x3b7283,'nameText':_0x346de3,'bio':_0x5d6c14};});console['log']('Extracted\x20profile\x20data:',_0x2153e0);const _0x116e17=_0x2153e0['nameText'],_0x29bf1a=_0x2f6d1a,_0x3b0267=_0x2153e0['bio'],_0x687f5=_0x2153e0['followers'],_0x166d07=_0x2153e0['following'],_0x29c260=_0x2153e0['posts'],_0x4636e5=![],_0x2171f7=![],_0x3eead2=![],_0xc1ae29='\x0a\x20\x20INSERT\x20INTO\x20'+_0x14d5c7+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0xc1ae29,[_0xae4ee5,_0x116e17,_0x29bf1a,_0x3b0267,_0x687f5,_0x166d07,_0x29c260,_0x4636e5,_0x2171f7,_0x3eead2],function(_0x4ad583){_0x4ad583?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x4ad583['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x47228d,_0x224473,_0x40a1ca,_0x557079,_0x31444d,_0x3eb2f6,_0x549a4f){let _0x38b8ee=0x4,_0x13b24e=0x0,_0x29cd96=0x0;try{await login(_0x224473,_0x3eb2f6['username']);}catch(_0x14fd7a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x14fd7a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x14fd7a);return handle_fail(0x0);}let _0x5f0f22=0x0;try{await _0x224473['goto']('https://www.instagram.com/'+_0x40a1ca+'/'),await notificationClear(_0x224473);try{if(_0x557079<=0x0){const _0x5f579e=await _0x224473['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x3c44fb=await _0x224473['evaluate'](_0x2ee4dd=>_0x2ee4dd['innerHTML'],_0x5f579e);_0x5f0f22=Math['ceil'](_0x3c44fb/0x4);}else _0x5f0f22=Math['ceil'](_0x557079/0x4);_0x38b8ee+=_0x5f0f22,_0x29cd96=Math['round'](++_0x13b24e/_0x38b8ee*0x64),_0x47228d['sender']['send']('fetch-progress',_0x29cd96,!![]);let _0x29083f=await _0x224473['waitForSelector']('a[href=\x22/'+_0x40a1ca+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x29083f['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x40a1ca+'\x20gesichtet'),_0x29cd96=Math['round'](++_0x13b24e/_0x38b8ee*0x64),_0x47228d['sender']['send']('fetch-progress',_0x29cd96,!![]);}catch(_0xf13262){console['log']('Follower\x20Liste\x20von\x20'+_0x40a1ca+'\x20nicht\x20gefunden:'+_0xf13262);throw new Error('Follower\x20Liste\x20von\x20'+_0x40a1ca+'\x20nicht\x20gefunden:'+_0xf13262);return handle_fail(0x0);}}catch(_0x2249bf){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2249bf);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x2249bf);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x5f0f22),await scroll(_0x224473,FOLLOWER_FENSTER,_0x5f0f22,_0x2fd82e=>{_0x29cd96=Math['round'](++_0x13b24e/_0x38b8ee*0x64),_0x47228d['sender']['send']('fetch-progress',_0x29cd96,!![]);}),await _0x224473['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x24fd35=await _0x224473['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x2426a5=await _0x224473['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x29cd96=Math['round'](++_0x13b24e/_0x38b8ee*0x64),_0x47228d['sender']['send']('fetch-progress',_0x29cd96,!![]);_0x557079<=0x0&&(_0x557079=_0x24fd35['length']);let _0x144582=[];for(let _0x5c4273=0x0;_0x5c4273<_0x24fd35['length']&&_0x5c4273<_0x557079;_0x5c4273++){_0x144582['push'](await _0x24fd35[_0x5c4273]['evaluate'](_0xf59a63=>_0xf59a63['textContent']));const _0x3a4c5f='INSERT\x20INTO\x20'+_0x31444d+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3a4c5f,[await _0x24fd35[_0x5c4273]['evaluate'](_0x1dda57=>_0x1dda57['textContent']),await _0x2426a5[_0x5c4273]['evaluate'](_0x5d9164=>_0x5d9164['textContent'])],function(_0x53858d){_0x53858d?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x31444d+'\x27:',_0x53858d['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x29cd96=Math['round'](++_0x13b24e/_0x38b8ee*0x64),_0x47228d['sender']['send']('fetch-progress',_0x29cd96,!![]),_0x549a4f&&(_0x47228d['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x47228d,_0x224473,_0x3eb2f6,_0x31444d,_0x144582)),new Promise(_0x2c8b2e=>{_0x2c8b2e('Scraping\x20finished!');});}catch(_0x13eca7){if(_0x549a4f)throw new Error(_0x13eca7);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x40a1ca+'\x20nicht\x20gefunden:\x20'+_0x13eca7);return handle_fail(0x0);}}async function fetch_details_from_list(_0x16f926,_0x5a8044,_0x35c43a,_0x3e2610,_0x2caf85){let _0x26f8f1=0x0,_0x389557=0x0;for(let _0x45429a=0x0;_0x45429a<_0x2caf85['length'];_0x45429a++){console['log']('Processing\x20profile:',_0x2caf85[_0x45429a]);try{await fetch_account_details(_0x5a8044,_0x2caf85[_0x45429a],_0x35c43a,_0x3e2610);}catch(_0x3f9016){console['error']('Detailed\x20Scraping\x20von:\x20',_0x2caf85[_0x45429a],_0x3f9016);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x2caf85[_0x45429a]+'\x20'+_0x3f9016);}_0x389557=Math['round'](++_0x26f8f1/_0x2caf85['length']*0x64),_0x16f926['sender']['send']('fetch-progress',_0x389557,!![],!![]);}}async function fetch_likers_from_post(_0x10ab70,_0x269762,_0x11ec7e,_0x752ca0,_0x350bcc,_0x2bea13,_0x5d4b99){let _0x3dc5cb=0x4,_0x2510b3=0x0,_0x34840a=0x0;try{await login(_0x269762,_0x2bea13['username']);}catch(_0xd39486){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xd39486);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xd39486);return handle_fail(0x1);return;}_0x34840a=Math['round'](++_0x2510b3/_0x3dc5cb*0x64),_0x10ab70['sender']['send']('fetch-progress',_0x34840a,!![]);try{let _0x485cfd=_0x11ec7e['substring'](0x0,_0x11ec7e['lastIndexOf']('/')),_0x219452=_0x485cfd+'/liked_by';console['log'](_0x219452),await _0x269762['goto'](_0x219452),await delay(0x7d0,0xfa0),await notificationClear(_0x269762),await delay(0xc8,0x1f4),_0x34840a=Math['round'](++_0x2510b3/_0x3dc5cb*0x64),_0x10ab70['sender']['send']('fetch-progress',_0x34840a,!![]),await _0x269762['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x30ff8d=await _0x269762['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x21829e=await _0x269762['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x30ff8d['length']);let _0x3d6654=path['join'](__dirname,'/likers.csv');_0x34840a=Math['round'](++_0x2510b3/_0x3dc5cb*0x64),_0x10ab70['sender']['send']('fetch-progress',_0x34840a,!![]);_0x752ca0<=0x0&&(_0x752ca0=_0x30ff8d['length']);try{let _0x565d43=[];for(let _0x2d608f=0x0;_0x2d608f<_0x30ff8d['length']&&_0x2d608f<_0x752ca0;_0x2d608f++){_0x565d43['push'](await _0x30ff8d[_0x2d608f]['evaluate'](_0x34e5ba=>_0x34e5ba['textContent']));try{const _0x4a7f82='INSERT\x20INTO\x20'+_0x350bcc+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x4a7f82,[await _0x30ff8d[_0x2d608f]['evaluate'](_0x6b5e1d=>_0x6b5e1d['textContent']),await _0x21829e[_0x2d608f]['evaluate'](_0x25ef05=>_0x25ef05['textContent'])],function(_0x51af82){_0x51af82?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x350bcc+'\x27:',_0x51af82['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x2863e6){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2d608f+'\x20:\x20'+_0x2863e6);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2d608f+'\x20:\x20'+_0x2863e6);return handle_fail(0x1);}}return _0x34840a=Math['round'](++_0x2510b3/_0x3dc5cb*0x64),_0x10ab70['sender']['send']('fetch-progress',_0x34840a,!![]),_0x5d4b99&&(_0x10ab70['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x10ab70,_0x269762,_0x2bea13,_0x350bcc,_0x565d43)),new Promise(_0x328716=>{_0x328716('Scraping\x20finished!');});}catch(_0x46e1cc){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x46e1cc);return handle_fail(0x1);}}catch(_0x50822b){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x50822b);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x50822b);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x1a2d75,_0x589d0b,_0x2cc880,_0x3c2600,_0x5a6b48,_0x4d7d9d,_0x48cde2){let _0x358f20=0x3,_0x3e72fe=0x0,_0x290dde=0x0;try{await login(_0x589d0b,_0x4d7d9d['username']);}catch(_0x3c229c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x3c229c);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x3c229c);return handle_fail(0x2);}try{console['log'](_0x2cc880),await _0x589d0b['goto'](_0x2cc880),await delay(0x7d0,0xfa0),await notificationClear(_0x589d0b),await delay(0xc8,0x1f4);const _0x475cca=COM_COMMENTS_BOX_BODY_DIV;let _0x5d7875;const _0x14b673=await _0x589d0b['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x51f25c=await _0x589d0b['evaluate'](_0x2e538f=>_0x2e538f['innerHTML'],_0x14b673),_0x50065a=String(_0x51f25c)['replace'](/[^0-9]/g,''),_0x5003ae=Number(_0x50065a)/0x14;_0x3c2600<=0x0?_0x5d7875=Math['ceil'](_0x5003ae/0x3):_0x5d7875=Math['ceil'](_0x3c2600/0x3);_0x358f20+=_0x5d7875+_0x5003ae,_0x290dde=Math['round'](++_0x3e72fe/_0x358f20*0x64),_0x1a2d75['sender']['send']('fetch-progress',_0x290dde,!![]),console['log']('Auto-scrolls:\x20'+_0x5d7875),await scroll(_0x589d0b,_0x475cca,_0x5d7875,_0x5b2511=>{_0x290dde=Math['round'](++_0x3e72fe/_0x358f20*0x64),_0x1a2d75['sender']['send']('fetch-progress',_0x290dde,!![]);});try{const _0x2cc6ae=COM_REPLY_BUTTON_SPAN;await _0x589d0b['waitForSelector'](_0x2cc6ae),await delay(0x1f4,0x320);const _0x4120a3=await _0x589d0b['$$'](_0x2cc6ae);console['log'](_0x4120a3);let _0x91edad=_0x4120a3['length'];await delay(0xc8,0x1f4);try{for(let _0x5528be=0x0;_0x5528be<_0x91edad;_0x5528be++){_0x4120a3[_0x5528be]['click'](),await delay(0x320,0x5dc);}}catch(_0x4d4d68){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x4d4d68);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x4d4d68);return handle_fail(0x2);}}catch(_0x48d429){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x1e2966=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x589d0b['waitForSelector'](_0x1e2966),await delay(0x1f4,0x320),_0x290dde=Math['round'](++_0x3e72fe/_0x358f20*0x64),_0x1a2d75['sender']['send']('fetch-progress',_0x290dde,!![]);const _0x392307=await _0x589d0b['$$'](_0x1e2966);let _0x28525=path['join'](__dirname,'/comments.csv');_0x3c2600<=0x0&&(_0x3c2600=_0x392307['length']);console['log']('fetch_limit:\x20'+_0x3c2600),console['log']('comments_len:\x20'+_0x392307['length']),_0x3c2600++;try{let _0x3ed4c9=[];for(let _0x185cf6=0x1;_0x185cf6<_0x392307['length']&&_0x185cf6<_0x3c2600;_0x185cf6++){try{_0x3ed4c9['push'](await _0x392307[_0x185cf6]['evaluate'](_0x54bd50=>_0x54bd50['textContent']));const _0x5061cd=await db['prepare']('INSERT\x20INTO\x20'+_0x5a6b48+'\x20(username)\x20VALUES\x20(?)');await _0x5061cd['run'](await _0x392307[_0x185cf6]['evaluate'](_0x574105=>_0x574105['textContent']),function(_0x1395f1){_0x1395f1&&console['log']('error\x20in\x20add-user:'+_0x1395f1);}),await _0x5061cd['finalize']();}catch(_0x15a534){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x185cf6+'\x20:\x20'+_0x15a534);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x185cf6+'\x20:\x20'+_0x15a534);return handle_fail(0x2);}}await delay(0x4b0,0x7d0),_0x290dde=Math['round'](++_0x3e72fe/_0x358f20*0x64),_0x1a2d75['sender']['send']('fetch-progress',_0x290dde,!![]);try{await set_clearname_from_username(_0x589d0b,_0x5a6b48,()=>{++_0x3e72fe<_0x358f20&&(_0x290dde=Math['round'](_0x3e72fe/_0x358f20*0x64),_0x1a2d75['sender']['send']('fetch-progress',_0x290dde,!![]));});}catch(_0x36851f){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x36851f);}return _0x1a2d75['sender']['send']('fetch-progress',0x64,!![]),_0x48cde2&&(_0x1a2d75['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x1a2d75,_0x589d0b,_0x4d7d9d,_0x5a6b48,_0x3ed4c9)),new Promise(_0x51da28=>{_0x51da28('Scraping\x20finished!');});}catch(_0x945297){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x945297);return handle_fail(0x2);}}catch(_0x2ab6eb){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x2ab6eb);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x2ab6eb);return handle_fail(0x2);}}async function set_clearname_from_username(_0x2f2871,_0x5e44ce,_0x11f45f=null){try{let _0x4383d4,_0x51ec73;const _0x5d1b52='SELECT\x20username\x20FROM\x20'+_0x5e44ce+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x5d1b52,[],(_0x23d130,_0x5690bd)=>{_0x23d130&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x23d130['message']),_0x5690bd['length']===0x0&&(_0x51ec73=_0x5690bd['length']),_0x4383d4=_0x5690bd['map'](_0x2fd22a=>_0x2fd22a['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x51ec73);if(_0x51ec73===0x0){console['log']('Leave');return;}const _0x5c555c=await _0x2f2871['waitForSelector'](IG_SEARCH_BUTTON);await _0x5c555c['click'](),await delay(0x4b0,0x7d0);for(let _0x4cc555 of _0x4383d4){const _0x1bc8de=await _0x2f2871['waitForSelector'](IG_SEARCH_INPUT);await _0x1bc8de['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x2f2871['type'](IG_SEARCH_INPUT,_0x4cc555,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x40b62c=0x1;while(_0x40b62c!=0x14){console['log']('Schleife');try{let _0x55cb5b=IG_NAME_SPAN_PART1+_0x40b62c+IG_USERNAME_SPAN_PART2;const _0x2fdd2b=await _0x2f2871['waitForSelector'](_0x55cb5b),_0x3c7615=await _0x2f2871['evaluate'](_0x578fe6=>_0x578fe6['innerHTML'],_0x2fdd2b);await delay(0xc8,0x1f4);if(_0x3c7615==_0x4cc555){let _0x452ef8=IG_NAME_SPAN_PART1+_0x40b62c+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x4287a2=await _0x2f2871['waitForSelector'](_0x452ef8);let _0x3ecd36=await _0x2f2871['evaluate'](_0x4f977d=>_0x4f977d['innerHTML'],_0x4287a2);const _0x1221c2=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x489c74=_0x3ecd36['match'](_0x1221c2);_0x489c74?_0x3ecd36=_0x489c74[0x1]['trim']():_0x3ecd36=_0x3ecd36['trim']();_0x3ecd36['includes']('•')&&(_0x3ecd36=_0x3ecd36['substring'](0x0,_0x3ecd36['indexOf']('•')-0x1));const _0x393aee='UPDATE\x20'+_0x5e44ce+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x393aee,[_0x3ecd36,_0x3c7615],function(_0x1cb22d){_0x1cb22d&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1cb22d['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x40b62c++;}catch(_0x10e9a7){const _0x408f3b='UPDATE\x20'+_0x5e44ce+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x408f3b,['',_0x4cc555],function(_0x15730b){_0x15730b&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x15730b['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x10e9a7);break;}}_0x11f45f&&_0x11f45f();}await _0x5c555c['click']();}catch(_0x145e19){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x145e19);}}const campaignPath=path['resolve'](__dirname,'data/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(campaign_name\x20TEXT\x20PRIMARY\x20KEY,\x20list_id\x20TEXT,\x20zeitabstand\x20REAL,\x20message_id\x20TEXT,\x20account\x20TEXT,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x29d5ee,_0x54b144)=>{const _0x39d617='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x39d617,[],(_0x12ef4a,_0x3e4edc)=>{_0x12ef4a?_0x54b144(_0x12ef4a):_0x29d5ee(_0x3e4edc);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x424865,_0x3cc429)=>{const _0x216f4='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x216f4,[],async(_0x1c4f28,_0x54b3fb)=>{if(_0x1c4f28)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x1c4f28['message']),_0x3cc429({'status':'error','message':_0x1c4f28['message']});else try{const _0x582176=await Promise['all'](_0x54b3fb['map'](_0x131923=>{return new Promise(_0x4096d8=>{if(!_0x131923['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x131923['campaign_name']),_0x4096d8({'campaign_name':_0x131923['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x32477d='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x131923['list_id'],_0x2261d3='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x131923['list_id']+'\x22';console['log']('campaing\x20listid:\x20'+_0x131923['list_id']),db['get'](_0x32477d,[],(_0x4a081c,_0x545c93)=>{_0x4a081c?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x131923['campaign_name']+':',_0x4a081c['message']),_0x4096d8({'campaign_name':_0x131923['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x2261d3,[],(_0x2b0f18,_0x5cf28c)=>{_0x2b0f18?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x131923['campaign_name']+':',_0x2b0f18['message']),_0x4096d8({'campaign_name':_0x131923['campaign_name'],'lead_count':_0x545c93?_0x545c93['lead_count']:0x0,'contacted_count':'N/A'})):_0x4096d8({'campaign_name':_0x131923['campaign_name'],'lead_count':_0x545c93?_0x545c93['lead_count']:0x0,'contacted_count':_0x5cf28c?_0x5cf28c['contacted_count']:0x0});});});});}));_0x424865({'status':'success','campaigns':_0x582176});}catch(_0x5316f2){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x5316f2),_0x3cc429({'status':'error','message':_0x5316f2['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x4b97ab,_0x23d236)=>{return new Promise((_0x4dab4c,_0x59b1b6)=>{const _0x2f7708='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x2f7708,[_0x23d236],(_0x60a1b7,_0x420f14)=>{_0x60a1b7?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x60a1b7),_0x59b1b6(_0x60a1b7)):(console['log']('ROWS'),console['log'](_0x420f14),debugDatabaseContents(),_0x4dab4c(_0x420f14));});});});const showTableContents=_0x3a0c48=>{return new Promise((_0x4eb61b,_0x47cc0a)=>{const _0x5688f6='SELECT\x20*\x20FROM\x20'+_0x3a0c48+';';campaignDB['all'](_0x5688f6,(_0xa65bee,_0x45ef23)=>{_0xa65bee?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x3a0c48+':',_0xa65bee),_0x47cc0a(_0xa65bee)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x3a0c48+':',_0x45ef23),_0x4eb61b({'status':'success','message':_0x45ef23}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x3999be){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x3999be);}}ipcMain['handle']('create-campaign',async(_0x4c6626,_0x5c7c74)=>{return new Promise((_0x39ab20,_0x4c8701)=>{const _0x29e5c1='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x29e5c1,[String(_0x5c7c74)],function(_0x2afa53){_0x2afa53?_0x4c8701(_0x2afa53):_0x39ab20({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x2c0170,_0x2a1ed2)=>{return new Promise((_0x4f5191,_0xb0708c)=>{const _0x3d9f99='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x3d9f99,[_0x2a1ed2],function(_0x34931a){_0x34931a?_0xb0708c(_0x34931a):_0x4f5191({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x578a11,_0x262bd9,_0x2cfdd8,_0x20cbe3,_0x57bfd8,_0x11b1d6)=>{const _0x2de833=await createMessageID(_0x57bfd8);return new Promise((_0x2c7ca3,_0x4fee87)=>{if(!_0x262bd9||!_0x2cfdd8||!_0x20cbe3||!_0x2de833||!_0x11b1d6)return _0x4fee87({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x2de833);const _0x8a362e='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x8a362e,[_0x2cfdd8,_0x20cbe3,_0x2de833,_0x11b1d6,_0x262bd9],function(_0x29d173){if(_0x29d173)_0x4fee87({'status':'error','message':_0x29d173['message']});else this['changes']===0x0?_0x4fee87({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x2c7ca3({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x5eefc9,_0x2f5c38,_0x451000,_0x226fa4,_0x19546c)=>{return new Promise((_0x208779,_0x4a1be4)=>{const _0x21e09d='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x21e09d,[_0x2f5c38,_0x451000,_0x226fa4,_0x19546c],function(_0x60d8ab){return _0x60d8ab?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x60d8ab['message']),_0x4a1be4('insert-dm-response',{'success':![],'message':_0x60d8ab['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x208779('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x12596a=>{return new Promise((_0x13fbfb,_0x2c7547)=>{const _0x2940cd='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x2940cd,[_0x12596a],(_0x1cd933,_0xeefb8c)=>{if(_0x1cd933)_0x2c7547({'status':'error','message':_0x1cd933['message']});else{if(_0xeefb8c)_0x13fbfb(_0xeefb8c['message_id']);else{const _0x15f0e0='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x15f0e0,[_0x12596a],function(_0xd1851a){_0xd1851a?_0x2c7547({'status':'error','message':_0xd1851a['message']}):_0x13fbfb(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x25801b,_0x143af4)=>{return new Promise((_0x5bb4c6,_0x1dc187)=>{const _0x59a736='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x143af4;db['get'](_0x59a736,(_0x19082d,_0x39d24c)=>{_0x19082d?_0x1dc187({'status':'error','message':_0x19082d['message']}):_0x5bb4c6({'status':'success','count':_0x39d24c['count']});});});});const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x51cd4e,_0x32a039){try{const _0x268025=await new Promise((_0x714cf2,_0x236b20)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x32a039],(_0xdfe3f2,_0x253932)=>{if(_0xdfe3f2)_0x236b20(_0xdfe3f2);else{if(_0x253932['length']>0x0){let _0x6438b=JSON['parse'](_0x253932[0x0]['cookie']);console['log'](_0x6438b),_0x714cf2(_0x6438b);}else _0x236b20(new Error('User\x20with\x20username\x20'+_0x32a039+'\x20does\x20not\x20exist.'));}});});await _0x51cd4e['setCookie'](..._0x268025),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x130ae8){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x130ae8);}}async function saveCookiesForUser(_0x435518,_0x45de95){try{let _0x5fa7dc=await _0x435518['cookies']();_0x5fa7dc=JSON['stringify'](_0x5fa7dc),igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x45de95],(_0x239dc4,_0x6ac3a)=>{if(_0x239dc4){console['error']('Error\x20checking\x20user\x20existence:',_0x239dc4);throw _0x239dc4;}else{if(_0x6ac3a){const _0x3e8f93=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x3e8f93['run'](_0x5fa7dc,_0x45de95,function(_0x923b40){_0x923b40?console['error']('Error\x20updating\x20cookies:',_0x923b40):console['log']('Cookies\x20updated\x20for\x20user:',_0x45de95);});}else{const _0x181d72=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x181d72['run'](_0x45de95,_0x5fa7dc,function(_0x566995){_0x566995?console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x566995):console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x45de95);});}}});}catch(_0x438cb1){console['error']('Error\x20fetching\x20cookies:',_0x438cb1);throw _0x438cb1;}}async function createUserIfNotExists(_0x182b6b){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x182b6b],(_0x4490d9,_0x4a6718)=>{if(_0x4490d9){console['error']('Error\x20checking\x20user\x20existence:',_0x4490d9);throw _0x4490d9;}else{if(!_0x4a6718){const _0x38b91f=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x38b91f['run'](_0x182b6b,function(_0x9a7105){_0x9a7105?console['error']('Error\x20inserting\x20new\x20user:',_0x9a7105):console['log']('New\x20user\x20created:',_0x182b6b);});}else console['log']('User\x20already\x20exists:',_0x182b6b);}});}catch(_0x54b77d){console['error']('Error\x20creating\x20user:',_0x54b77d);throw _0x54b77d;}}ipcMain['handle']('create-relation',async(_0x5b144f,_0x4ad27d)=>{return new Promise((_0x58ea75,_0x102b66)=>{const _0x3b3c37='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x4ad27d+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x3b3c37,function(_0x2cbb8b){_0x2cbb8b?_0x102b66(_0x2cbb8b):_0x58ea75({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x4fc8b5,_0x3fc4bd)=>{return console['log']('droping\x20table'+_0x3fc4bd),new Promise((_0x13bab9,_0x34a046)=>{const _0x671550='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x3fc4bd;console['log']('droping\x20table'+_0x3fc4bd),db['run'](_0x671550,function(_0x4c917d){_0x4c917d?_0x34a046(_0x4c917d):_0x13bab9({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x34d55c=>{return new Promise((_0x1b97b1,_0x5c3a96)=>{const _0x283359='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x283359,[],(_0x260617,_0x3b6746)=>{_0x260617?_0x5c3a96(_0x260617):_0x1b97b1(_0x3b6746['map'](_0x95e232=>_0x95e232['name']));});});}),ipcMain['handle']('add-user',async(_0x57af21,_0x37a07e,_0x3b9bc5)=>{return new Promise(_0x115f7c=>{const _0x37c787=db['prepare']('INSERT\x20INTO\x20'+_0x3b9bc5+'\x20(username)\x20VALUES\x20(?)');_0x37c787['run'](_0x37a07e,function(_0x57c8d2){_0x57c8d2?console['log']('error\x20in\x20add-user:'+_0x57c8d2):_0x115f7c({'status':'success','id':this['lastID']});}),_0x37c787['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x27331d,_0x4d8a68)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x3023f9,_0x541fd2)=>{if(_0x3023f9)_0x4d8a68(_0x3023f9);else{_0x27331d({'status':'success','users':_0x541fd2});for(_0x541fd2 of _0x541fd2){console['log'](_0x541fd2['username']);}}});});}),ipcMain['handle']('get-data',async(_0x12285b,_0x5be958)=>{return new Promise((_0x52496c,_0xaaa234)=>{const _0x56fd29='SELECT\x20*\x20FROM\x20'+_0x5be958;console['log'](_0x56fd29),db['all'](_0x56fd29,[],(_0x4f1159,_0x14835d)=>{_0x4f1159?_0xaaa234(_0x4f1159):_0x52496c(_0x14835d);});});}),ipcMain['handle']('get-accounts',async _0xcb6cc1=>{return new Promise((_0x35b6fd,_0x798b02)=>{const _0x40ec05='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x40ec05),igaccountsDB['all'](_0x40ec05,[],(_0x30e4fb,_0x27aed9)=>{_0x30e4fb?_0x798b02(_0x30e4fb):_0x35b6fd(_0x27aed9);});});}),ipcMain['handle']('get-targets',async(_0x56cb01,_0x1bc011)=>{return getTargetProfiles(_0x1bc011);}),ipcMain['handle']('delete-user',async(_0x278257,_0xf1d8b3,_0x589e9b)=>{return new Promise((_0x339fd6,_0x141604)=>{const _0x49e3cb=db['prepare']('DELETE\x20FROM\x20'+_0x589e9b+'\x20WHERE\x20username\x20=\x20?');_0x49e3cb['run'](_0xf1d8b3,function(_0x501859){_0x501859?_0x141604(_0x501859):_0x339fd6({'status':'success','changes':this['changes']});}),_0x49e3cb['finalize']();});}),ipcMain['handle']('delete-account',async(_0x34c044,_0x5ad0c7)=>{const _0x2774fe=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x2774fe['run'](_0x5ad0c7,function(_0x510703){_0x510703&&console['log'](_0x510703);}),_0x2774fe['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0xcea435,_0x608305)=>{const _0x4f0a21='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4f0a21,[],(_0x2ddd6a,_0x4d64da)=>{_0x2ddd6a?_0x608305({'status':'error','message':_0x2ddd6a['message']}):_0xcea435({'status':'success','contactedCount':_0x4d64da['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x44735,_0x54cd91)=>{const _0x3ac05b='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x3ac05b,[],(_0x2ae53a,_0xb7ebb4)=>{_0x2ae53a?_0x54cd91({'status':'error','message':_0x2ae53a['message']}):_0x44735({'status':'success','contactedCount':_0xb7ebb4['contactedCount']});});});});function exportDatabaseToExcel(_0x377ef0){return new Promise((_0xa7e898,_0x10544e)=>{const _0x20d57c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x377ef0+'\x0a\x20\x20\x20\x20';db['all'](_0x20d57c,[],async(_0x226582,_0x241c98)=>{if(_0x226582){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x226582['message']),_0x10544e(_0x226582);return;}if(!_0x241c98||_0x241c98['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0xa7e898();return;}const _0x2590bf=XLSX['utils']['json_to_sheet'](_0x241c98),_0x5e2258=XLSX['utils']['book_new']();XLSX['utils']['book_append_sheet'](_0x5e2258,_0x2590bf,''+_0x377ef0);try{const {canceled:_0x22c102,filePath:_0x1a3829}=await dialog['showSaveDialog']({'title':'Excel-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x377ef0+'.xlsx'),'buttonLabel':'Speichern','filters':[{'name':'Excel\x20Files','extensions':['xlsx']},{'name':'All\x20Files','extensions':['*']}]});if(_0x22c102||!_0x1a3829){console['log']('Speichern\x20abgebrochen.'),_0xa7e898();return;}XLSX['writeFile'](_0x5e2258,_0x1a3829),console['log']('Excel-Datei\x20erfolgreich\x20exportiert:',_0x1a3829),_0xa7e898();}catch(_0xd1fc71){console['error']('Fehler\x20im\x20Speicherdialog:',_0xd1fc71),_0x10544e(_0xd1fc71);}});});}