const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x25ccb3,_0x5a3e38){try{const _0x448fdd=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x5a3e38},'body':JSON['stringify']({'clearname':_0x25ccb3})});if(!_0x448fdd['ok']){const _0x58a437=await _0x448fdd['text']();throw new Error(_0x448fdd['status']+':\x20'+_0x58a437);}const _0x5acdbc=await _0x448fdd['json']();return _0x5acdbc;}catch(_0x5d393b){console['error']('Error\x20in\x20extractFirstName:',_0x5d393b);throw _0x5d393b;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Double\x20tap\x20to\x20like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x5724b4=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x5724b4['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x5724b4['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x4c2196){var _0x4ecd74=![];BrowserWindow['getAllWindows']()['forEach'](function(_0xaba44){console['log']('window\x20id:'+_0xaba44['id']),_0xaba44['id']>0x1&&(_0x4ecd74=!![]);}),console['log']('child\x20opened\x20='+_0x4ecd74);if(!_0x4ecd74){const _0x44e819=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x44e819['loadFile'](_0x4c2196['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x5c3c08=require('fs'),_0x2b006e=path['join'](app['getPath']('userData'),'data'),_0xebef2f=['campaign.db','crm.db','igaccounts.db'],_0x2d238d=[];try{_0x5c3c08['mkdirSync'](_0x2b006e,{'recursive':!![]});for(const _0x1035f0 of _0xebef2f){const _0x45e881=path['join'](process['resourcesPath'],'app','build','data',_0x1035f0),_0x4b6e57=path['join'](_0x2b006e,_0x1035f0);!_0x5c3c08['existsSync'](_0x4b6e57)?(_0x5c3c08['copyFileSync'](_0x45e881,_0x4b6e57),console['log']('[InitDB]\x20Kopiert\x20'+_0x1035f0+'\x20nach:\x20'+_0x4b6e57)):console['log']('[InitDB]\x20'+_0x1035f0+'\x20existiert\x20bereits:\x20'+_0x4b6e57),_0x2d238d['push'](_0x4b6e57);}}catch(_0x3cee92){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x3cee92);}return _0x2d238d;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x3ca94e,AppUpdate:_0x19958b}=require('electron-updater');_0x3ca94e['autoDownload']=![],_0x3ca94e['autoInstallOnAppQuit']=!![],_0x3ca94e['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x3ca94e['on']('update-available',_0x566830=>{console['log']('Update\x20verfügbar:',_0x566830),_0x3ca94e['downloadUpdate']();}),_0x3ca94e['on']('update-downloaded',_0xcf93a9=>{console['log']('Update\x20heruntergeladen:',_0xcf93a9),_0x3ca94e['quitAndInstall']();}),_0x3ca94e['on']('error',_0x5b644d=>{console['error']('Fehler\x20beim\x20Updaten:',_0x5b644d);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x39d470,AppUpdate:_0x5c6030}=require('electron-updater');_0x39d470['autoDownload']=![],_0x39d470['autoInstallOnAppQuit']=!![],_0x39d470['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x39d470['on']('update-available',_0x45012b=>{console['log']('Update\x20verfügbar:',_0x45012b),_0x39d470['downloadUpdate']();}),_0x39d470['on']('update-downloaded',_0x56e315=>{console['log']('Update\x20heruntergeladen:',_0x56e315),console['log']('Neustarten\x20zum\x20Updaten');}),_0x39d470['on']('error',_0x13585e=>{console['error']('Fehler\x20beim\x20Updaten:',_0x13585e);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x24f3cb='',_0x59d320=null;if(process['platform']==='darwin')_0x24f3cb=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x24f3cb=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x24f3cb}),_0x59d320=await browser_login['newPage'](),_0x59d320['setDefaultNavigationTimeout'](0x1d4c),_0x59d320['setDefaultTimeout'](0x1d4c),await _0x59d320['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x59d320;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x4bbbfb=0x1,_0x190557=0x0){try{let _0x3294da='',_0x894fa6=null;const _0x3f6ada=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x3294da=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x3294da=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x4bbbfb===0x0&&!pageStack[_0x190557])return browser=await puppeteer['launch']({'headless':_0x3f6ada,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3294da}),_0x894fa6=await browser['newPage'](),_0x894fa6['setDefaultNavigationTimeout'](0x1d4c),_0x894fa6['setDefaultTimeout'](0x1d4c),await _0x894fa6['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x190557]=_0x894fa6,_0x894fa6;return(browser===null||pageStack[_0x190557]===null||pageStack[_0x190557]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x3f6ada,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x3294da})),(pageStack[_0x190557]===null||pageStack[_0x190557]['isClosed']())&&(_0x894fa6=await browser['newPage'](),_0x894fa6['setDefaultNavigationTimeout'](0x1d4c),_0x894fa6['setDefaultTimeout'](0x1d4c),await _0x894fa6['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x190557]=_0x894fa6),pageStack[_0x190557];}catch(_0x34eb49){console['error']('Failed\x20to\x20launch\x20browser:',_0x34eb49);const _0x3ec0b7=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x34eb49);throw _0x3ec0b7;}}ipcMain['on']('login',async(_0xd50fb5,_0x497b14)=>{const _0xafa9a4=await getBrowserPageLogin();await _0xafa9a4['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0xafa9a4,_0x497b14),ipcMain['on']('setLoginCookies',async(_0x2961e8,_0x543d5f)=>{try{await set_login_cookies(_0xafa9a4,_0x543d5f);}catch(_0x36a31b){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x36a31b);}});}),ipcMain['on']('export-relation',async(_0x278607,_0x5a851d)=>{try{await exportDatabase(_0x5a851d),_0x278607['reply']('export-relation-response',{'success':!![]});}catch(_0x1db001){console['error'](_0x1db001),_0x278607['reply']('export-relation-response',{'success':![],'message':_0x1db001['message']});}}),ipcMain['handle']('sendMessage',async(_0x251533,_0x3de257,_0x39ef65,_0x2578d2,_0x10e81d,_0x335a65,_0x3ad224,_0x501fe1,_0x2cbed7,_0x90518d,_0x54394b,_0xcf8471)=>{isStopping=![];let _0x4f3864=null;return _0x3ad224?_0x4f3864=await getBrowserPage(_0x10e81d,_0x501fe1):_0x4f3864=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x3de257),send_message(_0x4f3864,_0x3de257,_0x39ef65,_0x2578d2,_0x10e81d,_0x335a65,_0x2cbed7,_0x90518d,_0x54394b,_0xcf8471);}),ipcMain['handle']('stop-action',async(_0x1e769e,_0x35c1bd)=>{isStopping=!![];const _0x493792=await getBrowserPage(0x1,_0x35c1bd);await _0x493792['close']();}),ipcMain['handle']('fetch_followers',async(_0x908066,_0x5ed1fa,_0x17f366,_0x19f351,_0x28bf2b,_0x2b049b)=>{isStopping=![];const _0x475219=await getBrowserPage();return fetch_followers_from_account(_0x908066,_0x475219,_0x5ed1fa,_0x17f366,_0x19f351,_0x28bf2b,_0x2b049b);}),ipcMain['handle']('get-account-details',async(_0x76ab72,_0x35a1b4,_0x5905e3,_0x30e72f)=>{isStopping=![];const _0x4ba6bc=await getBrowserPage();return fetch_account_details(_0x4ba6bc,_0x35a1b4,_0x5905e3,_0x30e72f);}),ipcMain['handle']('fetch_likes',async(_0x53191f,_0x6fef22,_0x352f5d,_0xb0ac24,_0x3a8eaa,_0x2d1c15)=>{isStopping=![];const _0x4ab0dc=await getBrowserPage();return fetch_likers_from_post(_0x53191f,_0x4ab0dc,_0x6fef22,_0x352f5d,_0xb0ac24,_0x3a8eaa,_0x2d1c15);}),ipcMain['handle']('fetch_comments',async(_0x7ebfe7,_0x1c3ae3,_0x54125c,_0x477d8b,_0x308c89,_0x1b2fab)=>{isStopping=![];const _0xf44f1=await getBrowserPage();return fetch_comments_from_post(_0x7ebfe7,_0xf44f1,_0x1c3ae3,_0x54125c,_0x477d8b,_0x308c89,_0x1b2fab);});async function updateAppSilent(){const {spawn:_0x2f6267}=require('child_process'),_0x4d4eb7=require('path'),_0xcf70ca=require('electron-log');return _0xcf70ca['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x1666b0,_0x2e6b4a)=>{const {updateElectronApp:_0x4be4c5,UpdateSourceType:_0x5d3366}=require('update-electron-app');_0x4be4c5({'updateSource':{'type':_0x5d3366['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0xcf70ca}),_0x1666b0('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2ec9c8,_0x466efe)=>{doFullElectronUpdateSilent(),_0x2ec9c8('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x454073}=require('child_process'),_0x28e72a=require('path'),_0x114318=require('electron-log');return _0x114318['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x43b453,_0x5ae38f)=>{const {updateElectronApp:_0x43108b,UpdateSourceType:_0x274d6b}=require('update-electron-app');_0x43108b({'updateSource':{'type':_0x274d6b['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x114318}),_0x43b453('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x18fca1,_0x40727e)=>{doFullElectronUpdate(),_0x18fca1('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x247fcf,_0x2afaaf)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x247fcf('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x409f16=path['join'](__dirname,'mac-updater-intern.sh'),_0x443d79=spawn('/bin/bash',[_0x409f16],{'detached':!![],'stdio':'ignore'});_0x443d79['unref'](),setTimeout(()=>{_0x247fcf('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x2afaaf(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x135704=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x4eaa75,_0x45ffa5)=>{console['log']('Update\x20Silent:\x20'+_0x45ffa5);if(_0x45ffa5){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x1637cc,_0x576410){return Math['random']()*(_0x576410-_0x1637cc+0x1)+_0x1637cc;}function delay(_0x405063,_0x1af84a){let _0x54a330=getRnd(_0x405063,_0x1af84a);return new Promise(function(_0x1127c4){setTimeout(_0x1127c4,_0x54a330);});}async function scroll(_0x179715,_0x585392,_0x26083b=0x2,_0x559c33){const _0xee45f7=await _0x179715['waitForSelector'](_0x585392);for(let _0xb14216=0x0;_0xb14216<_0x26083b;_0xb14216++){console['log']('Scrolling\x20'+_0xb14216),await _0x179715['evaluate'](_0x2823de=>{const _0x18e0d5=document['querySelector'](_0x2823de);_0x18e0d5&&_0x18e0d5['scrollBy'](0x0,0x190);},_0x585392),await delay(0x320,0x5dc),_0x559c33();}}async function saveCookies(_0x27cf1f){let _0x36ea60=await _0x27cf1f['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x36ea60,null,0x2));}async function notificationClear(_0x574d07){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x574d07['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x574d07['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x2fe3bb){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x2fe3bb);}}async function getTargetProfiles(_0x5f194f){return new Promise((_0x3c42b3,_0x4eaabf)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x5f194f,(_0x4aec15,_0x2e1651)=>{_0x4aec15?_0x4eaabf(_0x4aec15):_0x3c42b3(_0x2e1651);});});}async function login_legacy(_0x4b1450,_0x22fbdc,_0x2715db){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4b1450,_0x22fbdc),await createUserIfNotExists(_0x22fbdc,_0x2715db);}catch(_0x562712){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x562712);}try{await _0x4b1450['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x4b1450['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x4b1450['click']('button._a9--._ap36._a9_0');}catch(_0x1b910c){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x4b1450['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x4b1450['type']('input[name=\x27username\x27]',_0x22fbdc,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4b1450['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x4b1450['type']('input[name=\x27password\x27]',_0x2715db,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4b1450['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x4b1450['click']('button[type=\x27submit\x27]');}catch(_0x513da2){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x4b1450),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x4b1450,_0x22fbdc);}catch(_0x344b97){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x344b97);}}catch(_0x12d03d){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x12d03d);}}async function login(_0x3dd901,_0x46261d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x3dd901,_0x46261d),await createUserIfNotExists(_0x46261d);}catch(_0xc7eb85){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0xc7eb85);}try{await _0x3dd901['goto']('https://www.instagram.com/accounts/login/');}catch(_0x39a15c){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x39a15c);}}async function set_login_cookies(_0x167f25,_0x7840f1){try{await saveCookiesForUser(_0x167f25,_0x7840f1);}catch(_0xc7418){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xc7418);}}async function waitForXPath(_0x283d48,_0x57414f,_0x8e3167={}){return await _0x283d48['waitForFunction'](_0x55ed17=>{return document['evaluate'](_0x55ed17,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x8e3167,_0x57414f),_0x283d48['evaluateHandle'](_0x76c1fa=>document['evaluate'](_0x76c1fa,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x57414f);}async function waitForSelectorWithFallbacks(_0x431696,_0x266f1b,_0x7b096f={}){!Array['isArray'](_0x266f1b)&&(_0x266f1b=[_0x266f1b]);for(let _0x1d9d3f=0x0;_0x1d9d3f<_0x266f1b['length'];_0x1d9d3f++){const _0x2a3507=_0x266f1b[_0x1d9d3f],_0x574986=_0x2a3507['startsWith']('//')||_0x2a3507['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x574986?'XPath':'Selector')+'\x20'+(_0x1d9d3f+0x1)+'/'+_0x266f1b['length']+':\x20'+_0x2a3507['substring'](0x0,0x32)+'...');const _0x5cc37f=_0x1d9d3f===0x0?_0x7b096f['timeout']||0x1388:0x7d0;let _0xfad8bf;if(_0x574986){const _0x5f2bb7=await waitForXPath(_0x431696,_0x2a3507,{..._0x7b096f,'timeout':_0x5cc37f});if(!_0x5f2bb7)throw new Error('XPath-Element\x20nicht\x20gefunden');_0xfad8bf=_0x5f2bb7;}else _0xfad8bf=await _0x431696['waitForSelector'](_0x2a3507,{..._0x7b096f,'timeout':_0x5cc37f});return console['log']((_0x574986?'XPath':'Selector')+'\x20'+(_0x1d9d3f+0x1)+'\x20gefunden!'),_0xfad8bf;}catch(_0x434fb8){console['log']((_0x574986?'XPath':'Selector')+'\x20'+(_0x1d9d3f+0x1)+'\x20nicht\x20gefunden:\x20'+_0x434fb8['message']);if(_0x1d9d3f===_0x266f1b['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x266f1b['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x434fb8['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x29423e,_0x3a078b,_0x3ee260={}){return await _0x29423e['waitForFunction'](_0x4c5794=>{return document['evaluate'](_0x4c5794,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x3ee260,_0x3a078b),_0x29423e['evaluateHandle'](_0xad935d=>{const _0x33e732=document['evaluate'](_0xad935d,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x39d4c1=[];for(let _0x4597d7=0x0;_0x4597d7<_0x33e732['snapshotLength'];_0x4597d7++){_0x39d4c1['push'](_0x33e732['snapshotItem'](_0x4597d7));}return _0x39d4c1;},_0x3a078b)['then'](_0x1a9f85=>_0x1a9f85['getProperties']());}ipcMain['handle']('check-login',async(_0x318c1c,_0x6a80f7)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x3ec67e){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x428e4a){}browser=null;}const _0x205d86=await getBrowserPage(0x0,0x0),_0x349cd1=await checkCookiesSession(_0x205d86,_0x6a80f7);return _0x349cd1;});async function checkCookiesSession(_0x3661e9,_0x33eaaa){try{await setCookiesForUser(_0x3661e9,_0x33eaaa),console['log']('Cookies\x20für\x20'+_0x33eaaa+'\x20erfolgreich\x20geladen');}catch(_0x59847c){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x33eaaa+':',_0x59847c),![];}try{await _0x3661e9['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x2ee6cc){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x2ee6cc);}await delay(0x6a4,0x7d0);try{const _0x2f0644=await checkLoginStatus(_0x3661e9);return console['log']('Login-Status\x20für\x20'+_0x33eaaa+':\x20'+_0x2f0644),_0x2f0644;}catch(_0xedf671){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x33eaaa+':',_0xedf671['message']),![];}}async function checkLoginStatus(_0x3e61ab){const _0x3adf4c=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x12df12=null;try{_0x12df12=await waitForSelectorWithFallbacks(_0x3e61ab,_0x3adf4c,{'timeout':0x7d0});}catch(_0x23fb89){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x23fb89),!![];}if(_0x12df12){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x28bc48){const _0x5e8fbb=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x5dd1c0=null;try{_0x5dd1c0=await waitForSelectorWithFallbacks(_0x28bc48,_0x5e8fbb,{'timeout':0x7d0});}catch(_0x218d31){return console['log']('Seite\x20existiert:\x20'+_0x218d31),!![];}if(_0x5dd1c0){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0xf85972){try{const _0x177da9=await _0xf85972['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x177da9['length']);if(_0x177da9&&_0x177da9['length']>0x0){const _0x9436fc=_0x177da9[0x0];await _0x9436fc['click'](),await delay(0xaf0,0xbb8);const _0x55eeed=await _0xf85972['evaluate'](()=>{const _0x1f5a6f=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x1f5a6f;});if(_0x55eeed){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x4696bc=await _0xf85972['$$'](K_BEITRAG_LIKE_BUTTON),_0x163800=_0x4696bc[0x0];await delay(0x514,0x5dc),await _0xf85972['evaluate'](_0x342c27=>{_0x342c27['click']();},_0x163800);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0xf85972['goBack'](),await delay(0x7d0,0x898);}}catch(_0x4221cb){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x4221cb);throw new Error('Like_Posts:\x20'+_0x4221cb);}}async function send_message(_0x3a3a31,_0x14a44d,_0x34de82,_0x50e7d1,_0x16fff6,_0x11cb3b,_0x35fa3e,_0x2d36c4,_0x575287,_0x4185cf){return new Promise(async(_0x1ddd13,_0x57ddef)=>{_0x11cb3b=_0x11cb3b['split'](';'),console['log'](_0x11cb3b[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x16fff6);if(_0x50e7d1===null||_0x50e7d1===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x57ddef('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x3a3a31,_0x11cb3b[0x0]);}catch(_0x2ae0fc){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2ae0fc),_0x1ddd13({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2ae0fc});return;}await delay(0x6a4,0x7d0);try{await _0x3a3a31['goto']('https://www.instagram.com/'+_0x14a44d+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x3a3a31);}catch(_0x247633){_0x1ddd13({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x247633});return;}try{await checkLoginStatus(_0x3a3a31);}catch(_0x427ef8){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x427ef8),_0x57ddef('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x575287==0x1)try{await likeFirstPost(_0x3a3a31);}catch(_0x3ac325){_0x57ddef(_0x3ac325);}console['log']('UserSkip:\x20'+_0x35fa3e);if(_0x35fa3e==0x1)try{const _0x25230b=await _0x3a3a31['$eval']('._ap3a._aaco._aacw._aad6._aade',_0xf29113=>_0xf29113['textContent']['trim']());console['log'](_0x25230b);if(_0x25230b==='Following'||_0x25230b==='Folge\x20ich')return _0x1ddd13({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x5c34e0){}try{const _0x11bb97=await waitForSelectorWithFallbacks(_0x3a3a31,K_DIRECT_MSG_BUTTON);await _0x11bb97['click']();}catch(_0x2a8678){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x2a8678);try{await delay(0x6a4,0x7d0);try{const _0xef254f=await waitForSelectorWithFallbacks(_0x3a3a31,K_OPTIONS_BUTTON);await _0xef254f['click']();}catch(_0x168e3c){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x168e3c),_0x1ddd13({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x168e3c});return;}await delay(0x3e8,0x44c);const _0x455691=await waitForXPath(_0x3a3a31,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x455691['click']();}catch(_0x28a72a){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x28a72a),_0x1ddd13({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x3a3a31);}catch(_0x3a9daf){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x3a9daf);}try{const _0x373814=await waitForSelectorWithFallbacks(_0x3a3a31,K_CHAT_INPUT_FIELD);if(_0x2d36c4){const _0x4ab8e4=await _0x3a3a31['$'](K_ALREADY_CHATTED);if(_0x4ab8e4)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x14a44d),_0x1ddd13({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x3e7e17=await _0x3a3a31['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x3e7e17),_0x50e7d1=_0x50e7d1['replace']('{USERNAME}',_0x14a44d);let _0x370200;if(_0x50e7d1['includes']('{NAME}')||_0x50e7d1['includes']('{name}'))try{const _0x36876c=await extractFirstName(_0x3e7e17,_0x4185cf);console['log']('Response\x20Clearname\x20valid:\x20'+_0x36876c['valid']),_0x36876c['valid']?(_0x50e7d1=_0x50e7d1['replaceAll'](/{NAME}|{name}/g,_0x36876c['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x36876c['name']),_0x370200=_0x36876c['name']):(_0x50e7d1=_0x50e7d1['replaceAll'](/ ?({NAME}|{name})/g,''),_0x370200='UNKNOWN_NAME');}catch(_0x38067b){console['log'](_0x38067b['message']),_0x370200=_0x38067b['message'];const _0x1d1c9d=_0x3e7e17?_0x3e7e17['replace'](/[^\p{L}\s]/gu,''):'',_0x1eb653=_0x1d1c9d['split']('\x20')[0x0]||'';_0x1eb653['length']>0x2&&!_0x1eb653['includes']('Instagram')?_0x50e7d1=_0x50e7d1['replaceAll'](/{NAME}|{name}/g,_0x1eb653):_0x50e7d1=_0x50e7d1['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x50e7d1);const _0x1851cc=_0x50e7d1['split']('\x0a');await _0x373814['type'](_0x1851cc[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x4e45f4=0x1;_0x4e45f4<_0x1851cc['length'];_0x4e45f4++){await _0x3a3a31['keyboard']['down']('Shift'),await _0x3a3a31['keyboard']['press']('Enter'),await _0x3a3a31['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x1851cc[_0x4e45f4]['length']>0x0&&await _0x373814['type'](_0x1851cc[_0x4e45f4],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x5b308a=await waitForSelectorWithFallbacks(_0x3a3a31,K_SEND_MSG_BUTTON);await _0x5b308a['click']();}catch(_0x44928b){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x44928b),_0x1ddd13({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x14a44d+'\x20überspringen.','error':_0x44928b['message']});}await delay(0x320,0x3e8),_0x1ddd13({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x3e7e17,'extracted_clearname':_0x370200});}catch(_0x3a76f7){let _0x47a60a=_0x3a76f7;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x47a60a),_0x1ddd13({'status':0x1f4,'message':'Error\x20500:\x20'+_0x47a60a});}});}function handle_fail(_0x1af0d7){if(isStopping)return new Promise(_0x49f513=>{_0x49f513('Scraper\x20gestoppt.');});else{let _0x33a132='';switch(_0x1af0d7){case 0x0:_0x33a132='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x33a132='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x33a132='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x33a132='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x431be9,_0x12bbb7)=>{_0x12bbb7(_0x33a132);});}}async function fetch_account_details(_0x6aa72f,_0x4b6b9d,_0x21ea53,_0xabc494){try{await setCookiesForUser(_0x6aa72f,_0x21ea53['username']);}catch(_0x4cb9f3){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4cb9f3);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4cb9f3);return handle_fail(0x0);}_0x6aa72f['setDefaultNavigationTimeout'](0x7530),await _0x6aa72f['goto']('https://www.instagram.com/'+_0x4b6b9d+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x6aa72f);const _0x4a4d0a=await _0x6aa72f['evaluate'](()=>{const _0x2aaa86=document['querySelector']('meta[property=\x22og:image\x22]');return _0x2aaa86?_0x2aaa86['getAttribute']('content'):null;});await _0x6aa72f['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x5c53cb=await _0x6aa72f['evaluate'](()=>{const _0x7e5e5d=document['querySelector']('meta[name=\x22description\x22]');if(!_0x7e5e5d)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x4000da=_0x7e5e5d['getAttribute']('content');if(!_0x4000da)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x4000da);const _0x43047c=/\s*[–-]\s*/,_0x6d152f=_0x4000da['split'](_0x43047c);if(_0x6d152f['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x4ba54f=_0x6d152f[0x0],_0x1ddcd0=_0x6d152f[0x1],_0xcd7256=_0x4ba54f['split'](',\x20');if(_0xcd7256['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x473fa4=_0xcd7256[0x0]['split']('\x20')[0x0],_0x34c718=_0xcd7256[0x1]['split']('\x20')[0x0],_0x2fa928=_0xcd7256[0x2]['split']('\x20')[0x0];let _0x1098bf='',_0x460f3d='';const _0x2ca61b='\x20on\x20Instagram:\x20',_0x347d36=_0x1ddcd0['split'](_0x2ca61b);return _0x1098bf=_0x347d36[0x0]['trim'](),_0x1098bf=_0x1098bf['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x347d36['length']>0x1&&(_0x460f3d=_0x347d36[0x1]['trim'](),_0x460f3d['startsWith']('\x22')&&_0x460f3d['endsWith']('\x22')&&(_0x460f3d=_0x460f3d['substring'](0x1,_0x460f3d['length']-0x1)['trim']()),_0x460f3d=_0x460f3d['replace'](/&quot;/g,'')['trim']()),{'followers':_0x473fa4,'following':_0x34c718,'posts':_0x2fa928,'nameText':_0x1098bf,'bio':_0x460f3d};});console['log']('Extracted\x20profile\x20data:',_0x5c53cb);const _0x2d9564=_0x5c53cb['nameText'],_0x1285c1=_0x4a4d0a,_0x1c7085=_0x5c53cb['bio'],_0xdebe59=_0x5c53cb['followers'],_0x1a91d0=_0x5c53cb['following'],_0x21cfdf=_0x5c53cb['posts'],_0x38bcaa=![],_0x15f840=![],_0x53bab8=![],_0x2eb840='\x0a\x20\x20INSERT\x20INTO\x20'+_0xabc494+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x2eb840,[_0x4b6b9d,_0x2d9564,_0x1285c1,_0x1c7085,_0xdebe59,_0x1a91d0,_0x21cfdf,_0x38bcaa,_0x15f840,_0x53bab8],function(_0x18dc6a){_0x18dc6a?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x18dc6a['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x4030c1,_0x10f41a,_0x2a78b3,_0x26a9cd,_0x3e71cb,_0x320358,_0x17b593){let _0x4db1a2=0x4,_0x4a5e6f=0x0,_0x4f816d=0x0;try{await setCookiesForUser(_0x10f41a,_0x320358['username']);}catch(_0x49bf88){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x49bf88);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x49bf88);return handle_fail(0x0);}let _0x239fd9=0x0;try{await _0x10f41a['goto']('https://www.instagram.com/'+_0x2a78b3+'/'),await notificationClear(_0x10f41a);try{await checkLoginStatus(_0x10f41a);}catch(_0x3ed467){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x3ed467);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x10f41a);}catch(_0x4f8add){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x4f8add);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x26a9cd<=0x0){const _0x5898a5=await _0x10f41a['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0xed430c=await _0x10f41a['evaluate'](_0x3761ce=>_0x3761ce['innerHTML'],_0x5898a5);_0x239fd9=Math['ceil'](_0xed430c/0x4);}else _0x239fd9=Math['ceil'](_0x26a9cd/0x4);_0x4db1a2+=_0x239fd9,_0x4f816d=Math['round'](++_0x4a5e6f/_0x4db1a2*0x64),_0x4030c1['sender']['send']('fetch-progress',_0x4f816d,!![]);let _0x3eda0a=await _0x10f41a['waitForSelector']('a[href=\x22/'+_0x2a78b3+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x3eda0a['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x2a78b3+'\x20gesichtet'),_0x4f816d=Math['round'](++_0x4a5e6f/_0x4db1a2*0x64),_0x4030c1['sender']['send']('fetch-progress',_0x4f816d,!![]);}catch(_0x5936ba){console['log']('Follower\x20Liste\x20von\x20'+_0x2a78b3+'\x20nicht\x20gefunden:'+_0x5936ba);throw new Error('Follower\x20Liste\x20von\x20'+_0x2a78b3+'\x20nicht\x20gefunden:'+_0x5936ba);return handle_fail(0x0);}}catch(_0x523d61){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x523d61);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x523d61);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x239fd9),await scroll(_0x10f41a,FOLLOWER_FENSTER,_0x239fd9,_0x3fd59e=>{_0x4f816d=Math['round'](++_0x4a5e6f/_0x4db1a2*0x64),_0x4030c1['sender']['send']('fetch-progress',_0x4f816d,!![]);}),await _0x10f41a['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x1a1e57=await _0x10f41a['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x2e5930=await _0x10f41a['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x4f816d=Math['round'](++_0x4a5e6f/_0x4db1a2*0x64),_0x4030c1['sender']['send']('fetch-progress',_0x4f816d,!![]);_0x26a9cd<=0x0&&(_0x26a9cd=_0x1a1e57['length']);let _0x57f59d=[];for(let _0x5411be=0x0;_0x5411be<_0x1a1e57['length']&&_0x5411be<_0x26a9cd;_0x5411be++){_0x57f59d['push'](await _0x1a1e57[_0x5411be]['evaluate'](_0x394624=>_0x394624['textContent']));const _0x24c6a8='INSERT\x20INTO\x20'+_0x3e71cb+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x24c6a8,[await _0x1a1e57[_0x5411be]['evaluate'](_0x24afc9=>_0x24afc9['textContent']),await _0x2e5930[_0x5411be]['evaluate'](_0x4553bc=>_0x4553bc['textContent'])],function(_0x4216b8){_0x4216b8?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3e71cb+'\x27:',_0x4216b8['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x4f816d=Math['round'](++_0x4a5e6f/_0x4db1a2*0x64),_0x4030c1['sender']['send']('fetch-progress',_0x4f816d,!![]),_0x17b593&&(_0x4030c1['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4030c1,_0x10f41a,_0x320358,_0x3e71cb,_0x57f59d)),new Promise(_0x3ea1c3=>{_0x3ea1c3('Scraping\x20finished!');});}catch(_0x4bf2c1){if(_0x17b593)throw new Error(_0x4bf2c1);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x2a78b3+'\x20nicht\x20gefunden:\x20'+_0x4bf2c1);return handle_fail(0x0);}}async function fetch_details_from_list(_0xcccd6,_0x1643ce,_0x363a4d,_0x431f22,_0x4a7d86){let _0x4c249e=0x0,_0x19f084=0x0;for(let _0x3d235e=0x0;_0x3d235e<_0x4a7d86['length'];_0x3d235e++){console['log']('Processing\x20profile:',_0x4a7d86[_0x3d235e]);try{await fetch_account_details(_0x1643ce,_0x4a7d86[_0x3d235e],_0x363a4d,_0x431f22);}catch(_0x5844dc){console['error']('Detailed\x20Scraping\x20von:\x20',_0x4a7d86[_0x3d235e],_0x5844dc);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x4a7d86[_0x3d235e]+'\x20'+_0x5844dc);}_0x19f084=Math['round'](++_0x4c249e/_0x4a7d86['length']*0x64),_0xcccd6['sender']['send']('fetch-progress',_0x19f084,!![],!![]);}}async function fetch_likers_from_post(_0x5507b8,_0xbd07cf,_0x3bc442,_0x41cf0a,_0x497157,_0x254b5a,_0x2abf0d){let _0xeff32b=0x4,_0x1ec7d0=0x0,_0x3e2948=0x0;try{await setCookiesForUser(_0xbd07cf,_0x254b5a['username']);}catch(_0x5d9eed){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5d9eed);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5d9eed);return handle_fail(0x1);return;}_0x3e2948=Math['round'](++_0x1ec7d0/_0xeff32b*0x64),_0x5507b8['sender']['send']('fetch-progress',_0x3e2948,!![]);try{let _0xfe7b30=_0x3bc442['substring'](0x0,_0x3bc442['lastIndexOf']('/'));_0xfe7b30['includes']('/reel/')&&(_0xfe7b30=_0xfe7b30['replace']('/reel/','/p/'));let _0x574b3d=_0xfe7b30+'/liked_by';console['log'](_0x574b3d),await _0xbd07cf['goto'](_0x574b3d),await delay(0x7d0,0xfa0),await notificationClear(_0xbd07cf),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0xbd07cf);}catch(_0x3125d2){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x3125d2);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0xbd07cf);}catch(_0xed8c53){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0xed8c53);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x3e2948=Math['round'](++_0x1ec7d0/_0xeff32b*0x64),_0x5507b8['sender']['send']('fetch-progress',_0x3e2948,!![]),await _0xbd07cf['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x2054c5=await _0xbd07cf['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x4b94d9=await _0xbd07cf['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x2054c5['length']);let _0x132878=path['join'](__dirname,'/likers.csv');_0x3e2948=Math['round'](++_0x1ec7d0/_0xeff32b*0x64),_0x5507b8['sender']['send']('fetch-progress',_0x3e2948,!![]);_0x41cf0a<=0x0&&(_0x41cf0a=_0x2054c5['length']);try{let _0x17390f=[];for(let _0x78c328=0x0;_0x78c328<_0x2054c5['length']&&_0x78c328<_0x41cf0a;_0x78c328++){_0x17390f['push'](await _0x2054c5[_0x78c328]['evaluate'](_0x3a69cf=>_0x3a69cf['textContent']));try{const _0x57e0c2='INSERT\x20INTO\x20'+_0x497157+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x57e0c2,[await _0x2054c5[_0x78c328]['evaluate'](_0x8404d8=>_0x8404d8['textContent']),await _0x4b94d9[_0x78c328]['evaluate'](_0x77e572=>_0x77e572['textContent'])],function(_0xea94c5){_0xea94c5?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x497157+'\x27:',_0xea94c5['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x49e66a){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x78c328+'\x20:\x20'+_0x49e66a);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x78c328+'\x20:\x20'+_0x49e66a);return handle_fail(0x1);}}return _0x3e2948=Math['round'](++_0x1ec7d0/_0xeff32b*0x64),_0x5507b8['sender']['send']('fetch-progress',_0x3e2948,!![]),_0x2abf0d&&(_0x5507b8['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5507b8,_0xbd07cf,_0x254b5a,_0x497157,_0x17390f)),new Promise(_0x49518a=>{_0x49518a('Scraping\x20finished!');});}catch(_0x295f95){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x295f95);return handle_fail(0x1);}}catch(_0x2a3ab1){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x2a3ab1);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x2a3ab1);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x974ff7,_0x54bd27,_0x3d0c5a,_0x2c139e,_0x47d0fe,_0x398f31,_0x4db036){let _0x2de57c=0x3,_0x19dbff=0x0,_0x46af44=0x0;try{await setCookiesForUser(_0x54bd27,_0x398f31['username']);}catch(_0x16e562){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x16e562);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x16e562);return handle_fail(0x2);}try{console['log'](_0x3d0c5a),await _0x54bd27['goto'](_0x3d0c5a),await delay(0x7d0,0xfa0),await notificationClear(_0x54bd27),await delay(0xc8,0x1f4);const _0x2bfb7d=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x54bd27);}catch(_0x359634){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x359634);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x54bd27);}catch(_0x3988b4){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x3988b4);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x550d01;const _0x5353a8=await _0x54bd27['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x4a26f5=await _0x54bd27['evaluate'](_0x3c633f=>_0x3c633f['innerHTML'],_0x5353a8),_0x442e71=String(_0x4a26f5)['replace'](/[^0-9]/g,''),_0x1f4310=Number(_0x442e71)/0x14;_0x2c139e<=0x0?_0x550d01=Math['ceil'](_0x1f4310/0x3):_0x550d01=Math['ceil'](_0x2c139e/0x3);_0x2de57c+=_0x550d01,_0x46af44=Math['round'](++_0x19dbff/_0x2de57c*0x64),_0x974ff7['sender']['send']('fetch-progress',_0x46af44,!![]),console['log']('Auto-scrolls:\x20'+_0x550d01),await scroll(_0x54bd27,_0x2bfb7d,_0x550d01,_0x16271c=>{_0x46af44=Math['round'](++_0x19dbff/_0x2de57c*0x64),_0x974ff7['sender']['send']('fetch-progress',_0x46af44,!![]);});try{const _0x56d9e4=COM_REPLY_BUTTON_SPAN,_0x56be3b=await waitForXPathAll(_0x54bd27,_0x56d9e4);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x56be3b['size']),await delay(0x1f4,0x320);let _0x2ee06c=_0x56be3b['size'],_0x1a98f1=[];for(const [_0x37cf81,_0x5f57ce]of _0x56be3b){_0x1a98f1['push'](_0x5f57ce);}console['log']('Alle\x20Reply-Buttons:',_0x1a98f1['length']);try{for(let _0x4c20d0=0x0;_0x4c20d0<_0x2ee06c;_0x4c20d0++){await _0x1a98f1[_0x4c20d0]['click'](),await delay(0x320,0x5dc);}}catch(_0x2fddf1){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x2fddf1);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x2fddf1);return handle_fail(0x2);}}catch(_0x56521b){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x24863e=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x54bd27['waitForSelector'](_0x24863e),await delay(0x1f4,0x320),_0x46af44=Math['round'](++_0x19dbff/_0x2de57c*0x64),_0x974ff7['sender']['send']('fetch-progress',_0x46af44,!![]);const _0x1b0e5a=await _0x54bd27['$$'](_0x24863e);let _0x55bf3b=path['join'](__dirname,'/comments.csv');_0x2c139e<=0x0&&(_0x2c139e=_0x1b0e5a['length']);console['log']('fetch_limit:\x20'+_0x2c139e),console['log']('comments_len:\x20'+_0x1b0e5a['length']),_0x2c139e++;try{let _0x50fb7d=[];for(let _0x11f7cd=0x1;_0x11f7cd<_0x1b0e5a['length']&&_0x11f7cd<_0x2c139e;_0x11f7cd++){try{_0x50fb7d['push'](await _0x1b0e5a[_0x11f7cd]['evaluate'](_0x506da6=>_0x506da6['textContent']));const _0x170180=await db['prepare']('INSERT\x20INTO\x20'+_0x47d0fe+'\x20(username)\x20VALUES\x20(?)');await _0x170180['run'](await _0x1b0e5a[_0x11f7cd]['evaluate'](_0xcb5111=>_0xcb5111['textContent']),function(_0x33af71){_0x33af71&&console['log']('error\x20in\x20add-user:'+_0x33af71);}),await _0x170180['finalize']();}catch(_0x2fa667){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x11f7cd+'\x20:\x20'+_0x2fa667);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x11f7cd+'\x20:\x20'+_0x2fa667);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x46af44=Math['round'](++_0x19dbff/_0x2de57c*0x64),_0x974ff7['sender']['send']('fetch-progress',_0x46af44,!![]),_0x974ff7['sender']['send']('fetch-progress',0x64,!![]),_0x4db036&&(_0x974ff7['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x974ff7,_0x54bd27,_0x398f31,_0x47d0fe,_0x50fb7d)),_0x974ff7['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x306d39=>{_0x306d39('Scraping\x20finished!');});}catch(_0x498eda){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x498eda);return handle_fail(0x2);}}catch(_0x1799ae){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x1799ae);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x1799ae);return handle_fail(0x2);}}async function set_clearname_from_username(_0x379e27,_0x446448,_0x5e3b00=null){try{let _0x58a98b,_0x286e52;const _0x48ac0d='SELECT\x20username\x20FROM\x20'+_0x446448+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x48ac0d,[],(_0x408020,_0x2f6faf)=>{_0x408020&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x408020['message']),_0x2f6faf['length']===0x0&&(_0x286e52=_0x2f6faf['length']),_0x58a98b=_0x2f6faf['map'](_0x12fe69=>_0x12fe69['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x286e52);if(_0x286e52===0x0){console['log']('Leave');return;}const _0x2230e2=await _0x379e27['waitForSelector'](IG_SEARCH_BUTTON);await _0x2230e2['click'](),await delay(0x4b0,0x7d0);for(let _0x2ff188 of _0x58a98b){const _0x435fed=await _0x379e27['waitForSelector'](IG_SEARCH_INPUT);await _0x435fed['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x379e27['type'](IG_SEARCH_INPUT,_0x2ff188,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x47926f=0x1;while(_0x47926f!=0x14){console['log']('Schleife');try{let _0x309045=IG_NAME_SPAN_PART1+_0x47926f+IG_USERNAME_SPAN_PART2;const _0x4252cd=await _0x379e27['waitForSelector'](_0x309045),_0x58cc83=await _0x379e27['evaluate'](_0x2a89bb=>_0x2a89bb['innerHTML'],_0x4252cd);await delay(0xc8,0x1f4);if(_0x58cc83==_0x2ff188){let _0xecc6c=IG_NAME_SPAN_PART1+_0x47926f+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x21054d=await _0x379e27['waitForSelector'](_0xecc6c);let _0x5ac2b3=await _0x379e27['evaluate'](_0xb3fa1d=>_0xb3fa1d['innerHTML'],_0x21054d);const _0x2c0abd=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x485283=_0x5ac2b3['match'](_0x2c0abd);_0x485283?_0x5ac2b3=_0x485283[0x1]['trim']():_0x5ac2b3=_0x5ac2b3['trim']();_0x5ac2b3['includes']('•')&&(_0x5ac2b3=_0x5ac2b3['substring'](0x0,_0x5ac2b3['indexOf']('•')-0x1));const _0x33fb01='UPDATE\x20'+_0x446448+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x33fb01,[_0x5ac2b3,_0x58cc83],function(_0x3c5ab2){_0x3c5ab2&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x3c5ab2['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x47926f++;}catch(_0x25f481){const _0x14e0a3='UPDATE\x20'+_0x446448+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x14e0a3,['',_0x2ff188],function(_0x180f94){_0x180f94&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x180f94['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x25f481);break;}}_0x5e3b00&&_0x5e3b00();}await _0x2230e2['click']();}catch(_0x274bd6){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x274bd6);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x22999c,_0x1ef7e9)=>{const _0x3e6aae='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x3e6aae,[],(_0x5cdd7f,_0x1f3bf2)=>{_0x5cdd7f?_0x1ef7e9(_0x5cdd7f):_0x22999c(_0x1f3bf2);});});});const sqlGet=(_0x1b4dd9,_0x3b878a,_0x4fac75=[])=>new Promise((_0xb9127f,_0x49b19f)=>_0x1b4dd9['get'](_0x3b878a,_0x4fac75,(_0x1a8522,_0x461538)=>_0x1a8522?_0x49b19f(_0x1a8522):_0xb9127f(_0x461538))),sqlAll=(_0x1b933e,_0x389d7f,_0x360c22=[])=>new Promise((_0xb1ac2c,_0x2dfc91)=>_0x1b933e['all'](_0x389d7f,_0x360c22,(_0x5a815c,_0x272e27)=>_0x5a815c?_0x2dfc91(_0x5a815c):_0xb1ac2c(_0x272e27)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x28c6a7=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x3110f0=await Promise['all'](_0x28c6a7['map'](async _0x36ee60=>{const _0xc633bc=[];if(!_0x36ee60['list_id'])_0xc633bc['push']('Liste');if(!_0x36ee60['zeitabstand'])_0xc633bc['push']('Zeitabstand');if(!_0x36ee60['account'])_0xc633bc['push']('Instagram\x20Account');if(_0x36ee60['account'])try{const _0x135784=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x36ee60['account']]);if(!_0x135784)_0xc633bc['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x417f55=_0x135784['cookie']&&_0x135784['cookie']['trim']()!==''&&_0x135784['cookie']['trim']()!=='[]';if(!_0x417f55)_0xc633bc['push']('Instagram\x20Login');}}catch(_0x2b27ca){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x2b27ca['message']),_0xc633bc['push']('Instagram\x20Account');}let _0x2ed977='N/A',_0x405629='N/A';if(!_0xc633bc['includes']('Liste')){try{const _0x1b141d=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x36ee60['list_id']);_0x2ed977=_0x1b141d?.['lead_count']??0x0;}catch(_0x3d2dd8){if(/no such table/i['test'](_0x3d2dd8['message']))_0xc633bc['push']('Liste\x20nicht\x20vorhanden');}try{const _0x5ae52c=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x36ee60['list_id']]);_0x405629=_0x5ae52c?.['contacted_count']??0x0;}catch(_0x3e3b8b){}}return{'campaign_name':_0x36ee60['campaign_name'],'lead_count':_0x2ed977,'contacted_count':_0x405629,'status':_0xc633bc['length']===0x0?'Positiv':'Fehler:\x20'+_0xc633bc['join'](',\x20')};}));return{'status':'success','campaigns':_0x3110f0};}catch(_0x5e132c){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x5e132c['message']),{'status':'error','message':_0x5e132c['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x4f1099,_0x8c666c)=>{return new Promise((_0x388e77,_0x40c66f)=>{const _0x13cf6e='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x13cf6e,[_0x8c666c],(_0x2a910c,_0x4c7510)=>{_0x2a910c?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x2a910c),_0x40c66f(_0x2a910c)):(console['log']('ROWS'),console['log'](_0x4c7510),debugDatabaseContents(),_0x388e77(_0x4c7510));});});});const showTableContents=_0x486794=>{return new Promise((_0xcfaec5,_0x130c9f)=>{const _0x5ae15e='SELECT\x20*\x20FROM\x20'+_0x486794+';';campaignDB['all'](_0x5ae15e,(_0xd9553b,_0x1eb9c8)=>{_0xd9553b?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x486794+':',_0xd9553b),_0x130c9f(_0xd9553b)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x486794+':',_0x1eb9c8),_0xcfaec5({'status':'success','message':_0x1eb9c8}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x14bee1){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x14bee1);}}ipcMain['handle']('create-campaign',async(_0x341c69,_0x22e21d)=>{return new Promise((_0xcce698,_0x44b16f)=>{const _0x272d64='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x272d64,[String(_0x22e21d)],function(_0x2765fb){_0x2765fb?_0x44b16f(_0x2765fb):_0xcce698({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x20f4eb,_0x57671e)=>{return new Promise((_0x12eac6,_0x8865d7)=>{const _0x26c557='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x26c557,[_0x57671e],function(_0x2d3f4){_0x2d3f4?_0x8865d7(_0x2d3f4):_0x12eac6({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x10c7b0,_0x21db4f,_0x21b8f9,_0x3baeb5,_0x270308,_0x266356,_0x2240a2,_0x26de05,_0x29f158)=>{const _0x4aeafc=await createMessageID(_0x270308);return new Promise((_0x3f95cc,_0x21d7ab)=>{console['log']('ZEITABSTAND:\x20'+_0x3baeb5);if(!_0x21db4f||!_0x21b8f9||_0x3baeb5===undefined||_0x3baeb5===null||_0x3baeb5===''||!_0x4aeafc||!_0x266356)return _0x21d7ab({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x4aeafc);const _0x3c8657='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x3c8657,[_0x21b8f9,_0x3baeb5,_0x4aeafc,_0x266356,_0x2240a2,_0x26de05,_0x29f158,_0x21db4f],function(_0x2cdca7){if(_0x2cdca7)_0x21d7ab({'status':'error','message':_0x2cdca7['message']});else this['changes']===0x0?_0x21d7ab({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x3f95cc({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x1b54ef,_0x2f0cfb,_0x3131d3,_0x3670c3,_0x44ac2e)=>{return new Promise((_0x151fc6,_0x558423)=>{const _0x501149='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x501149,[_0x2f0cfb,_0x3131d3,_0x3670c3,_0x44ac2e],function(_0x4def42){return _0x4def42?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x4def42['message']),_0x558423('insert-dm-response',{'success':![],'message':_0x4def42['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x151fc6('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xdcffe4=>{return new Promise((_0x4252ee,_0x83109b)=>{const _0x19f19c='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x19f19c,[_0xdcffe4],(_0x311e00,_0x3f6379)=>{if(_0x311e00)_0x83109b({'status':'error','message':_0x311e00['message']});else{if(_0x3f6379)_0x4252ee(_0x3f6379['message_id']);else{const _0x4b86b5='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x4b86b5,[_0xdcffe4],function(_0x11ff86){_0x11ff86?_0x83109b({'status':'error','message':_0x11ff86['message']}):_0x4252ee(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x6abed5,_0x1d713e)=>{return new Promise((_0x2d34c8,_0x3aab7d)=>{const _0x59f608='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x1d713e;db['get'](_0x59f608,(_0x5a1e4c,_0x49362d)=>{_0x5a1e4c?_0x3aab7d({'status':'error','message':_0x5a1e4c['message']}):_0x2d34c8({'status':'success','count':_0x49362d['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x31ed87,_0x21f087){try{const _0xa6c617=await new Promise((_0x4a94d1,_0x488475)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x21f087],(_0x461c39,_0x5db882)=>{if(_0x461c39)_0x488475(_0x461c39);else{if(_0x5db882['length']>0x0){let _0x3b85ca=JSON['parse'](_0x5db882[0x0]['cookie']);console['log'](_0x3b85ca),_0x4a94d1(_0x3b85ca);}else _0x488475(new Error('User\x20with\x20username\x20'+_0x21f087+'\x20does\x20not\x20exist.'));}});});await _0x31ed87['setCookie'](..._0xa6c617),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x34bf57){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x34bf57);}}async function saveCookiesForUser(_0x119b80,_0x38ff27){try{const _0x2b2ab1=await _0x119b80['cookies']();if(!_0x2b2ab1||_0x2b2ab1['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x38ff27);const _0x129a9e=JSON['stringify'](_0x2b2ab1);if(_0x129a9e['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x38ff27);return new Promise((_0x4311f2,_0x54ca2c)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x38ff27],(_0x20349f,_0x48b950)=>{if(_0x20349f)return console['error']('Error\x20checking\x20user\x20existence:',_0x20349f),_0x54ca2c(_0x20349f);if(_0x48b950){const _0x5820a5=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x5820a5['run'](_0x129a9e,_0x38ff27,function(_0x3ce325){return _0x3ce325?(console['error']('Error\x20updating\x20cookies:',_0x3ce325),_0x54ca2c(_0x3ce325)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x38ff27),_0x4311f2());});}else{const _0x161653=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x161653['run'](_0x38ff27,_0x129a9e,function(_0x46770a){return _0x46770a?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x46770a),_0x54ca2c(_0x46770a)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x38ff27),_0x4311f2());});}});});}catch(_0x43570f){console['error']('Error\x20fetching\x20cookies:',_0x43570f);throw _0x43570f;}}async function createUserIfNotExists(_0x121c33){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x121c33],(_0x550a29,_0x5f385c)=>{if(_0x550a29){console['error']('Error\x20checking\x20user\x20existence:',_0x550a29);throw _0x550a29;}else{if(!_0x5f385c){const _0x1c09c7=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x1c09c7['run'](_0x121c33,function(_0x5aa534){_0x5aa534?console['error']('Error\x20inserting\x20new\x20user:',_0x5aa534):console['log']('New\x20user\x20created:',_0x121c33);});}else console['log']('User\x20already\x20exists:',_0x121c33);}});}catch(_0x443ec0){console['error']('Error\x20creating\x20user:',_0x443ec0);throw _0x443ec0;}}ipcMain['handle']('create-relation',async(_0x15f615,_0x5cabb2)=>{return new Promise((_0x3563c1,_0x590871)=>{const _0xe0792d='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x5cabb2+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0xe0792d,function(_0x4f77ee){_0x4f77ee?_0x590871(_0x4f77ee):_0x3563c1({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x3578a8,_0x676b05)=>{return console['log']('droping\x20table'+_0x676b05),new Promise((_0x442cf0,_0x4daa48)=>{const _0x34e0f2='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x676b05;console['log']('droping\x20table'+_0x676b05),db['run'](_0x34e0f2,function(_0x58714c){_0x58714c?_0x4daa48(_0x58714c):_0x442cf0({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x167d55=>{return new Promise((_0x3879f0,_0x2bc0cc)=>{const _0x336294='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x336294,[],(_0x25ee27,_0x4708fe)=>{_0x25ee27?_0x2bc0cc(_0x25ee27):_0x3879f0(_0x4708fe['map'](_0x433e71=>_0x433e71['name']));});});}),ipcMain['handle']('add-user',async(_0xaae2be,_0x320d83,_0x4a8405)=>{return new Promise(_0x10886d=>{const _0x15b879=db['prepare']('INSERT\x20INTO\x20'+_0x4a8405+'\x20(username)\x20VALUES\x20(?)');_0x15b879['run'](_0x320d83,function(_0x50df11){_0x50df11?console['log']('error\x20in\x20add-user:'+_0x50df11):_0x10886d({'status':'success','id':this['lastID']});}),_0x15b879['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x492c5d,_0x1a0931)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x4fde70,_0xeafb8)=>{if(_0x4fde70)_0x1a0931(_0x4fde70);else{_0x492c5d({'status':'success','users':_0xeafb8});for(_0xeafb8 of _0xeafb8){console['log'](_0xeafb8['username']);}}});});}),ipcMain['handle']('get-data',async(_0x37432d,_0xbfd303)=>{return new Promise((_0x3d53d6,_0xdab42f)=>{const _0x52a532='SELECT\x20*\x20FROM\x20'+_0xbfd303;console['log'](_0x52a532),db['all'](_0x52a532,[],(_0x4597d0,_0x260218)=>{_0x4597d0?_0xdab42f(_0x4597d0):_0x3d53d6(_0x260218);});});}),ipcMain['handle']('get-accounts',async _0x448444=>{return new Promise((_0x6c0a7c,_0x274d5c)=>{const _0x2e1f8d='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x2e1f8d),igaccountsDB['all'](_0x2e1f8d,[],(_0x5dd9d3,_0x12c5b9)=>{_0x5dd9d3?_0x274d5c(_0x5dd9d3):_0x6c0a7c(_0x12c5b9);});});}),ipcMain['handle']('get-targets',async(_0x228b7e,_0x191269)=>{return getTargetProfiles(_0x191269);}),ipcMain['handle']('delete-user',async(_0x293564,_0x6df063,_0x266bc7)=>{return new Promise((_0x1e157a,_0x30a934)=>{const _0x1052e3=db['prepare']('DELETE\x20FROM\x20'+_0x266bc7+'\x20WHERE\x20username\x20=\x20?');_0x1052e3['run'](_0x6df063,function(_0x1e2e19){_0x1e2e19?_0x30a934(_0x1e2e19):_0x1e157a({'status':'success','changes':this['changes']});}),_0x1052e3['finalize']();});}),ipcMain['handle']('delete-account',async(_0x283774,_0x13a930)=>{const _0x128ec0=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x128ec0['run'](_0x13a930,function(_0x1f3f97){_0x1f3f97&&console['log'](_0x1f3f97);}),_0x128ec0['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x10683e,_0x372223)=>{const _0x1de9af='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x1de9af,[],(_0x3a3561,_0x11eaf3)=>{_0x3a3561?_0x372223({'status':'error','message':_0x3a3561['message']}):_0x10683e({'status':'success','contactedCount':_0x11eaf3['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x2c9223,_0x56933c)=>{const _0x50c09d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x50c09d,[],(_0x168f17,_0x4977ca)=>{_0x168f17?_0x56933c({'status':'error','message':_0x168f17['message']}):_0x2c9223({'status':'success','contactedCount':_0x4977ca['contactedCount']});});});});function exportDatabase(_0x3882f2){return new Promise((_0xe0b2d8,_0x3126ff)=>{const _0x19ed22='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x3882f2+'\x0a\x20\x20\x20\x20';db['all'](_0x19ed22,[],async(_0x35ca52,_0x2c3f17)=>{if(_0x35ca52){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x35ca52['message']),_0x3126ff(_0x35ca52);return;}if(!_0x2c3f17||_0x2c3f17['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0xe0b2d8();return;}const _0x24baf2=XLSX['utils']['json_to_sheet'](_0x2c3f17),_0x242208=XLSX['utils']['sheet_to_csv'](_0x24baf2);try{const {canceled:_0x351c63,filePath:_0x2d071b}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x3882f2+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x351c63||!_0x2d071b){console['log']('Speichern\x20abgebrochen.'),_0xe0b2d8();return;}fs['writeFile'](_0x2d071b,_0x242208,'utf8',_0x1a3d9f=>{_0x1a3d9f?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x1a3d9f['message']),_0x3126ff(_0x1a3d9f)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2d071b),_0xe0b2d8());});}catch(_0x592aba){console['error']('Fehler\x20im\x20Speicherdialog:',_0x592aba),_0x3126ff(_0x592aba);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x51c435,_0x51f649)=>{shell['openExternal'](_0x51f649);});