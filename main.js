const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x16fef9,_0x5086ab){try{const _0x315b01=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x5086ab},'body':JSON['stringify']({'clearname':_0x16fef9})});if(!_0x315b01['ok']){const _0x55bea6=await _0x315b01['text']();throw new Error(_0x315b01['status']+':\x20'+_0x55bea6);}const _0x151d60=await _0x315b01['json']();return _0x151d60;}catch(_0x2acd6a){console['error']('Error\x20in\x20extractFirstName:',_0x2acd6a);throw _0x2acd6a;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x45808e=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x45808e['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x45808e['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x2eedc9){var _0x3f2e01=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x30579b){console['log']('window\x20id:'+_0x30579b['id']),_0x30579b['id']>0x1&&(_0x3f2e01=!![]);}),console['log']('child\x20opened\x20='+_0x3f2e01);if(!_0x3f2e01){const _0xe1e692=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0xe1e692['loadFile'](_0x2eedc9['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x7c7b8e=require('fs'),_0x56ca0b=path['join'](app['getPath']('userData'),'data'),_0x238630=['campaign.db','crm.db','igaccounts.db'],_0x493a3c=[];try{_0x7c7b8e['mkdirSync'](_0x56ca0b,{'recursive':!![]});for(const _0x3ad06f of _0x238630){const _0x382e5c=path['join'](process['resourcesPath'],'app','build','data',_0x3ad06f),_0x1a707d=path['join'](_0x56ca0b,_0x3ad06f);!_0x7c7b8e['existsSync'](_0x1a707d)?(_0x7c7b8e['copyFileSync'](_0x382e5c,_0x1a707d),console['log']('[InitDB]\x20Kopiert\x20'+_0x3ad06f+'\x20nach:\x20'+_0x1a707d)):console['log']('[InitDB]\x20'+_0x3ad06f+'\x20existiert\x20bereits:\x20'+_0x1a707d),_0x493a3c['push'](_0x1a707d);}}catch(_0x418949){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x418949);}return _0x493a3c;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x19ea47,AppUpdate:_0x1c166c}=require('electron-updater');_0x19ea47['autoDownload']=![],_0x19ea47['autoInstallOnAppQuit']=!![],_0x19ea47['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x19ea47['on']('update-available',_0x4a9b86=>{console['log']('Update\x20verfügbar:',_0x4a9b86),_0x19ea47['downloadUpdate']();}),_0x19ea47['on']('update-downloaded',_0x183a34=>{console['log']('Update\x20heruntergeladen:',_0x183a34),_0x19ea47['quitAndInstall']();}),_0x19ea47['on']('error',_0x1bdd68=>{console['error']('Fehler\x20beim\x20Updaten:',_0x1bdd68);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x41dffa,AppUpdate:_0x131712}=require('electron-updater');_0x41dffa['autoDownload']=![],_0x41dffa['autoInstallOnAppQuit']=!![],_0x41dffa['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x41dffa['on']('update-available',_0x4a8ca6=>{console['log']('Update\x20verfügbar:',_0x4a8ca6),_0x41dffa['downloadUpdate']();}),_0x41dffa['on']('update-downloaded',_0x527e25=>{console['log']('Update\x20heruntergeladen:',_0x527e25),console['log']('Neustarten\x20zum\x20Updaten');}),_0x41dffa['on']('error',_0x4ae0f6=>{console['error']('Fehler\x20beim\x20Updaten:',_0x4ae0f6);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let isHeadless=!![],browser_login=null;async function getBrowserPageLogin(){let _0xe1eadb='',_0x4166f8=null;if(process['platform']==='darwin')_0xe1eadb=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0xe1eadb=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0xe1eadb}),_0x4166f8=await browser_login['newPage'](),_0x4166f8['setDefaultNavigationTimeout'](0x3a98),_0x4166f8['setDefaultTimeout'](0x3a98),await _0x4166f8['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x4166f8;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x473bce=0x1,_0x20ba40=0x0){try{let _0x1f8c63='',_0x646fdb=null;const _0x10c0c4=isHeadless;if(process['platform']==='darwin')_0x1f8c63=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1f8c63=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x473bce===0x0&&!pageStack[_0x20ba40])return browser=await puppeteer['launch']({'headless':_0x10c0c4,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1f8c63}),_0x646fdb=await browser['newPage'](),_0x646fdb['setDefaultNavigationTimeout'](0x3a98),_0x646fdb['setDefaultTimeout'](0x3a98),await _0x646fdb['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x20ba40]=_0x646fdb,_0x646fdb;return(browser===null||pageStack[_0x20ba40]===null||pageStack[_0x20ba40]['isClosed']())&&(browser=await puppeteer['launch']({'headless':isHeadless,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1f8c63})),(pageStack[_0x20ba40]===null||pageStack[_0x20ba40]['isClosed']())&&(_0x646fdb=await browser['newPage'](),_0x646fdb['setDefaultNavigationTimeout'](0x3a98),_0x646fdb['setDefaultTimeout'](0x3a98),await _0x646fdb['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x20ba40]=_0x646fdb),pageStack[_0x20ba40];}catch(_0x36e56d){console['error']('Failed\x20to\x20launch\x20browser:',_0x36e56d);const _0x5226a9=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x36e56d);throw _0x5226a9;}}ipcMain['on']('login',async(_0x390b25,_0x5b307b)=>{const _0x4cc044=await getBrowserPageLogin();await _0x4cc044['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x4cc044,_0x5b307b),ipcMain['on']('setLoginCookies',async(_0x96bc17,_0x502c78)=>{try{await set_login_cookies(_0x4cc044,_0x502c78);}catch(_0x2c56d7){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x2c56d7);}});}),ipcMain['handle']('set-headless',async(_0x5724e1,_0x2404f3)=>{return isHeadless=!!_0x2404f3,console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20auf:',isHeadless),{'ok':!![],'headless':isHeadless};}),ipcMain['handle']('get-headless',async()=>{return{'headless':isHeadless};}),ipcMain['on']('export-relation',async(_0x2473f7,_0xf5930)=>{try{await exportDatabase(_0xf5930),_0x2473f7['reply']('export-relation-response',{'success':!![]});}catch(_0x1aa28d){console['error'](_0x1aa28d),_0x2473f7['reply']('export-relation-response',{'success':![],'message':_0x1aa28d['message']});}}),ipcMain['handle']('sendMessage',async(_0x52cd1a,_0x106dbe,_0x1e59ac,_0x343569,_0x118b05,_0x1daeca,_0x11c075,_0x48e568,_0x451613,_0x4d3685,_0x36e982,_0xdf42f0,_0x2f276a)=>{isStopping=![];let _0x721295=null;return _0x11c075?_0x721295=await getBrowserPage(_0x118b05,_0x48e568):_0x721295=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x106dbe),send_message(_0x721295,_0x106dbe,_0x1e59ac,_0x343569,_0x118b05,_0x1daeca,_0x451613,_0x4d3685,_0x36e982,_0xdf42f0,_0x2f276a);}),ipcMain['handle']('stop-action',async(_0x348df4,_0x39d35e)=>{isStopping=!![];const _0x105904=await getBrowserPage(0x1,_0x39d35e);await _0x105904['close']();}),ipcMain['handle']('fetch_followers',async(_0x25b069,_0x40c6b4,_0x446a3c,_0x1ca494,_0x553d2d,_0x20ddb8,_0x59f1d6)=>{isStopping=![];const _0x30783f=await getBrowserPage();return fetch_followers_from_account(_0x25b069,_0x30783f,_0x40c6b4,_0x446a3c,_0x1ca494,_0x553d2d,_0x20ddb8,_0x59f1d6);}),ipcMain['handle']('get-account-details',async(_0x3aa05c,_0xe10e4f,_0x44fd66,_0xfad053)=>{isStopping=![];const _0x109266=await getBrowserPage();return fetch_account_details(_0x109266,_0xe10e4f,_0x44fd66,_0xfad053);}),ipcMain['handle']('fetch_likes',async(_0x16a612,_0x142d97,_0x176d52,_0x4efa6c,_0x3cb277,_0x3977fe,_0x122355)=>{isStopping=![];const _0x187b9b=await getBrowserPage();return fetch_likers_from_post(_0x16a612,_0x187b9b,_0x142d97,_0x176d52,_0x4efa6c,_0x3cb277,_0x3977fe,_0x122355);}),ipcMain['handle']('fetch_comments',async(_0x3ae8ea,_0x2113ba,_0x747613,_0x338fca,_0x2dd80a,_0x4a2d43,_0x1e3c2)=>{isStopping=![];const _0x14a30d=await getBrowserPage();return fetch_comments_from_post(_0x3ae8ea,_0x14a30d,_0x2113ba,_0x747613,_0x338fca,_0x2dd80a,_0x4a2d43,_0x1e3c2);});async function updateAppSilent(){const {spawn:_0x54c9ed}=require('child_process'),_0x3e0c02=require('path'),_0x2ace78=require('electron-log');return _0x2ace78['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2ee68d,_0x2cb46c)=>{const {updateElectronApp:_0xc07ba8,UpdateSourceType:_0x2a0442}=require('update-electron-app');_0xc07ba8({'updateSource':{'type':_0x2a0442['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x2ace78}),_0x2ee68d('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x3c3c47,_0x1ac893)=>{doFullElectronUpdateSilent(),_0x3c3c47('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x1c85a6}=require('child_process'),_0x20b97f=require('path'),_0x3f6e9a=require('electron-log');return _0x3f6e9a['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x4007e9,_0x2f6c7e)=>{const {updateElectronApp:_0x21f15e,UpdateSourceType:_0x3001bf}=require('update-electron-app');_0x21f15e({'updateSource':{'type':_0x3001bf['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x3f6e9a}),_0x4007e9('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x2a458a,_0xeb95e8)=>{doFullElectronUpdate(),_0x2a458a('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x17010b,_0x30b8eb)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x17010b('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x138e0b=path['join'](__dirname,'mac-updater-intern.sh'),_0x36b80a=spawn('/bin/bash',[_0x138e0b],{'detached':!![],'stdio':'ignore'});_0x36b80a['unref'](),setTimeout(()=>{_0x17010b('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x30b8eb(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x2fa005=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x55055c,_0x468730)=>{console['log']('Update\x20Silent:\x20'+_0x468730);if(_0x468730){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x529482,_0x2f8915){return Math['random']()*(_0x2f8915-_0x529482+0x1)+_0x529482;}function delay(_0xc1eef5,_0x3e69b6){let _0x4d3118=getRnd(_0xc1eef5,_0x3e69b6);return new Promise(function(_0xe0997d){setTimeout(_0xe0997d,_0x4d3118);});}async function scroll(_0x3e2eb9,_0x1878a1,_0xfc2d59=0x2,_0x10aedd){const _0x47b38c=await _0x3e2eb9['waitForSelector'](_0x1878a1);for(let _0x32d178=0x0;_0x32d178<_0xfc2d59;_0x32d178++){console['log']('Scrolling\x20'+_0x32d178),await _0x3e2eb9['evaluate'](_0x211f65=>{const _0x1875e6=document['querySelector'](_0x211f65);_0x1875e6&&_0x1875e6['scrollBy'](0x0,0x190);},_0x1878a1),await delay(0x320,0x5dc),_0x10aedd();}}async function saveCookies(_0x41d0f6){let _0x3f92dd=await _0x41d0f6['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x3f92dd,null,0x2));}async function notificationClear(_0x10cf68){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x10cf68['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x10cf68['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x64a052){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x64a052);}}async function getTargetProfiles(_0x135b4c){return new Promise((_0x232a4f,_0x58dd54)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x135b4c,(_0x8c9ca3,_0x94cb6d)=>{_0x8c9ca3?_0x58dd54(_0x8c9ca3):_0x232a4f(_0x94cb6d);});});}async function login_legacy(_0x101e6c,_0x1cb7fe,_0x428b05){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x101e6c,_0x1cb7fe),await createUserIfNotExists(_0x1cb7fe,_0x428b05);}catch(_0x26233f){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x26233f);}try{await _0x101e6c['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x101e6c['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x101e6c['click']('button._a9--._ap36._a9_0');}catch(_0x322582){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x101e6c['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x101e6c['type']('input[name=\x27username\x27]',_0x1cb7fe,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x101e6c['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x101e6c['type']('input[name=\x27password\x27]',_0x428b05,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x101e6c['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x101e6c['click']('button[type=\x27submit\x27]');}catch(_0x5d7ad6){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x101e6c),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x101e6c,_0x1cb7fe);}catch(_0x3802d4){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x3802d4);}}catch(_0x3f67cd){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x3f67cd);}}async function login(_0x32f404,_0x133a84){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x32f404,_0x133a84),await createUserIfNotExists(_0x133a84);}catch(_0x524bc4){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x524bc4);}try{await _0x32f404['goto']('https://www.instagram.com/accounts/login/');}catch(_0x4c6ffc){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x4c6ffc);}}async function set_login_cookies(_0x303bcb,_0x10d20a){try{await saveCookiesForUser(_0x303bcb,_0x10d20a);}catch(_0x41ecae){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x41ecae);}}async function waitForXPath(_0x399186,_0x4622af,_0x28b5eb={}){return await _0x399186['waitForFunction'](_0x55423a=>{return document['evaluate'](_0x55423a,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x28b5eb,_0x4622af),_0x399186['evaluateHandle'](_0x3e49b8=>document['evaluate'](_0x3e49b8,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x4622af);}async function waitForSelectorWithFallbacks(_0x2e3827,_0x3496bb,_0xcf0668={}){!Array['isArray'](_0x3496bb)&&(_0x3496bb=[_0x3496bb]);for(let _0x1f9b54=0x0;_0x1f9b54<_0x3496bb['length'];_0x1f9b54++){const _0x3a0210=_0x3496bb[_0x1f9b54],_0x2d2d26=_0x3a0210['startsWith']('//')||_0x3a0210['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x2d2d26?'XPath':'Selector')+'\x20'+(_0x1f9b54+0x1)+'/'+_0x3496bb['length']+':\x20'+_0x3a0210['substring'](0x0,0x32)+'...');const _0x9b046b=_0x1f9b54===0x0?_0xcf0668['timeout']||0x1388:0x7d0;let _0x8dffda;if(_0x2d2d26){const _0x210816=await waitForXPath(_0x2e3827,_0x3a0210,{..._0xcf0668,'timeout':_0x9b046b});if(!_0x210816)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x8dffda=_0x210816;}else _0x8dffda=await _0x2e3827['waitForSelector'](_0x3a0210,{..._0xcf0668,'timeout':_0x9b046b});return console['log']((_0x2d2d26?'XPath':'Selector')+'\x20'+(_0x1f9b54+0x1)+'\x20gefunden!'),_0x8dffda;}catch(_0x461014){console['log']((_0x2d2d26?'XPath':'Selector')+'\x20'+(_0x1f9b54+0x1)+'\x20nicht\x20gefunden:\x20'+_0x461014['message']);if(_0x1f9b54===_0x3496bb['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x3496bb['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x461014['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x246649,_0xafd988,_0x56d89f={}){return await _0x246649['waitForFunction'](_0x29b83f=>{return document['evaluate'](_0x29b83f,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x56d89f,_0xafd988),_0x246649['evaluateHandle'](_0x2568d4=>{const _0x47ee04=document['evaluate'](_0x2568d4,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x50a624=[];for(let _0x4331c9=0x0;_0x4331c9<_0x47ee04['snapshotLength'];_0x4331c9++){_0x50a624['push'](_0x47ee04['snapshotItem'](_0x4331c9));}return _0x50a624;},_0xafd988)['then'](_0x5e06c4=>_0x5e06c4['getProperties']());}ipcMain['handle']('check-login',async(_0x332e5f,_0x31818c)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x28a16c){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x561506){}browser=null;}const _0x5bb38a=await getBrowserPage(0x0,0x0),_0xd05ca0=await checkCookiesSession(_0x5bb38a,_0x31818c);return _0xd05ca0;});async function checkCookiesSession(_0x4d99bb,_0x1d4d03){try{await setCookiesForUser(_0x4d99bb,_0x1d4d03),console['log']('Cookies\x20für\x20'+_0x1d4d03+'\x20erfolgreich\x20geladen');}catch(_0x3a847a){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x1d4d03+':',_0x3a847a),![];}try{await _0x4d99bb['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x1c33c5){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x1c33c5);}await delay(0x6a4,0x7d0);try{const _0x1e780d=await checkLoginStatus(_0x4d99bb);return console['log']('Login-Status\x20für\x20'+_0x1d4d03+':\x20'+_0x1e780d),_0x1e780d;}catch(_0x222486){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x1d4d03+':',_0x222486['message']),![];}}async function checkLoginStatus(_0x128bd1){const _0x578375=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x30d6a8=null;try{_0x30d6a8=await waitForSelectorWithFallbacks(_0x128bd1,_0x578375,{'timeout':0x7d0});}catch(_0x53c294){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x53c294),!![];}if(_0x30d6a8){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x56cae0){const _0x3c5e78=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0xd627ee=null;try{_0xd627ee=await waitForSelectorWithFallbacks(_0x56cae0,_0x3c5e78,{'timeout':0x7d0});}catch(_0x3791e7){return console['log']('Seite\x20existiert:\x20'+_0x3791e7),!![];}if(_0xd627ee){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x343851){try{const _0x4f07ea=await _0x343851['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x4f07ea['length']);if(_0x4f07ea&&_0x4f07ea['length']>0x0){const _0x307164=_0x4f07ea[0x0];await _0x307164['click'](),await delay(0xaf0,0xbb8);const _0x88961f=await _0x343851['evaluate'](()=>{const _0x12b10e=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x12b10e;});if(_0x88961f){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x2c401f=await _0x343851['$$'](K_BEITRAG_LIKE_BUTTON),_0x1a3e9d=_0x2c401f[0x0];await delay(0x514,0x5dc),await _0x343851['evaluate'](_0x5ce221=>{_0x5ce221['click']();},_0x1a3e9d);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x343851['goBack'](),await delay(0x7d0,0x898);}}catch(_0x495bb8){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x495bb8);throw new Error('Like_Posts:\x20'+_0x495bb8);}}async function likeFirstStory(_0x5dbefd){try{const _0x1ef2c3=await _0x5dbefd['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x1ef2c3['length']);if(_0x1ef2c3&&_0x1ef2c3['length']>0x0){const _0x1a1eff=_0x1ef2c3[0x0];await _0x1a1eff['click'](),await delay(0xaf0,0xbb8);const _0x2be7e9=await _0x5dbefd['evaluate'](()=>{const _0x2af6d9=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x2af6d9;});if(_0x2be7e9){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x46eda9=await _0x5dbefd['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5dbefd['click'](_0x46eda9);}catch(_0x2fd2e6){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x2fd2e6);try{const _0x77e25b=await _0x5dbefd['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5dbefd['evaluateHandle'](_0x2e6d98=>{_0x2e6d98['click']();},_0x77e25b);}catch(_0x437740){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x437740),await _0x5dbefd['evaluate'](()=>{const _0x37ffdb=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x37ffdb)_0x37ffdb['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x5dbefd['goBack'](),await delay(0x7d0,0x898);}}catch(_0x4332b2){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x4332b2);throw new Error('Like_Storys:\x20'+_0x4332b2);}}async function send_message(_0x1aeffd,_0x4dd1ea,_0x149d30,_0x4a7572,_0x3a0917,_0x3134d3,_0x3427af,_0x10a6e5,_0x175d83,_0x25ebdb,_0x4c945a){return new Promise(async(_0x4d7359,_0x4e308c)=>{_0x3134d3=_0x3134d3['split'](';'),console['log'](_0x3134d3[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x3a0917);if(_0x4a7572===null||_0x4a7572===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x4e308c('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x1aeffd,_0x3134d3[0x0]);}catch(_0x25712a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x25712a),_0x4d7359({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x25712a});return;}await delay(0x6a4,0x7d0);try{await _0x1aeffd['goto']('https://www.instagram.com/'+_0x4dd1ea+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x1aeffd);}catch(_0x20956a){_0x4d7359({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x20956a});return;}try{await checkLoginStatus(_0x1aeffd);}catch(_0xf03717){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0xf03717),_0x4e308c('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x175d83==0x1)try{await likeFirstPost(_0x1aeffd);}catch(_0x4ee4d4){_0x4e308c(_0x4ee4d4);}if(_0x25ebdb==0x1)try{await likeFirstStory(_0x1aeffd);}catch(_0x4f4be3){_0x4e308c(_0x4f4be3);}console['log']('UserSkip:\x20'+_0x3427af);if(_0x3427af==0x1)try{const _0x2eef41=await _0x1aeffd['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x3db34d=>_0x3db34d['textContent']['trim']());console['log'](_0x2eef41);if(_0x2eef41==='Following'||_0x2eef41==='Folge\x20ich')return _0x4d7359({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x6ecf06){}try{const _0x475872=await waitForSelectorWithFallbacks(_0x1aeffd,K_DIRECT_MSG_BUTTON);await _0x475872['click'](),await delay(0x6a4,0x7d0);try{const _0x403893=await waitForSelectorWithFallbacks(_0x1aeffd,K_EXPAND_MSG_BUTTON);await _0x403893['click']();}catch(_0x114ef4){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x114ef4);}}catch(_0x4b7915){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x4b7915);try{await delay(0x6a4,0x7d0);try{const _0x4c2e02=await waitForSelectorWithFallbacks(_0x1aeffd,K_OPTIONS_BUTTON);await _0x4c2e02['click']();}catch(_0x1889ae){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1889ae),_0x4d7359({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1889ae});return;}await delay(0x3e8,0x44c);const _0x518c40=await waitForXPath(_0x1aeffd,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x518c40['click']();}catch(_0x5754aa){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x5754aa),_0x4d7359({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x1aeffd);}catch(_0xffd156){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0xffd156);}try{await delay(0x708,0x7d0);const _0x4d7c6c=await waitForSelectorWithFallbacks(_0x1aeffd,K_CHAT_INPUT_FIELD,{'visible':!![],'timeout':0x3a98});if(_0x10a6e5){const _0x3a70f3=await _0x1aeffd['$'](K_ALREADY_CHATTED);if(_0x3a70f3)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x4dd1ea),_0x4d7359({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x222f81=await _0x1aeffd['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x222f81),_0x4a7572=_0x4a7572['replace']('{USERNAME}',_0x4dd1ea);let _0x26df2c;if(_0x4a7572['includes']('{NAME}')||_0x4a7572['includes']('{name}'))try{const _0x34e475=await extractFirstName(_0x222f81,_0x4c945a);console['log']('Response\x20Clearname\x20valid:\x20'+_0x34e475['valid']),_0x34e475['valid']?(_0x4a7572=_0x4a7572['replaceAll'](/{NAME}|{name}/g,_0x34e475['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x34e475['name']),_0x26df2c=_0x34e475['name']):(_0x4a7572=_0x4a7572['replaceAll'](/ ?({NAME}|{name})/g,''),_0x26df2c='UNKNOWN_NAME');}catch(_0x5a921b){console['log'](_0x5a921b['message']),_0x26df2c=_0x5a921b['message'];const _0x4c8414=_0x222f81?_0x222f81['replace'](/[^\p{L}\s]/gu,''):'',_0x275743=_0x4c8414['split']('\x20')[0x0]||'';_0x275743['length']>0x2&&!_0x275743['includes']('Instagram')?_0x4a7572=_0x4a7572['replaceAll'](/{NAME}|{name}/g,_0x275743):_0x4a7572=_0x4a7572['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x4a7572);const _0x24f17c=_0x4a7572['split']('\x0a');await _0x4d7c6c['type'](_0x24f17c[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x75c2e5=0x1;_0x75c2e5<_0x24f17c['length'];_0x75c2e5++){await _0x1aeffd['keyboard']['down']('Shift'),await _0x1aeffd['keyboard']['press']('Enter'),await _0x1aeffd['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x24f17c[_0x75c2e5]['length']>0x0&&await _0x4d7c6c['type'](_0x24f17c[_0x75c2e5],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x2c490f=await waitForSelectorWithFallbacks(_0x1aeffd,K_SEND_MSG_BUTTON);await _0x2c490f['click']();}catch(_0x5250b4){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x5250b4),_0x4d7359({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x4dd1ea+'\x20überspringen.','error':_0x5250b4['message']});}await delay(0x320,0x3e8),_0x4d7359({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x222f81,'extracted_clearname':_0x26df2c});}catch(_0x4fe4cd){let _0x4ba9c1=_0x4fe4cd;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x4ba9c1),_0x4d7359({'status':0x1f4,'message':'Error\x20500:\x20'+_0x4ba9c1});}});}function handle_fail(_0x1f101d){if(isStopping)return new Promise(_0x594fa2=>{_0x594fa2('Scraper\x20gestoppt.');});else{let _0xa82a36='';switch(_0x1f101d){case 0x0:_0xa82a36='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0xa82a36='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0xa82a36='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0xa82a36='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0xe327fc,_0x3ee245)=>{_0x3ee245(_0xa82a36);});}}async function fetch_account_details(_0x2c4e93,_0x37a6da,_0x3bd430,_0x574f1c){try{await setCookiesForUser(_0x2c4e93,_0x3bd430['username']);}catch(_0x14b348){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x14b348);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x14b348);return handle_fail(0x0);}_0x2c4e93['setDefaultNavigationTimeout'](0x7530),await _0x2c4e93['goto']('https://www.instagram.com/'+_0x37a6da+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x2c4e93);const _0x139cd8=await _0x2c4e93['evaluate'](()=>{const _0x10ea2d=document['querySelector']('meta[property=\x22og:image\x22]');return _0x10ea2d?_0x10ea2d['getAttribute']('content'):null;});await _0x2c4e93['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x1094c5=await _0x2c4e93['evaluate'](()=>{const _0x50b1e3=document['querySelector']('meta[name=\x22description\x22]');if(!_0x50b1e3)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x511e42=_0x50b1e3['getAttribute']('content');if(!_0x511e42)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x511e42);const _0x77aba1=/\s*[–-]\s*/,_0x5aecad=_0x511e42['split'](_0x77aba1);if(_0x5aecad['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x4bafe9=_0x5aecad[0x0],_0x5dd00b=_0x5aecad[0x1],_0x4bf6a8=_0x4bafe9['split'](',\x20');if(_0x4bf6a8['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x30db9d=_0x4bf6a8[0x0]['split']('\x20')[0x0],_0x20e047=_0x4bf6a8[0x1]['split']('\x20')[0x0],_0x543a76=_0x4bf6a8[0x2]['split']('\x20')[0x0];let _0x22cf39='',_0xfa6cd6='';const _0x5c0891='\x20on\x20Instagram:\x20',_0x4a4c4b=_0x5dd00b['split'](_0x5c0891);return _0x22cf39=_0x4a4c4b[0x0]['trim'](),_0x22cf39=_0x22cf39['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x4a4c4b['length']>0x1&&(_0xfa6cd6=_0x4a4c4b[0x1]['trim'](),_0xfa6cd6['startsWith']('\x22')&&_0xfa6cd6['endsWith']('\x22')&&(_0xfa6cd6=_0xfa6cd6['substring'](0x1,_0xfa6cd6['length']-0x1)['trim']()),_0xfa6cd6=_0xfa6cd6['replace'](/&quot;/g,'')['trim']()),{'followers':_0x30db9d,'following':_0x20e047,'posts':_0x543a76,'nameText':_0x22cf39,'bio':_0xfa6cd6};});console['log']('Extracted\x20profile\x20data:',_0x1094c5);const _0x17d7c5=_0x1094c5['nameText'],_0x5066a1=_0x139cd8,_0x260015=_0x1094c5['bio'],_0x137749=_0x1094c5['followers'],_0x3ccfc8=_0x1094c5['following'],_0x153702=_0x1094c5['posts'],_0x1c6db1=![],_0x4f055d=![],_0x2269c2=![],_0x5f446f='\x0a\x20\x20INSERT\x20INTO\x20'+_0x574f1c+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x5f446f,[_0x37a6da,_0x17d7c5,_0x5066a1,_0x260015,_0x137749,_0x3ccfc8,_0x153702,_0x1c6db1,_0x4f055d,_0x2269c2],function(_0x491136){_0x491136?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x491136['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x5a94ec,_0x3bbf78,_0x13e9ce,_0x298bbf,_0x3d15ae,_0x5459ac,_0x4655ab,_0x5b7cae){let _0x20c328=0x4,_0x52626d=0x0,_0x3218d1=0x0;try{await setCookiesForUser(_0x3bbf78,_0x5459ac['username']);}catch(_0x282f44){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x282f44);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x282f44);return handle_fail(0x0);}let _0x3b9024=0x0;try{await _0x3bbf78['goto']('https://www.instagram.com/'+_0x13e9ce+'/'),await notificationClear(_0x3bbf78);try{await checkLoginStatus(_0x3bbf78);}catch(_0x45ca48){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x45ca48);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x3bbf78);}catch(_0x2f032f){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x2f032f);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x298bbf<=0x0){const _0x4ae6d6=await _0x3bbf78['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x256c36=await _0x3bbf78['evaluate'](_0x1b15ab=>_0x1b15ab['innerHTML'],_0x4ae6d6);_0x3b9024=Math['ceil'](_0x256c36/0x4);}else _0x3b9024=Math['ceil'](_0x298bbf/0x4);_0x20c328+=_0x3b9024,_0x3218d1=Math['round'](++_0x52626d/_0x20c328*0x64),_0x5a94ec['sender']['send']('fetch-progress',_0x3218d1,!![]);let _0x151d30=await _0x3bbf78['waitForSelector']('a[href=\x22/'+_0x13e9ce+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x151d30['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x13e9ce+'\x20gesichtet'),_0x3218d1=Math['round'](++_0x52626d/_0x20c328*0x64),_0x5a94ec['sender']['send']('fetch-progress',_0x3218d1,!![]);}catch(_0x14f2d6){console['log']('Follower\x20Liste\x20von\x20'+_0x13e9ce+'\x20nicht\x20gefunden:'+_0x14f2d6);throw new Error('Follower\x20Liste\x20von\x20'+_0x13e9ce+'\x20nicht\x20gefunden:'+_0x14f2d6);return handle_fail(0x0);}}catch(_0x36cd34){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x36cd34);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x36cd34);return handle_fail(0x0);}try{await delay(0x12c0,0x1388),console['log']('Auto-scrolls:\x20'+_0x3b9024),await scroll(_0x3bbf78,FOLLOWER_FENSTER,_0x3b9024,_0x4fd836=>{_0x3218d1=Math['round'](++_0x52626d/_0x20c328*0x64),_0x5a94ec['sender']['send']('fetch-progress',_0x3218d1,!![]);}),await _0x3bbf78['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0xdb4321=await _0x3bbf78['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x27a1e9=await _0x3bbf78['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x3218d1=Math['round'](++_0x52626d/_0x20c328*0x64),_0x5a94ec['sender']['send']('fetch-progress',_0x3218d1,!![]);_0x298bbf<=0x0&&(_0x298bbf=_0xdb4321['length']);let _0x2b04ab=[];for(let _0x128430=0x0;_0x128430<_0xdb4321['length']&&_0x128430<_0x298bbf;_0x128430++){const _0x238d88=await _0xdb4321[_0x128430]['evaluate'](_0xb538f1=>_0xb538f1['textContent']),_0x47f638=await _0x27a1e9[_0x128430]['evaluate'](_0x5079ab=>_0x5079ab['textContent']);if(_0x5b7cae){const _0x33fd8d=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x5459ac['username'],_0x238d88]);if(_0x33fd8d){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x238d88);continue;}}_0x2b04ab['push'](_0x238d88);const _0x487f6e='INSERT\x20INTO\x20'+_0x3d15ae+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x487f6e,[_0x238d88,_0x47f638],function(_0x20606b){_0x20606b?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3d15ae+'\x27:',_0x20606b['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3218d1=Math['round'](++_0x52626d/_0x20c328*0x64),_0x5a94ec['sender']['send']('fetch-progress',_0x3218d1,!![]),_0x4655ab&&(_0x5a94ec['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5a94ec,_0x3bbf78,_0x5459ac,_0x3d15ae,_0x2b04ab)),new Promise(_0x95069e=>{_0x95069e('Scraping\x20finished!');});}catch(_0x551ed6){if(_0x4655ab)throw new Error(_0x551ed6);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x13e9ce+'\x20nicht\x20gefunden:\x20'+_0x551ed6);return handle_fail(0x0);}}async function fetch_details_from_list(_0x417adc,_0x204610,_0x456cf8,_0x8b66ec,_0xb0725a){let _0x3f37d2=0x0,_0x16913b=0x0;for(let _0x2ad8a6=0x0;_0x2ad8a6<_0xb0725a['length'];_0x2ad8a6++){console['log']('Processing\x20profile:',_0xb0725a[_0x2ad8a6]);try{await fetch_account_details(_0x204610,_0xb0725a[_0x2ad8a6],_0x456cf8,_0x8b66ec);}catch(_0x4a9fca){console['error']('Detailed\x20Scraping\x20von:\x20',_0xb0725a[_0x2ad8a6],_0x4a9fca);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0xb0725a[_0x2ad8a6]+'\x20'+_0x4a9fca);}_0x16913b=Math['round'](++_0x3f37d2/_0xb0725a['length']*0x64),_0x417adc['sender']['send']('fetch-progress',_0x16913b,!![],!![]);}}async function fetch_likers_from_post(_0x277be7,_0x5ec5fb,_0x1ebb2d,_0x16f819,_0x16c1f0,_0x3c25e0,_0x41c854,_0x72ea43){let _0x27764b=0x4,_0xcc305b=0x0,_0x3cdedb=0x0;try{await setCookiesForUser(_0x5ec5fb,_0x3c25e0['username']);}catch(_0x2ef528){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2ef528);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2ef528);return handle_fail(0x1);}_0x3cdedb=Math['round'](++_0xcc305b/_0x27764b*0x64),_0x277be7['sender']['send']('fetch-progress',_0x3cdedb,!![]);try{let _0xf19375=_0x1ebb2d['substring'](0x0,_0x1ebb2d['lastIndexOf']('/'));_0xf19375['includes']('/reel/')&&(_0xf19375=_0xf19375['replace']('/reel/','/p/'));let _0x32dd26=_0xf19375+'/liked_by';console['log'](_0x32dd26),await _0x5ec5fb['goto'](_0x32dd26),await delay(0x7d0,0xfa0),await notificationClear(_0x5ec5fb),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x5ec5fb);}catch(_0x1cc8a9){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x1cc8a9);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x5ec5fb);}catch(_0x3d590b){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x3d590b);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x3cdedb=Math['round'](++_0xcc305b/_0x27764b*0x64),_0x277be7['sender']['send']('fetch-progress',_0x3cdedb,!![]),await _0x5ec5fb['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x5913c3=await _0x5ec5fb['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x54990d=await _0x5ec5fb['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x5913c3['length']);let _0x47abcf=path['join'](__dirname,'/likers.csv');_0x3cdedb=Math['round'](++_0xcc305b/_0x27764b*0x64),_0x277be7['sender']['send']('fetch-progress',_0x3cdedb,!![]);_0x16f819<=0x0&&(_0x16f819=_0x5913c3['length']);try{let _0x107f28=[];for(let _0x5ee99a=0x0;_0x5ee99a<_0x5913c3['length']&&_0x5ee99a<_0x16f819;_0x5ee99a++){const _0x7cac7c=await _0x5913c3[_0x5ee99a]['evaluate'](_0x1415dd=>_0x1415dd['textContent']),_0x2ea2e7=await _0x54990d[_0x5ee99a]['evaluate'](_0x1c6917=>_0x1c6917['textContent']);if(_0x72ea43){const _0x5b81a7=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3c25e0['username'],_0x7cac7c]);if(_0x5b81a7){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x7cac7c);continue;}}_0x107f28['push'](_0x7cac7c);const _0x54b848='INSERT\x20INTO\x20'+_0x16c1f0+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x54b848,[_0x7cac7c,_0x2ea2e7],function(_0x47859d){_0x47859d?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x16c1f0+'\x27:',_0x47859d['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3cdedb=Math['round'](++_0xcc305b/_0x27764b*0x64),_0x277be7['sender']['send']('fetch-progress',_0x3cdedb,!![]),_0x41c854&&(_0x277be7['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x277be7,_0x5ec5fb,_0x3c25e0,_0x16c1f0,_0x107f28)),new Promise(_0x4986d4=>{_0x4986d4('Scraping\x20finished!');});}catch(_0x3b4ceb){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x3b4ceb);return handle_fail(0x1);}}catch(_0x1a9f87){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x1a9f87);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x1a9f87);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x43a406,_0x160187,_0x11bc70,_0x31c120,_0x4bceb4,_0x5ba0f8,_0x226fb8,_0x56779e){let _0xeb45ae=0x3,_0xb9778a=0x0,_0x1083b3=0x0;try{await setCookiesForUser(_0x160187,_0x5ba0f8['username']);}catch(_0x4d83b5){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4d83b5);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4d83b5);return handle_fail(0x2);}try{console['log'](_0x11bc70),await _0x160187['goto'](_0x11bc70),await delay(0x7d0,0xfa0),await notificationClear(_0x160187),await delay(0xc8,0x1f4);const _0x1382ef=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x160187);}catch(_0x205864){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x205864);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x160187);}catch(_0x5c97e2){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x5c97e2);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x4f45f6;const _0x18b51b=await _0x160187['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0xfde270=await _0x160187['evaluate'](_0x3e800a=>_0x3e800a['innerHTML'],_0x18b51b),_0x139a60=String(_0xfde270)['replace'](/[^0-9]/g,''),_0x5da5e3=Number(_0x139a60)/0x14;_0x31c120<=0x0?_0x4f45f6=Math['ceil'](_0x5da5e3/0x3):_0x4f45f6=Math['ceil'](_0x31c120/0x3);_0xeb45ae+=_0x4f45f6,_0x1083b3=Math['round'](++_0xb9778a/_0xeb45ae*0x64),_0x43a406['sender']['send']('fetch-progress',_0x1083b3,!![]),console['log']('Auto-scrolls:\x20'+_0x4f45f6),await scroll(_0x160187,_0x1382ef,_0x4f45f6,_0x1becf6=>{_0x1083b3=Math['round'](++_0xb9778a/_0xeb45ae*0x64),_0x43a406['sender']['send']('fetch-progress',_0x1083b3,!![]);});try{const _0x2de25d=COM_REPLY_BUTTON_SPAN,_0x56889a=await waitForXPathAll(_0x160187,_0x2de25d);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x56889a['size']),await delay(0x1f4,0x320);let _0x19d0f3=_0x56889a['size'],_0x551d96=[];for(const [_0x128e14,_0x4e59d3]of _0x56889a){_0x551d96['push'](_0x4e59d3);}console['log']('Alle\x20Reply-Buttons:',_0x551d96['length']);try{for(let _0x514b56=0x0;_0x514b56<_0x19d0f3;_0x514b56++){await _0x551d96[_0x514b56]['click'](),await delay(0x320,0x5dc);}}catch(_0x3adf2d){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3adf2d);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x3adf2d);return handle_fail(0x2);}}catch(_0x33e09a){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x2edc97=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x160187['waitForSelector'](_0x2edc97),await delay(0x1f4,0x320),_0x1083b3=Math['round'](++_0xb9778a/_0xeb45ae*0x64),_0x43a406['sender']['send']('fetch-progress',_0x1083b3,!![]);const _0x273777=await _0x160187['$$'](_0x2edc97);let _0x471465=path['join'](__dirname,'/comments.csv');_0x31c120<=0x0&&(_0x31c120=_0x273777['length']);console['log']('fetch_limit:\x20'+_0x31c120),console['log']('comments_len:\x20'+_0x273777['length']),_0x31c120++;try{let _0x348d94=[];for(let _0x1ae5aa=0x1;_0x1ae5aa<_0x273777['length']&&_0x1ae5aa<_0x31c120;_0x1ae5aa++){const _0x1c8176=await _0x273777[_0x1ae5aa]['evaluate'](_0x6b4886=>_0x6b4886['textContent']);if(_0x56779e){const _0x341117=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x5ba0f8['username'],_0x1c8176]);if(_0x341117){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x1c8176);continue;}}try{_0x348d94['push'](_0x1c8176);const _0x10535d='INSERT\x20INTO\x20'+_0x4bceb4+'\x20(username)\x20VALUES\x20(?)';db['run'](_0x10535d,[_0x1c8176],function(_0x25dccd){_0x25dccd&&console['log']('error\x20in\x20add-user:'+_0x25dccd);});}catch(_0x172011){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1ae5aa+'\x20:\x20'+_0x172011);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1ae5aa+'\x20:\x20'+_0x172011);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x1083b3=Math['round'](++_0xb9778a/_0xeb45ae*0x64),_0x43a406['sender']['send']('fetch-progress',_0x1083b3,!![]),_0x43a406['sender']['send']('fetch-progress',0x64,!![]),_0x226fb8&&(_0x43a406['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x43a406,_0x160187,_0x5ba0f8,_0x4bceb4,_0x348d94)),_0x43a406['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x1d8649=>{_0x1d8649('Scraping\x20finished!');});}catch(_0x4a4dd8){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x4a4dd8);return handle_fail(0x2);}}catch(_0x512329){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x512329);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x512329);return handle_fail(0x2);}}async function set_clearname_from_username(_0x3b1b66,_0x29d4e7,_0x9abc55=null){try{let _0x1f59ad,_0x4e3bdc;const _0x4bca4d='SELECT\x20username\x20FROM\x20'+_0x29d4e7+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x4bca4d,[],(_0x245a2a,_0x1d6b2d)=>{_0x245a2a&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x245a2a['message']),_0x1d6b2d['length']===0x0&&(_0x4e3bdc=_0x1d6b2d['length']),_0x1f59ad=_0x1d6b2d['map'](_0xfaa396=>_0xfaa396['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x4e3bdc);if(_0x4e3bdc===0x0){console['log']('Leave');return;}const _0x2a5d1b=await _0x3b1b66['waitForSelector'](IG_SEARCH_BUTTON);await _0x2a5d1b['click'](),await delay(0x4b0,0x7d0);for(let _0x3ad1f3 of _0x1f59ad){const _0x12565e=await _0x3b1b66['waitForSelector'](IG_SEARCH_INPUT);await _0x12565e['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x3b1b66['type'](IG_SEARCH_INPUT,_0x3ad1f3,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x3818fa=0x1;while(_0x3818fa!=0x14){console['log']('Schleife');try{let _0x2a6729=IG_NAME_SPAN_PART1+_0x3818fa+IG_USERNAME_SPAN_PART2;const _0x5f4f66=await _0x3b1b66['waitForSelector'](_0x2a6729),_0x20b664=await _0x3b1b66['evaluate'](_0x522340=>_0x522340['innerHTML'],_0x5f4f66);await delay(0xc8,0x1f4);if(_0x20b664==_0x3ad1f3){let _0x303b6c=IG_NAME_SPAN_PART1+_0x3818fa+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0xf9f859=await _0x3b1b66['waitForSelector'](_0x303b6c);let _0xd8dc5e=await _0x3b1b66['evaluate'](_0x91560d=>_0x91560d['innerHTML'],_0xf9f859);const _0x475098=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x5af42f=_0xd8dc5e['match'](_0x475098);_0x5af42f?_0xd8dc5e=_0x5af42f[0x1]['trim']():_0xd8dc5e=_0xd8dc5e['trim']();_0xd8dc5e['includes']('•')&&(_0xd8dc5e=_0xd8dc5e['substring'](0x0,_0xd8dc5e['indexOf']('•')-0x1));const _0x43caf9='UPDATE\x20'+_0x29d4e7+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x43caf9,[_0xd8dc5e,_0x20b664],function(_0x531ab4){_0x531ab4&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x531ab4['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x3818fa++;}catch(_0x16515d){const _0x535a0d='UPDATE\x20'+_0x29d4e7+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x535a0d,['',_0x3ad1f3],function(_0x25b00a){_0x25b00a&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x25b00a['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x16515d);break;}}_0x9abc55&&_0x9abc55();}await _0x2a5d1b['click']();}catch(_0x4ad919){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x4ad919);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x93d8aa,_0x3c271d)=>{const _0x3580d8='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x3580d8,[],(_0x213c54,_0x9fb8b1)=>{_0x213c54?_0x3c271d(_0x213c54):_0x93d8aa(_0x9fb8b1);});});});const sqlGet=(_0x3eb494,_0x34a60c,_0x339813=[])=>new Promise((_0x251afb,_0x3fd61b)=>_0x3eb494['get'](_0x34a60c,_0x339813,(_0x31f2e3,_0x1cd661)=>_0x31f2e3?_0x3fd61b(_0x31f2e3):_0x251afb(_0x1cd661))),sqlAll=(_0x18aa88,_0x2dc262,_0x2f632c=[])=>new Promise((_0x40e94a,_0x31541c)=>_0x18aa88['all'](_0x2dc262,_0x2f632c,(_0x18ac4f,_0x54d281)=>_0x18ac4f?_0x31541c(_0x18ac4f):_0x40e94a(_0x54d281)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x1426e3=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x1a5184=await Promise['all'](_0x1426e3['map'](async _0x170669=>{const _0x8d1b30=[];if(!_0x170669['list_id'])_0x8d1b30['push']('Liste');if(!_0x170669['zeitabstand'])_0x8d1b30['push']('Zeitabstand');if(!_0x170669['account'])_0x8d1b30['push']('Instagram\x20Account');if(_0x170669['account'])try{const _0x9f4174=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x170669['account']]);if(!_0x9f4174)_0x8d1b30['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x167097=_0x9f4174['cookie']&&_0x9f4174['cookie']['trim']()!==''&&_0x9f4174['cookie']['trim']()!=='[]';if(!_0x167097)_0x8d1b30['push']('Instagram\x20Login');}}catch(_0x34aa6f){console['error']('Account-Prüfung\x20SQL-Fehler:',_0x34aa6f['message']),_0x8d1b30['push']('Instagram\x20Account');}let _0x2f188f='N/A',_0x37c2ea='N/A';if(!_0x8d1b30['includes']('Liste')){try{const _0x188b32=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x170669['list_id']);_0x2f188f=_0x188b32?.['lead_count']??0x0;}catch(_0x56196a){if(/no such table/i['test'](_0x56196a['message']))_0x8d1b30['push']('Liste\x20nicht\x20vorhanden');}try{const _0x193846=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x170669['list_id']]);_0x37c2ea=_0x193846?.['contacted_count']??0x0;}catch(_0x17952d){}}return{'campaign_name':_0x170669['campaign_name'],'lead_count':_0x2f188f,'contacted_count':_0x37c2ea,'status':_0x8d1b30['length']===0x0?'Positiv':'Fehler:\x20'+_0x8d1b30['join'](',\x20')};}));return{'status':'success','campaigns':_0x1a5184};}catch(_0x32e0b6){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x32e0b6['message']),{'status':'error','message':_0x32e0b6['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x583768,_0x292f04)=>{return new Promise((_0x1435dc,_0x11edc8)=>{const _0x10137e='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x10137e,[_0x292f04],(_0x1705d3,_0x29750a)=>{_0x1705d3?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x1705d3),_0x11edc8(_0x1705d3)):(console['log']('ROWS'),console['log'](_0x29750a),debugDatabaseContents(),_0x1435dc(_0x29750a));});});});const showTableContents=_0x1b6600=>{return new Promise((_0x5d6a2c,_0x48565b)=>{const _0x37d7a7='SELECT\x20*\x20FROM\x20'+_0x1b6600+';';campaignDB['all'](_0x37d7a7,(_0x4d3268,_0x40c4cb)=>{_0x4d3268?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x1b6600+':',_0x4d3268),_0x48565b(_0x4d3268)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x1b6600+':',_0x40c4cb),_0x5d6a2c({'status':'success','message':_0x40c4cb}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x3d0dc5){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x3d0dc5);}}ipcMain['handle']('create-campaign',async(_0x34425b,_0x3b3f08)=>{return new Promise((_0x49c9f9,_0x158a6a)=>{const _0x553063='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x553063,[String(_0x3b3f08)],function(_0x27223e){_0x27223e?_0x158a6a(_0x27223e):_0x49c9f9({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x6874d8,_0x277599)=>{return new Promise((_0xaf7221,_0x4ef1fe)=>{const _0x1452bc='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x1452bc,[_0x277599],function(_0x2ace62){_0x2ace62?_0x4ef1fe(_0x2ace62):_0xaf7221({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x12537f,_0x35abb3,_0x3936cf,_0x53ae84,_0x1c6508,_0x40bb28,_0x1769fb,_0x2b09b8,_0xbb9d71,_0x212384)=>{const _0xdf40c4=await createMessageID(_0x1c6508);return new Promise((_0x24a976,_0x631a83)=>{console['log']('ZEITABSTAND:\x20'+_0x53ae84);if(!_0x35abb3||!_0x3936cf||_0x53ae84===undefined||_0x53ae84===null||_0x53ae84===''||!_0xdf40c4||!_0x40bb28)return _0x631a83({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0xdf40c4);const _0x2ee2e0='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x2ee2e0,[_0x3936cf,_0x53ae84,_0xdf40c4,_0x40bb28,_0x1769fb,_0x2b09b8,_0xbb9d71,_0x212384,_0x35abb3],function(_0x28524e){if(_0x28524e)_0x631a83({'status':'error','message':_0x28524e['message']});else this['changes']===0x0?_0x631a83({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x24a976({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x56c78a,_0x55b654,_0x15065f,_0x47f79f,_0x24f8f8)=>{return new Promise((_0x32039f,_0x283b8e)=>{const _0x4c78f7='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x4c78f7,[_0x55b654,_0x15065f,_0x47f79f,_0x24f8f8],function(_0x1dc5cc){return _0x1dc5cc?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x1dc5cc['message']),_0x283b8e('insert-dm-response',{'success':![],'message':_0x1dc5cc['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x32039f('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x23eb47=>{return new Promise((_0x18bf18,_0x2ec31f)=>{const _0x3ab3c1='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x3ab3c1,[_0x23eb47],(_0x1074d6,_0x422fdb)=>{if(_0x1074d6)_0x2ec31f({'status':'error','message':_0x1074d6['message']});else{if(_0x422fdb)_0x18bf18(_0x422fdb['message_id']);else{const _0x37a47d='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x37a47d,[_0x23eb47],function(_0x45dcc7){_0x45dcc7?_0x2ec31f({'status':'error','message':_0x45dcc7['message']}):_0x18bf18(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x53b8d5,_0x355f2a)=>{return new Promise((_0x5c252b,_0x4ed8b2)=>{const _0x4f000e='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x355f2a;db['get'](_0x4f000e,(_0x13289d,_0x3c0778)=>{_0x13289d?_0x4ed8b2({'status':'error','message':_0x13289d['message']}):_0x5c252b({'status':'success','count':_0x3c0778['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x1461c5,_0x15cb1e){try{const _0x839e8a=await new Promise((_0x448e01,_0x78da85)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x15cb1e],(_0x4a9425,_0x3c312a)=>{if(_0x4a9425)_0x78da85(_0x4a9425);else{if(_0x3c312a['length']>0x0){let _0x55ca69=JSON['parse'](_0x3c312a[0x0]['cookie']);console['log'](_0x55ca69),_0x448e01(_0x55ca69);}else _0x78da85(new Error('User\x20with\x20username\x20'+_0x15cb1e+'\x20does\x20not\x20exist.'));}});});await _0x1461c5['setCookie'](..._0x839e8a),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x3ad798){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3ad798);}}async function saveCookiesForUser(_0x99140d,_0x4b2876){try{const _0x35add9=await _0x99140d['cookies']();if(!_0x35add9||_0x35add9['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x4b2876);const _0x11848e=JSON['stringify'](_0x35add9);if(_0x11848e['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x4b2876);return new Promise((_0x587f48,_0x1a457d)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x4b2876],(_0x1e414c,_0x122aea)=>{if(_0x1e414c)return console['error']('Error\x20checking\x20user\x20existence:',_0x1e414c),_0x1a457d(_0x1e414c);if(_0x122aea){const _0x507043=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x507043['run'](_0x11848e,_0x4b2876,function(_0x24702a){return _0x24702a?(console['error']('Error\x20updating\x20cookies:',_0x24702a),_0x1a457d(_0x24702a)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x4b2876),_0x587f48());});}else{const _0x219ef0=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x219ef0['run'](_0x4b2876,_0x11848e,function(_0x150fb0){return _0x150fb0?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x150fb0),_0x1a457d(_0x150fb0)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x4b2876),_0x587f48());});}});});}catch(_0x4783e8){console['error']('Error\x20fetching\x20cookies:',_0x4783e8);throw _0x4783e8;}}async function createUserIfNotExists(_0x4a5813){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x4a5813],(_0x14f589,_0x54a3be)=>{if(_0x14f589){console['error']('Error\x20checking\x20user\x20existence:',_0x14f589);throw _0x14f589;}else{if(!_0x54a3be){const _0x3e2215=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x3e2215['run'](_0x4a5813,function(_0x49222d){_0x49222d?console['error']('Error\x20inserting\x20new\x20user:',_0x49222d):console['log']('New\x20user\x20created:',_0x4a5813);});}else console['log']('User\x20already\x20exists:',_0x4a5813);}});}catch(_0xe24176){console['error']('Error\x20creating\x20user:',_0xe24176);throw _0xe24176;}}ipcMain['handle']('create-relation',async(_0x2b5eb5,_0x1efabb)=>{return new Promise((_0x11bb44,_0x4da39a)=>{const _0x20e34d='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x1efabb+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x20e34d,function(_0x1274b3){_0x1274b3?_0x4da39a(_0x1274b3):_0x11bb44({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x1862ad,_0x1f8b22)=>{return console['log']('droping\x20table'+_0x1f8b22),new Promise((_0x3b26a3,_0x166abc)=>{const _0x44b0a8='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x1f8b22;console['log']('droping\x20table'+_0x1f8b22),db['run'](_0x44b0a8,function(_0x48a2fa){_0x48a2fa?_0x166abc(_0x48a2fa):_0x3b26a3({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x2bc8ea=>{return new Promise((_0x181543,_0x4ca340)=>{const _0x16e131='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x16e131,[],(_0x27e7f8,_0xbc6a16)=>{_0x27e7f8?_0x4ca340(_0x27e7f8):_0x181543(_0xbc6a16['map'](_0x31b9b1=>_0x31b9b1['name']));});});}),ipcMain['handle']('add-user',async(_0x5a2851,_0x5bfee,_0x3ae36a)=>{return new Promise(_0x44ba9c=>{const _0x3ed153=db['prepare']('INSERT\x20INTO\x20'+_0x3ae36a+'\x20(username)\x20VALUES\x20(?)');_0x3ed153['run'](_0x5bfee,function(_0x5bceac){_0x5bceac?console['log']('error\x20in\x20add-user:'+_0x5bceac):_0x44ba9c({'status':'success','id':this['lastID']});}),_0x3ed153['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x390da2,_0x56a51c)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x41d71e,_0x5629e3)=>{if(_0x41d71e)_0x56a51c(_0x41d71e);else{_0x390da2({'status':'success','users':_0x5629e3});for(_0x5629e3 of _0x5629e3){console['log'](_0x5629e3['username']);}}});});}),ipcMain['handle']('get-data',async(_0x16efa1,_0x2f23a5)=>{return new Promise((_0x539ac5,_0x59a0fe)=>{const _0x4df306='SELECT\x20*\x20FROM\x20'+_0x2f23a5;console['log'](_0x4df306),db['all'](_0x4df306,[],(_0x37d6fa,_0x13cc1d)=>{_0x37d6fa?_0x59a0fe(_0x37d6fa):_0x539ac5(_0x13cc1d);});});}),ipcMain['handle']('get-accounts',async _0x2ee2c1=>{return new Promise((_0x4f14c9,_0x2f2df1)=>{const _0x3fee15='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x3fee15),igaccountsDB['all'](_0x3fee15,[],(_0x31d02c,_0x10fde7)=>{_0x31d02c?_0x2f2df1(_0x31d02c):_0x4f14c9(_0x10fde7);});});}),ipcMain['handle']('get-targets',async(_0x4ddf4f,_0x2d3a13)=>{return getTargetProfiles(_0x2d3a13);}),ipcMain['handle']('delete-user',async(_0x208053,_0x3cab51,_0xcff0e8)=>{return new Promise((_0x159970,_0x3507d0)=>{const _0x5062a2=db['prepare']('DELETE\x20FROM\x20'+_0xcff0e8+'\x20WHERE\x20username\x20=\x20?');_0x5062a2['run'](_0x3cab51,function(_0x4ab202){_0x4ab202?_0x3507d0(_0x4ab202):_0x159970({'status':'success','changes':this['changes']});}),_0x5062a2['finalize']();});}),ipcMain['handle']('delete-account',async(_0x5a1dba,_0x5f3726)=>{const _0xb649d=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0xb649d['run'](_0x5f3726,function(_0x3b39d7){_0x3b39d7&&console['log'](_0x3b39d7);}),_0xb649d['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x23a4fa,_0x2963ed)=>{const _0x4b353c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x4b353c,[],(_0x2611cd,_0xcafe19)=>{_0x2611cd?_0x2963ed({'status':'error','message':_0x2611cd['message']}):_0x23a4fa({'status':'success','contactedCount':_0xcafe19['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x45d05d,_0x3ac1a2)=>{const _0x530bbd='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x530bbd,[],(_0x42e1e5,_0xf04c1e)=>{_0x42e1e5?_0x3ac1a2({'status':'error','message':_0x42e1e5['message']}):_0x45d05d({'status':'success','contactedCount':_0xf04c1e['contactedCount']});});});});function exportDatabase(_0x36ff97){return new Promise((_0x219a68,_0xa19a08)=>{const _0x16ead0='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x36ff97+'\x0a\x20\x20\x20\x20';db['all'](_0x16ead0,[],async(_0x5ccf28,_0x207ca0)=>{if(_0x5ccf28){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x5ccf28['message']),_0xa19a08(_0x5ccf28);return;}if(!_0x207ca0||_0x207ca0['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x219a68();return;}const _0x59aeaa=XLSX['utils']['json_to_sheet'](_0x207ca0),_0x5df65e=XLSX['utils']['sheet_to_csv'](_0x59aeaa);try{const {canceled:_0x3ce73a,filePath:_0x228f26}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x36ff97+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x3ce73a||!_0x228f26){console['log']('Speichern\x20abgebrochen.'),_0x219a68();return;}fs['writeFile'](_0x228f26,_0x5df65e,'utf8',_0x223bc5=>{_0x223bc5?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x223bc5['message']),_0xa19a08(_0x223bc5)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x228f26),_0x219a68());});}catch(_0x55a1dd){console['error']('Fehler\x20im\x20Speicherdialog:',_0x55a1dd),_0xa19a08(_0x55a1dd);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x3b2162,_0x4ceb7d)=>{shell['openExternal'](_0x4ceb7d);});