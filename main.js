const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x52a98f,_0x2a15f8){try{const _0x1e8dae=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x2a15f8},'body':JSON['stringify']({'clearname':_0x52a98f})});if(!_0x1e8dae['ok']){const _0x554db1=await _0x1e8dae['text']();throw new Error(_0x1e8dae['status']+':\x20'+_0x554db1);}const _0xe7df2d=await _0x1e8dae['json']();return _0xe7df2d;}catch(_0x1b3f95){console['error']('Error\x20in\x20extractFirstName:',_0x1b3f95);throw _0x1b3f95;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x530738=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x530738['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x530738['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x39445b){var _0x9234eb=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x54c3bd){console['log']('window\x20id:'+_0x54c3bd['id']),_0x54c3bd['id']>0x1&&(_0x9234eb=!![]);}),console['log']('child\x20opened\x20='+_0x9234eb);if(!_0x9234eb){const _0x4031fe=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x4031fe['loadFile'](_0x39445b['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x1f10a4=require('fs'),_0x4512af=path['join'](app['getPath']('userData'),'data'),_0x15411e=['campaign.db','crm.db','igaccounts.db'],_0x41633f=[];try{_0x1f10a4['mkdirSync'](_0x4512af,{'recursive':!![]});for(const _0x1a45b7 of _0x15411e){const _0x1f054e=path['join'](process['resourcesPath'],'app','build','data',_0x1a45b7),_0x141da9=path['join'](_0x4512af,_0x1a45b7);!_0x1f10a4['existsSync'](_0x141da9)?(_0x1f10a4['copyFileSync'](_0x1f054e,_0x141da9),console['log']('[InitDB]\x20Kopiert\x20'+_0x1a45b7+'\x20nach:\x20'+_0x141da9)):console['log']('[InitDB]\x20'+_0x1a45b7+'\x20existiert\x20bereits:\x20'+_0x141da9),_0x41633f['push'](_0x141da9);}}catch(_0x3d5a5e){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x3d5a5e);}return _0x41633f;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x50080f,AppUpdate:_0x5615bc}=require('electron-updater');_0x50080f['autoDownload']=![],_0x50080f['autoInstallOnAppQuit']=!![],_0x50080f['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x50080f['on']('update-available',_0x2327c0=>{console['log']('Update\x20verfügbar:',_0x2327c0),_0x50080f['downloadUpdate']();}),_0x50080f['on']('update-downloaded',_0x3f2d98=>{console['log']('Update\x20heruntergeladen:',_0x3f2d98),_0x50080f['quitAndInstall']();}),_0x50080f['on']('error',_0x404aef=>{console['error']('Fehler\x20beim\x20Updaten:',_0x404aef);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x1b9073,AppUpdate:_0x1d91ac}=require('electron-updater');_0x1b9073['autoDownload']=![],_0x1b9073['autoInstallOnAppQuit']=!![],_0x1b9073['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x1b9073['on']('update-available',_0x3c0ea4=>{console['log']('Update\x20verfügbar:',_0x3c0ea4),_0x1b9073['downloadUpdate']();}),_0x1b9073['on']('update-downloaded',_0x5288d0=>{console['log']('Update\x20heruntergeladen:',_0x5288d0),console['log']('Neustarten\x20zum\x20Updaten');}),_0x1b9073['on']('error',_0x54f57c=>{console['error']('Fehler\x20beim\x20Updaten:',_0x54f57c);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x51b29='',_0x26304a=null;if(process['platform']==='darwin')_0x51b29=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x51b29=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x51b29}),_0x26304a=await browser_login['newPage'](),_0x26304a['setDefaultNavigationTimeout'](0x1d4c),_0x26304a['setDefaultTimeout'](0x1d4c),await _0x26304a['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x26304a;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x15f514=0x1,_0x288d53=0x0){let _0x186f77='',_0xbaf45=null;const _0x265aae=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x186f77=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x186f77=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x15f514===0x0&&!pageStack[_0x288d53])return browser=await puppeteer['launch']({'headless':_0x265aae,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x186f77}),_0xbaf45=await browser['newPage'](),_0xbaf45['setDefaultNavigationTimeout'](0x1d4c),_0xbaf45['setDefaultTimeout'](0x1d4c),await _0xbaf45['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x288d53]=_0xbaf45,_0xbaf45;return(browser===null||pageStack[_0x288d53]===null||pageStack[_0x288d53]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x265aae,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x186f77})),(pageStack[_0x288d53]===null||pageStack[_0x288d53]['isClosed']())&&(_0xbaf45=await browser['newPage'](),_0xbaf45['setDefaultNavigationTimeout'](0x1d4c),_0xbaf45['setDefaultTimeout'](0x1d4c),await _0xbaf45['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x288d53]=_0xbaf45),pageStack[_0x288d53];}ipcMain['on']('login',async(_0x43dd03,_0x4f4dec)=>{const _0x454974=await getBrowserPageLogin();await _0x454974['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x454974,_0x4f4dec),ipcMain['on']('setLoginCookies',async(_0x294001,_0x55e8a0)=>{try{await set_login_cookies(_0x454974,_0x55e8a0);}catch(_0x2614e7){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x2614e7);}});}),ipcMain['on']('export-relation',async(_0x2c3d45,_0xfa870b)=>{try{await exportDatabase(_0xfa870b),_0x2c3d45['reply']('export-relation-response',{'success':!![]});}catch(_0x5e0637){console['error'](_0x5e0637),_0x2c3d45['reply']('export-relation-response',{'success':![],'message':_0x5e0637['message']});}}),ipcMain['handle']('sendMessage',async(_0xc61ed4,_0x514a85,_0x3c01e4,_0x2cd050,_0x381c18,_0x42409d,_0x38ab7b,_0x1305c4,_0x702107,_0x5c72b2,_0x445cc4)=>{isStopping=![];let _0x52cbb3=null;return _0x38ab7b?_0x52cbb3=await getBrowserPage(_0x381c18,_0x1305c4):_0x52cbb3=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x514a85),send_message(_0x52cbb3,_0x514a85,_0x3c01e4,_0x2cd050,_0x381c18,_0x42409d,_0x702107,_0x5c72b2,_0x445cc4);}),ipcMain['handle']('stop-action',async(_0xa1bfd0,_0x2ce95a)=>{isStopping=!![];const _0x4066dc=await getBrowserPage(0x1,_0x2ce95a);await _0x4066dc['close']();}),ipcMain['handle']('fetch_followers',async(_0x3a630a,_0x67f104,_0x7ad8c7,_0xefc143,_0x2ff58f,_0x394418)=>{isStopping=![];const _0x333764=await getBrowserPage();return fetch_followers_from_account(_0x3a630a,_0x333764,_0x67f104,_0x7ad8c7,_0xefc143,_0x2ff58f,_0x394418);}),ipcMain['handle']('get-account-details',async(_0x4d417d,_0x573057,_0x438288,_0x329518)=>{isStopping=![];const _0x4a4dfc=await getBrowserPage();return fetch_account_details(_0x4a4dfc,_0x573057,_0x438288,_0x329518);}),ipcMain['handle']('fetch_likes',async(_0x4a6ba,_0x3a24f7,_0x4896a2,_0x5cf512,_0x4d1c5f,_0x2a15a3)=>{isStopping=![];const _0x19836b=await getBrowserPage();return fetch_likers_from_post(_0x4a6ba,_0x19836b,_0x3a24f7,_0x4896a2,_0x5cf512,_0x4d1c5f,_0x2a15a3);}),ipcMain['handle']('fetch_comments',async(_0x38583c,_0x551777,_0x3013a5,_0x393ce4,_0x333cfe,_0x12f935)=>{isStopping=![];const _0x5aa475=await getBrowserPage();return fetch_comments_from_post(_0x38583c,_0x5aa475,_0x551777,_0x3013a5,_0x393ce4,_0x333cfe,_0x12f935);});async function updateAppSilent(){const {spawn:_0x4b47e1}=require('child_process'),_0x116bdf=require('path'),_0x4ebc76=require('electron-log');return _0x4ebc76['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2b58ed,_0x11e1fa)=>{const {updateElectronApp:_0x1c07a1,UpdateSourceType:_0x3214ba}=require('update-electron-app');_0x1c07a1({'updateSource':{'type':_0x3214ba['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x4ebc76}),_0x2b58ed('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x52554f,_0xb30934)=>{doFullElectronUpdateSilent(),_0x52554f('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x5aa3f7}=require('child_process'),_0x4acd31=require('path'),_0x288a60=require('electron-log');return _0x288a60['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x138c0e,_0x575d71)=>{const {updateElectronApp:_0x859c0d,UpdateSourceType:_0x12ff1f}=require('update-electron-app');_0x859c0d({'updateSource':{'type':_0x12ff1f['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x288a60}),_0x138c0e('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x552f4e,_0x3f671d)=>{doFullElectronUpdate(),_0x552f4e('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x433fe9,_0x5065de)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x433fe9('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x52aace=path['join'](__dirname,'mac-updater-intern.sh'),_0x8c93af=spawn('/bin/bash',[_0x52aace],{'detached':!![],'stdio':'ignore'});_0x8c93af['unref'](),setTimeout(()=>{_0x433fe9('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x5065de(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x2a1a06=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x48f94c,_0x461572)=>{console['log']('Update\x20Silent:\x20'+_0x461572);if(_0x461572){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x8c648c,_0x5bf095){return Math['random']()*(_0x5bf095-_0x8c648c+0x1)+_0x8c648c;}function delay(_0x3e1d1e,_0x39c922){let _0x40b549=getRnd(_0x3e1d1e,_0x39c922);return new Promise(function(_0x4d37e3){setTimeout(_0x4d37e3,_0x40b549);});}async function scroll(_0x343bb9,_0x442058,_0x463425=0x2,_0x5cd317){const _0x3867a6=await _0x343bb9['waitForSelector'](_0x442058);for(let _0x45d1f1=0x0;_0x45d1f1<_0x463425;_0x45d1f1++){console['log']('Scrolling\x20'+_0x45d1f1),await _0x343bb9['evaluate'](_0x5b52c6=>{const _0x1043c1=document['querySelector'](_0x5b52c6);_0x1043c1&&_0x1043c1['scrollBy'](0x0,0x190);},_0x442058),await delay(0x320,0x5dc),_0x5cd317();}}async function saveCookies(_0x4c654b){let _0x1648dd=await _0x4c654b['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x1648dd,null,0x2));}async function notificationClear(_0x46cb1f){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x46cb1f['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x46cb1f['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x7c68e0){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x7c68e0);}}async function getTargetProfiles(_0x126859){return new Promise((_0x4c29c5,_0x4ba083)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x126859,(_0x3a265e,_0x3cb357)=>{_0x3a265e?_0x4ba083(_0x3a265e):_0x4c29c5(_0x3cb357);});});}async function login_legacy(_0x168487,_0x440bf1,_0x3cfaa5){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x168487,_0x440bf1),await createUserIfNotExists(_0x440bf1,_0x3cfaa5);}catch(_0x1a7204){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1a7204);}try{await _0x168487['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x168487['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x168487['click']('button._a9--._ap36._a9_0');}catch(_0xa08046){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x168487['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x168487['type']('input[name=\x27username\x27]',_0x440bf1,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x168487['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x168487['type']('input[name=\x27password\x27]',_0x3cfaa5,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x168487['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x168487['click']('button[type=\x27submit\x27]');}catch(_0x43eccc){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x168487),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x168487,_0x440bf1);}catch(_0xad82fa){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xad82fa);}}catch(_0x4ba9c1){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x4ba9c1);}}async function login(_0x36aeac,_0x3aaaab){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x36aeac,_0x3aaaab),await createUserIfNotExists(_0x3aaaab);}catch(_0x2f916c){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2f916c);}try{await _0x36aeac['goto']('https://www.instagram.com/accounts/login/');}catch(_0x9c3b9){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x9c3b9);}}async function set_login_cookies(_0x3e0b64,_0x295644){try{await saveCookiesForUser(_0x3e0b64,_0x295644);}catch(_0x33e695){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x33e695);}}async function waitForXPath(_0xf002d0,_0x560913,_0x1c32a2={}){return await _0xf002d0['waitForFunction'](_0x283379=>{return document['evaluate'](_0x283379,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x1c32a2,_0x560913),_0xf002d0['evaluateHandle'](_0x58a64e=>document['evaluate'](_0x58a64e,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x560913);}async function waitForSelectorWithFallbacks(_0x3624ac,_0x326049,_0x44c930={}){!Array['isArray'](_0x326049)&&(_0x326049=[_0x326049]);for(let _0x3f5603=0x0;_0x3f5603<_0x326049['length'];_0x3f5603++){const _0x199493=_0x326049[_0x3f5603],_0x8ca731=_0x199493['startsWith']('//')||_0x199493['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x8ca731?'XPath':'Selector')+'\x20'+(_0x3f5603+0x1)+'/'+_0x326049['length']+':\x20'+_0x199493['substring'](0x0,0x32)+'...');const _0x3074c1=_0x3f5603===0x0?_0x44c930['timeout']||0x1388:0x7d0;let _0x3e1682;if(_0x8ca731){const _0x464678=await waitForXPath(_0x3624ac,_0x199493,{..._0x44c930,'timeout':_0x3074c1});if(!_0x464678)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x3e1682=_0x464678;}else _0x3e1682=await _0x3624ac['waitForSelector'](_0x199493,{..._0x44c930,'timeout':_0x3074c1});return console['log']((_0x8ca731?'XPath':'Selector')+'\x20'+(_0x3f5603+0x1)+'\x20gefunden!'),_0x3e1682;}catch(_0x1499de){console['log']((_0x8ca731?'XPath':'Selector')+'\x20'+(_0x3f5603+0x1)+'\x20nicht\x20gefunden:\x20'+_0x1499de['message']);if(_0x3f5603===_0x326049['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x326049['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x1499de['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function send_message(_0xb381d1,_0x403f0c,_0x2bf39d,_0x1c1739,_0x1e9350,_0x1de170,_0x2623de,_0x32d388,_0x1dcbd7){return new Promise(async(_0x7a01f0,_0x43e651)=>{_0x1de170=_0x1de170['split'](';'),console['log'](_0x1de170[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x1e9350);try{await setCookiesForUser(_0xb381d1,_0x1de170[0x0]);}catch(_0x506782){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x506782),_0x43e651({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x506782});return;}try{await _0xb381d1['goto']('https://www.instagram.com/'+_0x403f0c+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0xb381d1);}catch(_0x33f663){_0x43e651({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x33f663});return;}console['log']('UserSkip:\x20'+_0x2623de);if(_0x2623de==0x1)try{const _0x27fac=await _0xb381d1['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x35687a=>_0x35687a['textContent']['trim']());console['log'](_0x27fac);if(_0x27fac==='Following'||_0x27fac==='Folge\x20ich')return _0x7a01f0({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x24ccf3){}try{await _0xb381d1['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0xb381d1['click'](K_DIRECT_MSG_BUTTON);}catch(_0x7f45ba){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x7f45ba);try{await _0xb381d1['waitForSelector'](K_OPTIONS_BUTTON),await _0xb381d1['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x3d9bd4=await waitForXPath(_0xb381d1,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x3d9bd4['click']();}catch(_0x262329){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x262329),_0x7a01f0({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0xb381d1);}catch(_0x4a1708){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x4a1708);}try{const _0x23eb4f=await _0xb381d1['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x32d388){const _0x47f391=await _0xb381d1['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x47f391)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x403f0c),_0x7a01f0({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x5eecab=await _0xb381d1['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x5eecab),_0x1c1739=_0x1c1739['replace']('{USERNAME}',_0x403f0c);let _0x98a31b;if(_0x1c1739['includes']('{NAME}')||_0x1c1739['includes']('{name}'))try{const _0x762f6a=await extractFirstName(_0x5eecab,_0x1dcbd7);console['log']('Response\x20Clearname\x20valid:\x20'+_0x762f6a['valid']),_0x762f6a['valid']?(_0x1c1739=_0x1c1739['replaceAll'](/{NAME}|{name}/g,_0x762f6a['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x762f6a['name']),_0x98a31b=_0x762f6a['name']):(_0x1c1739=_0x1c1739['replaceAll'](/ ?({NAME}|{name})/g,''),_0x98a31b='UNKNOWN_NAME');}catch(_0x1efdc6){console['log'](_0x1efdc6['message']),_0x98a31b=_0x1efdc6['message'];let _0x4e751f=_0x5eecab['replace'](/[^\p{L}\s]/gu,''),_0x440f60=_0x4e751f['split']('\x20')[0x0];_0x440f60['length']>0x2&&!_0x440f60['includes']('Instagram')?_0x1c1739=_0x1c1739['replaceAll'](/{NAME}|{name}/g,_0x440f60):_0x1c1739=_0x1c1739['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x23eb4f['type'](_0x1c1739,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x4e04a5=await waitForSelectorWithFallbacks(_0xb381d1,K_SEND_MSG_BUTTON);await _0x4e04a5['click'](),await delay(0x320,0x3e8),_0x7a01f0({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x5eecab,'extracted_clearname':_0x98a31b});}catch(_0x387f59){try{await _0xb381d1['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x2de3cb=await _0xb381d1['evaluate'](_0x4dd0d0=>{return document['querySelector'](_0x4dd0d0)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x2de3cb),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x387f59),_0x7a01f0({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x403f0c+'\x20überspringen.'});}catch(_0xbff171){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0xbff171),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x403f0c+'\x20:\x20'+_0xbff171),_0x7a01f0({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x403f0c+'\x20:\x20'+_0xbff171});}}});}function handle_fail(_0x3f6ef3){if(isStopping)return new Promise(_0x4e54bb=>{_0x4e54bb('Scraper\x20gestoppt.');});else{let _0x1fac6d='';switch(_0x3f6ef3){case 0x0:_0x1fac6d='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x1fac6d='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x1fac6d='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x1fac6d='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x1a1802,_0x427dd0)=>{_0x427dd0(_0x1fac6d);});}}async function fetch_account_details(_0x3c1161,_0x37cdc1,_0x396083,_0x33afd7){try{await setCookiesForUser(_0x3c1161,_0x396083['username']);}catch(_0x1d7cec){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1d7cec);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1d7cec);return handle_fail(0x0);}_0x3c1161['setDefaultNavigationTimeout'](0x7530),await _0x3c1161['goto']('https://www.instagram.com/'+_0x37cdc1+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x3c1161);const _0x4ad4cc=await _0x3c1161['evaluate'](()=>{const _0x5886f6=document['querySelector']('meta[property=\x22og:image\x22]');return _0x5886f6?_0x5886f6['getAttribute']('content'):null;});await _0x3c1161['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x31b098=await _0x3c1161['evaluate'](()=>{const _0x350f92=document['querySelector']('meta[name=\x22description\x22]');if(!_0x350f92)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x138065=_0x350f92['getAttribute']('content');if(!_0x138065)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x138065);const _0x3e5b9f=/\s*[–-]\s*/,_0x1253bb=_0x138065['split'](_0x3e5b9f);if(_0x1253bb['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x1a7131=_0x1253bb[0x0],_0x149bb1=_0x1253bb[0x1],_0x1b3143=_0x1a7131['split'](',\x20');if(_0x1b3143['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x371a97=_0x1b3143[0x0]['split']('\x20')[0x0],_0x6cc3c0=_0x1b3143[0x1]['split']('\x20')[0x0],_0x38ef3c=_0x1b3143[0x2]['split']('\x20')[0x0];let _0x7f7524='',_0x5b5b13='';const _0x1e29ce='\x20on\x20Instagram:\x20',_0x46f8cb=_0x149bb1['split'](_0x1e29ce);return _0x7f7524=_0x46f8cb[0x0]['trim'](),_0x7f7524=_0x7f7524['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x46f8cb['length']>0x1&&(_0x5b5b13=_0x46f8cb[0x1]['trim'](),_0x5b5b13['startsWith']('\x22')&&_0x5b5b13['endsWith']('\x22')&&(_0x5b5b13=_0x5b5b13['substring'](0x1,_0x5b5b13['length']-0x1)['trim']()),_0x5b5b13=_0x5b5b13['replace'](/&quot;/g,'')['trim']()),{'followers':_0x371a97,'following':_0x6cc3c0,'posts':_0x38ef3c,'nameText':_0x7f7524,'bio':_0x5b5b13};});console['log']('Extracted\x20profile\x20data:',_0x31b098);const _0x225bf4=_0x31b098['nameText'],_0x3db961=_0x4ad4cc,_0x17cd0e=_0x31b098['bio'],_0x42fc40=_0x31b098['followers'],_0x994bac=_0x31b098['following'],_0x20ebe1=_0x31b098['posts'],_0x17ac2a=![],_0x3c9305=![],_0x235fa3=![],_0x16e7eb='\x0a\x20\x20INSERT\x20INTO\x20'+_0x33afd7+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x16e7eb,[_0x37cdc1,_0x225bf4,_0x3db961,_0x17cd0e,_0x42fc40,_0x994bac,_0x20ebe1,_0x17ac2a,_0x3c9305,_0x235fa3],function(_0x45e95b){_0x45e95b?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x45e95b['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x3346dc,_0x435c65,_0x59420e,_0x14d598,_0x3d3662,_0x55d64d,_0x1f57fc){let _0x302804=0x4,_0x16f90d=0x0,_0x1acc89=0x0;try{await setCookiesForUser(_0x435c65,_0x55d64d['username']);}catch(_0x4be5b9){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x4be5b9);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x4be5b9);return handle_fail(0x0);}let _0xe6015c=0x0;try{await _0x435c65['goto']('https://www.instagram.com/'+_0x59420e+'/'),await notificationClear(_0x435c65);try{if(_0x14d598<=0x0){const _0x559ae3=await _0x435c65['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x5835e2=await _0x435c65['evaluate'](_0x356988=>_0x356988['innerHTML'],_0x559ae3);_0xe6015c=Math['ceil'](_0x5835e2/0x4);}else _0xe6015c=Math['ceil'](_0x14d598/0x4);_0x302804+=_0xe6015c,_0x1acc89=Math['round'](++_0x16f90d/_0x302804*0x64),_0x3346dc['sender']['send']('fetch-progress',_0x1acc89,!![]);let _0x196790=await _0x435c65['waitForSelector']('a[href=\x22/'+_0x59420e+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x196790['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x59420e+'\x20gesichtet'),_0x1acc89=Math['round'](++_0x16f90d/_0x302804*0x64),_0x3346dc['sender']['send']('fetch-progress',_0x1acc89,!![]);}catch(_0x140a60){console['log']('Follower\x20Liste\x20von\x20'+_0x59420e+'\x20nicht\x20gefunden:'+_0x140a60);throw new Error('Follower\x20Liste\x20von\x20'+_0x59420e+'\x20nicht\x20gefunden:'+_0x140a60);return handle_fail(0x0);}}catch(_0xb8dd39){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xb8dd39);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xb8dd39);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0xe6015c),await scroll(_0x435c65,FOLLOWER_FENSTER,_0xe6015c,_0x51ac9f=>{_0x1acc89=Math['round'](++_0x16f90d/_0x302804*0x64),_0x3346dc['sender']['send']('fetch-progress',_0x1acc89,!![]);}),await _0x435c65['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x471928=await _0x435c65['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x2ee0f5=await _0x435c65['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x1acc89=Math['round'](++_0x16f90d/_0x302804*0x64),_0x3346dc['sender']['send']('fetch-progress',_0x1acc89,!![]);_0x14d598<=0x0&&(_0x14d598=_0x471928['length']);let _0x9e8189=[];for(let _0x2a920e=0x0;_0x2a920e<_0x471928['length']&&_0x2a920e<_0x14d598;_0x2a920e++){_0x9e8189['push'](await _0x471928[_0x2a920e]['evaluate'](_0x53d408=>_0x53d408['textContent']));const _0x4b6c33='INSERT\x20INTO\x20'+_0x3d3662+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x4b6c33,[await _0x471928[_0x2a920e]['evaluate'](_0x29985c=>_0x29985c['textContent']),await _0x2ee0f5[_0x2a920e]['evaluate'](_0x1f3ca1=>_0x1f3ca1['textContent'])],function(_0x354969){_0x354969?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3d3662+'\x27:',_0x354969['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x1acc89=Math['round'](++_0x16f90d/_0x302804*0x64),_0x3346dc['sender']['send']('fetch-progress',_0x1acc89,!![]),_0x1f57fc&&(_0x3346dc['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3346dc,_0x435c65,_0x55d64d,_0x3d3662,_0x9e8189)),new Promise(_0x310afe=>{_0x310afe('Scraping\x20finished!');});}catch(_0x18c7f2){if(_0x1f57fc)throw new Error(_0x18c7f2);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x59420e+'\x20nicht\x20gefunden:\x20'+_0x18c7f2);return handle_fail(0x0);}}async function fetch_details_from_list(_0x299182,_0x32cff4,_0x5b277d,_0x165342,_0x4e857e){let _0x12464d=0x0,_0xc92f65=0x0;for(let _0x39b042=0x0;_0x39b042<_0x4e857e['length'];_0x39b042++){console['log']('Processing\x20profile:',_0x4e857e[_0x39b042]);try{await fetch_account_details(_0x32cff4,_0x4e857e[_0x39b042],_0x5b277d,_0x165342);}catch(_0x89b718){console['error']('Detailed\x20Scraping\x20von:\x20',_0x4e857e[_0x39b042],_0x89b718);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x4e857e[_0x39b042]+'\x20'+_0x89b718);}_0xc92f65=Math['round'](++_0x12464d/_0x4e857e['length']*0x64),_0x299182['sender']['send']('fetch-progress',_0xc92f65,!![],!![]);}}async function fetch_likers_from_post(_0xe31b21,_0xe65212,_0x2e8149,_0xba826a,_0x37f2a4,_0x4205fb,_0x4e0854){let _0x5a73a1=0x4,_0x553f28=0x0,_0x4d5012=0x0;try{await setCookiesForUser(_0xe65212,_0x4205fb['username']);}catch(_0x173f05){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x173f05);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x173f05);return handle_fail(0x1);return;}_0x4d5012=Math['round'](++_0x553f28/_0x5a73a1*0x64),_0xe31b21['sender']['send']('fetch-progress',_0x4d5012,!![]);try{let _0x296255=_0x2e8149['substring'](0x0,_0x2e8149['lastIndexOf']('/')),_0x3da647=_0x296255+'/liked_by';console['log'](_0x3da647),await _0xe65212['goto'](_0x3da647),await delay(0x7d0,0xfa0),await notificationClear(_0xe65212),await delay(0xc8,0x1f4),_0x4d5012=Math['round'](++_0x553f28/_0x5a73a1*0x64),_0xe31b21['sender']['send']('fetch-progress',_0x4d5012,!![]),await _0xe65212['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x413f0b=await _0xe65212['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0xbcf05b=await _0xe65212['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x413f0b['length']);let _0x57776a=path['join'](__dirname,'/likers.csv');_0x4d5012=Math['round'](++_0x553f28/_0x5a73a1*0x64),_0xe31b21['sender']['send']('fetch-progress',_0x4d5012,!![]);_0xba826a<=0x0&&(_0xba826a=_0x413f0b['length']);try{let _0x15c1d5=[];for(let _0x11f4c5=0x0;_0x11f4c5<_0x413f0b['length']&&_0x11f4c5<_0xba826a;_0x11f4c5++){_0x15c1d5['push'](await _0x413f0b[_0x11f4c5]['evaluate'](_0x160a99=>_0x160a99['textContent']));try{const _0xeaad4a='INSERT\x20INTO\x20'+_0x37f2a4+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0xeaad4a,[await _0x413f0b[_0x11f4c5]['evaluate'](_0x473ac7=>_0x473ac7['textContent']),await _0xbcf05b[_0x11f4c5]['evaluate'](_0x1a83b0=>_0x1a83b0['textContent'])],function(_0x5edffa){_0x5edffa?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x37f2a4+'\x27:',_0x5edffa['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x265a2c){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x11f4c5+'\x20:\x20'+_0x265a2c);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x11f4c5+'\x20:\x20'+_0x265a2c);return handle_fail(0x1);}}return _0x4d5012=Math['round'](++_0x553f28/_0x5a73a1*0x64),_0xe31b21['sender']['send']('fetch-progress',_0x4d5012,!![]),_0x4e0854&&(_0xe31b21['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0xe31b21,_0xe65212,_0x4205fb,_0x37f2a4,_0x15c1d5)),new Promise(_0x586f19=>{_0x586f19('Scraping\x20finished!');});}catch(_0x30b61b){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x30b61b);return handle_fail(0x1);}}catch(_0x4370fc){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x4370fc);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x4370fc);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x4fb7dd,_0x1cfae6,_0x4b0052,_0x384858,_0x48a75c,_0x38c0fc,_0x51653c){let _0x2f127b=0x3,_0x2502ca=0x0,_0xe45bc0=0x0;try{await setCookiesForUser(_0x1cfae6,_0x38c0fc['username']);}catch(_0x1b3908){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1b3908);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1b3908);return handle_fail(0x2);}try{console['log'](_0x4b0052),await _0x1cfae6['goto'](_0x4b0052),await delay(0x7d0,0xfa0),await notificationClear(_0x1cfae6),await delay(0xc8,0x1f4);const _0x194d69=COM_COMMENTS_BOX_BODY_DIV;let _0x1ebb40;const _0xf18967=await _0x1cfae6['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x4080f0=await _0x1cfae6['evaluate'](_0x43bfe3=>_0x43bfe3['innerHTML'],_0xf18967),_0xe35c02=String(_0x4080f0)['replace'](/[^0-9]/g,''),_0x36c283=Number(_0xe35c02)/0x14;_0x384858<=0x0?_0x1ebb40=Math['ceil'](_0x36c283/0x3):_0x1ebb40=Math['ceil'](_0x384858/0x3);_0x2f127b+=_0x1ebb40,_0xe45bc0=Math['round'](++_0x2502ca/_0x2f127b*0x64),_0x4fb7dd['sender']['send']('fetch-progress',_0xe45bc0,!![]),console['log']('Auto-scrolls:\x20'+_0x1ebb40),await scroll(_0x1cfae6,_0x194d69,_0x1ebb40,_0x3ff330=>{_0xe45bc0=Math['round'](++_0x2502ca/_0x2f127b*0x64),_0x4fb7dd['sender']['send']('fetch-progress',_0xe45bc0,!![]);});try{const _0x2942f3=COM_REPLY_BUTTON_SPAN;await _0x1cfae6['waitForSelector'](_0x2942f3),await delay(0x1f4,0x320);const _0x5d405f=await _0x1cfae6['$$'](_0x2942f3);console['log'](_0x5d405f);let _0x2a9c84=_0x5d405f['length'];await delay(0xc8,0x1f4);try{for(let _0x4df502=0x0;_0x4df502<_0x2a9c84;_0x4df502++){_0x5d405f[_0x4df502]['click'](),await delay(0x320,0x5dc);}}catch(_0x3a9b9b){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3a9b9b);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3a9b9b);return handle_fail(0x2);}}catch(_0x4b0b74){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x4000f7=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x1cfae6['waitForSelector'](_0x4000f7),await delay(0x1f4,0x320),_0xe45bc0=Math['round'](++_0x2502ca/_0x2f127b*0x64),_0x4fb7dd['sender']['send']('fetch-progress',_0xe45bc0,!![]);const _0x47f87a=await _0x1cfae6['$$'](_0x4000f7);let _0x5e8698=path['join'](__dirname,'/comments.csv');_0x384858<=0x0&&(_0x384858=_0x47f87a['length']);console['log']('fetch_limit:\x20'+_0x384858),console['log']('comments_len:\x20'+_0x47f87a['length']),_0x384858++;try{let _0x1dcce5=[];for(let _0x1d1980=0x1;_0x1d1980<_0x47f87a['length']&&_0x1d1980<_0x384858;_0x1d1980++){try{_0x1dcce5['push'](await _0x47f87a[_0x1d1980]['evaluate'](_0x310cb7=>_0x310cb7['textContent']));const _0x58a5cb=await db['prepare']('INSERT\x20INTO\x20'+_0x48a75c+'\x20(username)\x20VALUES\x20(?)');await _0x58a5cb['run'](await _0x47f87a[_0x1d1980]['evaluate'](_0x5cc6cc=>_0x5cc6cc['textContent']),function(_0x22b1e1){_0x22b1e1&&console['log']('error\x20in\x20add-user:'+_0x22b1e1);}),await _0x58a5cb['finalize']();}catch(_0x1d40fa){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1d1980+'\x20:\x20'+_0x1d40fa);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1d1980+'\x20:\x20'+_0x1d40fa);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0xe45bc0=Math['round'](++_0x2502ca/_0x2f127b*0x64),_0x4fb7dd['sender']['send']('fetch-progress',_0xe45bc0,!![]),_0x4fb7dd['sender']['send']('fetch-progress',0x64,!![]),_0x51653c&&(_0x4fb7dd['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x4fb7dd,_0x1cfae6,_0x38c0fc,_0x48a75c,_0x1dcce5)),_0x4fb7dd['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x21c258=>{_0x21c258('Scraping\x20finished!');});}catch(_0x209280){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x209280);return handle_fail(0x2);}}catch(_0x4d68b9){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x4d68b9);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x4d68b9);return handle_fail(0x2);}}async function set_clearname_from_username(_0x20d3df,_0x2c8bce,_0x2b43c1=null){try{let _0x555d6a,_0x4ab498;const _0x376649='SELECT\x20username\x20FROM\x20'+_0x2c8bce+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x376649,[],(_0x19cf5c,_0x5b363f)=>{_0x19cf5c&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x19cf5c['message']),_0x5b363f['length']===0x0&&(_0x4ab498=_0x5b363f['length']),_0x555d6a=_0x5b363f['map'](_0x431428=>_0x431428['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x4ab498);if(_0x4ab498===0x0){console['log']('Leave');return;}const _0x25cb5f=await _0x20d3df['waitForSelector'](IG_SEARCH_BUTTON);await _0x25cb5f['click'](),await delay(0x4b0,0x7d0);for(let _0x22d6f2 of _0x555d6a){const _0x3b3cbb=await _0x20d3df['waitForSelector'](IG_SEARCH_INPUT);await _0x3b3cbb['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x20d3df['type'](IG_SEARCH_INPUT,_0x22d6f2,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x4fd98e=0x1;while(_0x4fd98e!=0x14){console['log']('Schleife');try{let _0x235817=IG_NAME_SPAN_PART1+_0x4fd98e+IG_USERNAME_SPAN_PART2;const _0x1c3481=await _0x20d3df['waitForSelector'](_0x235817),_0x32f3db=await _0x20d3df['evaluate'](_0x332d10=>_0x332d10['innerHTML'],_0x1c3481);await delay(0xc8,0x1f4);if(_0x32f3db==_0x22d6f2){let _0x5d0b34=IG_NAME_SPAN_PART1+_0x4fd98e+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x52b12c=await _0x20d3df['waitForSelector'](_0x5d0b34);let _0x4783c1=await _0x20d3df['evaluate'](_0x599f12=>_0x599f12['innerHTML'],_0x52b12c);const _0x38d80b=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x22a520=_0x4783c1['match'](_0x38d80b);_0x22a520?_0x4783c1=_0x22a520[0x1]['trim']():_0x4783c1=_0x4783c1['trim']();_0x4783c1['includes']('•')&&(_0x4783c1=_0x4783c1['substring'](0x0,_0x4783c1['indexOf']('•')-0x1));const _0x4c1756='UPDATE\x20'+_0x2c8bce+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x4c1756,[_0x4783c1,_0x32f3db],function(_0xa722f){_0xa722f&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0xa722f['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x4fd98e++;}catch(_0x3828d1){const _0x43f6f4='UPDATE\x20'+_0x2c8bce+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x43f6f4,['',_0x22d6f2],function(_0x20c25c){_0x20c25c&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x20c25c['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x3828d1);break;}}_0x2b43c1&&_0x2b43c1();}await _0x25cb5f['click']();}catch(_0xe03975){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0xe03975);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x168a10,_0x1c8374)=>{const _0x278b57='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x278b57,[],(_0x4e1f4a,_0x58a2a3)=>{_0x4e1f4a?_0x1c8374(_0x4e1f4a):_0x168a10(_0x58a2a3);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x20e41d,_0x221e33)=>{const _0x54c593='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x54c593,[],async(_0x17292f,_0x207c7a)=>{if(_0x17292f)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x17292f['message']),_0x221e33({'status':'error','message':_0x17292f['message']});else try{const _0x170ac1=await Promise['all'](_0x207c7a['map'](_0x350f15=>{return new Promise(_0x4241d1=>{if(!_0x350f15['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x350f15['campaign_name']),_0x4241d1({'campaign_name':_0x350f15['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x4e0d66='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x350f15['list_id'],_0x189456='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x350f15['list_id']+'\x22';db['get'](_0x4e0d66,[],(_0x152bf3,_0x5fbea6)=>{_0x152bf3?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x350f15['campaign_name']+':',_0x152bf3['message']),_0x4241d1({'campaign_name':_0x350f15['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x189456,[],(_0x1594db,_0x491997)=>{_0x1594db?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x350f15['campaign_name']+':',_0x1594db['message']),_0x4241d1({'campaign_name':_0x350f15['campaign_name'],'lead_count':_0x5fbea6?_0x5fbea6['lead_count']:0x0,'contacted_count':'N/A'})):_0x4241d1({'campaign_name':_0x350f15['campaign_name'],'lead_count':_0x5fbea6?_0x5fbea6['lead_count']:0x0,'contacted_count':_0x491997?_0x491997['contacted_count']:0x0});});});});}));_0x20e41d({'status':'success','campaigns':_0x170ac1});}catch(_0x542130){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x542130),_0x221e33({'status':'error','message':_0x542130['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x1db2c3,_0x3f8dd2)=>{return new Promise((_0x1b29e5,_0x51fae1)=>{const _0x287733='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x287733,[_0x3f8dd2],(_0x104bd6,_0x30f474)=>{_0x104bd6?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x104bd6),_0x51fae1(_0x104bd6)):(console['log']('ROWS'),console['log'](_0x30f474),debugDatabaseContents(),_0x1b29e5(_0x30f474));});});});const showTableContents=_0x3628ba=>{return new Promise((_0x4291d1,_0x11240c)=>{const _0x54c61c='SELECT\x20*\x20FROM\x20'+_0x3628ba+';';campaignDB['all'](_0x54c61c,(_0x147594,_0x4614d1)=>{_0x147594?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x3628ba+':',_0x147594),_0x11240c(_0x147594)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x3628ba+':',_0x4614d1),_0x4291d1({'status':'success','message':_0x4614d1}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x5c2661){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x5c2661);}}ipcMain['handle']('create-campaign',async(_0x8582ea,_0x52f2fa)=>{return new Promise((_0xa1f840,_0x30092f)=>{const _0x5a8c97='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x5a8c97,[String(_0x52f2fa)],function(_0x59bdab){_0x59bdab?_0x30092f(_0x59bdab):_0xa1f840({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x167150,_0x18f5c0)=>{return new Promise((_0x11f3b4,_0x5b36e2)=>{const _0x3f706c='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x3f706c,[_0x18f5c0],function(_0x4760e6){_0x4760e6?_0x5b36e2(_0x4760e6):_0x11f3b4({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x421f20,_0x4cafa8,_0x2b79eb,_0x35c670,_0x2e7263,_0x4759ca,_0x554f14,_0x3c2105)=>{const _0x47d088=await createMessageID(_0x2e7263);return new Promise((_0x2a5cfb,_0x4b1f32)=>{if(!_0x4cafa8||!_0x2b79eb||!_0x35c670||!_0x47d088||!_0x4759ca)return _0x4b1f32({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x47d088);const _0x5f580e='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x5f580e,[_0x2b79eb,_0x35c670,_0x47d088,_0x4759ca,_0x554f14,_0x3c2105,_0x4cafa8],function(_0x4a9199){if(_0x4a9199)_0x4b1f32({'status':'error','message':_0x4a9199['message']});else this['changes']===0x0?_0x4b1f32({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x2a5cfb({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x1d779f,_0x17e4a5,_0x358d58,_0x49acab,_0x37560d)=>{return new Promise((_0x417fa8,_0x323aa7)=>{const _0x24e5fd='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x24e5fd,[_0x17e4a5,_0x358d58,_0x49acab,_0x37560d],function(_0x59b0b3){return _0x59b0b3?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x59b0b3['message']),_0x323aa7('insert-dm-response',{'success':![],'message':_0x59b0b3['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x417fa8('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x4c5243=>{return new Promise((_0x29d806,_0x41ac08)=>{const _0x4c53cd='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x4c53cd,[_0x4c5243],(_0x362917,_0x4a1588)=>{if(_0x362917)_0x41ac08({'status':'error','message':_0x362917['message']});else{if(_0x4a1588)_0x29d806(_0x4a1588['message_id']);else{const _0xd3f9a7='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0xd3f9a7,[_0x4c5243],function(_0x277351){_0x277351?_0x41ac08({'status':'error','message':_0x277351['message']}):_0x29d806(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x218db5,_0xeb1919)=>{return new Promise((_0x41a90d,_0x5b3fb2)=>{const _0x3a8b66='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0xeb1919;db['get'](_0x3a8b66,(_0x131a17,_0x57eb1b)=>{_0x131a17?_0x5b3fb2({'status':'error','message':_0x131a17['message']}):_0x41a90d({'status':'success','count':_0x57eb1b['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x4a0342,_0x261470){try{const _0x534403=await new Promise((_0x439045,_0x2f1063)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x261470],(_0x1cd63f,_0x331dbe)=>{if(_0x1cd63f)_0x2f1063(_0x1cd63f);else{if(_0x331dbe['length']>0x0){let _0x15975b=JSON['parse'](_0x331dbe[0x0]['cookie']);console['log'](_0x15975b),_0x439045(_0x15975b);}else _0x2f1063(new Error('User\x20with\x20username\x20'+_0x261470+'\x20does\x20not\x20exist.'));}});});await _0x4a0342['setCookie'](..._0x534403),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x44fb8e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x44fb8e);}}async function saveCookiesForUser(_0x58b9a4,_0x294f59){try{const _0x1614d7=await _0x58b9a4['cookies']();if(!_0x1614d7||_0x1614d7['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x294f59);const _0x463b1=JSON['stringify'](_0x1614d7);if(_0x463b1['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x294f59);return new Promise((_0x3a27a4,_0x1d009e)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x294f59],(_0x28e928,_0x299015)=>{if(_0x28e928)return console['error']('Error\x20checking\x20user\x20existence:',_0x28e928),_0x1d009e(_0x28e928);if(_0x299015){const _0xb3d85f=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0xb3d85f['run'](_0x463b1,_0x294f59,function(_0x193629){return _0x193629?(console['error']('Error\x20updating\x20cookies:',_0x193629),_0x1d009e(_0x193629)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x294f59),_0x3a27a4());});}else{const _0x39f85f=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x39f85f['run'](_0x294f59,_0x463b1,function(_0x51e15b){return _0x51e15b?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x51e15b),_0x1d009e(_0x51e15b)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x294f59),_0x3a27a4());});}});});}catch(_0x2ac252){console['error']('Error\x20fetching\x20cookies:',_0x2ac252);throw _0x2ac252;}}async function createUserIfNotExists(_0x52cc34){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x52cc34],(_0x5e6b1a,_0x169d03)=>{if(_0x5e6b1a){console['error']('Error\x20checking\x20user\x20existence:',_0x5e6b1a);throw _0x5e6b1a;}else{if(!_0x169d03){const _0x383c12=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x383c12['run'](_0x52cc34,function(_0x4519fd){_0x4519fd?console['error']('Error\x20inserting\x20new\x20user:',_0x4519fd):console['log']('New\x20user\x20created:',_0x52cc34);});}else console['log']('User\x20already\x20exists:',_0x52cc34);}});}catch(_0x3138a3){console['error']('Error\x20creating\x20user:',_0x3138a3);throw _0x3138a3;}}ipcMain['handle']('create-relation',async(_0x102f10,_0x3af3d1)=>{return new Promise((_0x43bd2b,_0x58dd44)=>{const _0x296368='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x3af3d1+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x296368,function(_0x15aa46){_0x15aa46?_0x58dd44(_0x15aa46):_0x43bd2b({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x549a4d,_0x3cbbe8)=>{return console['log']('droping\x20table'+_0x3cbbe8),new Promise((_0x41b7e2,_0x249079)=>{const _0x156fc8='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x3cbbe8;console['log']('droping\x20table'+_0x3cbbe8),db['run'](_0x156fc8,function(_0x14506f){_0x14506f?_0x249079(_0x14506f):_0x41b7e2({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x627243=>{return new Promise((_0x17a78a,_0x46a130)=>{const _0x523e47='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x523e47,[],(_0x45e5da,_0x172086)=>{_0x45e5da?_0x46a130(_0x45e5da):_0x17a78a(_0x172086['map'](_0x2bdbfd=>_0x2bdbfd['name']));});});}),ipcMain['handle']('add-user',async(_0x271408,_0xdedbcb,_0x24daf7)=>{return new Promise(_0x138d4f=>{const _0x2aa488=db['prepare']('INSERT\x20INTO\x20'+_0x24daf7+'\x20(username)\x20VALUES\x20(?)');_0x2aa488['run'](_0xdedbcb,function(_0x6c370a){_0x6c370a?console['log']('error\x20in\x20add-user:'+_0x6c370a):_0x138d4f({'status':'success','id':this['lastID']});}),_0x2aa488['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x38caec,_0x3e877e)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0xe1b67b,_0x18f611)=>{if(_0xe1b67b)_0x3e877e(_0xe1b67b);else{_0x38caec({'status':'success','users':_0x18f611});for(_0x18f611 of _0x18f611){console['log'](_0x18f611['username']);}}});});}),ipcMain['handle']('get-data',async(_0x1d8abf,_0x35c96d)=>{return new Promise((_0x48a4ef,_0x33bb97)=>{const _0x36db94='SELECT\x20*\x20FROM\x20'+_0x35c96d;console['log'](_0x36db94),db['all'](_0x36db94,[],(_0x2cc8dc,_0x243e39)=>{_0x2cc8dc?_0x33bb97(_0x2cc8dc):_0x48a4ef(_0x243e39);});});}),ipcMain['handle']('get-accounts',async _0x521724=>{return new Promise((_0x111733,_0x3976ee)=>{const _0x504ded='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x504ded),igaccountsDB['all'](_0x504ded,[],(_0x5c6378,_0x31331e)=>{_0x5c6378?_0x3976ee(_0x5c6378):_0x111733(_0x31331e);});});}),ipcMain['handle']('get-targets',async(_0x580431,_0xe66355)=>{return getTargetProfiles(_0xe66355);}),ipcMain['handle']('delete-user',async(_0x3142dc,_0x1409a2,_0x153f68)=>{return new Promise((_0x32b501,_0x3385f7)=>{const _0x4ca862=db['prepare']('DELETE\x20FROM\x20'+_0x153f68+'\x20WHERE\x20username\x20=\x20?');_0x4ca862['run'](_0x1409a2,function(_0x3b879c){_0x3b879c?_0x3385f7(_0x3b879c):_0x32b501({'status':'success','changes':this['changes']});}),_0x4ca862['finalize']();});}),ipcMain['handle']('delete-account',async(_0x39d82f,_0x509b58)=>{const _0x592a62=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x592a62['run'](_0x509b58,function(_0x5d41d0){_0x5d41d0&&console['log'](_0x5d41d0);}),_0x592a62['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x282966,_0xfe7d27)=>{const _0x6099bd='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x6099bd,[],(_0x534d64,_0x4db6e1)=>{_0x534d64?_0xfe7d27({'status':'error','message':_0x534d64['message']}):_0x282966({'status':'success','contactedCount':_0x4db6e1['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x1ff847,_0x4056db)=>{const _0x12f2f1='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x12f2f1,[],(_0x2e9081,_0x4149f5)=>{_0x2e9081?_0x4056db({'status':'error','message':_0x2e9081['message']}):_0x1ff847({'status':'success','contactedCount':_0x4149f5['contactedCount']});});});});function exportDatabase(_0x49aa1b){return new Promise((_0xb66a8c,_0x1d5287)=>{const _0x3c5ada='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x49aa1b+'\x0a\x20\x20\x20\x20';db['all'](_0x3c5ada,[],async(_0x95e383,_0xc85919)=>{if(_0x95e383){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x95e383['message']),_0x1d5287(_0x95e383);return;}if(!_0xc85919||_0xc85919['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0xb66a8c();return;}const _0x394605=XLSX['utils']['json_to_sheet'](_0xc85919),_0x5b460b=XLSX['utils']['sheet_to_csv'](_0x394605);try{const {canceled:_0x1de358,filePath:_0x2f0ce6}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x49aa1b+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x1de358||!_0x2f0ce6){console['log']('Speichern\x20abgebrochen.'),_0xb66a8c();return;}fs['writeFile'](_0x2f0ce6,_0x5b460b,'utf8',_0x4fde6e=>{_0x4fde6e?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x4fde6e['message']),_0x1d5287(_0x4fde6e)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2f0ce6),_0xb66a8c());});}catch(_0x25329b){console['error']('Fehler\x20im\x20Speicherdialog:',_0x25329b),_0x1d5287(_0x25329b);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x1b5ca7,_0x163633)=>{shell['openExternal'](_0x163633);});