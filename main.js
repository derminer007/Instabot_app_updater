const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x119923=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x119923['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x119923['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x28bf89){var _0x51ce95=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x48a0ac){console['log']('window\x20id:'+_0x48a0ac['id']),_0x48a0ac['id']>0x1&&(_0x51ce95=!![]);}),console['log']('child\x20opened\x20='+_0x51ce95);if(!_0x51ce95){const _0x2de395=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x2de395['loadFile'](_0x28bf89['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0);});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));});const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x153303='',_0x40f951=null;if(process['platform']==='darwin')_0x153303=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x153303=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x153303}),_0x40f951=await browser_login['newPage'](),_0x40f951['setDefaultNavigationTimeout'](0x1d4c),_0x40f951['setDefaultTimeout'](0x1d4c),await _0x40f951['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x40f951;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x541109=0x1,_0x1c7161=0x0){let _0x1183e8='',_0x316509=null;const _0x535953=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x1183e8=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1183e8=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x541109===0x0&&!pageStack[_0x1c7161])return browser=await puppeteer['launch']({'headless':_0x535953,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1183e8}),_0x316509=await browser['newPage'](),_0x316509['setDefaultNavigationTimeout'](0x1d4c),_0x316509['setDefaultTimeout'](0x1d4c),await _0x316509['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x1c7161]=_0x316509,_0x316509;return(browser===null||pageStack[_0x1c7161]===null||pageStack[_0x1c7161]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x535953,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1183e8})),(pageStack[_0x1c7161]===null||pageStack[_0x1c7161]['isClosed']())&&(_0x316509=await browser['newPage'](),_0x316509['setDefaultNavigationTimeout'](0x1d4c),_0x316509['setDefaultTimeout'](0x1d4c),pageStack[_0x1c7161]=_0x316509),pageStack[_0x1c7161];}ipcMain['on']('login',async(_0x33e9e1,_0x286a44)=>{const _0x204287=await getBrowserPageLogin();await _0x204287['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x204287,_0x286a44),ipcMain['on']('setLoginCookies',async(_0xa0124e,_0x51b891)=>{try{await set_login_cookies(_0x204287,_0x51b891);}catch(_0x18e8ec){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x18e8ec);}});}),ipcMain['on']('export-relation',async(_0x172004,_0x1059d8)=>{try{await exportDatabase(_0x1059d8),_0x172004['reply']('export-relation-response',{'success':!![]});}catch(_0x3643ea){console['error'](_0x3643ea),_0x172004['reply']('export-relation-response',{'success':![],'message':_0x3643ea['message']});}}),ipcMain['handle']('sendMessage',async(_0x17ebb5,_0xb18219,_0x51d7e5,_0x560aea,_0x47c269,_0x1dc60d,_0x23da9c,_0x28a8bf,_0x17075d,_0x53fbeb)=>{isStopping=![];let _0xe3ef32=null;return _0x23da9c?_0xe3ef32=await getBrowserPage(_0x47c269,_0x28a8bf):_0xe3ef32=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0xb18219),send_message(_0xe3ef32,_0xb18219,_0x51d7e5,_0x560aea,_0x47c269,_0x1dc60d,_0x17075d,_0x53fbeb);}),ipcMain['handle']('stop-action',async(_0x598011,_0x3d328f)=>{isStopping=!![];const _0x5b22d3=await getBrowserPage(0x1,_0x3d328f);await _0x5b22d3['close']();}),ipcMain['handle']('fetch_followers',async(_0x44d2d0,_0x57bcdb,_0x1e27c2,_0x33b3d9,_0x366ed0,_0x17c919)=>{isStopping=![];const _0x1d75e0=await getBrowserPage();return fetch_followers_from_account(_0x44d2d0,_0x1d75e0,_0x57bcdb,_0x1e27c2,_0x33b3d9,_0x366ed0,_0x17c919);}),ipcMain['handle']('get-account-details',async(_0x50b782,_0x3562df,_0x4d38dd,_0x45e464)=>{isStopping=![];const _0x5d6d05=await getBrowserPage();return fetch_account_details(_0x5d6d05,_0x3562df,_0x4d38dd,_0x45e464);}),ipcMain['handle']('fetch_likes',async(_0x4a83a1,_0x2880c8,_0xeb819,_0x10f693,_0x5d90f1,_0x16472d)=>{isStopping=![];const _0x4234fb=await getBrowserPage();return fetch_likers_from_post(_0x4a83a1,_0x4234fb,_0x2880c8,_0xeb819,_0x10f693,_0x5d90f1,_0x16472d);}),ipcMain['handle']('fetch_comments',async(_0xa5e172,_0x4b5c78,_0x43e938,_0x3c9f44,_0x4ea4c5,_0x1628f7)=>{isStopping=![];const _0x3c4cfd=await getBrowserPage();return fetch_comments_from_post(_0xa5e172,_0x3c4cfd,_0x4b5c78,_0x43e938,_0x3c9f44,_0x4ea4c5,_0x1628f7);}),ipcMain['handle']('update-app',async _0x159b8b=>{const {spawn:_0x2f6127}=require('child_process'),_0x41f697=require('path');return new Promise((_0x101967,_0x5a0cce)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x101967('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x3fe9f5=_0x41f697['join'](__dirname,'mac-updater-intern.sh'),_0x57f99a=_0x2f6127('/bin/bash',[_0x3fe9f5]);_0x57f99a['stdout']['on']('data',_0x725044=>{console['log']('stdout:\x20'+_0x725044);}),_0x57f99a['stderr']['on']('data',_0x3cb110=>{console['error']('stderr:\x20'+_0x3cb110);}),_0x57f99a['on']('close',_0x324584=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x324584),_0x324584===0x0?_0x101967('Update\x20erfolgreich\x20abgeschlossen.'):_0x5a0cce(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x324584));});}else{if(process['platform']==='win32'){const _0x4030e8=_0x41f697['join'](__dirname,'../','../','../');process['chdir'](_0x4030e8),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x49ca47='soft-ui-updater-windows.ps1',_0x16c483=_0x2f6127('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x49ca47]);_0x16c483['stdout']['on']('data',_0x33020f=>{console['log']('stdout:\x20'+_0x33020f);}),_0x16c483['stderr']['on']('data',_0x3b5c27=>{console['error']('stderr:\x20'+_0x3b5c27);}),_0x16c483['on']('close',_0x818bc4=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x818bc4),_0x818bc4===0x0?_0x101967('Update\x20erfolgreich\x20abgeschlossen.'):_0x5a0cce(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x818bc4));});}else _0x5a0cce(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});});function getRnd(_0x16381a,_0x306b3e){return Math['random']()*(_0x306b3e-_0x16381a+0x1)+_0x16381a;}function delay(_0x5980b7,_0x325956){let _0x4da708=getRnd(_0x5980b7,_0x325956);return new Promise(function(_0x520349){setTimeout(_0x520349,_0x4da708);});}async function scroll(_0x144816,_0x5352be,_0x5d7ed3=0x2,_0x592f1d){const _0x4dd58e=await _0x144816['waitForSelector'](_0x5352be);for(let _0x3a4dcc=0x0;_0x3a4dcc<_0x5d7ed3;_0x3a4dcc++){console['log']('Scrolling\x20'+_0x3a4dcc),await _0x144816['evaluate'](_0x44ea0b=>{const _0x254f4e=document['querySelector'](_0x44ea0b);_0x254f4e&&_0x254f4e['scrollBy'](0x0,0x190);},_0x5352be),await delay(0x320,0x5dc),_0x592f1d();}}async function saveCookies(_0x392a4e){let _0x48d60a=await _0x392a4e['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x48d60a,null,0x2));}async function notificationClear(_0x295de5){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x295de5['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x295de5['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x49284a){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x49284a);}}async function getTargetProfiles(_0x34ee6d){return new Promise((_0x141299,_0x29fb0b)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x34ee6d,(_0x12c01b,_0x52ac04)=>{_0x12c01b?_0x29fb0b(_0x12c01b):_0x141299(_0x52ac04);});});}async function login_legacy(_0x1089d5,_0x4f754d,_0x14f2aa){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1089d5,_0x4f754d),await createUserIfNotExists(_0x4f754d,_0x14f2aa);}catch(_0x4560aa){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4560aa);}try{await _0x1089d5['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x1089d5['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x1089d5['click']('button._a9--._ap36._a9_0');}catch(_0x4162cc){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x1089d5['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x1089d5['type']('input[name=\x27username\x27]',_0x4f754d,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x1089d5['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x1089d5['type']('input[name=\x27password\x27]',_0x14f2aa,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x1089d5['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x1089d5['click']('button[type=\x27submit\x27]');}catch(_0x4269b2){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x1089d5),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x1089d5,_0x4f754d);}catch(_0x484de8){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x484de8);}}catch(_0x3f9b33){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x3f9b33);}}async function login(_0x187583,_0x16a33f){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x187583,_0x16a33f),await createUserIfNotExists(_0x16a33f);}catch(_0x9f274e){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x9f274e);}try{await _0x187583['goto']('https://www.instagram.com/accounts/login/');}catch(_0x2ab114){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2ab114);}}async function set_login_cookies(_0x45d0ee,_0x17ff70){try{await saveCookiesForUser(_0x45d0ee,_0x17ff70);}catch(_0xc80dff){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0xc80dff);}}async function waitForXPath(_0x3276b4,_0x3f3515,_0x343681={}){return await _0x3276b4['waitForFunction'](_0x995e84=>{return document['evaluate'](_0x995e84,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x343681,_0x3f3515),_0x3276b4['evaluateHandle'](_0x528d56=>document['evaluate'](_0x528d56,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x3f3515);}async function send_message(_0x228068,_0x3ccae4,_0x49672f,_0x17af17,_0x889587,_0x5e1a00,_0x19dceb,_0x5a2e77){return new Promise(async(_0x17714f,_0x5c056f)=>{_0x5e1a00=_0x5e1a00['split'](';'),console['log'](_0x5e1a00[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x889587);try{await setCookiesForUser(_0x228068,_0x5e1a00[0x0]);}catch(_0x3f469c){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x3f469c),_0x5c056f({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x3f469c});return;}try{await _0x228068['goto']('https://www.instagram.com/'+_0x3ccae4+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x228068);}catch(_0x504092){_0x5c056f({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x504092});return;}console['log']('UserSkip:\x20'+_0x19dceb);if(_0x19dceb==0x1)try{const _0x2a0b47=await _0x228068['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x3bc697=>_0x3bc697['textContent']['trim']());console['log'](_0x2a0b47);if(_0x2a0b47==='Following'||_0x2a0b47==='Folge\x20ich')return _0x17714f({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x55df1b){}try{await _0x228068['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x228068['click'](K_DIRECT_MSG_BUTTON);}catch(_0x33bc58){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x33bc58);try{await _0x228068['waitForSelector'](K_OPTIONS_BUTTON),await _0x228068['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x2115ab=await waitForXPath(_0x228068,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x2115ab['click']();}catch(_0x3fc22f){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x3fc22f),_0x17714f({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x228068);}catch(_0x5f1f30){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x5f1f30);}try{const _0x53caf8=await _0x228068['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x5a2e77){const _0x5adc25=await _0x228068['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x5adc25)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x3ccae4),_0x17714f({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x603fb9=await _0x228068['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x603fb9),_0x17af17=_0x17af17['replace']('{USERNAME}',_0x3ccae4);let _0xf6dd5e=_0x603fb9['replace'](/[^\p{L}\s]/gu,''),_0x4559df=_0xf6dd5e['split']('\x20')[0x0];console['log']('Extrahierter\x20Clearname\x20mit\x20Len:\x20'+_0x4559df['length']+'nach\x20Split:\x20'+_0x4559df);_0x4559df['length']>0x2&&!_0x4559df['includes']('Instagram')?(_0x17af17=_0x17af17['replaceAll']('{NAME}',_0x4559df),_0x17af17=_0x17af17['replaceAll']('{name}',_0x4559df)):(_0x17af17=_0x17af17['replaceAll']('\x20{NAME}',''),_0x17af17=_0x17af17['replaceAll']('\x20{name}',''),_0x17af17=_0x17af17['replaceAll']('{NAME}',''),_0x17af17=_0x17af17['replaceAll']('{name}',''));await _0x53caf8['type'](_0x17af17,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0xc76d5a=await _0x228068['waitForSelector'](K_SEND_MSG_BUTTON);await _0xc76d5a['click'](),await delay(0x320,0x3e8),_0x17714f({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!'});}catch(_0x3defe4){try{await _0x228068['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x5147a3=await _0x228068['evaluate'](_0x4a76e6=>{return document['querySelector'](_0x4a76e6)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x5147a3),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x3defe4),_0x17714f({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x3ccae4+'\x20überspringen.'});}catch(_0x6d7fc3){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x6d7fc3),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x3ccae4+'\x20:\x20'+_0x6d7fc3),_0x17714f({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x3ccae4+'\x20:\x20'+_0x6d7fc3});}}});}function handle_fail(_0x1aa6a6){if(isStopping)return new Promise(_0x5e925c=>{_0x5e925c('Scraper\x20gestoppt.');});else{let _0x8289c5='';switch(_0x1aa6a6){case 0x0:_0x8289c5='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x8289c5='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x8289c5='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x8289c5='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x40abf4,_0x12fc51)=>{_0x12fc51(_0x8289c5);});}}async function fetch_account_details(_0x484afe,_0x9565ec,_0x414c7f,_0x5039a1){try{await setCookiesForUser(_0x484afe,_0x414c7f['username']);}catch(_0x57db73){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x57db73);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x57db73);return handle_fail(0x0);}_0x484afe['setDefaultNavigationTimeout'](0x7530),await _0x484afe['goto']('https://www.instagram.com/'+_0x9565ec+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x484afe);const _0xc99474=await _0x484afe['evaluate'](()=>{const _0x237c16=document['querySelector']('meta[property=\x22og:image\x22]');return _0x237c16?_0x237c16['getAttribute']('content'):null;});await _0x484afe['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x554fb1=await _0x484afe['evaluate'](()=>{const _0x29af58=document['querySelector']('meta[name=\x22description\x22]');if(!_0x29af58)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x5614a6=_0x29af58['getAttribute']('content');if(!_0x5614a6)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x5614a6);const _0x335af2=/\s*[–-]\s*/,_0x486ed7=_0x5614a6['split'](_0x335af2);if(_0x486ed7['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x47992f=_0x486ed7[0x0],_0x658623=_0x486ed7[0x1],_0x5a8e6f=_0x47992f['split'](',\x20');if(_0x5a8e6f['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x5510a2=_0x5a8e6f[0x0]['split']('\x20')[0x0],_0x5a2493=_0x5a8e6f[0x1]['split']('\x20')[0x0],_0x2ea308=_0x5a8e6f[0x2]['split']('\x20')[0x0];let _0x21689b='',_0x2c93f9='';const _0x1e42be='\x20on\x20Instagram:\x20',_0x4de6ab=_0x658623['split'](_0x1e42be);return _0x21689b=_0x4de6ab[0x0]['trim'](),_0x21689b=_0x21689b['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x4de6ab['length']>0x1&&(_0x2c93f9=_0x4de6ab[0x1]['trim'](),_0x2c93f9['startsWith']('\x22')&&_0x2c93f9['endsWith']('\x22')&&(_0x2c93f9=_0x2c93f9['substring'](0x1,_0x2c93f9['length']-0x1)['trim']()),_0x2c93f9=_0x2c93f9['replace'](/&quot;/g,'')['trim']()),{'followers':_0x5510a2,'following':_0x5a2493,'posts':_0x2ea308,'nameText':_0x21689b,'bio':_0x2c93f9};});console['log']('Extracted\x20profile\x20data:',_0x554fb1);const _0x365ae9=_0x554fb1['nameText'],_0x9ad76=_0xc99474,_0x126487=_0x554fb1['bio'],_0x5ede95=_0x554fb1['followers'],_0x32cc46=_0x554fb1['following'],_0x4e09e1=_0x554fb1['posts'],_0x5b6785=![],_0x27dc7a=![],_0x232818=![],_0x2cd51e='\x0a\x20\x20INSERT\x20INTO\x20'+_0x5039a1+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x2cd51e,[_0x9565ec,_0x365ae9,_0x9ad76,_0x126487,_0x5ede95,_0x32cc46,_0x4e09e1,_0x5b6785,_0x27dc7a,_0x232818],function(_0x122a3f){_0x122a3f?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x122a3f['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x2ff642,_0x532747,_0x43640c,_0x1099bd,_0x96ace1,_0x25d6ea,_0x48255a){let _0x5c3a73=0x4,_0x3c2867=0x0,_0x58a239=0x0;try{await setCookiesForUser(_0x532747,_0x25d6ea['username']);}catch(_0x499c98){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x499c98);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x499c98);return handle_fail(0x0);}let _0x747068=0x0;try{await _0x532747['goto']('https://www.instagram.com/'+_0x43640c+'/'),await notificationClear(_0x532747);try{if(_0x1099bd<=0x0){const _0x268852=await _0x532747['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x564c38=await _0x532747['evaluate'](_0x5467aa=>_0x5467aa['innerHTML'],_0x268852);_0x747068=Math['ceil'](_0x564c38/0x4);}else _0x747068=Math['ceil'](_0x1099bd/0x4);_0x5c3a73+=_0x747068,_0x58a239=Math['round'](++_0x3c2867/_0x5c3a73*0x64),_0x2ff642['sender']['send']('fetch-progress',_0x58a239,!![]);let _0x14061a=await _0x532747['waitForSelector']('a[href=\x22/'+_0x43640c+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x14061a['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x43640c+'\x20gesichtet'),_0x58a239=Math['round'](++_0x3c2867/_0x5c3a73*0x64),_0x2ff642['sender']['send']('fetch-progress',_0x58a239,!![]);}catch(_0x2db24b){console['log']('Follower\x20Liste\x20von\x20'+_0x43640c+'\x20nicht\x20gefunden:'+_0x2db24b);throw new Error('Follower\x20Liste\x20von\x20'+_0x43640c+'\x20nicht\x20gefunden:'+_0x2db24b);return handle_fail(0x0);}}catch(_0xae87ff){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xae87ff);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0xae87ff);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x747068),await scroll(_0x532747,FOLLOWER_FENSTER,_0x747068,_0x2268f0=>{_0x58a239=Math['round'](++_0x3c2867/_0x5c3a73*0x64),_0x2ff642['sender']['send']('fetch-progress',_0x58a239,!![]);}),await _0x532747['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x10633c=await _0x532747['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x20d2c2=await _0x532747['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x58a239=Math['round'](++_0x3c2867/_0x5c3a73*0x64),_0x2ff642['sender']['send']('fetch-progress',_0x58a239,!![]);_0x1099bd<=0x0&&(_0x1099bd=_0x10633c['length']);let _0x203636=[];for(let _0x146515=0x0;_0x146515<_0x10633c['length']&&_0x146515<_0x1099bd;_0x146515++){_0x203636['push'](await _0x10633c[_0x146515]['evaluate'](_0x7c8b88=>_0x7c8b88['textContent']));const _0x1eef55='INSERT\x20INTO\x20'+_0x96ace1+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x1eef55,[await _0x10633c[_0x146515]['evaluate'](_0x563e18=>_0x563e18['textContent']),await _0x20d2c2[_0x146515]['evaluate'](_0x4de8f6=>_0x4de8f6['textContent'])],function(_0x1c226d){_0x1c226d?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x96ace1+'\x27:',_0x1c226d['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x58a239=Math['round'](++_0x3c2867/_0x5c3a73*0x64),_0x2ff642['sender']['send']('fetch-progress',_0x58a239,!![]),_0x48255a&&(_0x2ff642['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2ff642,_0x532747,_0x25d6ea,_0x96ace1,_0x203636)),new Promise(_0x7645cc=>{_0x7645cc('Scraping\x20finished!');});}catch(_0x11c5e5){if(_0x48255a)throw new Error(_0x11c5e5);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x43640c+'\x20nicht\x20gefunden:\x20'+_0x11c5e5);return handle_fail(0x0);}}async function fetch_details_from_list(_0x1215bf,_0x56501a,_0x1c4892,_0x296b31,_0x4c1643){let _0x4ecabb=0x0,_0x33c080=0x0;for(let _0x4097ac=0x0;_0x4097ac<_0x4c1643['length'];_0x4097ac++){console['log']('Processing\x20profile:',_0x4c1643[_0x4097ac]);try{await fetch_account_details(_0x56501a,_0x4c1643[_0x4097ac],_0x1c4892,_0x296b31);}catch(_0x2b5ade){console['error']('Detailed\x20Scraping\x20von:\x20',_0x4c1643[_0x4097ac],_0x2b5ade);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x4c1643[_0x4097ac]+'\x20'+_0x2b5ade);}_0x33c080=Math['round'](++_0x4ecabb/_0x4c1643['length']*0x64),_0x1215bf['sender']['send']('fetch-progress',_0x33c080,!![],!![]);}}async function fetch_likers_from_post(_0x5f38a2,_0x28f1c1,_0xfecb4e,_0xfdba2f,_0x206ec3,_0x3dd42e,_0x133f8f){let _0x4ada3e=0x4,_0x13a74f=0x0,_0x2c8acf=0x0;try{await setCookiesForUser(_0x28f1c1,_0x3dd42e['username']);}catch(_0x30810a){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x30810a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x30810a);return handle_fail(0x1);return;}_0x2c8acf=Math['round'](++_0x13a74f/_0x4ada3e*0x64),_0x5f38a2['sender']['send']('fetch-progress',_0x2c8acf,!![]);try{let _0x4fe6f4=_0xfecb4e['substring'](0x0,_0xfecb4e['lastIndexOf']('/')),_0x3553c3=_0x4fe6f4+'/liked_by';console['log'](_0x3553c3),await _0x28f1c1['goto'](_0x3553c3),await delay(0x7d0,0xfa0),await notificationClear(_0x28f1c1),await delay(0xc8,0x1f4),_0x2c8acf=Math['round'](++_0x13a74f/_0x4ada3e*0x64),_0x5f38a2['sender']['send']('fetch-progress',_0x2c8acf,!![]),await _0x28f1c1['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x359214=await _0x28f1c1['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x2494c7=await _0x28f1c1['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x359214['length']);let _0x185fdb=path['join'](__dirname,'/likers.csv');_0x2c8acf=Math['round'](++_0x13a74f/_0x4ada3e*0x64),_0x5f38a2['sender']['send']('fetch-progress',_0x2c8acf,!![]);_0xfdba2f<=0x0&&(_0xfdba2f=_0x359214['length']);try{let _0x2395de=[];for(let _0x4fc573=0x0;_0x4fc573<_0x359214['length']&&_0x4fc573<_0xfdba2f;_0x4fc573++){_0x2395de['push'](await _0x359214[_0x4fc573]['evaluate'](_0x432b7b=>_0x432b7b['textContent']));try{const _0x5e1017='INSERT\x20INTO\x20'+_0x206ec3+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x5e1017,[await _0x359214[_0x4fc573]['evaluate'](_0x21420f=>_0x21420f['textContent']),await _0x2494c7[_0x4fc573]['evaluate'](_0x59adf9=>_0x59adf9['textContent'])],function(_0x49f0b6){_0x49f0b6?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x206ec3+'\x27:',_0x49f0b6['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x4ae2f4){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x4fc573+'\x20:\x20'+_0x4ae2f4);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x4fc573+'\x20:\x20'+_0x4ae2f4);return handle_fail(0x1);}}return _0x2c8acf=Math['round'](++_0x13a74f/_0x4ada3e*0x64),_0x5f38a2['sender']['send']('fetch-progress',_0x2c8acf,!![]),_0x133f8f&&(_0x5f38a2['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5f38a2,_0x28f1c1,_0x3dd42e,_0x206ec3,_0x2395de)),new Promise(_0x392ae9=>{_0x392ae9('Scraping\x20finished!');});}catch(_0x2ace24){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x2ace24);return handle_fail(0x1);}}catch(_0x558297){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x558297);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x558297);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x5349ab,_0x1e523e,_0x5815e0,_0x87711,_0x346cb7,_0x2cabe0,_0x352c18){let _0x440632=0x3,_0x556b72=0x0,_0x348164=0x0;try{await setCookiesForUser(_0x1e523e,_0x2cabe0['username']);}catch(_0x5ec46a){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5ec46a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x5ec46a);return handle_fail(0x2);}try{console['log'](_0x5815e0),await _0x1e523e['goto'](_0x5815e0),await delay(0x7d0,0xfa0),await notificationClear(_0x1e523e),await delay(0xc8,0x1f4);const _0x5e23f2=COM_COMMENTS_BOX_BODY_DIV;let _0x1260e8;const _0x392b33=await _0x1e523e['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x350f4a=await _0x1e523e['evaluate'](_0x4c0d91=>_0x4c0d91['innerHTML'],_0x392b33),_0x530203=String(_0x350f4a)['replace'](/[^0-9]/g,''),_0x51ee6d=Number(_0x530203)/0x14;_0x87711<=0x0?_0x1260e8=Math['ceil'](_0x51ee6d/0x3):_0x1260e8=Math['ceil'](_0x87711/0x3);_0x440632+=_0x1260e8,_0x348164=Math['round'](++_0x556b72/_0x440632*0x64),_0x5349ab['sender']['send']('fetch-progress',_0x348164,!![]),console['log']('Auto-scrolls:\x20'+_0x1260e8),await scroll(_0x1e523e,_0x5e23f2,_0x1260e8,_0x310c6b=>{_0x348164=Math['round'](++_0x556b72/_0x440632*0x64),_0x5349ab['sender']['send']('fetch-progress',_0x348164,!![]);});try{const _0x222b76=COM_REPLY_BUTTON_SPAN;await _0x1e523e['waitForSelector'](_0x222b76),await delay(0x1f4,0x320);const _0x409f94=await _0x1e523e['$$'](_0x222b76);console['log'](_0x409f94);let _0xe3b0f5=_0x409f94['length'];await delay(0xc8,0x1f4);try{for(let _0x556b87=0x0;_0x556b87<_0xe3b0f5;_0x556b87++){_0x409f94[_0x556b87]['click'](),await delay(0x320,0x5dc);}}catch(_0x245689){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x245689);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x245689);return handle_fail(0x2);}}catch(_0x58a9c2){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x4171ac=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x1e523e['waitForSelector'](_0x4171ac),await delay(0x1f4,0x320),_0x348164=Math['round'](++_0x556b72/_0x440632*0x64),_0x5349ab['sender']['send']('fetch-progress',_0x348164,!![]);const _0x21ba9e=await _0x1e523e['$$'](_0x4171ac);let _0x235590=path['join'](__dirname,'/comments.csv');_0x87711<=0x0&&(_0x87711=_0x21ba9e['length']);console['log']('fetch_limit:\x20'+_0x87711),console['log']('comments_len:\x20'+_0x21ba9e['length']),_0x87711++;try{let _0xb91cf5=[];for(let _0x307434=0x1;_0x307434<_0x21ba9e['length']&&_0x307434<_0x87711;_0x307434++){try{_0xb91cf5['push'](await _0x21ba9e[_0x307434]['evaluate'](_0x407ece=>_0x407ece['textContent']));const _0x51e0a0=await db['prepare']('INSERT\x20INTO\x20'+_0x346cb7+'\x20(username)\x20VALUES\x20(?)');await _0x51e0a0['run'](await _0x21ba9e[_0x307434]['evaluate'](_0x5237f7=>_0x5237f7['textContent']),function(_0x572788){_0x572788&&console['log']('error\x20in\x20add-user:'+_0x572788);}),await _0x51e0a0['finalize']();}catch(_0xdfee42){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x307434+'\x20:\x20'+_0xdfee42);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x307434+'\x20:\x20'+_0xdfee42);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x348164=Math['round'](++_0x556b72/_0x440632*0x64),_0x5349ab['sender']['send']('fetch-progress',_0x348164,!![]),_0x5349ab['sender']['send']('fetch-progress',0x64,!![]),_0x352c18&&(_0x5349ab['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5349ab,_0x1e523e,_0x2cabe0,_0x346cb7,_0xb91cf5)),_0x5349ab['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x3d8844=>{_0x3d8844('Scraping\x20finished!');});}catch(_0x323127){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x323127);return handle_fail(0x2);}}catch(_0x28d01d){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x28d01d);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x28d01d);return handle_fail(0x2);}}async function set_clearname_from_username(_0x230944,_0x153a43,_0x437cf3=null){try{let _0x9150a7,_0x79e990;const _0x105759='SELECT\x20username\x20FROM\x20'+_0x153a43+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x105759,[],(_0x217c54,_0xc91041)=>{_0x217c54&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x217c54['message']),_0xc91041['length']===0x0&&(_0x79e990=_0xc91041['length']),_0x9150a7=_0xc91041['map'](_0x38e765=>_0x38e765['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x79e990);if(_0x79e990===0x0){console['log']('Leave');return;}const _0x58aea3=await _0x230944['waitForSelector'](IG_SEARCH_BUTTON);await _0x58aea3['click'](),await delay(0x4b0,0x7d0);for(let _0xce0f0f of _0x9150a7){const _0x3ca4af=await _0x230944['waitForSelector'](IG_SEARCH_INPUT);await _0x3ca4af['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x230944['type'](IG_SEARCH_INPUT,_0xce0f0f,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x369f4f=0x1;while(_0x369f4f!=0x14){console['log']('Schleife');try{let _0x5828b6=IG_NAME_SPAN_PART1+_0x369f4f+IG_USERNAME_SPAN_PART2;const _0x334c57=await _0x230944['waitForSelector'](_0x5828b6),_0x36608d=await _0x230944['evaluate'](_0x439910=>_0x439910['innerHTML'],_0x334c57);await delay(0xc8,0x1f4);if(_0x36608d==_0xce0f0f){let _0x67e9b0=IG_NAME_SPAN_PART1+_0x369f4f+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x12bfda=await _0x230944['waitForSelector'](_0x67e9b0);let _0x372e19=await _0x230944['evaluate'](_0x2e9a71=>_0x2e9a71['innerHTML'],_0x12bfda);const _0x5ecf00=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x12dbc7=_0x372e19['match'](_0x5ecf00);_0x12dbc7?_0x372e19=_0x12dbc7[0x1]['trim']():_0x372e19=_0x372e19['trim']();_0x372e19['includes']('•')&&(_0x372e19=_0x372e19['substring'](0x0,_0x372e19['indexOf']('•')-0x1));const _0x3d2c63='UPDATE\x20'+_0x153a43+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x3d2c63,[_0x372e19,_0x36608d],function(_0x844841){_0x844841&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x844841['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x369f4f++;}catch(_0x15c0a8){const _0x15335c='UPDATE\x20'+_0x153a43+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x15335c,['',_0xce0f0f],function(_0x347afd){_0x347afd&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x347afd['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x15c0a8);break;}}_0x437cf3&&_0x437cf3();}await _0x58aea3['click']();}catch(_0x10370a){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x10370a);}}const campaignPath=path['resolve'](__dirname,'data/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x42bf0c,_0xb5a733)=>{const _0x110276='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x110276,[],(_0xc4df00,_0x251eba)=>{_0xc4df00?_0xb5a733(_0xc4df00):_0x42bf0c(_0x251eba);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x2350b1,_0x103d57)=>{const _0x34c413='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x34c413,[],async(_0x13991f,_0x5159d5)=>{if(_0x13991f)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x13991f['message']),_0x103d57({'status':'error','message':_0x13991f['message']});else try{const _0x457139=await Promise['all'](_0x5159d5['map'](_0x391061=>{return new Promise(_0x21435b=>{if(!_0x391061['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x391061['campaign_name']),_0x21435b({'campaign_name':_0x391061['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x3ca18e='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x391061['list_id'],_0x13a10f='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x391061['list_id']+'\x22';db['get'](_0x3ca18e,[],(_0x3091c1,_0x46805e)=>{_0x3091c1?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x391061['campaign_name']+':',_0x3091c1['message']),_0x21435b({'campaign_name':_0x391061['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x13a10f,[],(_0x3d99b2,_0x6993ad)=>{_0x3d99b2?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x391061['campaign_name']+':',_0x3d99b2['message']),_0x21435b({'campaign_name':_0x391061['campaign_name'],'lead_count':_0x46805e?_0x46805e['lead_count']:0x0,'contacted_count':'N/A'})):_0x21435b({'campaign_name':_0x391061['campaign_name'],'lead_count':_0x46805e?_0x46805e['lead_count']:0x0,'contacted_count':_0x6993ad?_0x6993ad['contacted_count']:0x0});});});});}));_0x2350b1({'status':'success','campaigns':_0x457139});}catch(_0x257118){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x257118),_0x103d57({'status':'error','message':_0x257118['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xd89170,_0x5414fe)=>{return new Promise((_0x36612d,_0x136b13)=>{const _0x25d444='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x25d444,[_0x5414fe],(_0x530d66,_0x3bd9d5)=>{_0x530d66?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x530d66),_0x136b13(_0x530d66)):(console['log']('ROWS'),console['log'](_0x3bd9d5),debugDatabaseContents(),_0x36612d(_0x3bd9d5));});});});const showTableContents=_0x322e5f=>{return new Promise((_0x29b0e8,_0x4ef34f)=>{const _0x155176='SELECT\x20*\x20FROM\x20'+_0x322e5f+';';campaignDB['all'](_0x155176,(_0x3f5b5a,_0xd8c582)=>{_0x3f5b5a?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x322e5f+':',_0x3f5b5a),_0x4ef34f(_0x3f5b5a)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x322e5f+':',_0xd8c582),_0x29b0e8({'status':'success','message':_0xd8c582}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x44f0d2){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x44f0d2);}}ipcMain['handle']('create-campaign',async(_0xeb5865,_0x82f734)=>{return new Promise((_0x4e3b83,_0x575a48)=>{const _0x3315f0='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x3315f0,[String(_0x82f734)],function(_0xbad91){_0xbad91?_0x575a48(_0xbad91):_0x4e3b83({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x3e2b3a,_0x4a403c)=>{return new Promise((_0x45b9d6,_0x26a92a)=>{const _0x1e261a='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x1e261a,[_0x4a403c],function(_0x2b1a1a){_0x2b1a1a?_0x26a92a(_0x2b1a1a):_0x45b9d6({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x2ddbab,_0x7d88e3,_0x20a9ec,_0xd497d8,_0x518f45,_0x44de63,_0x14ca18,_0x23cd7c)=>{const _0x1611f7=await createMessageID(_0x518f45);return new Promise((_0x56288b,_0x2775b2)=>{if(!_0x7d88e3||!_0x20a9ec||!_0xd497d8||!_0x1611f7||!_0x44de63)return _0x2775b2({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x1611f7);const _0x2f78d5='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x2f78d5,[_0x20a9ec,_0xd497d8,_0x1611f7,_0x44de63,_0x14ca18,_0x23cd7c,_0x7d88e3],function(_0x560999){if(_0x560999)_0x2775b2({'status':'error','message':_0x560999['message']});else this['changes']===0x0?_0x2775b2({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x56288b({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0xa3045c,_0x330fb1,_0x2755d2,_0x652541,_0x10604a)=>{return new Promise((_0x304ec4,_0x193039)=>{const _0x433a11='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x433a11,[_0x330fb1,_0x2755d2,_0x652541,_0x10604a],function(_0x1fefc8){return _0x1fefc8?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x1fefc8['message']),_0x193039('insert-dm-response',{'success':![],'message':_0x1fefc8['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x304ec4('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x12fd85=>{return new Promise((_0x79b7d7,_0x242eca)=>{const _0x5d9425='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x5d9425,[_0x12fd85],(_0x36c107,_0xc64413)=>{if(_0x36c107)_0x242eca({'status':'error','message':_0x36c107['message']});else{if(_0xc64413)_0x79b7d7(_0xc64413['message_id']);else{const _0x40a2c3='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x40a2c3,[_0x12fd85],function(_0xac752d){_0xac752d?_0x242eca({'status':'error','message':_0xac752d['message']}):_0x79b7d7(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x21bc72,_0x79888d)=>{return new Promise((_0x599ad7,_0x49dbb9)=>{const _0x1e27a7='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x79888d;db['get'](_0x1e27a7,(_0x341fe4,_0x447387)=>{_0x341fe4?_0x49dbb9({'status':'error','message':_0x341fe4['message']}):_0x599ad7({'status':'success','count':_0x447387['count']});});});});const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x31045b,_0x39efa3){try{const _0x4954e5=await new Promise((_0x56f137,_0x536bfe)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x39efa3],(_0x3cc5f7,_0x24e780)=>{if(_0x3cc5f7)_0x536bfe(_0x3cc5f7);else{if(_0x24e780['length']>0x0){let _0x472f63=JSON['parse'](_0x24e780[0x0]['cookie']);console['log'](_0x472f63),_0x56f137(_0x472f63);}else _0x536bfe(new Error('User\x20with\x20username\x20'+_0x39efa3+'\x20does\x20not\x20exist.'));}});});await _0x31045b['setCookie'](..._0x4954e5),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x56dd06){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x56dd06);}}async function saveCookiesForUser(_0x141bbe,_0x18f227){try{const _0x4ac5ac=await _0x141bbe['cookies']();if(!_0x4ac5ac||_0x4ac5ac['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x18f227);const _0x1fcd7a=JSON['stringify'](_0x4ac5ac);if(_0x1fcd7a['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x18f227);return new Promise((_0x26d45a,_0x3e4531)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x18f227],(_0x141168,_0x4c91ca)=>{if(_0x141168)return console['error']('Error\x20checking\x20user\x20existence:',_0x141168),_0x3e4531(_0x141168);if(_0x4c91ca){const _0x2f16f3=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x2f16f3['run'](_0x1fcd7a,_0x18f227,function(_0x5011a9){return _0x5011a9?(console['error']('Error\x20updating\x20cookies:',_0x5011a9),_0x3e4531(_0x5011a9)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x18f227),_0x26d45a());});}else{const _0xdcb630=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0xdcb630['run'](_0x18f227,_0x1fcd7a,function(_0x4b8951){return _0x4b8951?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x4b8951),_0x3e4531(_0x4b8951)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x18f227),_0x26d45a());});}});});}catch(_0x452858){console['error']('Error\x20fetching\x20cookies:',_0x452858);throw _0x452858;}}async function createUserIfNotExists(_0x33d479){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x33d479],(_0x5b9142,_0x17367c)=>{if(_0x5b9142){console['error']('Error\x20checking\x20user\x20existence:',_0x5b9142);throw _0x5b9142;}else{if(!_0x17367c){const _0x1e1289=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x1e1289['run'](_0x33d479,function(_0x562207){_0x562207?console['error']('Error\x20inserting\x20new\x20user:',_0x562207):console['log']('New\x20user\x20created:',_0x33d479);});}else console['log']('User\x20already\x20exists:',_0x33d479);}});}catch(_0x1f1ba0){console['error']('Error\x20creating\x20user:',_0x1f1ba0);throw _0x1f1ba0;}}ipcMain['handle']('create-relation',async(_0x12fbf2,_0x110b68)=>{return new Promise((_0xb7c36f,_0x2e1e8f)=>{const _0x189043='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x110b68+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x189043,function(_0x1625a0){_0x1625a0?_0x2e1e8f(_0x1625a0):_0xb7c36f({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x29a3b5,_0x22a3b5)=>{return console['log']('droping\x20table'+_0x22a3b5),new Promise((_0x992aaa,_0x3425c6)=>{const _0x4f5a7d='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x22a3b5;console['log']('droping\x20table'+_0x22a3b5),db['run'](_0x4f5a7d,function(_0xf9e78e){_0xf9e78e?_0x3425c6(_0xf9e78e):_0x992aaa({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x3cded1=>{return new Promise((_0x50b057,_0x4e0db2)=>{const _0x2a08b8='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x2a08b8,[],(_0x3248cc,_0x280590)=>{_0x3248cc?_0x4e0db2(_0x3248cc):_0x50b057(_0x280590['map'](_0x459923=>_0x459923['name']));});});}),ipcMain['handle']('add-user',async(_0x2f0424,_0x424f62,_0x56de9e)=>{return new Promise(_0x1de1d0=>{const _0x3a3f70=db['prepare']('INSERT\x20INTO\x20'+_0x56de9e+'\x20(username)\x20VALUES\x20(?)');_0x3a3f70['run'](_0x424f62,function(_0x5a8c4f){_0x5a8c4f?console['log']('error\x20in\x20add-user:'+_0x5a8c4f):_0x1de1d0({'status':'success','id':this['lastID']});}),_0x3a3f70['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x516f1c,_0x3961f1)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x9eb44,_0x4c1aaa)=>{if(_0x9eb44)_0x3961f1(_0x9eb44);else{_0x516f1c({'status':'success','users':_0x4c1aaa});for(_0x4c1aaa of _0x4c1aaa){console['log'](_0x4c1aaa['username']);}}});});}),ipcMain['handle']('get-data',async(_0x224a58,_0x2a8392)=>{return new Promise((_0x4b6c36,_0x223929)=>{const _0x3961b4='SELECT\x20*\x20FROM\x20'+_0x2a8392;console['log'](_0x3961b4),db['all'](_0x3961b4,[],(_0x2c7d36,_0x4dc157)=>{_0x2c7d36?_0x223929(_0x2c7d36):_0x4b6c36(_0x4dc157);});});}),ipcMain['handle']('get-accounts',async _0x5c3b44=>{return new Promise((_0xfed8f,_0x3500ae)=>{const _0x4f1d23='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x4f1d23),igaccountsDB['all'](_0x4f1d23,[],(_0x5be679,_0x3718d6)=>{_0x5be679?_0x3500ae(_0x5be679):_0xfed8f(_0x3718d6);});});}),ipcMain['handle']('get-targets',async(_0x4d97ff,_0x46a803)=>{return getTargetProfiles(_0x46a803);}),ipcMain['handle']('delete-user',async(_0x1d655e,_0x39ccde,_0x311aa1)=>{return new Promise((_0xee9051,_0x46646d)=>{const _0x3ff7fb=db['prepare']('DELETE\x20FROM\x20'+_0x311aa1+'\x20WHERE\x20username\x20=\x20?');_0x3ff7fb['run'](_0x39ccde,function(_0x3993b2){_0x3993b2?_0x46646d(_0x3993b2):_0xee9051({'status':'success','changes':this['changes']});}),_0x3ff7fb['finalize']();});}),ipcMain['handle']('delete-account',async(_0x219db5,_0x3bfcf8)=>{const _0x177d94=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x177d94['run'](_0x3bfcf8,function(_0x9bc15d){_0x9bc15d&&console['log'](_0x9bc15d);}),_0x177d94['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x209494,_0x2ca902)=>{const _0x365f0e='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x365f0e,[],(_0x1a55b5,_0x3e60f0)=>{_0x1a55b5?_0x2ca902({'status':'error','message':_0x1a55b5['message']}):_0x209494({'status':'success','contactedCount':_0x3e60f0['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x1a0503,_0x4a5402)=>{const _0x28e7f7='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x28e7f7,[],(_0x4fd275,_0x2118c9)=>{_0x4fd275?_0x4a5402({'status':'error','message':_0x4fd275['message']}):_0x1a0503({'status':'success','contactedCount':_0x2118c9['contactedCount']});});});});function exportDatabase(_0x5926c0){return new Promise((_0x2963c,_0x41b292)=>{const _0x2abf5a='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x5926c0+'\x0a\x20\x20\x20\x20';db['all'](_0x2abf5a,[],async(_0x2b9ada,_0x882362)=>{if(_0x2b9ada){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x2b9ada['message']),_0x41b292(_0x2b9ada);return;}if(!_0x882362||_0x882362['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2963c();return;}const _0x15599d=XLSX['utils']['json_to_sheet'](_0x882362),_0x494662=XLSX['utils']['sheet_to_csv'](_0x15599d);try{const {canceled:_0x185815,filePath:_0x2a8eb6}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x5926c0+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x185815||!_0x2a8eb6){console['log']('Speichern\x20abgebrochen.'),_0x2963c();return;}fs['writeFile'](_0x2a8eb6,_0x494662,'utf8',_0x234bf6=>{_0x234bf6?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x234bf6['message']),_0x41b292(_0x234bf6)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x2a8eb6),_0x2963c());});}catch(_0xc89aff){console['error']('Fehler\x20im\x20Speicherdialog:',_0xc89aff),_0x41b292(_0xc89aff);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x1a2dc2,_0x21f0a3)=>{shell['openExternal'](_0x21f0a3);});