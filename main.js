const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x14fad8,_0x3808d1){try{const _0x3ae2ed=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x3808d1},'body':JSON['stringify']({'clearname':_0x14fad8})});if(!_0x3ae2ed['ok']){const _0x18ccea=await _0x3ae2ed['text']();throw new Error(_0x3ae2ed['status']+':\x20'+_0x18ccea);}const _0x6e0097=await _0x3ae2ed['json']();return _0x6e0097;}catch(_0x305154){console['error']('Error\x20in\x20extractFirstName:',_0x305154);throw _0x305154;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_EXPAND_MSG_BUTTON='[aria-label=\x22Expand\x22]',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',K_BEITRAG_ARRAY_SELECTOR='._aagv',K_BEITRAG_LIKE_BUTTON='section\x20>\x20span\x20>\x20div\x20>\x20div',K_STORY_ARRAY_SELECTOR='._acaz',K_STORY_LIKE_BUTTON='div.x6s0dn4.x78zum5.x67bb7w\x20>\x20div.x78zum5.xvc5jky\x20>\x20span\x20>\x20div\x20>\x20div',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x17b04d=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x17b04d['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x17b04d['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x3a6748){var _0x46e38a=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x34ffb3){console['log']('window\x20id:'+_0x34ffb3['id']),_0x34ffb3['id']>0x1&&(_0x46e38a=!![]);}),console['log']('child\x20opened\x20='+_0x46e38a);if(!_0x46e38a){const _0x361874=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x361874['loadFile'](_0x3a6748['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x1b85f6=require('fs'),_0x15b8e3=path['join'](app['getPath']('userData'),'data'),_0x3f39d5=['campaign.db','crm.db','igaccounts.db'],_0x575b69=[];try{_0x1b85f6['mkdirSync'](_0x15b8e3,{'recursive':!![]});for(const _0x2e2d7c of _0x3f39d5){const _0x11b1dc=path['join'](process['resourcesPath'],'app','build','data',_0x2e2d7c),_0x11d83d=path['join'](_0x15b8e3,_0x2e2d7c);!_0x1b85f6['existsSync'](_0x11d83d)?(_0x1b85f6['copyFileSync'](_0x11b1dc,_0x11d83d),console['log']('[InitDB]\x20Kopiert\x20'+_0x2e2d7c+'\x20nach:\x20'+_0x11d83d)):console['log']('[InitDB]\x20'+_0x2e2d7c+'\x20existiert\x20bereits:\x20'+_0x11d83d),_0x575b69['push'](_0x11d83d);}}catch(_0x455159){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x455159);}return _0x575b69;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x5d162a,AppUpdate:_0x455ba9}=require('electron-updater');_0x5d162a['autoDownload']=![],_0x5d162a['autoInstallOnAppQuit']=!![],_0x5d162a['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x5d162a['on']('update-available',_0x3fead4=>{console['log']('Update\x20verfügbar:',_0x3fead4),_0x5d162a['downloadUpdate']();}),_0x5d162a['on']('update-downloaded',_0x9decf1=>{console['log']('Update\x20heruntergeladen:',_0x9decf1),_0x5d162a['quitAndInstall']();}),_0x5d162a['on']('error',_0x3eef41=>{console['error']('Fehler\x20beim\x20Updaten:',_0x3eef41);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x2b938c,AppUpdate:_0x10a5c2}=require('electron-updater');_0x2b938c['autoDownload']=![],_0x2b938c['autoInstallOnAppQuit']=!![],_0x2b938c['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x2b938c['on']('update-available',_0x2b76ce=>{console['log']('Update\x20verfügbar:',_0x2b76ce),_0x2b938c['downloadUpdate']();}),_0x2b938c['on']('update-downloaded',_0xea02be=>{console['log']('Update\x20heruntergeladen:',_0xea02be),console['log']('Neustarten\x20zum\x20Updaten');}),_0x2b938c['on']('error',_0x4ab279=>{console['error']('Fehler\x20beim\x20Updaten:',_0x4ab279);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let isHeadless=!![],browser_login=null;async function getBrowserPageLogin(){let _0x4e9483='',_0x139919=null;if(process['platform']==='darwin')_0x4e9483=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x4e9483=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4e9483}),_0x139919=await browser_login['newPage'](),_0x139919['setDefaultNavigationTimeout'](0x3a98),_0x139919['setDefaultTimeout'](0x3a98),await _0x139919['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x139919;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x2ae843=0x1,_0x321f20=0x0){try{let _0x1e5068='',_0x21c9f3=null;const _0x13097a=isHeadless;if(process['platform']==='darwin')_0x1e5068=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x1e5068=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x2ae843===0x0&&!pageStack[_0x321f20])return browser=await puppeteer['launch']({'headless':_0x13097a,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1e5068}),_0x21c9f3=await browser['newPage'](),_0x21c9f3['setDefaultNavigationTimeout'](0x3a98),_0x21c9f3['setDefaultTimeout'](0x3a98),await _0x21c9f3['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x321f20]=_0x21c9f3,_0x21c9f3;return(browser===null||pageStack[_0x321f20]===null||pageStack[_0x321f20]['isClosed']())&&(browser=await puppeteer['launch']({'headless':isHeadless,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x1e5068})),(pageStack[_0x321f20]===null||pageStack[_0x321f20]['isClosed']())&&(_0x21c9f3=await browser['newPage'](),_0x21c9f3['setDefaultNavigationTimeout'](0x3a98),_0x21c9f3['setDefaultTimeout'](0x3a98),await _0x21c9f3['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x321f20]=_0x21c9f3),pageStack[_0x321f20];}catch(_0x58ee5b){console['error']('Failed\x20to\x20launch\x20browser:',_0x58ee5b);const _0x2e3a5d=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x58ee5b);throw _0x2e3a5d;}}ipcMain['on']('login',async(_0x479a00,_0xadda7)=>{const _0x23b6dc=await getBrowserPageLogin();await _0x23b6dc['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x23b6dc,_0xadda7),ipcMain['on']('setLoginCookies',async(_0x137e22,_0x16fadc)=>{try{await set_login_cookies(_0x23b6dc,_0x16fadc);}catch(_0x3f5b1f){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x3f5b1f);}});}),ipcMain['handle']('set-headless',async(_0x144fea,_0x286104)=>{return isHeadless=!!_0x286104,console['log']('[MAIN]\x20isHeadless\x20gesetzt\x20auf:',isHeadless),{'ok':!![],'headless':isHeadless};}),ipcMain['handle']('get-headless',async()=>{return{'headless':isHeadless};}),ipcMain['on']('export-relation',async(_0x431b75,_0x23e9a4)=>{try{await exportDatabase(_0x23e9a4),_0x431b75['reply']('export-relation-response',{'success':!![]});}catch(_0x5bf308){console['error'](_0x5bf308),_0x431b75['reply']('export-relation-response',{'success':![],'message':_0x5bf308['message']});}}),ipcMain['handle']('sendMessage',async(_0x4d2d42,_0x142f58,_0x43bb88,_0x3baf6a,_0x1ad248,_0x5a7b78,_0x217deb,_0x1f7795,_0x4e3af9,_0x93ab0a,_0x452934,_0x6fd8b,_0x14b4fd)=>{isStopping=![];let _0x56ef90=null;return _0x217deb?_0x56ef90=await getBrowserPage(_0x1ad248,_0x1f7795):_0x56ef90=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x142f58),send_message(_0x56ef90,_0x142f58,_0x43bb88,_0x3baf6a,_0x1ad248,_0x5a7b78,_0x4e3af9,_0x93ab0a,_0x452934,_0x6fd8b,_0x14b4fd);}),ipcMain['handle']('stop-action',async(_0x5b48a2,_0x206f01)=>{isStopping=!![];const _0x2a5ba1=await getBrowserPage(0x1,_0x206f01);await _0x2a5ba1['close']();}),ipcMain['handle']('fetch_followers',async(_0x50cfc3,_0x2bb811,_0x132d36,_0x1702ae,_0x30ddf1,_0x3ef6f4,_0xe224f8)=>{isStopping=![];const _0x5e5e9c=await getBrowserPage();return fetch_followers_from_account(_0x50cfc3,_0x5e5e9c,_0x2bb811,_0x132d36,_0x1702ae,_0x30ddf1,_0x3ef6f4,_0xe224f8);}),ipcMain['handle']('get-account-details',async(_0x3e4bcd,_0x3305b8,_0x4dcd09,_0x4de29c)=>{isStopping=![];const _0xb01c12=await getBrowserPage();return fetch_account_details(_0xb01c12,_0x3305b8,_0x4dcd09,_0x4de29c);}),ipcMain['handle']('fetch_likes',async(_0x1bdd5a,_0x2c63eb,_0x3b4d92,_0x4c71be,_0x1f9566,_0x4346c5,_0xc9d211)=>{isStopping=![];const _0x368106=await getBrowserPage();return fetch_likers_from_post(_0x1bdd5a,_0x368106,_0x2c63eb,_0x3b4d92,_0x4c71be,_0x1f9566,_0x4346c5,_0xc9d211);}),ipcMain['handle']('fetch_comments',async(_0x406a00,_0x581889,_0x4b381d,_0x1d21d8,_0x166acc,_0xbef20e,_0x1f7641)=>{isStopping=![];const _0x3d2699=await getBrowserPage();return fetch_comments_from_post(_0x406a00,_0x3d2699,_0x581889,_0x4b381d,_0x1d21d8,_0x166acc,_0xbef20e,_0x1f7641);});async function updateAppSilent(){const {spawn:_0x5295f5}=require('child_process'),_0x184088=require('path'),_0x384eea=require('electron-log');return _0x384eea['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0xd6189d,_0x519c5f)=>{const {updateElectronApp:_0xac837e,UpdateSourceType:_0x5398a8}=require('update-electron-app');_0xac837e({'updateSource':{'type':_0x5398a8['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x384eea}),_0xd6189d('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x27c2f8,_0x155ecb)=>{doFullElectronUpdateSilent(),_0x27c2f8('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x44c658}=require('child_process'),_0x183a93=require('path'),_0x5828c7=require('electron-log');return _0x5828c7['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x55cbfd,_0x45bd6e)=>{const {updateElectronApp:_0x30d327,UpdateSourceType:_0x88850f}=require('update-electron-app');_0x30d327({'updateSource':{'type':_0x88850f['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x5828c7}),_0x55cbfd('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x16df58,_0x17ff15)=>{doFullElectronUpdate(),_0x16df58('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x4fd3f1,_0x3b112b)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x4fd3f1('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x1c4c84=path['join'](__dirname,'mac-updater-intern.sh'),_0x218202=spawn('/bin/bash',[_0x1c4c84],{'detached':!![],'stdio':'ignore'});_0x218202['unref'](),setTimeout(()=>{_0x4fd3f1('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x3b112b(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x302fcc=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x202921,_0x2e0755)=>{console['log']('Update\x20Silent:\x20'+_0x2e0755);if(_0x2e0755){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x3952ce,_0x2b1120){return Math['random']()*(_0x2b1120-_0x3952ce+0x1)+_0x3952ce;}function delay(_0x11f434,_0x160f2f){let _0x28156a=getRnd(_0x11f434,_0x160f2f);return new Promise(function(_0x16dcb3){setTimeout(_0x16dcb3,_0x28156a);});}async function scroll(_0x587ba3,_0x4ca7bb,_0x439ebd=0x2,_0x2c85e0){const _0x1e48e3=await _0x587ba3['waitForSelector'](_0x4ca7bb);for(let _0x1996cd=0x0;_0x1996cd<_0x439ebd;_0x1996cd++){console['log']('Scrolling\x20'+_0x1996cd),await _0x587ba3['evaluate'](_0x4d8354=>{const _0xa5c20c=document['querySelector'](_0x4d8354);_0xa5c20c&&_0xa5c20c['scrollBy'](0x0,0x190);},_0x4ca7bb),await delay(0x320,0x5dc),_0x2c85e0();}}async function saveCookies(_0x43e4be){let _0x44df92=await _0x43e4be['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x44df92,null,0x2));}async function notificationClear(_0x1f343e){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x1f343e['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x1f343e['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x58a368){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x58a368);}}async function getTargetProfiles(_0xb348d0){return new Promise((_0x19cbee,_0x5231aa)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0xb348d0,(_0x2fdf5e,_0x2e9499)=>{_0x2fdf5e?_0x5231aa(_0x2fdf5e):_0x19cbee(_0x2e9499);});});}async function login_legacy(_0x4625c2,_0x2fde3c,_0x31a9b8){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4625c2,_0x2fde3c),await createUserIfNotExists(_0x2fde3c,_0x31a9b8);}catch(_0x3380a6){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x3380a6);}try{await _0x4625c2['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x4625c2['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x4625c2['click']('button._a9--._ap36._a9_0');}catch(_0xf176bb){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x4625c2['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x4625c2['type']('input[name=\x27username\x27]',_0x2fde3c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4625c2['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x4625c2['type']('input[name=\x27password\x27]',_0x31a9b8,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x4625c2['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x4625c2['click']('button[type=\x27submit\x27]');}catch(_0x2b57d0){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x4625c2),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x4625c2,_0x2fde3c);}catch(_0x328213){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x328213);}}catch(_0x60ed6d){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x60ed6d);}}async function login(_0x1f7b07,_0x3240f4){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x1f7b07,_0x3240f4),await createUserIfNotExists(_0x3240f4);}catch(_0x119b0b){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x119b0b);}try{await _0x1f7b07['goto']('https://www.instagram.com/accounts/login/');}catch(_0xf9d143){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0xf9d143);}}async function set_login_cookies(_0xad625d,_0x23f1d0){try{await saveCookiesForUser(_0xad625d,_0x23f1d0);}catch(_0x529ec8){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x529ec8);}}async function waitForXPath(_0x5a4607,_0x22c7e4,_0x145715={}){return await _0x5a4607['waitForFunction'](_0x5f46a3=>{return document['evaluate'](_0x5f46a3,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x145715,_0x22c7e4),_0x5a4607['evaluateHandle'](_0x1c799c=>document['evaluate'](_0x1c799c,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x22c7e4);}async function waitForSelectorWithFallbacks(_0x22e1ff,_0x4a0316,_0x563ab0={}){!Array['isArray'](_0x4a0316)&&(_0x4a0316=[_0x4a0316]);for(let _0x260795=0x0;_0x260795<_0x4a0316['length'];_0x260795++){const _0x6d08a7=_0x4a0316[_0x260795],_0x2650f7=_0x6d08a7['startsWith']('//')||_0x6d08a7['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x2650f7?'XPath':'Selector')+'\x20'+(_0x260795+0x1)+'/'+_0x4a0316['length']+':\x20'+_0x6d08a7['substring'](0x0,0x32)+'...');const _0x56b560=_0x260795===0x0?_0x563ab0['timeout']||0x1388:0x7d0;let _0x3c3a92;if(_0x2650f7){const _0x30819e=await waitForXPath(_0x22e1ff,_0x6d08a7,{..._0x563ab0,'timeout':_0x56b560});if(!_0x30819e)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x3c3a92=_0x30819e;}else _0x3c3a92=await _0x22e1ff['waitForSelector'](_0x6d08a7,{..._0x563ab0,'timeout':_0x56b560});return console['log']((_0x2650f7?'XPath':'Selector')+'\x20'+(_0x260795+0x1)+'\x20gefunden!'),_0x3c3a92;}catch(_0x560d0e){console['log']((_0x2650f7?'XPath':'Selector')+'\x20'+(_0x260795+0x1)+'\x20nicht\x20gefunden:\x20'+_0x560d0e['message']);if(_0x260795===_0x4a0316['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x4a0316['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x560d0e['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x21a413,_0x5ab436,_0x47d26d={}){return await _0x21a413['waitForFunction'](_0x228957=>{return document['evaluate'](_0x228957,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x47d26d,_0x5ab436),_0x21a413['evaluateHandle'](_0xa1ef0c=>{const _0x45e639=document['evaluate'](_0xa1ef0c,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x49368f=[];for(let _0x482590=0x0;_0x482590<_0x45e639['snapshotLength'];_0x482590++){_0x49368f['push'](_0x45e639['snapshotItem'](_0x482590));}return _0x49368f;},_0x5ab436)['then'](_0x18a2fe=>_0x18a2fe['getProperties']());}ipcMain['handle']('check-login',async(_0x5249b3,_0x5785bb)=>{if(pageStack[0x0]){try{await pageStack[0x0]['close']();}catch(_0x28e82b){}pageStack[0x0]=null;}if(browser){try{await browser['close']();}catch(_0x51286e){}browser=null;}const _0x5c96e3=await getBrowserPage(0x0,0x0),_0x58547b=await checkCookiesSession(_0x5c96e3,_0x5785bb);return _0x58547b;});async function checkCookiesSession(_0x384a9c,_0x3c7d07){try{await setCookiesForUser(_0x384a9c,_0x3c7d07),console['log']('Cookies\x20für\x20'+_0x3c7d07+'\x20erfolgreich\x20geladen');}catch(_0x20a891){return console['error']('Fehler\x20beim\x20Laden\x20der\x20Cookies\x20für\x20'+_0x3c7d07+':',_0x20a891),![];}try{await _0x384a9c['goto']('https://www.instagram.com/',{'timeout':0x3a98});}catch(_0x2dee9d){console['error']('Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x2dee9d);}await delay(0x6a4,0x7d0);try{const _0x36e858=await checkLoginStatus(_0x384a9c);return console['log']('Login-Status\x20für\x20'+_0x3c7d07+':\x20'+_0x36e858),_0x36e858;}catch(_0x4a3c91){return console['warn']('Login-Prüfung\x20fehlgeschlagen\x20für\x20'+_0x3c7d07+':',_0x4a3c91['message']),![];}}async function checkLoginStatus(_0x33ec26){const _0x564f64=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x25c0c8=null;try{_0x25c0c8=await waitForSelectorWithFallbacks(_0x33ec26,_0x564f64,{'timeout':0x7d0});}catch(_0x379653){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x379653),!![];}if(_0x25c0c8){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x2a1d49){const _0x48b5d2=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x54eb63=null;try{_0x54eb63=await waitForSelectorWithFallbacks(_0x2a1d49,_0x48b5d2,{'timeout':0x7d0});}catch(_0x5eaa03){return console['log']('Seite\x20existiert:\x20'+_0x5eaa03),!![];}if(_0x54eb63){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function likeFirstPost(_0x3d7f81){try{const _0x373aa8=await _0x3d7f81['$$'](K_BEITRAG_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Posts\x20gefunden:\x20'+_0x373aa8['length']);if(_0x373aa8&&_0x373aa8['length']>0x0){const _0x2b62de=_0x373aa8[0x0];await _0x2b62de['click'](),await delay(0xaf0,0xbb8);const _0x1ebf56=await _0x3d7f81['evaluate'](()=>{const _0x58c13a=document['querySelector']('section\x20>\x20span\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20svg[aria-label=\x22Like\x22]');return!!_0x58c13a;});if(_0x1ebf56){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus');const _0x29cdf7=await _0x3d7f81['$$'](K_BEITRAG_LIKE_BUTTON),_0x32be7b=_0x29cdf7[0x0];await delay(0x514,0x5dc),await _0x3d7f81['evaluate'](_0x1c7146=>{_0x1c7146['click']();},_0x32be7b);}else console['log']('Beitrag\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x3d7f81['goBack'](),await delay(0x7d0,0x898);}}catch(_0x4819d5){console['log']('Fehler\x20beim\x20Liken\x20des\x20ersten\x20Posts:',_0x4819d5);throw new Error('Like_Posts:\x20'+_0x4819d5);}}async function likeFirstStory(_0x5f1e75){try{const _0x1cba0b=await _0x5f1e75['$$'](K_STORY_ARRAY_SELECTOR);console['log']('Anzahl\x20der\x20Stories\x20gefunden:\x20'+_0x1cba0b['length']);if(_0x1cba0b&&_0x1cba0b['length']>0x0){const _0xa858bb=_0x1cba0b[0x0];await _0xa858bb['click'](),await delay(0xaf0,0xbb8);const _0x1b7496=await _0x5f1e75['evaluate'](()=>{const _0x389eed=document['querySelector']('[aria-label=\x22Like\x22]');return!!_0x389eed;});if(_0x1b7496){console['log']('Like-Button\x20gefunden\x20-\x20führe\x20Like\x20aus'),await delay(0x514,0x5dc);try{const _0x111898=await _0x5f1e75['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5f1e75['click'](_0x111898);}catch(_0x2b235d){console['log']('Direkter\x20Klick\x20fehlgeschlagen,\x20versuche\x20alternative\x20Methoden:',_0x2b235d);try{const _0x63a6b4=await _0x5f1e75['waitForSelector'](K_STORY_LIKE_BUTTON,{'visible':!![]});await _0x5f1e75['evaluateHandle'](_0x544505=>{_0x544505['click']();},_0x63a6b4);}catch(_0x48e3e1){console['log']('Evaluatehandle\x20fehlgeschlagen,\x20versuche\x20JS-Click:',_0x48e3e1),await _0x5f1e75['evaluate'](()=>{const _0x1cf33b=document['querySelector']('[aria-label=\x22Like\x22]');if(_0x1cf33b)_0x1cf33b['click']();else throw new Error('Element\x20nicht\x20gefunden');});}}}else console['log']('Story\x20wurde\x20bereits\x20geliked\x20-\x20überspringe\x20Like-Aktion');await delay(0x10cc,0x1194),await _0x5f1e75['goBack'](),await delay(0x7d0,0x898);}}catch(_0x4eb1e2){console['log']('Fehler\x20beim\x20Liken\x20der\x20ersten\x20Story:',_0x4eb1e2);throw new Error('Like_Storys:\x20'+_0x4eb1e2);}}async function send_message(_0x22224b,_0x88adff,_0x4c3ef3,_0x3dbe9a,_0x32b815,_0x1bd0e6,_0x5b7560,_0x430a07,_0x56e302,_0x74fe8e,_0x297318){return new Promise(async(_0x557d33,_0x8f8e29)=>{_0x1bd0e6=_0x1bd0e6['split'](';'),console['log'](_0x1bd0e6[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x32b815);if(_0x3dbe9a===null||_0x3dbe9a===undefined){console['log']('Nachricht\x20ist\x20null\x20oder\x20undefined'),_0x8f8e29('Nachricht\x20darf\x20nicht\x20leer\x20sein');return;}try{await setCookiesForUser(_0x22224b,_0x1bd0e6[0x0]);}catch(_0x2c3ced){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x2c3ced),_0x557d33({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2c3ced});return;}await delay(0x6a4,0x7d0);try{await _0x22224b['goto']('https://www.instagram.com/'+_0x88adff+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x22224b);}catch(_0x1f8e55){_0x557d33({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x1f8e55});return;}try{await checkLoginStatus(_0x22224b);}catch(_0x2673cc){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x2673cc),_0x8f8e29('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}if(_0x56e302==0x1)try{await likeFirstPost(_0x22224b);}catch(_0x4104e3){_0x8f8e29(_0x4104e3);}if(_0x74fe8e==0x1)try{await likeFirstStory(_0x22224b);}catch(_0x4c8b55){_0x8f8e29(_0x4c8b55);}console['log']('UserSkip:\x20'+_0x5b7560);if(_0x5b7560==0x1)try{const _0x5242e5=await _0x22224b['$eval']('._ap3a._aaco._aacw._aad6._aade',_0xa87ee0=>_0xa87ee0['textContent']['trim']());console['log'](_0x5242e5);if(_0x5242e5==='Following'||_0x5242e5==='Folge\x20ich')return _0x557d33({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x2b1773){}await delay(0x6a4,0x7d0);try{const _0x3e149a=await waitForSelectorWithFallbacks(_0x22224b,K_DIRECT_MSG_BUTTON);await _0x3e149a['click'](),await delay(0xa8c,0xdac);try{const _0x2829cc=await waitForSelectorWithFallbacks(_0x22224b,K_EXPAND_MSG_BUTTON);await _0x2829cc['click']();}catch(_0x5cafbd){console['log']('Expand-Button\x20nicht\x20gefunden.\x20Überspringen:\x20'+_0x5cafbd);}}catch(_0x3ddcf1){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x3ddcf1);try{await delay(0xa8c,0xbb8);try{const _0x1bcc03=await waitForSelectorWithFallbacks(_0x22224b,K_OPTIONS_BUTTON);await _0x1bcc03['click']();}catch(_0x3701bc){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x3701bc),_0x557d33({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x3701bc});return;}await delay(0xa8c,0xbb8);const _0x455433=await waitForXPath(_0x22224b,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x455433['click']();}catch(_0x2e5e80){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x2e5e80),_0x557d33({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x708,0x7d0),await notificationClear(_0x22224b);}catch(_0x547fd0){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x547fd0);}try{await delay(0xaf0,0xdac);const _0x2f9daa=await waitForSelectorWithFallbacks(_0x22224b,K_CHAT_INPUT_FIELD,{'timeout':0x3a98});if(_0x430a07){const _0x371955=await _0x22224b['$'](K_ALREADY_CHATTED);if(_0x371955)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x88adff),_0x557d33({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x25c605=await _0x22224b['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x25c605),_0x3dbe9a=_0x3dbe9a['replace']('{USERNAME}',_0x88adff);let _0x2aa57f;if(_0x3dbe9a['includes']('{NAME}')||_0x3dbe9a['includes']('{name}'))try{const _0x26c3f6=await extractFirstName(_0x25c605,_0x297318);console['log']('Response\x20Clearname\x20valid:\x20'+_0x26c3f6['valid']),_0x26c3f6['valid']?(_0x3dbe9a=_0x3dbe9a['replaceAll'](/{NAME}|{name}/g,_0x26c3f6['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x26c3f6['name']),_0x2aa57f=_0x26c3f6['name']):(_0x3dbe9a=_0x3dbe9a['replaceAll'](/ ?({NAME}|{name})/g,''),_0x2aa57f='UNKNOWN_NAME');}catch(_0x4d09ca){console['log'](_0x4d09ca['message']),_0x2aa57f=_0x4d09ca['message'];const _0xb82e3=_0x25c605?_0x25c605['replace'](/[^\p{L}\s]/gu,''):'',_0x24bc1f=_0xb82e3['split']('\x20')[0x0]||'';_0x24bc1f['length']>0x2&&!_0x24bc1f['includes']('Instagram')?_0x3dbe9a=_0x3dbe9a['replaceAll'](/{NAME}|{name}/g,_0x24bc1f):_0x3dbe9a=_0x3dbe9a['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x3dbe9a);const _0x27892d=_0x3dbe9a['split']('\x0a');await _0x2f9daa['type'](_0x27892d[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x263864=0x1;_0x263864<_0x27892d['length'];_0x263864++){await _0x22224b['keyboard']['down']('Shift'),await _0x22224b['keyboard']['press']('Enter'),await _0x22224b['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x27892d[_0x263864]['length']>0x0&&await _0x2f9daa['type'](_0x27892d[_0x263864],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x328e2f=await waitForSelectorWithFallbacks(_0x22224b,K_SEND_MSG_BUTTON);await _0x328e2f['click']();}catch(_0xa1ff3a){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0xa1ff3a),_0x557d33({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x88adff+'\x20überspringen.','error':_0xa1ff3a['message']});}await delay(0x320,0x3e8),_0x557d33({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x25c605,'extracted_clearname':_0x2aa57f});}catch(_0x3c736a){let _0x298ba5=_0x3c736a;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x298ba5),_0x557d33({'status':0x1f4,'message':'Error\x20500:\x20'+_0x298ba5});}});}function handle_fail(_0x3afed3){if(isStopping)return new Promise(_0x402669=>{_0x402669('Scraper\x20gestoppt.');});else{let _0x28eb8b='';switch(_0x3afed3){case 0x0:_0x28eb8b='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x28eb8b='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x28eb8b='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x28eb8b='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x2995db,_0x4a4264)=>{_0x4a4264(_0x28eb8b);});}}async function fetch_account_details(_0x556371,_0x48f0b3,_0x7768f5,_0x47a7be){try{await setCookiesForUser(_0x556371,_0x7768f5['username']);}catch(_0x581ada){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x581ada);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x581ada);return handle_fail(0x0);}_0x556371['setDefaultNavigationTimeout'](0x7530),await _0x556371['goto']('https://www.instagram.com/'+_0x48f0b3+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x556371);const _0x591794=await _0x556371['evaluate'](()=>{const _0x5c8e92=document['querySelector']('meta[property=\x22og:image\x22]');return _0x5c8e92?_0x5c8e92['getAttribute']('content'):null;});await _0x556371['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x2149ad=await _0x556371['evaluate'](()=>{const _0x1b6a10=document['querySelector']('meta[name=\x22description\x22]');if(!_0x1b6a10)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0xc13c26=_0x1b6a10['getAttribute']('content');if(!_0xc13c26)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0xc13c26);const _0x5ad823=/\s*[–-]\s*/,_0x4ab7ef=_0xc13c26['split'](_0x5ad823);if(_0x4ab7ef['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x28bbd7=_0x4ab7ef[0x0],_0x297a85=_0x4ab7ef[0x1],_0x24cec3=_0x28bbd7['split'](',\x20');if(_0x24cec3['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x3c3665=_0x24cec3[0x0]['split']('\x20')[0x0],_0x3d7c41=_0x24cec3[0x1]['split']('\x20')[0x0],_0x1ef237=_0x24cec3[0x2]['split']('\x20')[0x0];let _0x2d731b='',_0x1b8c7d='';const _0x6d3777='\x20on\x20Instagram:\x20',_0x34b5bc=_0x297a85['split'](_0x6d3777);return _0x2d731b=_0x34b5bc[0x0]['trim'](),_0x2d731b=_0x2d731b['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x34b5bc['length']>0x1&&(_0x1b8c7d=_0x34b5bc[0x1]['trim'](),_0x1b8c7d['startsWith']('\x22')&&_0x1b8c7d['endsWith']('\x22')&&(_0x1b8c7d=_0x1b8c7d['substring'](0x1,_0x1b8c7d['length']-0x1)['trim']()),_0x1b8c7d=_0x1b8c7d['replace'](/&quot;/g,'')['trim']()),{'followers':_0x3c3665,'following':_0x3d7c41,'posts':_0x1ef237,'nameText':_0x2d731b,'bio':_0x1b8c7d};});console['log']('Extracted\x20profile\x20data:',_0x2149ad);const _0x4b6404=_0x2149ad['nameText'],_0x23c5d0=_0x591794,_0x12a46a=_0x2149ad['bio'],_0x377ea1=_0x2149ad['followers'],_0x1df4a0=_0x2149ad['following'],_0xf1dec=_0x2149ad['posts'],_0xd39a02=![],_0x191bdb=![],_0x436fc9=![],_0x79ec3a='\x0a\x20\x20INSERT\x20INTO\x20'+_0x47a7be+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x79ec3a,[_0x48f0b3,_0x4b6404,_0x23c5d0,_0x12a46a,_0x377ea1,_0x1df4a0,_0xf1dec,_0xd39a02,_0x191bdb,_0x436fc9],function(_0x4dd688){_0x4dd688?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x4dd688['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x2e16b8,_0x291247,_0x273742,_0x26a6fb,_0x268326,_0x4e7afe,_0x4c1867,_0xb5a01c){let _0x4977de=0x4,_0x369f37=0x0,_0xfa8e32=0x0;try{await setCookiesForUser(_0x291247,_0x4e7afe['username']);}catch(_0x87b08){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x87b08);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x87b08);return handle_fail(0x0);}let _0x4c3210=0x0;try{await _0x291247['goto']('https://www.instagram.com/'+_0x273742+'/'),await notificationClear(_0x291247);try{await checkLoginStatus(_0x291247);}catch(_0x502fb4){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x502fb4);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x291247);}catch(_0x1231d7){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x1231d7);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x26a6fb<=0x0){const _0x224ee9=await _0x291247['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x2b5610=await _0x291247['evaluate'](_0x4bc76d=>_0x4bc76d['innerHTML'],_0x224ee9);_0x4c3210=Math['ceil'](_0x2b5610/0x4);}else _0x4c3210=Math['ceil'](_0x26a6fb/0x4);_0x4977de+=_0x4c3210,_0xfa8e32=Math['round'](++_0x369f37/_0x4977de*0x64),_0x2e16b8['sender']['send']('fetch-progress',_0xfa8e32,!![]);let _0x356707=await _0x291247['waitForSelector']('a[href=\x22/'+_0x273742+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x356707['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x273742+'\x20gesichtet'),_0xfa8e32=Math['round'](++_0x369f37/_0x4977de*0x64),_0x2e16b8['sender']['send']('fetch-progress',_0xfa8e32,!![]);}catch(_0x3934e9){console['log']('Follower\x20Liste\x20von\x20'+_0x273742+'\x20nicht\x20gefunden:'+_0x3934e9);throw new Error('Follower\x20Liste\x20von\x20'+_0x273742+'\x20nicht\x20gefunden:'+_0x3934e9);return handle_fail(0x0);}}catch(_0x5aace7){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5aace7);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5aace7);return handle_fail(0x0);}try{await delay(0x12c0,0x1388),console['log']('Auto-scrolls:\x20'+_0x4c3210);try{await scroll(_0x291247,FOLLOWER_FENSTER,_0x4c3210,_0x11a04e=>{});}catch{console['log']('Fallback\x20div:has\x20ausgelöst'),await scroll(_0x291247,'div.x6nl9eh.x1a5l9x9.x7vuprf.x1mg3h75.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',_0x4c3210,_0x1888db=>{});}_0xfa8e32=Math['round'](++_0x369f37/_0x4977de*0x64),_0x2e16b8['sender']['send']('fetch-progress',_0xfa8e32,!![]),await _0x291247['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x54cd69=await _0x291247['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x49a2eb=await _0x291247['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0xfa8e32=Math['round'](++_0x369f37/_0x4977de*0x64),_0x2e16b8['sender']['send']('fetch-progress',_0xfa8e32,!![]);_0x26a6fb<=0x0&&(_0x26a6fb=_0x54cd69['length']);let _0x358821=[];for(let _0x24f33b=0x0;_0x24f33b<_0x54cd69['length']&&_0x24f33b<_0x26a6fb;_0x24f33b++){const _0x2a1437=await _0x54cd69[_0x24f33b]['evaluate'](_0x535a93=>_0x535a93['textContent']),_0x54c8b4=await _0x49a2eb[_0x24f33b]['evaluate'](_0x4384a3=>_0x4384a3['textContent']);if(_0xb5a01c){const _0x2884f0=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x4e7afe['username'],_0x2a1437]);if(_0x2884f0){console['log']('Skipping\x20already\x20contacted\x20follower:\x20'+_0x2a1437);continue;}}_0x358821['push'](_0x2a1437);const _0x3c4000='INSERT\x20INTO\x20'+_0x268326+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x3c4000,[_0x2a1437,_0x54c8b4],function(_0x5e5d1e){_0x5e5d1e?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x268326+'\x27:',_0x5e5d1e['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0xfa8e32=Math['round'](++_0x369f37/_0x4977de*0x64),_0x2e16b8['sender']['send']('fetch-progress',_0xfa8e32,!![]),_0x4c1867&&(_0x2e16b8['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2e16b8,_0x291247,_0x4e7afe,_0x268326,_0x358821)),new Promise(_0xf506fd=>{_0xf506fd('Scraping\x20finished!');});}catch(_0x17ba24){if(_0x4c1867)throw new Error(_0x17ba24);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x273742+'\x20nicht\x20gefunden:\x20'+_0x17ba24);return handle_fail(0x0);}}async function fetch_details_from_list(_0x21b11c,_0x563083,_0x1dc9f0,_0x4ce318,_0x110bd2){let _0x5eee2f=0x0,_0x38297b=0x0;for(let _0x1d8ec4=0x0;_0x1d8ec4<_0x110bd2['length'];_0x1d8ec4++){console['log']('Processing\x20profile:',_0x110bd2[_0x1d8ec4]);try{await fetch_account_details(_0x563083,_0x110bd2[_0x1d8ec4],_0x1dc9f0,_0x4ce318);}catch(_0x136b3d){console['error']('Detailed\x20Scraping\x20von:\x20',_0x110bd2[_0x1d8ec4],_0x136b3d);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x110bd2[_0x1d8ec4]+'\x20'+_0x136b3d);}_0x38297b=Math['round'](++_0x5eee2f/_0x110bd2['length']*0x64),_0x21b11c['sender']['send']('fetch-progress',_0x38297b,!![],!![]);}}async function fetch_likers_from_post(_0x14b036,_0x54d8f0,_0x415a6a,_0x5190aa,_0x4de088,_0x3a42d4,_0x16190c,_0x1fc041){let _0x5cfa2a=0x4,_0x37bb3f=0x0,_0x50036e=0x0;try{await setCookiesForUser(_0x54d8f0,_0x3a42d4['username']);}catch(_0x112dcf){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x112dcf);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x112dcf);return handle_fail(0x1);}_0x50036e=Math['round'](++_0x37bb3f/_0x5cfa2a*0x64),_0x14b036['sender']['send']('fetch-progress',_0x50036e,!![]);try{let _0x14c377=_0x415a6a['substring'](0x0,_0x415a6a['lastIndexOf']('/'));_0x14c377['includes']('/reel/')&&(_0x14c377=_0x14c377['replace']('/reel/','/p/'));let _0x5ec78a=_0x14c377+'/liked_by';console['log'](_0x5ec78a),await _0x54d8f0['goto'](_0x5ec78a),await delay(0x7d0,0xfa0),await notificationClear(_0x54d8f0),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x54d8f0);}catch(_0x59b2ee){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x59b2ee);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x54d8f0);}catch(_0x5537f2){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x5537f2);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x50036e=Math['round'](++_0x37bb3f/_0x5cfa2a*0x64),_0x14b036['sender']['send']('fetch-progress',_0x50036e,!![]),await _0x54d8f0['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x38a263=await _0x54d8f0['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x1cdb0=await _0x54d8f0['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x38a263['length']);let _0x27366a=path['join'](__dirname,'/likers.csv');_0x50036e=Math['round'](++_0x37bb3f/_0x5cfa2a*0x64),_0x14b036['sender']['send']('fetch-progress',_0x50036e,!![]);_0x5190aa<=0x0&&(_0x5190aa=_0x38a263['length']);try{let _0x229761=[];for(let _0x341aba=0x0;_0x341aba<_0x38a263['length']&&_0x341aba<_0x5190aa;_0x341aba++){const _0x425d79=await _0x38a263[_0x341aba]['evaluate'](_0x23a7c1=>_0x23a7c1['textContent']),_0x5d85d4=await _0x1cdb0[_0x341aba]['evaluate'](_0x5b8df3=>_0x5b8df3['textContent']);if(_0x1fc041){const _0x5704e3=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3a42d4['username'],_0x425d79]);if(_0x5704e3){console['log']('Skipping\x20already\x20contacted\x20liker:\x20'+_0x425d79);continue;}}_0x229761['push'](_0x425d79);const _0x16e5ce='INSERT\x20INTO\x20'+_0x4de088+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x16e5ce,[_0x425d79,_0x5d85d4],function(_0x439f82){_0x439f82?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4de088+'\x27:',_0x439f82['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x50036e=Math['round'](++_0x37bb3f/_0x5cfa2a*0x64),_0x14b036['sender']['send']('fetch-progress',_0x50036e,!![]),_0x16190c&&(_0x14b036['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x14b036,_0x54d8f0,_0x3a42d4,_0x4de088,_0x229761)),new Promise(_0x28b365=>{_0x28b365('Scraping\x20finished!');});}catch(_0x2ef304){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x2ef304);return handle_fail(0x1);}}catch(_0xc62baa){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0xc62baa);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0xc62baa);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x3eacdc,_0x35a46a,_0x4f01d4,_0x4285de,_0x401c0d,_0x3ee5ed,_0x5e7867,_0x4de41f){let _0x2629ce=0x3,_0x5c2d7f=0x0,_0x415739=0x0;try{await setCookiesForUser(_0x35a46a,_0x3ee5ed['username']);}catch(_0x10c810){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x10c810);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x10c810);return handle_fail(0x2);}try{console['log'](_0x4f01d4),await _0x35a46a['goto'](_0x4f01d4),await delay(0x7d0,0xfa0),await notificationClear(_0x35a46a),await delay(0xc8,0x1f4);const _0xb143a9=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x35a46a);}catch(_0x354c66){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x354c66);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x35a46a);}catch(_0x393fa2){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x393fa2);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x952508;const _0x2ce505=await _0x35a46a['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x42b34c=await _0x35a46a['evaluate'](_0x2ebc8d=>_0x2ebc8d['innerHTML'],_0x2ce505),_0x502f64=String(_0x42b34c)['replace'](/[^0-9]/g,''),_0x33ef58=Number(_0x502f64)/0x14;_0x4285de<=0x0?_0x952508=Math['ceil'](_0x33ef58/0x3):_0x952508=Math['ceil'](_0x4285de/0x3);_0x2629ce+=_0x952508,_0x415739=Math['round'](++_0x5c2d7f/_0x2629ce*0x64),_0x3eacdc['sender']['send']('fetch-progress',_0x415739,!![]),console['log']('Auto-scrolls:\x20'+_0x952508),await scroll(_0x35a46a,_0xb143a9,_0x952508,_0x22f55d=>{_0x415739=Math['round'](++_0x5c2d7f/_0x2629ce*0x64),_0x3eacdc['sender']['send']('fetch-progress',_0x415739,!![]);});try{const _0x1c1ebc=COM_REPLY_BUTTON_SPAN,_0x4a7d7f=await waitForXPathAll(_0x35a46a,_0x1c1ebc);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x4a7d7f['size']),await delay(0x1f4,0x320);let _0x259c46=_0x4a7d7f['size'],_0x58c35f=[];for(const [_0x5d0249,_0x272ce3]of _0x4a7d7f){_0x58c35f['push'](_0x272ce3);}console['log']('Alle\x20Reply-Buttons:',_0x58c35f['length']);try{for(let _0x4067b3=0x0;_0x4067b3<_0x259c46;_0x4067b3++){await _0x58c35f[_0x4067b3]['click'](),await delay(0x320,0x5dc);}}catch(_0x1f4fc3){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x1f4fc3);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x1f4fc3);return handle_fail(0x2);}}catch(_0x3c4e51){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x2404ba=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x35a46a['waitForSelector'](_0x2404ba),await delay(0x1f4,0x320),_0x415739=Math['round'](++_0x5c2d7f/_0x2629ce*0x64),_0x3eacdc['sender']['send']('fetch-progress',_0x415739,!![]);const _0x175a7a=await _0x35a46a['$$'](_0x2404ba);let _0x5048fe=path['join'](__dirname,'/comments.csv');_0x4285de<=0x0&&(_0x4285de=_0x175a7a['length']);console['log']('fetch_limit:\x20'+_0x4285de),console['log']('comments_len:\x20'+_0x175a7a['length']),_0x4285de++;try{let _0x4b4dfb=[];for(let _0x1d253d=0x1;_0x1d253d<_0x175a7a['length']&&_0x1d253d<_0x4285de;_0x1d253d++){const _0x3641c0=await _0x175a7a[_0x1d253d]['evaluate'](_0x5037f8=>_0x5037f8['textContent']);if(_0x4de41f){const _0x455a97=await sqlGet(campaignDB,'SELECT\x20dm_id\x20FROM\x20dm\x20WHERE\x20account=?\x20AND\x20username=?',[_0x3ee5ed['username'],_0x3641c0]);if(_0x455a97){console['log']('Skipping\x20already\x20contacted\x20commenter:\x20'+_0x3641c0);continue;}}try{_0x4b4dfb['push'](_0x3641c0);const _0xca7b48='INSERT\x20INTO\x20'+_0x401c0d+'\x20(username)\x20VALUES\x20(?)';db['run'](_0xca7b48,[_0x3641c0],function(_0x583a24){_0x583a24&&console['log']('error\x20in\x20add-user:'+_0x583a24);});}catch(_0x4be437){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1d253d+'\x20:\x20'+_0x4be437);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1d253d+'\x20:\x20'+_0x4be437);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x415739=Math['round'](++_0x5c2d7f/_0x2629ce*0x64),_0x3eacdc['sender']['send']('fetch-progress',_0x415739,!![]),_0x3eacdc['sender']['send']('fetch-progress',0x64,!![]),_0x5e7867&&(_0x3eacdc['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3eacdc,_0x35a46a,_0x3ee5ed,_0x401c0d,_0x4b4dfb)),_0x3eacdc['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x820c04=>{_0x820c04('Scraping\x20finished!');});}catch(_0x3b19a7){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x3b19a7);return handle_fail(0x2);}}catch(_0x575f53){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x575f53);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x575f53);return handle_fail(0x2);}}async function set_clearname_from_username(_0x52e5c2,_0x3b297f,_0x412da1=null){try{let _0x2176a3,_0xa056a7;const _0x1f160e='SELECT\x20username\x20FROM\x20'+_0x3b297f+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x1f160e,[],(_0x2ce336,_0xe05626)=>{_0x2ce336&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x2ce336['message']),_0xe05626['length']===0x0&&(_0xa056a7=_0xe05626['length']),_0x2176a3=_0xe05626['map'](_0x37c4e6=>_0x37c4e6['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0xa056a7);if(_0xa056a7===0x0){console['log']('Leave');return;}const _0x44f517=await _0x52e5c2['waitForSelector'](IG_SEARCH_BUTTON);await _0x44f517['click'](),await delay(0x4b0,0x7d0);for(let _0x5acd81 of _0x2176a3){const _0x55fa3b=await _0x52e5c2['waitForSelector'](IG_SEARCH_INPUT);await _0x55fa3b['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x52e5c2['type'](IG_SEARCH_INPUT,_0x5acd81,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x1b3616=0x1;while(_0x1b3616!=0x14){console['log']('Schleife');try{let _0x3bd55c=IG_NAME_SPAN_PART1+_0x1b3616+IG_USERNAME_SPAN_PART2;const _0x1124bb=await _0x52e5c2['waitForSelector'](_0x3bd55c),_0x38e07d=await _0x52e5c2['evaluate'](_0x56fe1e=>_0x56fe1e['innerHTML'],_0x1124bb);await delay(0xc8,0x1f4);if(_0x38e07d==_0x5acd81){let _0x369702=IG_NAME_SPAN_PART1+_0x1b3616+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x1ae757=await _0x52e5c2['waitForSelector'](_0x369702);let _0x563510=await _0x52e5c2['evaluate'](_0x2dfa75=>_0x2dfa75['innerHTML'],_0x1ae757);const _0x3a6142=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x46731c=_0x563510['match'](_0x3a6142);_0x46731c?_0x563510=_0x46731c[0x1]['trim']():_0x563510=_0x563510['trim']();_0x563510['includes']('•')&&(_0x563510=_0x563510['substring'](0x0,_0x563510['indexOf']('•')-0x1));const _0x9e9ba4='UPDATE\x20'+_0x3b297f+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x9e9ba4,[_0x563510,_0x38e07d],function(_0x30c10d){_0x30c10d&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x30c10d['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x1b3616++;}catch(_0x15400c){const _0xb13c8f='UPDATE\x20'+_0x3b297f+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0xb13c8f,['',_0x5acd81],function(_0x56c165){_0x56c165&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x56c165['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x15400c);break;}}_0x412da1&&_0x412da1();}await _0x44f517['click']();}catch(_0x59fe56){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x59fe56);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likePost\x20\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20likeStory\x20\x20\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likePost\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20likeStory\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0xd6ed40,_0x1231fd)=>{const _0x27c554='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x27c554,[],(_0x49b014,_0x3df136)=>{_0x49b014?_0x1231fd(_0x49b014):_0xd6ed40(_0x3df136);});});});const sqlGet=(_0x1bec12,_0x39f1c1,_0x681e08=[])=>new Promise((_0x11b788,_0x5082f2)=>_0x1bec12['get'](_0x39f1c1,_0x681e08,(_0x22e511,_0x1036f9)=>_0x22e511?_0x5082f2(_0x22e511):_0x11b788(_0x1036f9))),sqlAll=(_0x4ccc49,_0x1f2e32,_0x52884b=[])=>new Promise((_0x1361fd,_0x463c9e)=>_0x4ccc49['all'](_0x1f2e32,_0x52884b,(_0x46459d,_0x4310e8)=>_0x46459d?_0x463c9e(_0x46459d):_0x1361fd(_0x4310e8)));ipcMain['handle']('get-campaign-details',async()=>{try{const _0x3b3284=await sqlAll(campaignDB,'SELECT\x20campaign_name,\x20list_id,\x20zeitabstand,\x20account\x20FROM\x20campaign'),_0x2f4c9f=await Promise['all'](_0x3b3284['map'](async _0x16274e=>{const _0x42f5a1=[];if(!_0x16274e['list_id'])_0x42f5a1['push']('Liste');if(!_0x16274e['zeitabstand'])_0x42f5a1['push']('Zeitabstand');if(!_0x16274e['account'])_0x42f5a1['push']('Instagram\x20Account');if(_0x16274e['account'])try{const _0xcbd7ce=await sqlGet(igaccountsDB,'SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x16274e['account']]);if(!_0xcbd7ce)_0x42f5a1['push']('Instagram\x20Login\x20nicht\x20möglich');else{const _0x27924b=_0xcbd7ce['cookie']&&_0xcbd7ce['cookie']['trim']()!==''&&_0xcbd7ce['cookie']['trim']()!=='[]';if(!_0x27924b)_0x42f5a1['push']('Instagram\x20Login');}}catch(_0xe72912){console['error']('Account-Prüfung\x20SQL-Fehler:',_0xe72912['message']),_0x42f5a1['push']('Instagram\x20Account');}let _0x3029c3='N/A',_0x5d84b5='N/A';if(!_0x42f5a1['includes']('Liste')){try{const _0x10ef7e=await sqlGet(db,'SELECT\x20COUNT(*)\x20AS\x20lead_count\x20FROM\x20'+_0x16274e['list_id']);_0x3029c3=_0x10ef7e?.['lead_count']??0x0;}catch(_0x4a52e6){if(/no such table/i['test'](_0x4a52e6['message']))_0x42f5a1['push']('Liste\x20nicht\x20vorhanden');}try{const _0xf8d5c6=await sqlGet(campaignDB,'SELECT\x20COUNT(*)\x20AS\x20contacted_count\x20FROM\x20dm\x20WHERE\x20list_id\x20=\x20?',[_0x16274e['list_id']]);_0x5d84b5=_0xf8d5c6?.['contacted_count']??0x0;}catch(_0x23e0b0){}}return{'campaign_name':_0x16274e['campaign_name'],'lead_count':_0x3029c3,'contacted_count':_0x5d84b5,'status':_0x42f5a1['length']===0x0?'Positiv':'Fehler:\x20'+_0x42f5a1['join'](',\x20')};}));return{'status':'success','campaigns':_0x2f4c9f};}catch(_0x5c7fea){return console['error']('get-campaign-details\x20fehlgeschlagen:',_0x5c7fea['message']),{'status':'error','message':_0x5c7fea['message']};}}),ipcMain['handle']('get-campaign-writer-information',async(_0x33901d,_0x230aa4)=>{return new Promise((_0xae969e,_0x422fd6)=>{const _0x3aed37='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted,\x20likePost,\x20likeStory\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x3aed37,[_0x230aa4],(_0xc938d9,_0x408e05)=>{_0xc938d9?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0xc938d9),_0x422fd6(_0xc938d9)):(console['log']('ROWS'),console['log'](_0x408e05),debugDatabaseContents(),_0xae969e(_0x408e05));});});});const showTableContents=_0x1e1f3d=>{return new Promise((_0x39e4bf,_0x1f1420)=>{const _0x563b0d='SELECT\x20*\x20FROM\x20'+_0x1e1f3d+';';campaignDB['all'](_0x563b0d,(_0x591a96,_0x40c56e)=>{_0x591a96?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x1e1f3d+':',_0x591a96),_0x1f1420(_0x591a96)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x1e1f3d+':',_0x40c56e),_0x39e4bf({'status':'success','message':_0x40c56e}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x33328e){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x33328e);}}ipcMain['handle']('create-campaign',async(_0x5144c4,_0x1cfb05)=>{return new Promise((_0x55d311,_0x51ac4d)=>{const _0x48e8e2='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x48e8e2,[String(_0x1cfb05)],function(_0xe731a5){_0xe731a5?_0x51ac4d(_0xe731a5):_0x55d311({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x2c67be,_0x5b395b)=>{return new Promise((_0x1c2f59,_0x2d27e5)=>{const _0x5674d6='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x5674d6,[_0x5b395b],function(_0x2ae44d){_0x2ae44d?_0x2d27e5(_0x2ae44d):_0x1c2f59({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x1578ee,_0x1d0691,_0x3569f2,_0x526066,_0xf4ec09,_0x4adf1c,_0x5cc6c8,_0x918d1,_0x2cd69a,_0x406d0b)=>{const _0x5044e0=await createMessageID(_0xf4ec09);return new Promise((_0x289ce1,_0x56ca56)=>{console['log']('ZEITABSTAND:\x20'+_0x526066);if(!_0x1d0691||!_0x3569f2||_0x526066===undefined||_0x526066===null||_0x526066===''||!_0x5044e0||!_0x4adf1c)return _0x56ca56({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x5044e0);const _0x13af3c='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?,\x20likePost\x20=\x20?,\x20likeStory\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x13af3c,[_0x3569f2,_0x526066,_0x5044e0,_0x4adf1c,_0x5cc6c8,_0x918d1,_0x2cd69a,_0x406d0b,_0x1d0691],function(_0x5a7f90){if(_0x5a7f90)_0x56ca56({'status':'error','message':_0x5a7f90['message']});else this['changes']===0x0?_0x56ca56({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x289ce1({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x3e42b1,_0x693023,_0x3610f1,_0x146889,_0x38725b)=>{return new Promise((_0x4ebf82,_0x57c766)=>{const _0x5b2189='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x5b2189,[_0x693023,_0x3610f1,_0x146889,_0x38725b],function(_0x13f3e7){return _0x13f3e7?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x13f3e7['message']),_0x57c766('insert-dm-response',{'success':![],'message':_0x13f3e7['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x4ebf82('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xc04b57=>{return new Promise((_0x1c114d,_0x425b33)=>{const _0x369980='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x369980,[_0xc04b57],(_0x11060b,_0x371bbf)=>{if(_0x11060b)_0x425b33({'status':'error','message':_0x11060b['message']});else{if(_0x371bbf)_0x1c114d(_0x371bbf['message_id']);else{const _0x4c012a='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x4c012a,[_0xc04b57],function(_0x31f539){_0x31f539?_0x425b33({'status':'error','message':_0x31f539['message']}):_0x1c114d(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x2e95cc,_0x2615a1)=>{return new Promise((_0x1f99f7,_0x6c1ffd)=>{const _0x490d3c='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x2615a1;db['get'](_0x490d3c,(_0x5b92b5,_0xba7d04)=>{_0x5b92b5?_0x6c1ffd({'status':'error','message':_0x5b92b5['message']}):_0x1f99f7({'status':'success','count':_0xba7d04['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x4f82ba,_0x392b3a){try{const _0x1a9a68=await new Promise((_0x4f44f4,_0x4de5d2)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x392b3a],(_0x55f052,_0x38ee20)=>{if(_0x55f052)_0x4de5d2(_0x55f052);else{if(_0x38ee20['length']>0x0){let _0x2092a0=JSON['parse'](_0x38ee20[0x0]['cookie']);console['log'](_0x2092a0),_0x4f44f4(_0x2092a0);}else _0x4de5d2(new Error('User\x20with\x20username\x20'+_0x392b3a+'\x20does\x20not\x20exist.'));}});});await _0x4f82ba['setCookie'](..._0x1a9a68),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x40b990){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x40b990);}}async function saveCookiesForUser(_0x163b8b,_0x562258){try{const _0x2446de=await _0x163b8b['cookies']();if(!_0x2446de||_0x2446de['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x562258);const _0x29b658=JSON['stringify'](_0x2446de);if(_0x29b658['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x562258);return new Promise((_0x58d1d0,_0x25eab2)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x562258],(_0x2fadba,_0x563d4b)=>{if(_0x2fadba)return console['error']('Error\x20checking\x20user\x20existence:',_0x2fadba),_0x25eab2(_0x2fadba);if(_0x563d4b){const _0x5ba732=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x5ba732['run'](_0x29b658,_0x562258,function(_0x2263ce){return _0x2263ce?(console['error']('Error\x20updating\x20cookies:',_0x2263ce),_0x25eab2(_0x2263ce)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x562258),_0x58d1d0());});}else{const _0x5c0602=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x5c0602['run'](_0x562258,_0x29b658,function(_0x1fc1ad){return _0x1fc1ad?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x1fc1ad),_0x25eab2(_0x1fc1ad)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x562258),_0x58d1d0());});}});});}catch(_0x4b694a){console['error']('Error\x20fetching\x20cookies:',_0x4b694a);throw _0x4b694a;}}async function createUserIfNotExists(_0x27ec94){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x27ec94],(_0x9efd4e,_0x120b14)=>{if(_0x9efd4e){console['error']('Error\x20checking\x20user\x20existence:',_0x9efd4e);throw _0x9efd4e;}else{if(!_0x120b14){const _0x7aeb43=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x7aeb43['run'](_0x27ec94,function(_0x28c823){_0x28c823?console['error']('Error\x20inserting\x20new\x20user:',_0x28c823):console['log']('New\x20user\x20created:',_0x27ec94);});}else console['log']('User\x20already\x20exists:',_0x27ec94);}});}catch(_0x1a4cf0){console['error']('Error\x20creating\x20user:',_0x1a4cf0);throw _0x1a4cf0;}}ipcMain['handle']('create-relation',async(_0x255a16,_0x2f72c0)=>{return new Promise((_0x128543,_0x109b16)=>{const _0xa3946e='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x2f72c0+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0xa3946e,function(_0x4507d3){_0x4507d3?_0x109b16(_0x4507d3):_0x128543({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x5ec199,_0x1bf2ad)=>{return console['log']('droping\x20table'+_0x1bf2ad),new Promise((_0x4d00a8,_0x5cb4cd)=>{const _0x4e7bab='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x1bf2ad;console['log']('droping\x20table'+_0x1bf2ad),db['run'](_0x4e7bab,function(_0x264b85){_0x264b85?_0x5cb4cd(_0x264b85):_0x4d00a8({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x273350=>{return new Promise((_0xf80e37,_0x506dc8)=>{const _0x760c6e='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x760c6e,[],(_0x3ee1c7,_0x3448af)=>{_0x3ee1c7?_0x506dc8(_0x3ee1c7):_0xf80e37(_0x3448af['map'](_0x389a8e=>_0x389a8e['name']));});});}),ipcMain['handle']('add-user',async(_0x5145f5,_0x4bffdd,_0x26ae2c)=>{return new Promise(_0x52f4f2=>{const _0x2a4843=db['prepare']('INSERT\x20INTO\x20'+_0x26ae2c+'\x20(username)\x20VALUES\x20(?)');_0x2a4843['run'](_0x4bffdd,function(_0xa9eb5b){_0xa9eb5b?console['log']('error\x20in\x20add-user:'+_0xa9eb5b):_0x52f4f2({'status':'success','id':this['lastID']});}),_0x2a4843['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0xa18381,_0x55565e)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x351603,_0x2dae85)=>{if(_0x351603)_0x55565e(_0x351603);else{_0xa18381({'status':'success','users':_0x2dae85});for(_0x2dae85 of _0x2dae85){console['log'](_0x2dae85['username']);}}});});}),ipcMain['handle']('get-data',async(_0x22c06c,_0x2a5c4a)=>{return new Promise((_0x342828,_0x383fe6)=>{const _0x1d018f='SELECT\x20*\x20FROM\x20'+_0x2a5c4a;console['log'](_0x1d018f),db['all'](_0x1d018f,[],(_0x5460cf,_0x3c19a0)=>{_0x5460cf?_0x383fe6(_0x5460cf):_0x342828(_0x3c19a0);});});}),ipcMain['handle']('get-accounts',async _0x539ad9=>{return new Promise((_0x5a6a84,_0x54f518)=>{const _0x2e191d='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x2e191d),igaccountsDB['all'](_0x2e191d,[],(_0x106fe0,_0x1e2356)=>{_0x106fe0?_0x54f518(_0x106fe0):_0x5a6a84(_0x1e2356);});});}),ipcMain['handle']('get-targets',async(_0x435916,_0x6fd4e7)=>{return getTargetProfiles(_0x6fd4e7);}),ipcMain['handle']('delete-user',async(_0x124707,_0xec566e,_0x3686a0)=>{return new Promise((_0x482dfa,_0x2d9feb)=>{const _0x4556c9=db['prepare']('DELETE\x20FROM\x20'+_0x3686a0+'\x20WHERE\x20username\x20=\x20?');_0x4556c9['run'](_0xec566e,function(_0x2c1a5d){_0x2c1a5d?_0x2d9feb(_0x2c1a5d):_0x482dfa({'status':'success','changes':this['changes']});}),_0x4556c9['finalize']();});}),ipcMain['handle']('delete-account',async(_0xa9107a,_0x303050)=>{const _0x1bc573=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x1bc573['run'](_0x303050,function(_0x370112){_0x370112&&console['log'](_0x370112);}),_0x1bc573['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x374b00,_0x2d912f)=>{const _0x5b6d02='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x5b6d02,[],(_0x4adf19,_0x283dcf)=>{_0x4adf19?_0x2d912f({'status':'error','message':_0x4adf19['message']}):_0x374b00({'status':'success','contactedCount':_0x283dcf['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x3911a0,_0x3fb5c3)=>{const _0x1b9e79='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x1b9e79,[],(_0x59f44e,_0x1d0064)=>{_0x59f44e?_0x3fb5c3({'status':'error','message':_0x59f44e['message']}):_0x3911a0({'status':'success','contactedCount':_0x1d0064['contactedCount']});});});});function exportDatabase(_0x2f3b96){return new Promise((_0x51b3de,_0x3f1116)=>{const _0x14afc7='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x2f3b96+'\x0a\x20\x20\x20\x20';db['all'](_0x14afc7,[],async(_0x537574,_0x4768d2)=>{if(_0x537574){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x537574['message']),_0x3f1116(_0x537574);return;}if(!_0x4768d2||_0x4768d2['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x51b3de();return;}const _0x283288=XLSX['utils']['json_to_sheet'](_0x4768d2),_0x3bcc8f=XLSX['utils']['sheet_to_csv'](_0x283288);try{const {canceled:_0x3e6ff9,filePath:_0xbc3ed6}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x2f3b96+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x3e6ff9||!_0xbc3ed6){console['log']('Speichern\x20abgebrochen.'),_0x51b3de();return;}fs['writeFile'](_0xbc3ed6,_0x3bcc8f,'utf8',_0x5c3a49=>{_0x5c3a49?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x5c3a49['message']),_0x3f1116(_0x5c3a49)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0xbc3ed6),_0x51b3de());});}catch(_0x317db7){console['error']('Fehler\x20im\x20Speicherdialog:',_0x317db7),_0x3f1116(_0x317db7);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x47de2e,_0x2cce48)=>{shell['openExternal'](_0x2cce48);});