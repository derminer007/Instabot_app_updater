const {app,BrowserWindow,ipcMain,dialog,shell}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x5a9221=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x5a9221['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x5a9221['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x4cbf4c){var _0x4301a5=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2e3d32){console['log']('window\x20id:'+_0x2e3d32['id']),_0x2e3d32['id']>0x1&&(_0x4301a5=!![]);}),console['log']('child\x20opened\x20='+_0x4301a5);if(!_0x4301a5){const _0x507338=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x507338['loadFile'](_0x4cbf4c['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0);});const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x333ea7='',_0x567105=null;if(process['platform']==='darwin')_0x333ea7=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x333ea7=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x333ea7}),_0x567105=await browser_login['newPage'](),_0x567105['setDefaultNavigationTimeout'](0x1d4c),_0x567105['setDefaultTimeout'](0x1d4c),_0x567105;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x300f5a=0x1,_0xcac129=0x0){let _0x5c7785='',_0x462b32=null;const _0x3cbfca=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x5c7785=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x5c7785=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x300f5a===0x0&&!pageStack[_0xcac129])return browser=await puppeteer['launch']({'headless':_0x3cbfca,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x5c7785}),_0x462b32=await browser['newPage'](),_0x462b32['setDefaultNavigationTimeout'](0x1d4c),_0x462b32['setDefaultTimeout'](0x1d4c),pageStack[_0xcac129]=_0x462b32,_0x462b32;return(browser===null||pageStack[_0xcac129]===null||pageStack[_0xcac129]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x3cbfca,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x5c7785})),(pageStack[_0xcac129]===null||pageStack[_0xcac129]['isClosed']())&&(_0x462b32=await browser['newPage'](),_0x462b32['setDefaultNavigationTimeout'](0x1d4c),_0x462b32['setDefaultTimeout'](0x1d4c),pageStack[_0xcac129]=_0x462b32),pageStack[_0xcac129];}ipcMain['on']('login',async(_0x1cb425,_0x46d5b5)=>{const _0x6d4478=await getBrowserPageLogin();await _0x6d4478['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x6d4478,_0x46d5b5),ipcMain['on']('setLoginCookies',async(_0x1cb521,_0x5962c0)=>{try{await set_login_cookies(_0x6d4478,_0x5962c0);}catch(_0x45ba4c){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x45ba4c);}});}),ipcMain['on']('export-relation',async(_0x5902f3,_0x510b0b)=>{try{await exportDatabase(_0x510b0b),_0x5902f3['reply']('export-relation-response',{'success':!![]});}catch(_0xd9b60e){console['error'](_0xd9b60e),_0x5902f3['reply']('export-relation-response',{'success':![],'message':_0xd9b60e['message']});}}),ipcMain['handle']('sendMessage',async(_0x24dd7c,_0x2f737e,_0x5aa718,_0x22606c,_0x49d532,_0x256608,_0x470c18,_0x3b9cb5)=>{isStopping=![];let _0x339c4f=null;return _0x470c18?_0x339c4f=await getBrowserPage(_0x49d532,_0x3b9cb5):_0x339c4f=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x2f737e),send_message(_0x339c4f,_0x2f737e,_0x5aa718,_0x22606c,_0x49d532,_0x256608);}),ipcMain['handle']('stop-action',async(_0x591d51,_0xa2847e)=>{isStopping=!![];const _0x2e45bc=await getBrowserPage(0x1,_0xa2847e);await _0x2e45bc['close']();}),ipcMain['handle']('fetch_followers',async(_0x2298d9,_0x7d56da,_0xb0c75f,_0x550fbb,_0x489743,_0x399369)=>{isStopping=![];const _0x5175ca=await getBrowserPage();return fetch_followers_from_account(_0x2298d9,_0x5175ca,_0x7d56da,_0xb0c75f,_0x550fbb,_0x489743,_0x399369);}),ipcMain['handle']('get-account-details',async(_0xfc1680,_0x214357,_0x3fb612,_0x543e1c)=>{isStopping=![];const _0x55d2b8=await getBrowserPage();return fetch_account_details(_0x55d2b8,_0x214357,_0x3fb612,_0x543e1c);}),ipcMain['handle']('fetch_likes',async(_0x86f705,_0x420cbf,_0x1940b9,_0x5818bc,_0x3a78b4,_0x1bd5f4)=>{isStopping=![];const _0xa8feb2=await getBrowserPage();return fetch_likers_from_post(_0x86f705,_0xa8feb2,_0x420cbf,_0x1940b9,_0x5818bc,_0x3a78b4,_0x1bd5f4);}),ipcMain['handle']('fetch_comments',async(_0x191df9,_0x8d73ac,_0x28a4c2,_0xb928a8,_0x4b5cb4,_0x3d93e7)=>{isStopping=![];const _0x42da5a=await getBrowserPage();return fetch_comments_from_post(_0x191df9,_0x42da5a,_0x8d73ac,_0x28a4c2,_0xb928a8,_0x4b5cb4,_0x3d93e7);}),ipcMain['handle']('update-app',async _0x4dcf1c=>{const {spawn:_0x235b3a}=require('child_process'),_0x2d0999=require('path');return new Promise((_0x3340eb,_0x4ad21b)=>{(process['env']['NODE_ENV']==='development'||process['env']['SKIP_UPDATES']==='true')&&(console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x3340eb('Update\x20übersprungen'));if(process['platform']==='darwin'){const _0x2e32e3=_0x2d0999['join'](__dirname,'mac-updater-intern.sh'),_0x6ddd95=_0x235b3a('/bin/bash',[_0x2e32e3]);_0x6ddd95['stdout']['on']('data',_0x5813db=>{console['log']('stdout:\x20'+_0x5813db);}),_0x6ddd95['stderr']['on']('data',_0xdf42cc=>{console['error']('stderr:\x20'+_0xdf42cc);}),_0x6ddd95['on']('close',_0x894b52=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x894b52),_0x894b52===0x0?_0x3340eb('Update\x20erfolgreich\x20abgeschlossen.'):_0x4ad21b(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x894b52));});}else{if(process['platform']==='win32'){const _0x2db400=_0x2d0999['join'](__dirname,'../','../','../');process['chdir'](_0x2db400),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x41b9bf='soft-ui-updater-windows.ps1',_0x3da900=_0x235b3a('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x41b9bf]);_0x3da900['stdout']['on']('data',_0x4684cc=>{console['log']('stdout:\x20'+_0x4684cc);}),_0x3da900['stderr']['on']('data',_0x58de41=>{console['error']('stderr:\x20'+_0x58de41);}),_0x3da900['on']('close',_0x3ac34b=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x3ac34b),_0x3ac34b===0x0?_0x3340eb('Update\x20erfolgreich\x20abgeschlossen.'):_0x4ad21b(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x3ac34b));});}else _0x4ad21b(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}});});function getRnd(_0x547493,_0x5907d2){return Math['random']()*(_0x5907d2-_0x547493+0x1)+_0x547493;}function delay(_0x387008,_0x24aa54){let _0x4f3cce=getRnd(_0x387008,_0x24aa54);return new Promise(function(_0x4cea3e){setTimeout(_0x4cea3e,_0x4f3cce);});}async function scroll(_0x55a00f,_0x9c413e,_0xfc5433=0x2,_0x5267da){const _0x341639=await _0x55a00f['waitForSelector'](_0x9c413e);for(let _0x26c657=0x0;_0x26c657<_0xfc5433;_0x26c657++){console['log']('Scrolling\x20'+_0x26c657),await _0x55a00f['evaluate'](_0x12e8a1=>{const _0x18a139=document['querySelector'](_0x12e8a1);_0x18a139&&_0x18a139['scrollBy'](0x0,0x190);},_0x9c413e),await delay(0x320,0x5dc),_0x5267da();}}async function saveCookies(_0x3a4dbb){let _0xf604c4=await _0x3a4dbb['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0xf604c4,null,0x2));}async function notificationClear(_0x55a71c){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x55a71c['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x55a71c['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x39b92d){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x39b92d);}}async function getTargetProfiles(_0x430901){return new Promise((_0x25f626,_0x4c7be1)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x430901,(_0x3847d0,_0xc84161)=>{_0x3847d0?_0x4c7be1(_0x3847d0):_0x25f626(_0xc84161);});});}async function login_legacy(_0x5eed3c,_0x1d8682,_0xeb5705){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x5eed3c,_0x1d8682),await createUserIfNotExists(_0x1d8682,_0xeb5705);}catch(_0x20a483){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x20a483);}try{await _0x5eed3c['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x5eed3c['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x5eed3c['click']('button._a9--._ap36._a9_0');}catch(_0x52a125){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x5eed3c['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x5eed3c['type']('input[name=\x27username\x27]',_0x1d8682,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5eed3c['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x5eed3c['type']('input[name=\x27password\x27]',_0xeb5705,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x5eed3c['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x5eed3c['click']('button[type=\x27submit\x27]');}catch(_0x83c403){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x5eed3c),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x5eed3c,_0x1d8682);}catch(_0x15f5ad){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x15f5ad);}}catch(_0x2c8f34){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2c8f34);}}async function login(_0x55a7b8,_0x26015d){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x55a7b8,_0x26015d),await createUserIfNotExists(_0x26015d);}catch(_0x4ae4f5){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x4ae4f5);}try{await _0x55a7b8['goto']('https://www.instagram.com/accounts/login/');}catch(_0x57e29d){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x57e29d);}}async function set_login_cookies(_0x160264,_0x29ffd0){try{await saveCookiesForUser(_0x160264,_0x29ffd0);}catch(_0x1d6f12){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x1d6f12);}}async function waitForXPath(_0x1b1aca,_0x294706,_0xc7c532={}){return await _0x1b1aca['waitForFunction'](_0x472818=>{return document['evaluate'](_0x472818,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0xc7c532,_0x294706),_0x1b1aca['evaluateHandle'](_0x18ac08=>document['evaluate'](_0x18ac08,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x294706);}async function send_message(_0x861d38,_0x386e26,_0x1e8fac,_0x14bbdd,_0x36a351,_0x11f9ee){return new Promise(async(_0x35f45c,_0x48123e)=>{_0x11f9ee=_0x11f9ee['split'](';'),console['log'](_0x11f9ee[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x36a351);try{await setCookiesForUser(_0x861d38,_0x11f9ee[0x0]);}catch(_0x5bb863){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5bb863),_0x48123e({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5bb863});return;}try{await _0x861d38['goto']('https://www.instagram.com/'+_0x386e26+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x861d38);}catch(_0x28ea71){_0x48123e({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x28ea71});return;}try{await _0x861d38['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x861d38['click'](K_DIRECT_MSG_BUTTON);}catch(_0x231f22){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x231f22);try{await _0x861d38['waitForSelector'](K_OPTIONS_BUTTON),await _0x861d38['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x3411cb=await waitForXPath(_0x861d38,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x3411cb['click']();}catch(_0x1629ac){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x1629ac),_0x35f45c({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x861d38);}catch(_0x5d0fb4){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x5d0fb4);}try{const _0x57d627=await _0x861d38['waitForSelector'](K_CHAT_INPUT_FIELD),_0xd53688=await _0x861d38['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0xd53688),_0x14bbdd=_0x14bbdd['replace']('{USERNAME}',_0x386e26);let _0x59016b=_0xd53688['replace'](/[^\p{L}\s]/gu,''),_0x12fe59=_0x59016b['split']('\x20')[0x0];console['log']('Extrahierter\x20Clearname\x20mit\x20Len:\x20'+_0x12fe59['length']+'nach\x20Split:\x20'+_0x12fe59);_0x12fe59['length']>0x2&&!_0x12fe59['includes']('Instagram')?(_0x14bbdd=_0x14bbdd['replaceAll']('{NAME}',_0x12fe59),_0x14bbdd=_0x14bbdd['replaceAll']('{name}',_0x12fe59)):(_0x14bbdd=_0x14bbdd['replaceAll']('\x20{NAME}',''),_0x14bbdd=_0x14bbdd['replaceAll']('\x20{name}',''),_0x14bbdd=_0x14bbdd['replaceAll']('{NAME}',''),_0x14bbdd=_0x14bbdd['replaceAll']('{name}',''));await _0x57d627['type'](_0x14bbdd,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x259a05=await _0x861d38['waitForSelector'](K_SEND_MSG_BUTTON);await _0x259a05['click'](),await delay(0x320,0x3e8),_0x35f45c({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!'});}catch(_0x496ad7){try{await _0x861d38['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x2e6c71=await _0x861d38['evaluate'](_0x264dc4=>{return document['querySelector'](_0x264dc4)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x2e6c71),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x496ad7),_0x35f45c({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x386e26+'\x20überspringen.'});}catch(_0x2829f1){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x2829f1),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x386e26+'\x20:\x20'+_0x2829f1),_0x35f45c({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x386e26+'\x20:\x20'+_0x2829f1});}}});}function handle_fail(_0x50a7c0){if(isStopping)return new Promise(_0x2e3a7a=>{_0x2e3a7a('Scraper\x20gestoppt.');});else{let _0x410d20='';switch(_0x50a7c0){case 0x0:_0x410d20='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x410d20='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x410d20='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x410d20='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x48bd50,_0x290e4c)=>{_0x290e4c(_0x410d20);});}}async function fetch_account_details(_0x1cb39b,_0x1ae4a1,_0x21b12b,_0x212cd3){try{await setCookiesForUser(_0x1cb39b,_0x21b12b['username']);}catch(_0x59fabe){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x59fabe);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x59fabe);return handle_fail(0x0);}_0x1cb39b['setDefaultNavigationTimeout'](0x7530),await _0x1cb39b['goto']('https://www.instagram.com/'+_0x1ae4a1+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x1cb39b);const _0x5cd3bf=await _0x1cb39b['evaluate'](()=>{const _0x365f05=document['querySelector']('meta[property=\x22og:image\x22]');return _0x365f05?_0x365f05['getAttribute']('content'):null;});await _0x1cb39b['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x250a4a=await _0x1cb39b['evaluate'](()=>{const _0x51158b=document['querySelector']('meta[name=\x22description\x22]');if(!_0x51158b)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x107c75=_0x51158b['getAttribute']('content');if(!_0x107c75)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x107c75);const _0xea1ac5=/\s*[–-]\s*/,_0x4a6210=_0x107c75['split'](_0xea1ac5);if(_0x4a6210['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x4aa019=_0x4a6210[0x0],_0x2ba847=_0x4a6210[0x1],_0x14bb8c=_0x4aa019['split'](',\x20');if(_0x14bb8c['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x5ad640=_0x14bb8c[0x0]['split']('\x20')[0x0],_0x504872=_0x14bb8c[0x1]['split']('\x20')[0x0],_0x515eb6=_0x14bb8c[0x2]['split']('\x20')[0x0];let _0x17bd31='',_0x2c268b='';const _0x382840='\x20on\x20Instagram:\x20',_0x5315d5=_0x2ba847['split'](_0x382840);return _0x17bd31=_0x5315d5[0x0]['trim'](),_0x17bd31=_0x17bd31['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x5315d5['length']>0x1&&(_0x2c268b=_0x5315d5[0x1]['trim'](),_0x2c268b['startsWith']('\x22')&&_0x2c268b['endsWith']('\x22')&&(_0x2c268b=_0x2c268b['substring'](0x1,_0x2c268b['length']-0x1)['trim']()),_0x2c268b=_0x2c268b['replace'](/&quot;/g,'')['trim']()),{'followers':_0x5ad640,'following':_0x504872,'posts':_0x515eb6,'nameText':_0x17bd31,'bio':_0x2c268b};});console['log']('Extracted\x20profile\x20data:',_0x250a4a);const _0x2da75a=_0x250a4a['nameText'],_0x57fed5=_0x5cd3bf,_0x76b71d=_0x250a4a['bio'],_0x47f9e0=_0x250a4a['followers'],_0x8e4195=_0x250a4a['following'],_0x1f316b=_0x250a4a['posts'],_0x49baf6=![],_0xb5684d=![],_0x527d40=![],_0x51c550='\x0a\x20\x20INSERT\x20INTO\x20'+_0x212cd3+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x51c550,[_0x1ae4a1,_0x2da75a,_0x57fed5,_0x76b71d,_0x47f9e0,_0x8e4195,_0x1f316b,_0x49baf6,_0xb5684d,_0x527d40],function(_0xee9cc5){_0xee9cc5?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0xee9cc5['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x2f3016,_0x569cef,_0x2fbdf3,_0x146f4e,_0x48bd3e,_0x1a839e,_0x40a9f2){let _0x2bc4f8=0x4,_0x305d3a=0x0,_0x3ef93d=0x0;try{await setCookiesForUser(_0x569cef,_0x1a839e['username']);}catch(_0x5efa4f){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5efa4f);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5efa4f);return handle_fail(0x0);}let _0x37c8ed=0x0;try{await _0x569cef['goto']('https://www.instagram.com/'+_0x2fbdf3+'/'),await notificationClear(_0x569cef);try{if(_0x146f4e<=0x0){const _0xdeb03f=await _0x569cef['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x3a6ac5=await _0x569cef['evaluate'](_0x1d6372=>_0x1d6372['innerHTML'],_0xdeb03f);_0x37c8ed=Math['ceil'](_0x3a6ac5/0x4);}else _0x37c8ed=Math['ceil'](_0x146f4e/0x4);_0x2bc4f8+=_0x37c8ed,_0x3ef93d=Math['round'](++_0x305d3a/_0x2bc4f8*0x64),_0x2f3016['sender']['send']('fetch-progress',_0x3ef93d,!![]);let _0x3f368b=await _0x569cef['waitForSelector']('a[href=\x22/'+_0x2fbdf3+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x3f368b['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x2fbdf3+'\x20gesichtet'),_0x3ef93d=Math['round'](++_0x305d3a/_0x2bc4f8*0x64),_0x2f3016['sender']['send']('fetch-progress',_0x3ef93d,!![]);}catch(_0x16d2ca){console['log']('Follower\x20Liste\x20von\x20'+_0x2fbdf3+'\x20nicht\x20gefunden:'+_0x16d2ca);throw new Error('Follower\x20Liste\x20von\x20'+_0x2fbdf3+'\x20nicht\x20gefunden:'+_0x16d2ca);return handle_fail(0x0);}}catch(_0x5f079b){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5f079b);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x5f079b);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x37c8ed),await scroll(_0x569cef,FOLLOWER_FENSTER,_0x37c8ed,_0x59b25c=>{_0x3ef93d=Math['round'](++_0x305d3a/_0x2bc4f8*0x64),_0x2f3016['sender']['send']('fetch-progress',_0x3ef93d,!![]);}),await _0x569cef['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x7a08cd=await _0x569cef['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x4c82a8=await _0x569cef['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x3ef93d=Math['round'](++_0x305d3a/_0x2bc4f8*0x64),_0x2f3016['sender']['send']('fetch-progress',_0x3ef93d,!![]);_0x146f4e<=0x0&&(_0x146f4e=_0x7a08cd['length']);let _0x144858=[];for(let _0x4ce242=0x0;_0x4ce242<_0x7a08cd['length']&&_0x4ce242<_0x146f4e;_0x4ce242++){_0x144858['push'](await _0x7a08cd[_0x4ce242]['evaluate'](_0x40440d=>_0x40440d['textContent']));const _0x32324d='INSERT\x20INTO\x20'+_0x48bd3e+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x32324d,[await _0x7a08cd[_0x4ce242]['evaluate'](_0x28062c=>_0x28062c['textContent']),await _0x4c82a8[_0x4ce242]['evaluate'](_0x13527e=>_0x13527e['textContent'])],function(_0x430add){_0x430add?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x48bd3e+'\x27:',_0x430add['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x3ef93d=Math['round'](++_0x305d3a/_0x2bc4f8*0x64),_0x2f3016['sender']['send']('fetch-progress',_0x3ef93d,!![]),_0x40a9f2&&(_0x2f3016['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2f3016,_0x569cef,_0x1a839e,_0x48bd3e,_0x144858)),new Promise(_0x43e782=>{_0x43e782('Scraping\x20finished!');});}catch(_0x319d5d){if(_0x40a9f2)throw new Error(_0x319d5d);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x2fbdf3+'\x20nicht\x20gefunden:\x20'+_0x319d5d);return handle_fail(0x0);}}async function fetch_details_from_list(_0x1738fb,_0x5224e8,_0x2da0f3,_0x112cf2,_0x25a5b2){let _0x897af3=0x0,_0xf023c8=0x0;for(let _0x444823=0x0;_0x444823<_0x25a5b2['length'];_0x444823++){console['log']('Processing\x20profile:',_0x25a5b2[_0x444823]);try{await fetch_account_details(_0x5224e8,_0x25a5b2[_0x444823],_0x2da0f3,_0x112cf2);}catch(_0x1cf67c){console['error']('Detailed\x20Scraping\x20von:\x20',_0x25a5b2[_0x444823],_0x1cf67c);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x25a5b2[_0x444823]+'\x20'+_0x1cf67c);}_0xf023c8=Math['round'](++_0x897af3/_0x25a5b2['length']*0x64),_0x1738fb['sender']['send']('fetch-progress',_0xf023c8,!![],!![]);}}async function fetch_likers_from_post(_0x2e2d82,_0x1b9163,_0x30e3fd,_0x1aa702,_0x3f6d82,_0x546a9e,_0x287328){let _0x17b270=0x4,_0x2fa43c=0x0,_0xe87d4f=0x0;try{await setCookiesForUser(_0x1b9163,_0x546a9e['username']);}catch(_0x27e5c6){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x27e5c6);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x27e5c6);return handle_fail(0x1);return;}_0xe87d4f=Math['round'](++_0x2fa43c/_0x17b270*0x64),_0x2e2d82['sender']['send']('fetch-progress',_0xe87d4f,!![]);try{let _0x3abe9d=_0x30e3fd['substring'](0x0,_0x30e3fd['lastIndexOf']('/')),_0x241b6e=_0x3abe9d+'/liked_by';console['log'](_0x241b6e),await _0x1b9163['goto'](_0x241b6e),await delay(0x7d0,0xfa0),await notificationClear(_0x1b9163),await delay(0xc8,0x1f4),_0xe87d4f=Math['round'](++_0x2fa43c/_0x17b270*0x64),_0x2e2d82['sender']['send']('fetch-progress',_0xe87d4f,!![]),await _0x1b9163['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0xba5842=await _0x1b9163['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x7063a3=await _0x1b9163['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0xba5842['length']);let _0x7b7822=path['join'](__dirname,'/likers.csv');_0xe87d4f=Math['round'](++_0x2fa43c/_0x17b270*0x64),_0x2e2d82['sender']['send']('fetch-progress',_0xe87d4f,!![]);_0x1aa702<=0x0&&(_0x1aa702=_0xba5842['length']);try{let _0x178c9d=[];for(let _0x3da297=0x0;_0x3da297<_0xba5842['length']&&_0x3da297<_0x1aa702;_0x3da297++){_0x178c9d['push'](await _0xba5842[_0x3da297]['evaluate'](_0x43f2d6=>_0x43f2d6['textContent']));try{const _0x1eccd1='INSERT\x20INTO\x20'+_0x3f6d82+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x1eccd1,[await _0xba5842[_0x3da297]['evaluate'](_0x5f2bee=>_0x5f2bee['textContent']),await _0x7063a3[_0x3da297]['evaluate'](_0x455a2=>_0x455a2['textContent'])],function(_0x5dcfc6){_0x5dcfc6?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x3f6d82+'\x27:',_0x5dcfc6['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x5916e3){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3da297+'\x20:\x20'+_0x5916e3);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x3da297+'\x20:\x20'+_0x5916e3);return handle_fail(0x1);}}return _0xe87d4f=Math['round'](++_0x2fa43c/_0x17b270*0x64),_0x2e2d82['sender']['send']('fetch-progress',_0xe87d4f,!![]),_0x287328&&(_0x2e2d82['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x2e2d82,_0x1b9163,_0x546a9e,_0x3f6d82,_0x178c9d)),new Promise(_0x1821fc=>{_0x1821fc('Scraping\x20finished!');});}catch(_0x107ebe){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x107ebe);return handle_fail(0x1);}}catch(_0xcc2828){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0xcc2828);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0xcc2828);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x5569dd,_0x46e4ab,_0x4d0f89,_0x3be6c3,_0x33a126,_0x4f33dd,_0x387dcc){let _0x1548d4=0x3,_0x490cbb=0x0,_0x4e0ce9=0x0;try{await setCookiesForUser(_0x46e4ab,_0x4f33dd['username']);}catch(_0x3ea59e){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x3ea59e);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x3ea59e);return handle_fail(0x2);}try{console['log'](_0x4d0f89),await _0x46e4ab['goto'](_0x4d0f89),await delay(0x7d0,0xfa0),await notificationClear(_0x46e4ab),await delay(0xc8,0x1f4);const _0x2e1f2c=COM_COMMENTS_BOX_BODY_DIV;let _0x7ed346;const _0x3117f0=await _0x46e4ab['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x58827a=await _0x46e4ab['evaluate'](_0x1f34f8=>_0x1f34f8['innerHTML'],_0x3117f0),_0x54d363=String(_0x58827a)['replace'](/[^0-9]/g,''),_0x1efa8e=Number(_0x54d363)/0x14;_0x3be6c3<=0x0?_0x7ed346=Math['ceil'](_0x1efa8e/0x3):_0x7ed346=Math['ceil'](_0x3be6c3/0x3);_0x1548d4+=_0x7ed346,_0x4e0ce9=Math['round'](++_0x490cbb/_0x1548d4*0x64),_0x5569dd['sender']['send']('fetch-progress',_0x4e0ce9,!![]),console['log']('Auto-scrolls:\x20'+_0x7ed346),await scroll(_0x46e4ab,_0x2e1f2c,_0x7ed346,_0x3fc84a=>{_0x4e0ce9=Math['round'](++_0x490cbb/_0x1548d4*0x64),_0x5569dd['sender']['send']('fetch-progress',_0x4e0ce9,!![]);});try{const _0x43f96f=COM_REPLY_BUTTON_SPAN;await _0x46e4ab['waitForSelector'](_0x43f96f),await delay(0x1f4,0x320);const _0xc6b4c=await _0x46e4ab['$$'](_0x43f96f);console['log'](_0xc6b4c);let _0x47f104=_0xc6b4c['length'];await delay(0xc8,0x1f4);try{for(let _0x1c6513=0x0;_0x1c6513<_0x47f104;_0x1c6513++){_0xc6b4c[_0x1c6513]['click'](),await delay(0x320,0x5dc);}}catch(_0x1530aa){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x1530aa);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x1530aa);return handle_fail(0x2);}}catch(_0x4d4274){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0xc92088=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x46e4ab['waitForSelector'](_0xc92088),await delay(0x1f4,0x320),_0x4e0ce9=Math['round'](++_0x490cbb/_0x1548d4*0x64),_0x5569dd['sender']['send']('fetch-progress',_0x4e0ce9,!![]);const _0x48ff91=await _0x46e4ab['$$'](_0xc92088);let _0x1fad17=path['join'](__dirname,'/comments.csv');_0x3be6c3<=0x0&&(_0x3be6c3=_0x48ff91['length']);console['log']('fetch_limit:\x20'+_0x3be6c3),console['log']('comments_len:\x20'+_0x48ff91['length']),_0x3be6c3++;try{let _0x31c818=[];for(let _0x17d887=0x1;_0x17d887<_0x48ff91['length']&&_0x17d887<_0x3be6c3;_0x17d887++){try{_0x31c818['push'](await _0x48ff91[_0x17d887]['evaluate'](_0x2f31b1=>_0x2f31b1['textContent']));const _0x4c9a74=await db['prepare']('INSERT\x20INTO\x20'+_0x33a126+'\x20(username)\x20VALUES\x20(?)');await _0x4c9a74['run'](await _0x48ff91[_0x17d887]['evaluate'](_0xe68a47=>_0xe68a47['textContent']),function(_0x898a6d){_0x898a6d&&console['log']('error\x20in\x20add-user:'+_0x898a6d);}),await _0x4c9a74['finalize']();}catch(_0x3b9072){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x17d887+'\x20:\x20'+_0x3b9072);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x17d887+'\x20:\x20'+_0x3b9072);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x4e0ce9=Math['round'](++_0x490cbb/_0x1548d4*0x64),_0x5569dd['sender']['send']('fetch-progress',_0x4e0ce9,!![]),_0x5569dd['sender']['send']('fetch-progress',0x64,!![]),_0x387dcc&&(_0x5569dd['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x5569dd,_0x46e4ab,_0x4f33dd,_0x33a126,_0x31c818)),_0x5569dd['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x540dbb=>{_0x540dbb('Scraping\x20finished!');});}catch(_0x200e56){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x200e56);return handle_fail(0x2);}}catch(_0x673371){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x673371);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x673371);return handle_fail(0x2);}}async function set_clearname_from_username(_0x59ede6,_0x3acdd9,_0x42223a=null){try{let _0x524e5e,_0x2acc43;const _0xfd6898='SELECT\x20username\x20FROM\x20'+_0x3acdd9+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0xfd6898,[],(_0x294a98,_0x34e0cd)=>{_0x294a98&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x294a98['message']),_0x34e0cd['length']===0x0&&(_0x2acc43=_0x34e0cd['length']),_0x524e5e=_0x34e0cd['map'](_0x4510d6=>_0x4510d6['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x2acc43);if(_0x2acc43===0x0){console['log']('Leave');return;}const _0x12442a=await _0x59ede6['waitForSelector'](IG_SEARCH_BUTTON);await _0x12442a['click'](),await delay(0x4b0,0x7d0);for(let _0x4c9d3e of _0x524e5e){const _0xbf1204=await _0x59ede6['waitForSelector'](IG_SEARCH_INPUT);await _0xbf1204['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x59ede6['type'](IG_SEARCH_INPUT,_0x4c9d3e,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x358946=0x1;while(_0x358946!=0x14){console['log']('Schleife');try{let _0x225855=IG_NAME_SPAN_PART1+_0x358946+IG_USERNAME_SPAN_PART2;const _0x3bca71=await _0x59ede6['waitForSelector'](_0x225855),_0x52d462=await _0x59ede6['evaluate'](_0x5195b0=>_0x5195b0['innerHTML'],_0x3bca71);await delay(0xc8,0x1f4);if(_0x52d462==_0x4c9d3e){let _0xc95e35=IG_NAME_SPAN_PART1+_0x358946+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x3b4470=await _0x59ede6['waitForSelector'](_0xc95e35);let _0x778764=await _0x59ede6['evaluate'](_0xae8156=>_0xae8156['innerHTML'],_0x3b4470);const _0x480487=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x29c9eb=_0x778764['match'](_0x480487);_0x29c9eb?_0x778764=_0x29c9eb[0x1]['trim']():_0x778764=_0x778764['trim']();_0x778764['includes']('•')&&(_0x778764=_0x778764['substring'](0x0,_0x778764['indexOf']('•')-0x1));const _0x3a87b9='UPDATE\x20'+_0x3acdd9+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x3a87b9,[_0x778764,_0x52d462],function(_0x2a09ac){_0x2a09ac&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x2a09ac['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x358946++;}catch(_0x34ee8e){const _0x3b420d='UPDATE\x20'+_0x3acdd9+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x3b420d,['',_0x4c9d3e],function(_0x1f00f6){_0x1f00f6&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x1f00f6['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x34ee8e);break;}}_0x42223a&&_0x42223a();}await _0x12442a['click']();}catch(_0x5399ef){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x5399ef);}}const campaignPath=path['resolve'](__dirname,'data/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(campaign_name\x20TEXT\x20PRIMARY\x20KEY,\x20list_id\x20TEXT,\x20zeitabstand\x20REAL,\x20message_id\x20TEXT,\x20account\x20TEXT,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))'),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x4a1e85,_0x8965a7)=>{const _0xdd0759='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0xdd0759,[],(_0x14a4f0,_0x2194f7)=>{_0x14a4f0?_0x8965a7(_0x14a4f0):_0x4a1e85(_0x2194f7);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x374117,_0x19c65b)=>{const _0x1e560a='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x1e560a,[],async(_0x4ecce9,_0x1c8c17)=>{if(_0x4ecce9)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x4ecce9['message']),_0x19c65b({'status':'error','message':_0x4ecce9['message']});else try{const _0x220192=await Promise['all'](_0x1c8c17['map'](_0x549198=>{return new Promise(_0x3560fd=>{if(!_0x549198['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x549198['campaign_name']),_0x3560fd({'campaign_name':_0x549198['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x29015a='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x549198['list_id'],_0x13d40c='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x549198['list_id']+'\x22';db['get'](_0x29015a,[],(_0x1b4d7f,_0x3f0a7e)=>{_0x1b4d7f?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x549198['campaign_name']+':',_0x1b4d7f['message']),_0x3560fd({'campaign_name':_0x549198['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x13d40c,[],(_0x6461a5,_0x287522)=>{_0x6461a5?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x549198['campaign_name']+':',_0x6461a5['message']),_0x3560fd({'campaign_name':_0x549198['campaign_name'],'lead_count':_0x3f0a7e?_0x3f0a7e['lead_count']:0x0,'contacted_count':'N/A'})):_0x3560fd({'campaign_name':_0x549198['campaign_name'],'lead_count':_0x3f0a7e?_0x3f0a7e['lead_count']:0x0,'contacted_count':_0x287522?_0x287522['contacted_count']:0x0});});});});}));_0x374117({'status':'success','campaigns':_0x220192});}catch(_0x69454c){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x69454c),_0x19c65b({'status':'error','message':_0x69454c['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x466a4f,_0xa4afad)=>{return new Promise((_0xac5c7d,_0x1742d2)=>{const _0x5075e4='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x5075e4,[_0xa4afad],(_0x368da3,_0x39946e)=>{_0x368da3?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x368da3),_0x1742d2(_0x368da3)):(console['log']('ROWS'),console['log'](_0x39946e),debugDatabaseContents(),_0xac5c7d(_0x39946e));});});});const showTableContents=_0x5a5ee6=>{return new Promise((_0x256d51,_0x2ef6ac)=>{const _0x568da0='SELECT\x20*\x20FROM\x20'+_0x5a5ee6+';';campaignDB['all'](_0x568da0,(_0xcd2333,_0x116fd2)=>{_0xcd2333?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x5a5ee6+':',_0xcd2333),_0x2ef6ac(_0xcd2333)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x5a5ee6+':',_0x116fd2),_0x256d51({'status':'success','message':_0x116fd2}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x37f50e){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x37f50e);}}ipcMain['handle']('create-campaign',async(_0x5967bf,_0x1fa891)=>{return new Promise((_0x185e63,_0x31c34b)=>{const _0x5353ed='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x5353ed,[String(_0x1fa891)],function(_0xd9d948){_0xd9d948?_0x31c34b(_0xd9d948):_0x185e63({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x3fc075,_0x2a32ff)=>{return new Promise((_0x441b86,_0x592230)=>{const _0x3b7f15='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x3b7f15,[_0x2a32ff],function(_0x5bcc89){_0x5bcc89?_0x592230(_0x5bcc89):_0x441b86({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x5dc60e,_0x207669,_0x53d373,_0x46b0d1,_0x1099ea,_0x38a190)=>{const _0xc3ba5d=await createMessageID(_0x1099ea);return new Promise((_0x41409c,_0x48e169)=>{if(!_0x207669||!_0x53d373||!_0x46b0d1||!_0xc3ba5d||!_0x38a190)return _0x48e169({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0xc3ba5d);const _0x93001='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x93001,[_0x53d373,_0x46b0d1,_0xc3ba5d,_0x38a190,_0x207669],function(_0x34a854){if(_0x34a854)_0x48e169({'status':'error','message':_0x34a854['message']});else this['changes']===0x0?_0x48e169({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x41409c({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x1fab19,_0x1a5237,_0x3dc020,_0x1c1806,_0x113386)=>{return new Promise((_0x255488,_0x3d7156)=>{const _0x3b6c69='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x3b6c69,[_0x1a5237,_0x3dc020,_0x1c1806,_0x113386],function(_0x2d42f2){return _0x2d42f2?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x2d42f2['message']),_0x3d7156('insert-dm-response',{'success':![],'message':_0x2d42f2['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x255488('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x174389=>{return new Promise((_0x323b0a,_0x29789b)=>{const _0x419a3e='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x419a3e,[_0x174389],(_0x49288f,_0x56858c)=>{if(_0x49288f)_0x29789b({'status':'error','message':_0x49288f['message']});else{if(_0x56858c)_0x323b0a(_0x56858c['message_id']);else{const _0x32a246='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x32a246,[_0x174389],function(_0x56fe30){_0x56fe30?_0x29789b({'status':'error','message':_0x56fe30['message']}):_0x323b0a(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x10a17b,_0x294e7b)=>{return new Promise((_0x3cd100,_0x40f317)=>{const _0xfa7b5f='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x294e7b;db['get'](_0xfa7b5f,(_0x1d5bfd,_0x550b54)=>{_0x1d5bfd?_0x40f317({'status':'error','message':_0x1d5bfd['message']}):_0x3cd100({'status':'success','count':_0x550b54['count']});});});});const dbPath=path['resolve'](__dirname,'data/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['resolve'](__dirname,'data/igaccounts.db'),igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x4eb5c8,_0x5ca464){try{const _0xd3f164=await new Promise((_0x4b130c,_0x287ddf)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x5ca464],(_0x5c6899,_0xef1836)=>{if(_0x5c6899)_0x287ddf(_0x5c6899);else{if(_0xef1836['length']>0x0){let _0xcab4c3=JSON['parse'](_0xef1836[0x0]['cookie']);console['log'](_0xcab4c3),_0x4b130c(_0xcab4c3);}else _0x287ddf(new Error('User\x20with\x20username\x20'+_0x5ca464+'\x20does\x20not\x20exist.'));}});});await _0x4eb5c8['setCookie'](..._0xd3f164),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x1f1e0f){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1f1e0f);}}async function saveCookiesForUser(_0x13fc2e,_0x178cda){try{const _0x2c0ab0=await _0x13fc2e['cookies']();if(!_0x2c0ab0||_0x2c0ab0['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x178cda);const _0x12e253=JSON['stringify'](_0x2c0ab0);if(_0x12e253['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x178cda);return new Promise((_0x251ae3,_0x2477c7)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x178cda],(_0x18433b,_0x343c6a)=>{if(_0x18433b)return console['error']('Error\x20checking\x20user\x20existence:',_0x18433b),_0x2477c7(_0x18433b);if(_0x343c6a){const _0x3104c7=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x3104c7['run'](_0x12e253,_0x178cda,function(_0x599de9){return _0x599de9?(console['error']('Error\x20updating\x20cookies:',_0x599de9),_0x2477c7(_0x599de9)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x178cda),_0x251ae3());});}else{const _0x43c67b=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x43c67b['run'](_0x178cda,_0x12e253,function(_0x23e654){return _0x23e654?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x23e654),_0x2477c7(_0x23e654)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x178cda),_0x251ae3());});}});});}catch(_0x582c86){console['error']('Error\x20fetching\x20cookies:',_0x582c86);throw _0x582c86;}}async function createUserIfNotExists(_0x2e90f7){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x2e90f7],(_0x4fc3a3,_0x47af0e)=>{if(_0x4fc3a3){console['error']('Error\x20checking\x20user\x20existence:',_0x4fc3a3);throw _0x4fc3a3;}else{if(!_0x47af0e){const _0x27523e=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x27523e['run'](_0x2e90f7,function(_0x14bead){_0x14bead?console['error']('Error\x20inserting\x20new\x20user:',_0x14bead):console['log']('New\x20user\x20created:',_0x2e90f7);});}else console['log']('User\x20already\x20exists:',_0x2e90f7);}});}catch(_0x48babc){console['error']('Error\x20creating\x20user:',_0x48babc);throw _0x48babc;}}ipcMain['handle']('create-relation',async(_0x125e7c,_0x1e3e89)=>{return new Promise((_0x3dafaf,_0x14b290)=>{const _0x25ada0='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x1e3e89+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x25ada0,function(_0x2041e8){_0x2041e8?_0x14b290(_0x2041e8):_0x3dafaf({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x4c08a7,_0x1a7aa6)=>{return console['log']('droping\x20table'+_0x1a7aa6),new Promise((_0x2fbfaf,_0x2bb27e)=>{const _0x18dbd8='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x1a7aa6;console['log']('droping\x20table'+_0x1a7aa6),db['run'](_0x18dbd8,function(_0x434b3e){_0x434b3e?_0x2bb27e(_0x434b3e):_0x2fbfaf({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x1ccbdf=>{return new Promise((_0x6c1af9,_0x22a28e)=>{const _0x113f6e='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x113f6e,[],(_0x30daae,_0xa99abf)=>{_0x30daae?_0x22a28e(_0x30daae):_0x6c1af9(_0xa99abf['map'](_0x2f53f3=>_0x2f53f3['name']));});});}),ipcMain['handle']('add-user',async(_0x52398c,_0x13892d,_0x120d05)=>{return new Promise(_0x2ef85b=>{const _0x6fe85a=db['prepare']('INSERT\x20INTO\x20'+_0x120d05+'\x20(username)\x20VALUES\x20(?)');_0x6fe85a['run'](_0x13892d,function(_0x205d1f){_0x205d1f?console['log']('error\x20in\x20add-user:'+_0x205d1f):_0x2ef85b({'status':'success','id':this['lastID']});}),_0x6fe85a['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x4aa22a,_0x5ae996)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x5d596e,_0x2a97c6)=>{if(_0x5d596e)_0x5ae996(_0x5d596e);else{_0x4aa22a({'status':'success','users':_0x2a97c6});for(_0x2a97c6 of _0x2a97c6){console['log'](_0x2a97c6['username']);}}});});}),ipcMain['handle']('get-data',async(_0x52e5b8,_0x145700)=>{return new Promise((_0x55ec23,_0x42452e)=>{const _0x2b21f9='SELECT\x20*\x20FROM\x20'+_0x145700;console['log'](_0x2b21f9),db['all'](_0x2b21f9,[],(_0x36d123,_0x45300c)=>{_0x36d123?_0x42452e(_0x36d123):_0x55ec23(_0x45300c);});});}),ipcMain['handle']('get-accounts',async _0x515d85=>{return new Promise((_0x240b08,_0x5173a0)=>{const _0x4747e5='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x4747e5),igaccountsDB['all'](_0x4747e5,[],(_0x4ccf28,_0x48e92b)=>{_0x4ccf28?_0x5173a0(_0x4ccf28):_0x240b08(_0x48e92b);});});}),ipcMain['handle']('get-targets',async(_0x42d623,_0x22c781)=>{return getTargetProfiles(_0x22c781);}),ipcMain['handle']('delete-user',async(_0x526c07,_0x20aebd,_0x22044f)=>{return new Promise((_0x128824,_0x3492be)=>{const _0x49a859=db['prepare']('DELETE\x20FROM\x20'+_0x22044f+'\x20WHERE\x20username\x20=\x20?');_0x49a859['run'](_0x20aebd,function(_0x5a37ca){_0x5a37ca?_0x3492be(_0x5a37ca):_0x128824({'status':'success','changes':this['changes']});}),_0x49a859['finalize']();});}),ipcMain['handle']('delete-account',async(_0x2ed284,_0x387311)=>{const _0x371b38=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x371b38['run'](_0x387311,function(_0x1dfb98){_0x1dfb98&&console['log'](_0x1dfb98);}),_0x371b38['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x28c834,_0x1f4291)=>{const _0x2aa54d='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x2aa54d,[],(_0x45f5a4,_0x35cafa)=>{_0x45f5a4?_0x1f4291({'status':'error','message':_0x45f5a4['message']}):_0x28c834({'status':'success','contactedCount':_0x35cafa['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x5decac,_0x2211b3)=>{const _0xec5d37='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0xec5d37,[],(_0x4821ca,_0x2bdfca)=>{_0x4821ca?_0x2211b3({'status':'error','message':_0x4821ca['message']}):_0x5decac({'status':'success','contactedCount':_0x2bdfca['contactedCount']});});});});function exportDatabase(_0x35d594){return new Promise((_0x2ed04a,_0x4809ea)=>{const _0x49ef90='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x35d594+'\x0a\x20\x20\x20\x20';db['all'](_0x49ef90,[],async(_0x1b1f4e,_0x52ac64)=>{if(_0x1b1f4e){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x1b1f4e['message']),_0x4809ea(_0x1b1f4e);return;}if(!_0x52ac64||_0x52ac64['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2ed04a();return;}const _0x5441cd=XLSX['utils']['json_to_sheet'](_0x52ac64),_0x8b4833=XLSX['utils']['sheet_to_csv'](_0x5441cd);try{const {canceled:_0x1168e0,filePath:_0x45562a}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x35d594+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x1168e0||!_0x45562a){console['log']('Speichern\x20abgebrochen.'),_0x2ed04a();return;}fs['writeFile'](_0x45562a,_0x8b4833,'utf8',_0x3a5438=>{_0x3a5438?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x3a5438['message']),_0x4809ea(_0x3a5438)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x45562a),_0x2ed04a());});}catch(_0x4c3d3b){console['error']('Fehler\x20im\x20Speicherdialog:',_0x4c3d3b),_0x4809ea(_0x4c3d3b);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x581bc4,_0x7bf9c7)=>{shell['openExternal'](_0x7bf9c7);});