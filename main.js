const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x2dfa66,_0x4e3415){try{const _0x38a2d8=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x4e3415},'body':JSON['stringify']({'clearname':_0x2dfa66})});if(!_0x38a2d8['ok']){const _0x2d7bf9=await _0x38a2d8['text']();throw new Error(_0x38a2d8['status']+':\x20'+_0x2d7bf9);}const _0x5c7418=await _0x38a2d8['json']();return _0x5c7418;}catch(_0x5f36ee){console['error']('Error\x20in\x20extractFirstName:',_0x5f36ee);throw _0x5f36ee;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div.xyi19xy.x1ccrb07.xtf3nb5.x1pc53ja.x1lliihq.x1iyjqo2.xs83m0k.xz65tgg.x1rife3k.x1n2onr6',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='div.x78zum5.xdt5ytf.x1ja2u2z\x20>\x20div.x9f619.xvbhtw8\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x1xp8e9x\x20>\x20section.x12nagc\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20a\x20>\x20span\x20>\x20span',COM_COMMENTS_BOX_BODY_DIV='.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4\x20>\x20div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x1gryazu.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20div.x6s0dn4.x78zum5.xdt5ytf.xdj266r.xkrivgy.xat24cr.x1gryazu.x1n2onr6.xh8yej3\x20>\x20div\x20>\x20div.x4h1yfo\x20>\x20div\x20>\x20div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x540dpk\x20>\x20div\x20>\x20div\x20>\x20span',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div',K_OPTIONS_BUTTON='section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.xs5motx\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div',K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD='div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f',K_SEND_MSG_BUTTON='div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x5337a7=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x5337a7['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x5337a7['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x1c81c6){var _0x3fbb8e=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x2c0eff){console['log']('window\x20id:'+_0x2c0eff['id']),_0x2c0eff['id']>0x1&&(_0x3fbb8e=!![]);}),console['log']('child\x20opened\x20='+_0x3fbb8e);if(!_0x3fbb8e){const _0x1f1d3f=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x1f1d3f['loadFile'](_0x1c81c6['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));});function initializeDatabase(){const _0x416200=require('fs'),_0x40572b=path['join'](app['getPath']('userData'),'data'),_0x3051c2=['campaign.db','crm.db','igaccounts.db'],_0x336060=[];try{_0x416200['mkdirSync'](_0x40572b,{'recursive':!![]});for(const _0x1a4577 of _0x3051c2){const _0x253fe2=path['join'](process['resourcesPath'],'app','build','data',_0x1a4577),_0x51f42b=path['join'](_0x40572b,_0x1a4577);!_0x416200['existsSync'](_0x51f42b)?(_0x416200['copyFileSync'](_0x253fe2,_0x51f42b),console['log']('[InitDB]\x20Kopiert\x20'+_0x1a4577+'\x20nach:\x20'+_0x51f42b)):console['log']('[InitDB]\x20'+_0x1a4577+'\x20existiert\x20bereits:\x20'+_0x51f42b),_0x336060['push'](_0x51f42b);}}catch(_0x184a88){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x184a88);}return _0x336060;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x180d71,AppUpdate:_0x157927}=require('electron-updater');_0x180d71['autoDownload']=![],_0x180d71['autoInstallOnAppQuit']=!![],_0x180d71['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x180d71['on']('update-available',_0x3a9103=>{console['log']('Update\x20verfügbar:',_0x3a9103),_0x180d71['downloadUpdate']();}),_0x180d71['on']('update-downloaded',_0x5966e6=>{console['log']('Update\x20heruntergeladen:',_0x5966e6),_0x180d71['quitAndInstall']();}),_0x180d71['on']('error',_0x109212=>{console['error']('Fehler\x20beim\x20Updaten:',_0x109212);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x20c177,AppUpdate:_0x4a8aa8}=require('electron-updater');_0x20c177['autoDownload']=![],_0x20c177['autoInstallOnAppQuit']=!![],_0x20c177['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x20c177['on']('update-available',_0x110163=>{console['log']('Update\x20verfügbar:',_0x110163),_0x20c177['downloadUpdate']();}),_0x20c177['on']('update-downloaded',_0x115fc2=>{console['log']('Update\x20heruntergeladen:',_0x115fc2),console['log']('Neustarten\x20zum\x20Updaten');}),_0x20c177['on']('error',_0x1f266d=>{console['error']('Fehler\x20beim\x20Updaten:',_0x1f266d);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x2dd645='',_0x4e4673=null;if(process['platform']==='darwin')_0x2dd645=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x2dd645=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x2dd645}),_0x4e4673=await browser_login['newPage'](),_0x4e4673['setDefaultNavigationTimeout'](0x1d4c),_0x4e4673['setDefaultTimeout'](0x1d4c),await _0x4e4673['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x4e4673;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0x3e3677=0x1,_0x5ccf10=0x0){let _0x4b5faf='',_0x54d5c2=null;const _0x39b170=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x4b5faf=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x4b5faf=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0x3e3677===0x0&&!pageStack[_0x5ccf10])return browser=await puppeteer['launch']({'headless':_0x39b170,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4b5faf}),_0x54d5c2=await browser['newPage'](),_0x54d5c2['setDefaultNavigationTimeout'](0x1d4c),_0x54d5c2['setDefaultTimeout'](0x1d4c),await _0x54d5c2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x5ccf10]=_0x54d5c2,_0x54d5c2;return(browser===null||pageStack[_0x5ccf10]===null||pageStack[_0x5ccf10]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0x39b170,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x4b5faf})),(pageStack[_0x5ccf10]===null||pageStack[_0x5ccf10]['isClosed']())&&(_0x54d5c2=await browser['newPage'](),_0x54d5c2['setDefaultNavigationTimeout'](0x1d4c),_0x54d5c2['setDefaultTimeout'](0x1d4c),await _0x54d5c2['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x5ccf10]=_0x54d5c2),pageStack[_0x5ccf10];}ipcMain['on']('login',async(_0x223a26,_0x313d39)=>{const _0x4c06fa=await getBrowserPageLogin();await _0x4c06fa['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x4c06fa,_0x313d39),ipcMain['on']('setLoginCookies',async(_0x3d8bf8,_0x17ded6)=>{try{await set_login_cookies(_0x4c06fa,_0x17ded6);}catch(_0x3fd6e1){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x3fd6e1);}});}),ipcMain['on']('export-relation',async(_0x3d4db1,_0x2d2fcd)=>{try{await exportDatabase(_0x2d2fcd),_0x3d4db1['reply']('export-relation-response',{'success':!![]});}catch(_0x4ade4d){console['error'](_0x4ade4d),_0x3d4db1['reply']('export-relation-response',{'success':![],'message':_0x4ade4d['message']});}}),ipcMain['handle']('sendMessage',async(_0x10ccad,_0x4d4b98,_0x46396b,_0x74c867,_0x45ff13,_0xf454b2,_0x138f4b,_0xc61ecc,_0x6c820d,_0x37e822,_0x147811)=>{isStopping=![];let _0x551cb0=null;return _0x138f4b?_0x551cb0=await getBrowserPage(_0x45ff13,_0xc61ecc):_0x551cb0=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x4d4b98),send_message(_0x551cb0,_0x4d4b98,_0x46396b,_0x74c867,_0x45ff13,_0xf454b2,_0x6c820d,_0x37e822,_0x147811);}),ipcMain['handle']('stop-action',async(_0x4e4166,_0x295fe9)=>{isStopping=!![];const _0x448d4d=await getBrowserPage(0x1,_0x295fe9);await _0x448d4d['close']();}),ipcMain['handle']('fetch_followers',async(_0x20e885,_0x32dc0b,_0x3562f6,_0x462ea8,_0x5d8178,_0x1cb07f)=>{isStopping=![];const _0x5b0769=await getBrowserPage();return fetch_followers_from_account(_0x20e885,_0x5b0769,_0x32dc0b,_0x3562f6,_0x462ea8,_0x5d8178,_0x1cb07f);}),ipcMain['handle']('get-account-details',async(_0x912144,_0x3e74a1,_0x498c61,_0x4c30ab)=>{isStopping=![];const _0x64b850=await getBrowserPage();return fetch_account_details(_0x64b850,_0x3e74a1,_0x498c61,_0x4c30ab);}),ipcMain['handle']('fetch_likes',async(_0x51c3c7,_0x454ee9,_0x146026,_0x25c188,_0x1158b8,_0x405228)=>{isStopping=![];const _0x1e284e=await getBrowserPage();return fetch_likers_from_post(_0x51c3c7,_0x1e284e,_0x454ee9,_0x146026,_0x25c188,_0x1158b8,_0x405228);}),ipcMain['handle']('fetch_comments',async(_0x8d74e3,_0x39720f,_0x3f9381,_0x59ffdf,_0x3dd57a,_0x20e15e)=>{isStopping=![];const _0x2c8354=await getBrowserPage();return fetch_comments_from_post(_0x8d74e3,_0x2c8354,_0x39720f,_0x3f9381,_0x59ffdf,_0x3dd57a,_0x20e15e);});async function updateAppSilent(){const {spawn:_0x3d160c}=require('child_process'),_0x336bd8=require('path'),_0x507c8e=require('electron-log');return _0x507c8e['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x2075be,_0x14b2d7)=>{const {updateElectronApp:_0x504353,UpdateSourceType:_0x2839e9}=require('update-electron-app');_0x504353({'updateSource':{'type':_0x2839e9['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x507c8e}),_0x2075be('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x57bfa2,_0x4f5dff)=>{doFullElectronUpdateSilent(),_0x57bfa2('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x1c46fe}=require('child_process'),_0x121ddb=require('path'),_0x3223f8=require('electron-log');return _0x3223f8['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x41ae7f,_0x393c7b)=>{const {updateElectronApp:_0xb16b6a,UpdateSourceType:_0x5119de}=require('update-electron-app');_0xb16b6a({'updateSource':{'type':_0x5119de['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x3223f8}),_0x41ae7f('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x135d44,_0x12a2ab)=>{doFullElectronUpdate(),_0x135d44('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x32659c,_0x4f4169)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x32659c('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0xc0ae19=path['join'](__dirname,'mac-updater-intern.sh'),_0x5cc40f=spawn('/bin/bash',[_0xc0ae19]);_0x5cc40f['stdout']['on']('data',_0x1bd5c1=>{console['log']('stdout:\x20'+_0x1bd5c1);}),_0x5cc40f['stderr']['on']('data',_0x417234=>{console['error']('stderr:\x20'+_0x417234);}),_0x5cc40f['on']('close',_0x2b13b6=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x2b13b6),_0x2b13b6===0x0?_0x32659c('Update\x20erfolgreich\x20abgeschlossen.'):_0x4f4169(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x2b13b6));});}else{if(process['platform']==='win32'){const _0x37c46f=path['join'](__dirname,'../','../','../');process['chdir'](_0x37c46f),console['log']('Aktuelles\x20Verzeichnis:\x20'+process['cwd']());const _0x3966ce='soft-ui-updater-windows.ps1',_0x305acc=spawn('powershell.exe',['-ExecutionPolicy','Bypass','-File',_0x3966ce]);_0x305acc['stdout']['on']('data',_0x481eca=>{console['log']('stdout:\x20'+_0x481eca);}),_0x305acc['stderr']['on']('data',_0x12009d=>{console['error']('stderr:\x20'+_0x12009d);}),_0x305acc['on']('close',_0x2407fa=>{console['log']('Skript\x20beendete\x20sich\x20mit\x20Code\x20'+_0x2407fa),_0x2407fa===0x0?_0x32659c('Update\x20erfolgreich\x20abgeschlossen.'):_0x4f4169(new Error('Update\x20fehlgeschlagen.\x20Exit\x20Code\x20'+_0x2407fa));});}else _0x4f4169(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x1ea407=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x2c81ca,_0x2f1079)=>{console['log']('Update\x20Silent:\x20'+_0x2f1079);if(_0x2f1079){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x2558a2,_0x16d530){return Math['random']()*(_0x16d530-_0x2558a2+0x1)+_0x2558a2;}function delay(_0x12b4fa,_0x1e7ee9){let _0x43729e=getRnd(_0x12b4fa,_0x1e7ee9);return new Promise(function(_0x4cd7ca){setTimeout(_0x4cd7ca,_0x43729e);});}async function scroll(_0xe46543,_0x97eafd,_0x2b8a8c=0x2,_0x46e256){const _0x5377c2=await _0xe46543['waitForSelector'](_0x97eafd);for(let _0x34291d=0x0;_0x34291d<_0x2b8a8c;_0x34291d++){console['log']('Scrolling\x20'+_0x34291d),await _0xe46543['evaluate'](_0x37de67=>{const _0x3c0d71=document['querySelector'](_0x37de67);_0x3c0d71&&_0x3c0d71['scrollBy'](0x0,0x190);},_0x97eafd),await delay(0x320,0x5dc),_0x46e256();}}async function saveCookies(_0x2d24ef){let _0x514397=await _0x2d24ef['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x514397,null,0x2));}async function notificationClear(_0x403890){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xbb8,0x1388),await _0x403890['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x403890['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x537d99){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x537d99);}}async function getTargetProfiles(_0x287ef4){return new Promise((_0x4db50f,_0x29d966)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x287ef4,(_0x1470d0,_0xc01f3b)=>{_0x1470d0?_0x29d966(_0x1470d0):_0x4db50f(_0xc01f3b);});});}async function login_legacy(_0x2a7712,_0x4d5f3c,_0x5c67f5){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x2a7712,_0x4d5f3c),await createUserIfNotExists(_0x4d5f3c,_0x5c67f5);}catch(_0x1a1a74){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x1a1a74);}try{await _0x2a7712['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x2a7712['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x2a7712['click']('button._a9--._ap36._a9_0');}catch(_0x2d104d){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x2a7712['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x2a7712['type']('input[name=\x27username\x27]',_0x4d5f3c,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x2a7712['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x2a7712['type']('input[name=\x27password\x27]',_0x5c67f5,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x2a7712['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x2a7712['click']('button[type=\x27submit\x27]');}catch(_0x18f75b){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x2a7712),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x2a7712,_0x4d5f3c);}catch(_0x492b1a){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x492b1a);}}catch(_0x4380cd){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x4380cd);}}async function login(_0x54e3bc,_0x564760){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x54e3bc,_0x564760),await createUserIfNotExists(_0x564760);}catch(_0x265091){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x265091);}try{await _0x54e3bc['goto']('https://www.instagram.com/accounts/login/');}catch(_0x459be7){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x459be7);}}async function set_login_cookies(_0x133c65,_0x550c35){try{await saveCookiesForUser(_0x133c65,_0x550c35);}catch(_0x55f266){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x55f266);}}async function waitForXPath(_0x1f688b,_0x4182d5,_0x43e03d={}){return await _0x1f688b['waitForFunction'](_0x16e9e6=>{return document['evaluate'](_0x16e9e6,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x43e03d,_0x4182d5),_0x1f688b['evaluateHandle'](_0x49a115=>document['evaluate'](_0x49a115,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x4182d5);}async function send_message(_0x5bd9d9,_0x27ccfb,_0x536622,_0x195467,_0x18d9f6,_0x39b557,_0x4f4ea7,_0x35784e,_0x32972f){return new Promise(async(_0x4e9b10,_0x4c3e2f)=>{_0x39b557=_0x39b557['split'](';'),console['log'](_0x39b557[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x18d9f6);try{await setCookiesForUser(_0x5bd9d9,_0x39b557[0x0]);}catch(_0x1eedab){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x1eedab),_0x4c3e2f({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x1eedab});return;}try{await _0x5bd9d9['goto']('https://www.instagram.com/'+_0x27ccfb+'/'),await delay(0xfa0,0x1d4c),await notificationClear(_0x5bd9d9);}catch(_0x2f68b3){_0x4c3e2f({'status':0x1f4,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0x2f68b3});return;}console['log']('UserSkip:\x20'+_0x4f4ea7);if(_0x4f4ea7==0x1)try{const _0x47336a=await _0x5bd9d9['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x258be7=>_0x258be7['textContent']['trim']());console['log'](_0x47336a);if(_0x47336a==='Following'||_0x47336a==='Folge\x20ich')return _0x4e9b10({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x29535c){}try{await _0x5bd9d9['waitForSelector'](K_DIRECT_MSG_BUTTON),await _0x5bd9d9['click'](K_DIRECT_MSG_BUTTON);}catch(_0xc33ff0){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0xc33ff0);try{await _0x5bd9d9['waitForSelector'](K_OPTIONS_BUTTON),await _0x5bd9d9['click'](K_OPTIONS_BUTTON),await delay(0x1f4,0x320);const _0x49a7af=await waitForXPath(_0x5bd9d9,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x49a7af['click']();}catch(_0x38f3b8){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x38f3b8),_0x4e9b10({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x5bd9d9);}catch(_0x49e154){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x49e154);}try{const _0x4836c1=await _0x5bd9d9['waitForSelector'](K_CHAT_INPUT_FIELD);if(_0x35784e){const _0x391505=await _0x5bd9d9['$']('div.xdj266r.x11i5rnm.xat24cr.x1mh8g0r.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x6ikm8r.x10wlt62');if(_0x391505)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x27ccfb),_0x4e9b10({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x28766b=await _0x5bd9d9['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x28766b),_0x195467=_0x195467['replace']('{USERNAME}',_0x27ccfb);let _0x29bf4c;if(_0x195467['includes']('{NAME}')||_0x195467['includes']('{name}'))try{const _0x3581c3=await extractFirstName(_0x28766b,_0x32972f);console['log']('Response\x20Clearname\x20valid:\x20'+_0x3581c3['valid']),_0x3581c3['valid']?(_0x195467=_0x195467['replaceAll'](/{NAME}|{name}/g,_0x3581c3['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x3581c3['name']),_0x29bf4c=_0x3581c3['name']):(_0x195467=_0x195467['replaceAll'](/ ?({NAME}|{name})/g,''),_0x29bf4c='UNKNOWN_NAME');}catch(_0x5c5874){console['log'](_0x5c5874['message']),_0x29bf4c=_0x5c5874['message'];let _0x7c1d22=_0x28766b['replace'](/[^\p{L}\s]/gu,''),_0x381407=_0x7c1d22['split']('\x20')[0x0];_0x381407['length']>0x2&&!_0x381407['includes']('Instagram')?_0x195467=_0x195467['replaceAll'](/{NAME}|{name}/g,_0x381407):_0x195467=_0x195467['replaceAll'](/ ?({NAME}|{name})/g,'');}await _0x4836c1['type'](_0x195467,{'delay':getRnd(0x50,0x78)}),await delay(0x320,0x3e8);const _0x37e133=await _0x5bd9d9['waitForSelector'](K_SEND_MSG_BUTTON);await _0x37e133['click'](),await delay(0x320,0x3e8),_0x4e9b10({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x28766b,'extracted_clearname':_0x29bf4c});}catch(_0x4e617b){try{await _0x5bd9d9['waitForSelector'](K_MSG_DISABLED_LABEL);const _0x16b168=await _0x5bd9d9['evaluate'](_0x5e25fd=>{return document['querySelector'](_0x5e25fd)['textContent'];},K_MSG_DISABLED_LABEL);console['log']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20gefunden:\x20'+_0x16b168),console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x4e617b),_0x4e9b10({'status':0x195,'message':'Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x27ccfb+'\x20überspringen.'});}catch(_0x5b7508){console['error']('Label\x20\x27Not\x20everyone\x20can\x20message\x20this\x20account\x27\x20nicht\x20gefunden:\x20'+_0x5b7508),console['error']('Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x27ccfb+'\x20:\x20'+_0x5b7508),_0x4e9b10({'status':0x196,'message':'Nachricht\x20nicht\x20gesendet\x20an:\x20'+_0x27ccfb+'\x20:\x20'+_0x5b7508});}}});}function handle_fail(_0x3d6331){if(isStopping)return new Promise(_0x4df4d7=>{_0x4df4d7('Scraper\x20gestoppt.');});else{let _0x180dea='';switch(_0x3d6331){case 0x0:_0x180dea='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x180dea='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x180dea='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x180dea='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x5ef4b5,_0x35754a)=>{_0x35754a(_0x180dea);});}}async function fetch_account_details(_0x133b72,_0xa4b19d,_0x4b17fc,_0x2f37ff){try{await setCookiesForUser(_0x133b72,_0x4b17fc['username']);}catch(_0x6c81fa){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x6c81fa);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x6c81fa);return handle_fail(0x0);}_0x133b72['setDefaultNavigationTimeout'](0x7530),await _0x133b72['goto']('https://www.instagram.com/'+_0xa4b19d+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x133b72);const _0x43245b=await _0x133b72['evaluate'](()=>{const _0x4112dd=document['querySelector']('meta[property=\x22og:image\x22]');return _0x4112dd?_0x4112dd['getAttribute']('content'):null;});await _0x133b72['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x2f255c=await _0x133b72['evaluate'](()=>{const _0x2ea683=document['querySelector']('meta[name=\x22description\x22]');if(!_0x2ea683)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x3cd81f=_0x2ea683['getAttribute']('content');if(!_0x3cd81f)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x3cd81f);const _0x38a873=/\s*[–-]\s*/,_0x2f8057=_0x3cd81f['split'](_0x38a873);if(_0x2f8057['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0x1f55b1=_0x2f8057[0x0],_0x4c968f=_0x2f8057[0x1],_0x12a424=_0x1f55b1['split'](',\x20');if(_0x12a424['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x520726=_0x12a424[0x0]['split']('\x20')[0x0],_0x1dc14f=_0x12a424[0x1]['split']('\x20')[0x0],_0x20d508=_0x12a424[0x2]['split']('\x20')[0x0];let _0x28fb0a='',_0x2f10eb='';const _0x397965='\x20on\x20Instagram:\x20',_0x4514a3=_0x4c968f['split'](_0x397965);return _0x28fb0a=_0x4514a3[0x0]['trim'](),_0x28fb0a=_0x28fb0a['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x4514a3['length']>0x1&&(_0x2f10eb=_0x4514a3[0x1]['trim'](),_0x2f10eb['startsWith']('\x22')&&_0x2f10eb['endsWith']('\x22')&&(_0x2f10eb=_0x2f10eb['substring'](0x1,_0x2f10eb['length']-0x1)['trim']()),_0x2f10eb=_0x2f10eb['replace'](/&quot;/g,'')['trim']()),{'followers':_0x520726,'following':_0x1dc14f,'posts':_0x20d508,'nameText':_0x28fb0a,'bio':_0x2f10eb};});console['log']('Extracted\x20profile\x20data:',_0x2f255c);const _0x1f347d=_0x2f255c['nameText'],_0x4181ed=_0x43245b,_0x47fc6b=_0x2f255c['bio'],_0x57b718=_0x2f255c['followers'],_0x5d2569=_0x2f255c['following'],_0x4bf783=_0x2f255c['posts'],_0x5b183c=![],_0x4da986=![],_0x1311c3=![],_0x1070f1='\x0a\x20\x20INSERT\x20INTO\x20'+_0x2f37ff+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x1070f1,[_0xa4b19d,_0x1f347d,_0x4181ed,_0x47fc6b,_0x57b718,_0x5d2569,_0x4bf783,_0x5b183c,_0x4da986,_0x1311c3],function(_0x5d0404){_0x5d0404?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x5d0404['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x1565e8,_0x36ad21,_0x482189,_0x4566c0,_0x396d06,_0x1a7b41,_0x21834c){let _0x14fe8f=0x4,_0x11a088=0x0,_0x9ebb85=0x0;try{await setCookiesForUser(_0x36ad21,_0x1a7b41['username']);}catch(_0x280543){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x280543);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x280543);return handle_fail(0x0);}let _0x5c909d=0x0;try{await _0x36ad21['goto']('https://www.instagram.com/'+_0x482189+'/'),await notificationClear(_0x36ad21);try{if(_0x4566c0<=0x0){const _0x1d18c3=await _0x36ad21['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x2df07b=await _0x36ad21['evaluate'](_0x47ecde=>_0x47ecde['innerHTML'],_0x1d18c3);_0x5c909d=Math['ceil'](_0x2df07b/0x4);}else _0x5c909d=Math['ceil'](_0x4566c0/0x4);_0x14fe8f+=_0x5c909d,_0x9ebb85=Math['round'](++_0x11a088/_0x14fe8f*0x64),_0x1565e8['sender']['send']('fetch-progress',_0x9ebb85,!![]);let _0x2cd179=await _0x36ad21['waitForSelector']('a[href=\x22/'+_0x482189+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x2cd179['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x482189+'\x20gesichtet'),_0x9ebb85=Math['round'](++_0x11a088/_0x14fe8f*0x64),_0x1565e8['sender']['send']('fetch-progress',_0x9ebb85,!![]);}catch(_0x3c5c7e){console['log']('Follower\x20Liste\x20von\x20'+_0x482189+'\x20nicht\x20gefunden:'+_0x3c5c7e);throw new Error('Follower\x20Liste\x20von\x20'+_0x482189+'\x20nicht\x20gefunden:'+_0x3c5c7e);return handle_fail(0x0);}}catch(_0x1c81f9){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1c81f9);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x1c81f9);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x5c909d),await scroll(_0x36ad21,FOLLOWER_FENSTER,_0x5c909d,_0x44002a=>{_0x9ebb85=Math['round'](++_0x11a088/_0x14fe8f*0x64),_0x1565e8['sender']['send']('fetch-progress',_0x9ebb85,!![]);}),await _0x36ad21['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x177447=await _0x36ad21['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x35d827=await _0x36ad21['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x9ebb85=Math['round'](++_0x11a088/_0x14fe8f*0x64),_0x1565e8['sender']['send']('fetch-progress',_0x9ebb85,!![]);_0x4566c0<=0x0&&(_0x4566c0=_0x177447['length']);let _0x27c213=[];for(let _0x40ee23=0x0;_0x40ee23<_0x177447['length']&&_0x40ee23<_0x4566c0;_0x40ee23++){_0x27c213['push'](await _0x177447[_0x40ee23]['evaluate'](_0x5ea162=>_0x5ea162['textContent']));const _0x26efcd='INSERT\x20INTO\x20'+_0x396d06+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x26efcd,[await _0x177447[_0x40ee23]['evaluate'](_0x24f915=>_0x24f915['textContent']),await _0x35d827[_0x40ee23]['evaluate'](_0xdbd3bc=>_0xdbd3bc['textContent'])],function(_0x28b094){_0x28b094?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x396d06+'\x27:',_0x28b094['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x9ebb85=Math['round'](++_0x11a088/_0x14fe8f*0x64),_0x1565e8['sender']['send']('fetch-progress',_0x9ebb85,!![]),_0x21834c&&(_0x1565e8['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x1565e8,_0x36ad21,_0x1a7b41,_0x396d06,_0x27c213)),new Promise(_0x12cf89=>{_0x12cf89('Scraping\x20finished!');});}catch(_0x5ee1b2){if(_0x21834c)throw new Error(_0x5ee1b2);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x482189+'\x20nicht\x20gefunden:\x20'+_0x5ee1b2);return handle_fail(0x0);}}async function fetch_details_from_list(_0x16a833,_0x37fd99,_0x44f8a0,_0x46ae1d,_0x549efa){let _0x479e97=0x0,_0xad3cdc=0x0;for(let _0x38c49e=0x0;_0x38c49e<_0x549efa['length'];_0x38c49e++){console['log']('Processing\x20profile:',_0x549efa[_0x38c49e]);try{await fetch_account_details(_0x37fd99,_0x549efa[_0x38c49e],_0x44f8a0,_0x46ae1d);}catch(_0x577678){console['error']('Detailed\x20Scraping\x20von:\x20',_0x549efa[_0x38c49e],_0x577678);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x549efa[_0x38c49e]+'\x20'+_0x577678);}_0xad3cdc=Math['round'](++_0x479e97/_0x549efa['length']*0x64),_0x16a833['sender']['send']('fetch-progress',_0xad3cdc,!![],!![]);}}async function fetch_likers_from_post(_0x480389,_0x1724b5,_0x2d4ffe,_0x53208e,_0x36e4d2,_0x49fa19,_0x1613bf){let _0x20152a=0x4,_0x4997c2=0x0,_0x580ee3=0x0;try{await setCookiesForUser(_0x1724b5,_0x49fa19['username']);}catch(_0x2c2b3d){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2c2b3d);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x2c2b3d);return handle_fail(0x1);return;}_0x580ee3=Math['round'](++_0x4997c2/_0x20152a*0x64),_0x480389['sender']['send']('fetch-progress',_0x580ee3,!![]);try{let _0x1c2ee0=_0x2d4ffe['substring'](0x0,_0x2d4ffe['lastIndexOf']('/')),_0x1f0f19=_0x1c2ee0+'/liked_by';console['log'](_0x1f0f19),await _0x1724b5['goto'](_0x1f0f19),await delay(0x7d0,0xfa0),await notificationClear(_0x1724b5),await delay(0xc8,0x1f4),_0x580ee3=Math['round'](++_0x4997c2/_0x20152a*0x64),_0x480389['sender']['send']('fetch-progress',_0x580ee3,!![]),await _0x1724b5['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x37f025=await _0x1724b5['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x2310fb=await _0x1724b5['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x37f025['length']);let _0x341343=path['join'](__dirname,'/likers.csv');_0x580ee3=Math['round'](++_0x4997c2/_0x20152a*0x64),_0x480389['sender']['send']('fetch-progress',_0x580ee3,!![]);_0x53208e<=0x0&&(_0x53208e=_0x37f025['length']);try{let _0x1a8114=[];for(let _0x2bf00f=0x0;_0x2bf00f<_0x37f025['length']&&_0x2bf00f<_0x53208e;_0x2bf00f++){_0x1a8114['push'](await _0x37f025[_0x2bf00f]['evaluate'](_0x38d75a=>_0x38d75a['textContent']));try{const _0x404313='INSERT\x20INTO\x20'+_0x36e4d2+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x404313,[await _0x37f025[_0x2bf00f]['evaluate'](_0x5db46b=>_0x5db46b['textContent']),await _0x2310fb[_0x2bf00f]['evaluate'](_0x56e978=>_0x56e978['textContent'])],function(_0xa7792f){_0xa7792f?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x36e4d2+'\x27:',_0xa7792f['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x4585c2){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2bf00f+'\x20:\x20'+_0x4585c2);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2bf00f+'\x20:\x20'+_0x4585c2);return handle_fail(0x1);}}return _0x580ee3=Math['round'](++_0x4997c2/_0x20152a*0x64),_0x480389['sender']['send']('fetch-progress',_0x580ee3,!![]),_0x1613bf&&(_0x480389['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x480389,_0x1724b5,_0x49fa19,_0x36e4d2,_0x1a8114)),new Promise(_0x306c08=>{_0x306c08('Scraping\x20finished!');});}catch(_0x224f59){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0x224f59);return handle_fail(0x1);}}catch(_0x87f1f8){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x87f1f8);throw new Error('Like-Seite\x20nicht\x20geöffnet'+_0x87f1f8);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x565f90,_0x6c524,_0x54d969,_0x4c83b4,_0x54d484,_0x1ef2ca,_0x15e494){let _0x383f83=0x3,_0x335336=0x0,_0xb8e5e4=0x0;try{await setCookiesForUser(_0x6c524,_0x1ef2ca['username']);}catch(_0x49396a){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x49396a);throw new Error('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x49396a);return handle_fail(0x2);}try{console['log'](_0x54d969),await _0x6c524['goto'](_0x54d969),await delay(0x7d0,0xfa0),await notificationClear(_0x6c524),await delay(0xc8,0x1f4);const _0x499473=COM_COMMENTS_BOX_BODY_DIV;let _0x34b6bc;const _0x42b629=await _0x6c524['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x7fffec=await _0x6c524['evaluate'](_0x236396=>_0x236396['innerHTML'],_0x42b629),_0x1e67e2=String(_0x7fffec)['replace'](/[^0-9]/g,''),_0x5b62fe=Number(_0x1e67e2)/0x14;_0x4c83b4<=0x0?_0x34b6bc=Math['ceil'](_0x5b62fe/0x3):_0x34b6bc=Math['ceil'](_0x4c83b4/0x3);_0x383f83+=_0x34b6bc,_0xb8e5e4=Math['round'](++_0x335336/_0x383f83*0x64),_0x565f90['sender']['send']('fetch-progress',_0xb8e5e4,!![]),console['log']('Auto-scrolls:\x20'+_0x34b6bc),await scroll(_0x6c524,_0x499473,_0x34b6bc,_0x157aab=>{_0xb8e5e4=Math['round'](++_0x335336/_0x383f83*0x64),_0x565f90['sender']['send']('fetch-progress',_0xb8e5e4,!![]);});try{const _0x257254=COM_REPLY_BUTTON_SPAN;await _0x6c524['waitForSelector'](_0x257254),await delay(0x1f4,0x320);const _0x1c3296=await _0x6c524['$$'](_0x257254);console['log'](_0x1c3296);let _0x4833d1=_0x1c3296['length'];await delay(0xc8,0x1f4);try{for(let _0x50d658=0x0;_0x50d658<_0x4833d1;_0x50d658++){_0x1c3296[_0x50d658]['click'](),await delay(0x320,0x5dc);}}catch(_0x242ead){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x242ead);throw new Error('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x242ead);return handle_fail(0x2);}}catch(_0x88244e){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x3a8c35=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x6c524['waitForSelector'](_0x3a8c35),await delay(0x1f4,0x320),_0xb8e5e4=Math['round'](++_0x335336/_0x383f83*0x64),_0x565f90['sender']['send']('fetch-progress',_0xb8e5e4,!![]);const _0x2c0cdd=await _0x6c524['$$'](_0x3a8c35);let _0x44dcdb=path['join'](__dirname,'/comments.csv');_0x4c83b4<=0x0&&(_0x4c83b4=_0x2c0cdd['length']);console['log']('fetch_limit:\x20'+_0x4c83b4),console['log']('comments_len:\x20'+_0x2c0cdd['length']),_0x4c83b4++;try{let _0x1ae7e3=[];for(let _0x2e4cb7=0x1;_0x2e4cb7<_0x2c0cdd['length']&&_0x2e4cb7<_0x4c83b4;_0x2e4cb7++){try{_0x1ae7e3['push'](await _0x2c0cdd[_0x2e4cb7]['evaluate'](_0x5ea9d0=>_0x5ea9d0['textContent']));const _0xee46a=await db['prepare']('INSERT\x20INTO\x20'+_0x54d484+'\x20(username)\x20VALUES\x20(?)');await _0xee46a['run'](await _0x2c0cdd[_0x2e4cb7]['evaluate'](_0x15ed1f=>_0x15ed1f['textContent']),function(_0x244474){_0x244474&&console['log']('error\x20in\x20add-user:'+_0x244474);}),await _0xee46a['finalize']();}catch(_0x5ec196){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2e4cb7+'\x20:\x20'+_0x5ec196);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x2e4cb7+'\x20:\x20'+_0x5ec196);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0xb8e5e4=Math['round'](++_0x335336/_0x383f83*0x64),_0x565f90['sender']['send']('fetch-progress',_0xb8e5e4,!![]),_0x565f90['sender']['send']('fetch-progress',0x64,!![]),_0x15e494&&(_0x565f90['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x565f90,_0x6c524,_0x1ef2ca,_0x54d484,_0x1ae7e3)),_0x565f90['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x4145bd=>{_0x4145bd('Scraping\x20finished!');});}catch(_0x34ce94){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x34ce94);return handle_fail(0x2);}}catch(_0x871055){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x871055);throw new Error('Comments-Seite\x20nicht\x20geöffnet'+_0x871055);return handle_fail(0x2);}}async function set_clearname_from_username(_0x2eef9f,_0x2331b2,_0x23d15f=null){try{let _0x3e09e6,_0xe86ae5;const _0x48823c='SELECT\x20username\x20FROM\x20'+_0x2331b2+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x48823c,[],(_0x466d3b,_0x3c7189)=>{_0x466d3b&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x466d3b['message']),_0x3c7189['length']===0x0&&(_0xe86ae5=_0x3c7189['length']),_0x3e09e6=_0x3c7189['map'](_0x44ef47=>_0x44ef47['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0xe86ae5);if(_0xe86ae5===0x0){console['log']('Leave');return;}const _0x31efd2=await _0x2eef9f['waitForSelector'](IG_SEARCH_BUTTON);await _0x31efd2['click'](),await delay(0x4b0,0x7d0);for(let _0x1da1bc of _0x3e09e6){const _0x1519ea=await _0x2eef9f['waitForSelector'](IG_SEARCH_INPUT);await _0x1519ea['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x2eef9f['type'](IG_SEARCH_INPUT,_0x1da1bc,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x333cd0=0x1;while(_0x333cd0!=0x14){console['log']('Schleife');try{let _0x370fee=IG_NAME_SPAN_PART1+_0x333cd0+IG_USERNAME_SPAN_PART2;const _0x2ccde7=await _0x2eef9f['waitForSelector'](_0x370fee),_0x487a4c=await _0x2eef9f['evaluate'](_0x549f79=>_0x549f79['innerHTML'],_0x2ccde7);await delay(0xc8,0x1f4);if(_0x487a4c==_0x1da1bc){let _0x3b14de=IG_NAME_SPAN_PART1+_0x333cd0+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x25ceee=await _0x2eef9f['waitForSelector'](_0x3b14de);let _0x4d8578=await _0x2eef9f['evaluate'](_0x447939=>_0x447939['innerHTML'],_0x25ceee);const _0x278870=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x10e802=_0x4d8578['match'](_0x278870);_0x10e802?_0x4d8578=_0x10e802[0x1]['trim']():_0x4d8578=_0x4d8578['trim']();_0x4d8578['includes']('•')&&(_0x4d8578=_0x4d8578['substring'](0x0,_0x4d8578['indexOf']('•')-0x1));const _0x2621d4='UPDATE\x20'+_0x2331b2+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x2621d4,[_0x4d8578,_0x487a4c],function(_0x4b881a){_0x4b881a&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x4b881a['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x333cd0++;}catch(_0x53a8a2){const _0x524aa7='UPDATE\x20'+_0x2331b2+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x524aa7,['',_0x1da1bc],function(_0x4bf071){_0x4bf071&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x4bf071['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x53a8a2);break;}}_0x23d15f&&_0x23d15f();}await _0x31efd2['click']();}catch(_0x4b7288){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0x4b7288);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x2bc899,_0x54deb5)=>{const _0x560698='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x560698,[],(_0x5f1da4,_0x39ea4f)=>{_0x5f1da4?_0x54deb5(_0x5f1da4):_0x2bc899(_0x39ea4f);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x40d9f8,_0xd9b004)=>{const _0x143cbf='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x143cbf,[],async(_0x2d85dd,_0x28c1c3)=>{if(_0x2d85dd)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x2d85dd['message']),_0xd9b004({'status':'error','message':_0x2d85dd['message']});else try{const _0x306b4a=await Promise['all'](_0x28c1c3['map'](_0x75b86b=>{return new Promise(_0x2c2484=>{if(!_0x75b86b['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x75b86b['campaign_name']),_0x2c2484({'campaign_name':_0x75b86b['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x30dc03='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x75b86b['list_id'],_0x16742f='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x75b86b['list_id']+'\x22';db['get'](_0x30dc03,[],(_0x38abba,_0x8d8d72)=>{_0x38abba?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x75b86b['campaign_name']+':',_0x38abba['message']),_0x2c2484({'campaign_name':_0x75b86b['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x16742f,[],(_0x3c6a9c,_0x319225)=>{_0x3c6a9c?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x75b86b['campaign_name']+':',_0x3c6a9c['message']),_0x2c2484({'campaign_name':_0x75b86b['campaign_name'],'lead_count':_0x8d8d72?_0x8d8d72['lead_count']:0x0,'contacted_count':'N/A'})):_0x2c2484({'campaign_name':_0x75b86b['campaign_name'],'lead_count':_0x8d8d72?_0x8d8d72['lead_count']:0x0,'contacted_count':_0x319225?_0x319225['contacted_count']:0x0});});});});}));_0x40d9f8({'status':'success','campaigns':_0x306b4a});}catch(_0x1feefa){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x1feefa),_0xd9b004({'status':'error','message':_0x1feefa['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0xcff872,_0x2e000b)=>{return new Promise((_0x146683,_0x5d19de)=>{const _0x40b4c6='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x40b4c6,[_0x2e000b],(_0x184881,_0x1c4b1a)=>{_0x184881?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x184881),_0x5d19de(_0x184881)):(console['log']('ROWS'),console['log'](_0x1c4b1a),debugDatabaseContents(),_0x146683(_0x1c4b1a));});});});const showTableContents=_0x443fe6=>{return new Promise((_0x1db702,_0x2bc27a)=>{const _0x434967='SELECT\x20*\x20FROM\x20'+_0x443fe6+';';campaignDB['all'](_0x434967,(_0x300f5f,_0x6344)=>{_0x300f5f?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x443fe6+':',_0x300f5f),_0x2bc27a(_0x300f5f)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x443fe6+':',_0x6344),_0x1db702({'status':'success','message':_0x6344}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x964ca2){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x964ca2);}}ipcMain['handle']('create-campaign',async(_0x2bd6d4,_0x625722)=>{return new Promise((_0x4da270,_0x55179b)=>{const _0x575739='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x575739,[String(_0x625722)],function(_0x371c6a){_0x371c6a?_0x55179b(_0x371c6a):_0x4da270({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x5191b0,_0x1089aa)=>{return new Promise((_0x2b9ad0,_0x5efb0b)=>{const _0x2dc521='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x2dc521,[_0x1089aa],function(_0x2c339f){_0x2c339f?_0x5efb0b(_0x2c339f):_0x2b9ad0({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x49fdc8,_0x43a45e,_0x545eac,_0x18c37c,_0x2eee30,_0x2f6a0b,_0x5e3e5b,_0x311444)=>{const _0x38d6e5=await createMessageID(_0x2eee30);return new Promise((_0x3a1665,_0x365afb)=>{if(!_0x43a45e||!_0x545eac||!_0x18c37c||!_0x38d6e5||!_0x2f6a0b)return _0x365afb({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x38d6e5);const _0x5f30a4='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x5f30a4,[_0x545eac,_0x18c37c,_0x38d6e5,_0x2f6a0b,_0x5e3e5b,_0x311444,_0x43a45e],function(_0x18b211){if(_0x18b211)_0x365afb({'status':'error','message':_0x18b211['message']});else this['changes']===0x0?_0x365afb({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x3a1665({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x14368e,_0x42724d,_0x3ef5df,_0xf20060,_0x5417f4)=>{return new Promise((_0x5188dd,_0x112c23)=>{const _0x28eddd='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x28eddd,[_0x42724d,_0x3ef5df,_0xf20060,_0x5417f4],function(_0x3caca4){return _0x3caca4?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x3caca4['message']),_0x112c23('insert-dm-response',{'success':![],'message':_0x3caca4['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x5188dd('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0xde3348=>{return new Promise((_0x28f78a,_0x135246)=>{const _0x203c53='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x203c53,[_0xde3348],(_0x2c8b84,_0x4051f1)=>{if(_0x2c8b84)_0x135246({'status':'error','message':_0x2c8b84['message']});else{if(_0x4051f1)_0x28f78a(_0x4051f1['message_id']);else{const _0x7a1290='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x7a1290,[_0xde3348],function(_0x24c160){_0x24c160?_0x135246({'status':'error','message':_0x24c160['message']}):_0x28f78a(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x3a20c7,_0x4176df)=>{return new Promise((_0x36ce81,_0x9bba6f)=>{const _0x1a3e87='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0x4176df;db['get'](_0x1a3e87,(_0x4da274,_0x35d159)=>{_0x4da274?_0x9bba6f({'status':'error','message':_0x4da274['message']}):_0x36ce81({'status':'success','count':_0x35d159['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0x6e6dbd,_0x332dbc){try{const _0x18633d=await new Promise((_0x43d38a,_0x5b7ee5)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x332dbc],(_0x2c9589,_0x3aaa28)=>{if(_0x2c9589)_0x5b7ee5(_0x2c9589);else{if(_0x3aaa28['length']>0x0){let _0x561aa8=JSON['parse'](_0x3aaa28[0x0]['cookie']);console['log'](_0x561aa8),_0x43d38a(_0x561aa8);}else _0x5b7ee5(new Error('User\x20with\x20username\x20'+_0x332dbc+'\x20does\x20not\x20exist.'));}});});await _0x6e6dbd['setCookie'](..._0x18633d),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x45f57e){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x45f57e);}}async function saveCookiesForUser(_0x1ac0de,_0x4ac68f){try{const _0x42191c=await _0x1ac0de['cookies']();if(!_0x42191c||_0x42191c['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x4ac68f);const _0x4c9f50=JSON['stringify'](_0x42191c);if(_0x4c9f50['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x4ac68f);return new Promise((_0x25d3eb,_0x548be8)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x4ac68f],(_0x2b0017,_0x3fcdde)=>{if(_0x2b0017)return console['error']('Error\x20checking\x20user\x20existence:',_0x2b0017),_0x548be8(_0x2b0017);if(_0x3fcdde){const _0x596526=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x596526['run'](_0x4c9f50,_0x4ac68f,function(_0x39eb36){return _0x39eb36?(console['error']('Error\x20updating\x20cookies:',_0x39eb36),_0x548be8(_0x39eb36)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x4ac68f),_0x25d3eb());});}else{const _0x29c3fc=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x29c3fc['run'](_0x4ac68f,_0x4c9f50,function(_0x549278){return _0x549278?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x549278),_0x548be8(_0x549278)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x4ac68f),_0x25d3eb());});}});});}catch(_0x1e1189){console['error']('Error\x20fetching\x20cookies:',_0x1e1189);throw _0x1e1189;}}async function createUserIfNotExists(_0x130727){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x130727],(_0x169e6e,_0x12f212)=>{if(_0x169e6e){console['error']('Error\x20checking\x20user\x20existence:',_0x169e6e);throw _0x169e6e;}else{if(!_0x12f212){const _0x4b85ff=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x4b85ff['run'](_0x130727,function(_0x47532b){_0x47532b?console['error']('Error\x20inserting\x20new\x20user:',_0x47532b):console['log']('New\x20user\x20created:',_0x130727);});}else console['log']('User\x20already\x20exists:',_0x130727);}});}catch(_0x512a55){console['error']('Error\x20creating\x20user:',_0x512a55);throw _0x512a55;}}ipcMain['handle']('create-relation',async(_0x3ba91f,_0xadee8e)=>{return new Promise((_0x2cd0c2,_0x2a6754)=>{const _0x279a89='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0xadee8e+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x279a89,function(_0x49e8fc){_0x49e8fc?_0x2a6754(_0x49e8fc):_0x2cd0c2({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x3a179a,_0x39b83a)=>{return console['log']('droping\x20table'+_0x39b83a),new Promise((_0x1b13d5,_0x2d0e3f)=>{const _0x10876a='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x39b83a;console['log']('droping\x20table'+_0x39b83a),db['run'](_0x10876a,function(_0x1fa7ab){_0x1fa7ab?_0x2d0e3f(_0x1fa7ab):_0x1b13d5({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x19454a=>{return new Promise((_0x22ce80,_0x505375)=>{const _0x3f8797='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x3f8797,[],(_0x425fc9,_0x45ff04)=>{_0x425fc9?_0x505375(_0x425fc9):_0x22ce80(_0x45ff04['map'](_0x2951fe=>_0x2951fe['name']));});});}),ipcMain['handle']('add-user',async(_0xdd80d,_0x105fd7,_0x396f63)=>{return new Promise(_0x3382ca=>{const _0x37fbfe=db['prepare']('INSERT\x20INTO\x20'+_0x396f63+'\x20(username)\x20VALUES\x20(?)');_0x37fbfe['run'](_0x105fd7,function(_0x52bbe1){_0x52bbe1?console['log']('error\x20in\x20add-user:'+_0x52bbe1):_0x3382ca({'status':'success','id':this['lastID']});}),_0x37fbfe['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x3819fb,_0x509769)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x273c53,_0x362ad8)=>{if(_0x273c53)_0x509769(_0x273c53);else{_0x3819fb({'status':'success','users':_0x362ad8});for(_0x362ad8 of _0x362ad8){console['log'](_0x362ad8['username']);}}});});}),ipcMain['handle']('get-data',async(_0x219b54,_0x510c39)=>{return new Promise((_0x2a073e,_0x476f66)=>{const _0x1c6a74='SELECT\x20*\x20FROM\x20'+_0x510c39;console['log'](_0x1c6a74),db['all'](_0x1c6a74,[],(_0x540033,_0x1122cc)=>{_0x540033?_0x476f66(_0x540033):_0x2a073e(_0x1122cc);});});}),ipcMain['handle']('get-accounts',async _0x5beca9=>{return new Promise((_0x5765e8,_0xc90e44)=>{const _0x48bf0d='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x48bf0d),igaccountsDB['all'](_0x48bf0d,[],(_0x591040,_0x200b9d)=>{_0x591040?_0xc90e44(_0x591040):_0x5765e8(_0x200b9d);});});}),ipcMain['handle']('get-targets',async(_0x56ba84,_0x56d7ba)=>{return getTargetProfiles(_0x56d7ba);}),ipcMain['handle']('delete-user',async(_0x48666d,_0x2261f0,_0x5931ed)=>{return new Promise((_0x1c6b97,_0x479c0c)=>{const _0x4a1235=db['prepare']('DELETE\x20FROM\x20'+_0x5931ed+'\x20WHERE\x20username\x20=\x20?');_0x4a1235['run'](_0x2261f0,function(_0x28e817){_0x28e817?_0x479c0c(_0x28e817):_0x1c6b97({'status':'success','changes':this['changes']});}),_0x4a1235['finalize']();});}),ipcMain['handle']('delete-account',async(_0x1c7fc5,_0x426a39)=>{const _0x722864=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x722864['run'](_0x426a39,function(_0x1d5bd2){_0x1d5bd2&&console['log'](_0x1d5bd2);}),_0x722864['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x329f12,_0x1e17fc)=>{const _0x519151='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x519151,[],(_0x459e45,_0x43f3a9)=>{_0x459e45?_0x1e17fc({'status':'error','message':_0x459e45['message']}):_0x329f12({'status':'success','contactedCount':_0x43f3a9['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0xf5b480,_0x2e726f)=>{const _0x38c653='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x38c653,[],(_0x9b6e0c,_0xa0c82f)=>{_0x9b6e0c?_0x2e726f({'status':'error','message':_0x9b6e0c['message']}):_0xf5b480({'status':'success','contactedCount':_0xa0c82f['contactedCount']});});});});function exportDatabase(_0x451c95){return new Promise((_0x13fd30,_0xcf6b24)=>{const _0x524ea3='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x451c95+'\x0a\x20\x20\x20\x20';db['all'](_0x524ea3,[],async(_0x484e2c,_0x8917ca)=>{if(_0x484e2c){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0x484e2c['message']),_0xcf6b24(_0x484e2c);return;}if(!_0x8917ca||_0x8917ca['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x13fd30();return;}const _0x36074a=XLSX['utils']['json_to_sheet'](_0x8917ca),_0x5ef920=XLSX['utils']['sheet_to_csv'](_0x36074a);try{const {canceled:_0xcec819,filePath:_0x386de3}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x451c95+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0xcec819||!_0x386de3){console['log']('Speichern\x20abgebrochen.'),_0x13fd30();return;}fs['writeFile'](_0x386de3,_0x5ef920,'utf8',_0x3795e3=>{_0x3795e3?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x3795e3['message']),_0xcf6b24(_0x3795e3)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x386de3),_0x13fd30());});}catch(_0x40abc4){console['error']('Fehler\x20im\x20Speicherdialog:',_0x40abc4),_0xcf6b24(_0x40abc4);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x556013,_0x1eb00d)=>{shell['openExternal'](_0x1eb00d);});