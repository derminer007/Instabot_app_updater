const {app,BrowserWindow,ipcMain,dialog,shell,powerSaveBlocker}=require('electron'),path=require('path'),puppeteer=require('puppeteer'),fs=require('fs')['promises'],{convertArrayToCSV}=require('convert-array-to-csv'),{replace}=require('formik'),{spawn}=require('child_process'),sqlite3=require('sqlite3')['verbose'](),XLSX=require('xlsx'),fs_no_promise=require('fs');async function extractFirstName(_0x59820f,_0x40f0ac){try{const _0x3b8161=await fetch('https://extractfirstname-dnfofjyvnq-uc.a.run.app',{'method':'POST','headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x40f0ac},'body':JSON['stringify']({'clearname':_0x59820f})});if(!_0x3b8161['ok']){const _0x5a25f6=await _0x3b8161['text']();throw new Error(_0x3b8161['status']+':\x20'+_0x5a25f6);}const _0x3c2e95=await _0x3b8161['json']();return _0x3c2e95;}catch(_0x41722f){console['error']('Error\x20in\x20extractFirstName:',_0x41722f);throw _0x41722f;}}const ANZAHL_FOLLOWER_BUTTON='section.xc3tme8.x1xdureb.x18wylqe.x13vxnyz.xvxrpd7\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a\x20>\x20span\x20>\x20span\x20>\x20span',FOLLOWER_BUTTON='div.x9f619.x1n2onr6.x1ja2u2z\x20>\x20div\x20>\x20div\x20>\x20div.x78zum5.x1ja2u2z\x20>\x20div:nth-child(2)\x20>\x20div\x20>\x20div.x1gryazu\x20>\x20section\x20>\x20main\x20>\x20div\x20>\x20header\x20>\x20section.xc3tme8\x20>\x20ul\x20>\x20li:nth-child(2)\x20>\x20div\x20>\x20a',FOLLOWER_FENSTER='div:has(>\x20div[style=\x22height:\x20auto;\x20overflow:\x20hidden\x20auto;\x22])',FOLLOWER_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',FOLLOWER_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',LIKERS_USERNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20div\x20>\x20a\x20>\x20div\x20>\x20div\x20>\x20span',LIKERS_CLEARNAME_SPALTEN_ARRAY='div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',COM_ANZAHL_LIKERS_SPAN='[style=\x22line-height:\x2018px;\x22]',COM_COMMENTS_BOX_BODY_DIV='div.x5yr21d.xw2csxc.x1odjw0f.x1n2onr6',COM_REPLY_BUTTON_SPAN='//span[contains(.,\x20\x27View\x20all\x27)\x20and\x20contains(.,\x20\x27replies\x27)]',COM_COMMENTS_USERNAME_ARRAY_SPAN='span._ap3a._aaco._aacw._aacx._aad7._aade',K_DIRECT_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Message\x27]','div.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div','div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1n2onr6.x6ikm8r.x10wlt62.x1iyjqo2.x2lwn1j.xeuugli.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div'],K_OPTIONS_BUTTON=['[aria-label=\x22Options\x22]','section.x1xdureb.x1agbcgv.xieb3on.x1lhsz42.xr1yuqi.x6ikm8r.x10wlt62.x1jfgfrl\x20>\x20div\x20>\x20div\x20>\x20div:nth-child(3)\x20>\x20div'],K_INNER_MSG_BUTTON='button:nth-child(6)',K_CHAT_INPUT_FIELD=['[aria-label=\x22Message\x22]','div.xzsf02u.x1a2a7pz.x1n2onr6.x14wi4xw.x1iyjqo2.x1gh3ibb.xisnujt.xeuugli.x1odjw0f'],K_SEND_MSG_BUTTON=['//div[@role=\x27button\x27\x20and\x20normalize-space(text())=\x27Send\x27]','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.x5c86q.x18br7mf.x1i0vuye.xl0gqc1.xr5sc7.xlal1re.x14jxsvd.xt0b8zv.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x7fd4wk.x1sfzahb.xfs2ol5','div.x1i10hfl.xjqpnuy.xa49m3k.xqeqjp1.x2hbi6w.xdl72j9.x2lah0s.xe8uvvx.xdj266r.x1mh8g0r.x2lwn1j.xeuugli.x1hl2dhg.xggy1nq.x1ja2u2z.x1t137rt.x1q0g3np.x1lku1pv.x1a2a7pz.x6s0dn4.xjyslct.x1ejq31n.xd10rxx.x1sy0etr.x17r0tee.x9f619.x1ypdohk.x1f6kntn.xwhw2v2.xl56j7k.x17ydfre.x2b8uid.xlyipyv.x87ps6o.x14atkfc.xcdnw81.x1i0vuye.xjbqb8w.xm3z3ea.x1x8b98j.x131883w.x16mih1h.x972fbf.xcfux6l.x1qhh985.xm0m39n.xt0psk2.xt7dq6l.xexx8yu.x4uap5.x18d9i69.xkhd6sd.x1n2onr6.x1n5bzlp.x173jzuc.x1yc6y37.x7fd4wk.x1sfzahb.xfs2ol5'],K_ALREADY_CHATTED='[aria-label=\x22Double\x20tap\x20to\x20like\x22]',K_MSG_DISABLED_LABEL='div.x6s0dn4.x1yvgwvq.x1dqoszc.x1ixjvfu.xhk4uv.x13fuv20.xu3j5b3.x1q0q8m5.x26u7qi.x178xt8z.xm81vs4.xso031l.xy80clv.x78zum5.x1gg8mnh\x20>\x20div\x20>\x20span',IG_NAME_SPAN_PART1='a:nth-child(',IG_USERNAME_CLEANAME_PART2_BOX=')\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xxbr6pl.xbbxn1n.xwib8y2.x1y1aw1k.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20div.x9f619.x1ja2u2z.x78zum5.x1n2onr6.x1iyjqo2.xs83m0k.xeuugli.x1qughib.x6s0dn4.x1a02dak.x1q0g3np.xdl72j9',IG_USERNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20span',IG_CLEARNAME_SPAN_PART2=IG_USERNAME_CLEANAME_PART2_BOX+'\x20>\x20div\x20>\x20div\x20>\x20span\x20>\x20span',IG_SEARCH_INPUT='div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1d52u69.xktsk01.x1n2onr6.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1\x20>\x20div\x20>\x20div\x20>\x20input',IG_SEARCH_BUTTON='div.x9f619.xvbhtw8.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib\x20>\x20div.x9f619.xjbqb8w.x78zum5.x168nmei.x13lgxp2.x5pf9jr.xo71vjh.xixxii4.x13vifvy.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x1qjc9v5.x1oa3qoh.x1nhvcw1.x1dr59a3.xeq5yr9.x1n327nk\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div\x20>\x20div.x1iyjqo2.xh8yej3\x20>\x20div:nth-child(2)\x20>\x20span\x20>\x20div';function createWindow(){const _0x2a38d8=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'preload':path['join'](__dirname,'preload.js'),'contextIsolation':!![],'enableRemoteModule':![]}});console['log'](__dirname),_0x2a38d8['loadFile'](path['join'](__dirname,'index.html')),process['env']['NODE_ENV']==='development'&&_0x2a38d8['webContents']['openDevTools']();}app['whenReady']()['then'](createWindow),app['on']('window-all-closed',()=>{app['quit']();}),app['on']('activate',()=>{BrowserWindow['getAllWindows']()['length']===0x0&&createWindow();});function createChildWindow(_0x170a1d){var _0x4007b0=![];BrowserWindow['getAllWindows']()['forEach'](function(_0x3516d4){console['log']('window\x20id:'+_0x3516d4['id']),_0x3516d4['id']>0x1&&(_0x4007b0=!![]);}),console['log']('child\x20opened\x20='+_0x4007b0);if(!_0x4007b0){const _0x137468=new BrowserWindow({'width':0x320,'height':0x258,'title':'Odano','webPreferences':{'nodeIntegration':!![],'enableRemoteModule':!![],'contextBridge':!![],'nativeWindowOpen':!![],'nodeIntegrationInSubFrames':!![],'parent':win,'preload':path['join'](__dirname,'preload.js')}});_0x137468['loadFile'](_0x170a1d['url']);}else console['log']('child\x20window\x20opened\x20already');}ipcMain['on']('restart-app',()=>{process['platform']==='darwin'&&(console['log']('Neustart\x20der\x20Anwendung'),app['relaunch'](),app['exit'](0x0));});let powerSaveBlockerId;app['on']('ready',()=>{powerSaveBlockerId=powerSaveBlocker['start']('prevent-app-suspension'),console['log']('Power\x20Save\x20Blocker\x20gestartet\x20mit\x20ID:\x20'+powerSaveBlockerId);}),app['on']('before-quit',()=>{powerSaveBlocker['isStarted'](powerSaveBlockerId)&&(powerSaveBlocker['stop'](powerSaveBlockerId),console['log']('Power\x20Save\x20Blocker\x20gestoppt.'));if(process['defaultApp']){console['log']('Testmodus\x20–\x20Update\x20wird\x20übersprungen');return;}customUpdateMacApp();});function initializeDatabase(){const _0x39b822=require('fs'),_0x200a05=path['join'](app['getPath']('userData'),'data'),_0x13b133=['campaign.db','crm.db','igaccounts.db'],_0x23a77c=[];try{_0x39b822['mkdirSync'](_0x200a05,{'recursive':!![]});for(const _0x2a7f57 of _0x13b133){const _0x2cc9f2=path['join'](process['resourcesPath'],'app','build','data',_0x2a7f57),_0x1adaf3=path['join'](_0x200a05,_0x2a7f57);!_0x39b822['existsSync'](_0x1adaf3)?(_0x39b822['copyFileSync'](_0x2cc9f2,_0x1adaf3),console['log']('[InitDB]\x20Kopiert\x20'+_0x2a7f57+'\x20nach:\x20'+_0x1adaf3)):console['log']('[InitDB]\x20'+_0x2a7f57+'\x20existiert\x20bereits:\x20'+_0x1adaf3),_0x23a77c['push'](_0x1adaf3);}}catch(_0x5ea33d){console['error']('[InitDB]\x20Fehler\x20beim\x20Kopieren\x20der\x20Datenbanken:',_0x5ea33d);}return _0x23a77c;}function getSqlDataPath(){return console['log']('MAC\x20Pfad:\x20',app['getPath']('userData')),console['log']('Default\x20App:\x20'+process['defaultApp']),process['platform']==='darwin'?(!process['defaultApp']&&initializeDatabase(),process['defaultApp']?path['join'](__dirname,'data'):path['join'](app['getPath']('userData'),'data')):process['defaultApp']?path['join'](__dirname,'data'):path['join'](process['resourcesPath'],'app.asar.unpacked','build','data');}console['log']('Datenpfad\x20SQL:\x20'+getSqlDataPath());const SqlDataDirectory=getSqlDataPath();function doFullElectronUpdate(){const {autoUpdater:_0x3d4fcf,AppUpdate:_0x6c6386}=require('electron-updater');_0x3d4fcf['autoDownload']=![],_0x3d4fcf['autoInstallOnAppQuit']=!![],_0x3d4fcf['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x3d4fcf['on']('update-available',_0xa84c44=>{console['log']('Update\x20verfügbar:',_0xa84c44),_0x3d4fcf['downloadUpdate']();}),_0x3d4fcf['on']('update-downloaded',_0x1735fe=>{console['log']('Update\x20heruntergeladen:',_0x1735fe),_0x3d4fcf['quitAndInstall']();}),_0x3d4fcf['on']('error',_0x1ecda6=>{console['error']('Fehler\x20beim\x20Updaten:',_0x1ecda6);});}function doFullElectronUpdateSilent(){const {autoUpdater:_0x5b67e4,AppUpdate:_0x4969cd}=require('electron-updater');_0x5b67e4['autoDownload']=![],_0x5b67e4['autoInstallOnAppQuit']=!![],_0x5b67e4['checkForUpdates'](),console['log']('Überprüfe\x20auf\x20Updates...'),_0x5b67e4['on']('update-available',_0x29a28c=>{console['log']('Update\x20verfügbar:',_0x29a28c),_0x5b67e4['downloadUpdate']();}),_0x5b67e4['on']('update-downloaded',_0x1db636=>{console['log']('Update\x20heruntergeladen:',_0x1db636),console['log']('Neustarten\x20zum\x20Updaten');}),_0x5b67e4['on']('error',_0x32ed20=>{console['error']('Fehler\x20beim\x20Updaten:',_0x32ed20);});}const MAC_BROWSER_PATH='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome',WIN_BROWSER_PATH='chromium_local/chrome-win/chrome.exe';let browser_login=null;async function getBrowserPageLogin(){let _0x334ca0='',_0x279484=null;if(process['platform']==='darwin')_0x334ca0=MAC_BROWSER_PATH;else{if(process['platform']==='win32')_0x334ca0=WIN_BROWSER_PATH;else{if(process['platform']==='linux'){}}}return browser_login=await puppeteer['launch']({'headless':![],'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x334ca0}),_0x279484=await browser_login['newPage'](),_0x279484['setDefaultNavigationTimeout'](0x1d4c),_0x279484['setDefaultTimeout'](0x1d4c),await _0x279484['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),_0x279484;}let browser=null,pageStack=[null],isStopping=![];async function getBrowserPage(_0xf28276=0x1,_0x4e7e51=0x0){try{let _0x2b813e='',_0x376593=null;const _0xf52f0f=process['env']['NODE_ENV']==='development'?![]:!![];if(process['platform']==='darwin')_0x2b813e=MAC_BROWSER_PATH;else{if(process['platform']==='win32'){_0x2b813e=WIN_BROWSER_PATH;;}else{if(process['platform']==='linux'){}}}if(_0xf28276===0x0&&!pageStack[_0x4e7e51])return browser=await puppeteer['launch']({'headless':_0xf52f0f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x2b813e}),_0x376593=await browser['newPage'](),_0x376593['setDefaultNavigationTimeout'](0x1d4c),_0x376593['setDefaultTimeout'](0x1d4c),await _0x376593['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x4e7e51]=_0x376593,_0x376593;return(browser===null||pageStack[_0x4e7e51]===null||pageStack[_0x4e7e51]['isClosed']())&&(browser=await puppeteer['launch']({'headless':_0xf52f0f,'ignoreHTTPSErrors':!![],'defaultViewport':null,'args':['--lang=en-US'],'executablePath':_0x2b813e})),(pageStack[_0x4e7e51]===null||pageStack[_0x4e7e51]['isClosed']())&&(_0x376593=await browser['newPage'](),_0x376593['setDefaultNavigationTimeout'](0x1d4c),_0x376593['setDefaultTimeout'](0x1d4c),await _0x376593['setExtraHTTPHeaders']({'Accept-Language':'en-US,en'}),pageStack[_0x4e7e51]=_0x376593),pageStack[_0x4e7e51];}catch(_0x2d5348){console['error']('Failed\x20to\x20launch\x20browser:',_0x2d5348);const _0x33d6af=new Error('Browser\x20konnte\x20nicht\x20gestartet\x20werden.\x20Bitte\x20starte\x20die\x20App\x20neu.\x20:\x20'+_0x2d5348);throw _0x33d6af;}}ipcMain['on']('login',async(_0x3d201f,_0x360a4f)=>{const _0x250cdc=await getBrowserPageLogin();await _0x250cdc['goto']('https://www.instagram.com/accounts/login/'),console['log']('Login\x20startet'),await login(_0x250cdc,_0x360a4f),ipcMain['on']('setLoginCookies',async(_0x328458,_0x20bc43)=>{try{await set_login_cookies(_0x250cdc,_0x20bc43);}catch(_0x2fa9f0){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x2fa9f0);}});}),ipcMain['on']('export-relation',async(_0x59c4a6,_0x13c7c2)=>{try{await exportDatabase(_0x13c7c2),_0x59c4a6['reply']('export-relation-response',{'success':!![]});}catch(_0xfe328){console['error'](_0xfe328),_0x59c4a6['reply']('export-relation-response',{'success':![],'message':_0xfe328['message']});}}),ipcMain['handle']('sendMessage',async(_0x292f77,_0x4e79e8,_0x56a0f2,_0x61b9fa,_0x85640a,_0x1504a0,_0x3f9858,_0x43f3a1,_0x4b6c2d,_0x1114c2,_0x426fcc)=>{isStopping=![];let _0x1cc5da=null;return _0x3f9858?_0x1cc5da=await getBrowserPage(_0x85640a,_0x43f3a1):_0x1cc5da=await getBrowserPage(),console['log']('send\x20Message\x20gestartet'),console['log'](_0x4e79e8),send_message(_0x1cc5da,_0x4e79e8,_0x56a0f2,_0x61b9fa,_0x85640a,_0x1504a0,_0x4b6c2d,_0x1114c2,_0x426fcc);}),ipcMain['handle']('stop-action',async(_0x434ca3,_0x2a3b66)=>{isStopping=!![];const _0x54b9e9=await getBrowserPage(0x1,_0x2a3b66);await _0x54b9e9['close']();}),ipcMain['handle']('fetch_followers',async(_0x14c90d,_0x15051b,_0x10a001,_0x5a0d38,_0x3a8235,_0x488425)=>{isStopping=![];const _0x4c4a8a=await getBrowserPage();return fetch_followers_from_account(_0x14c90d,_0x4c4a8a,_0x15051b,_0x10a001,_0x5a0d38,_0x3a8235,_0x488425);}),ipcMain['handle']('get-account-details',async(_0x5bea64,_0x91b1ab,_0x12c759,_0x17e610)=>{isStopping=![];const _0x512fdc=await getBrowserPage();return fetch_account_details(_0x512fdc,_0x91b1ab,_0x12c759,_0x17e610);}),ipcMain['handle']('fetch_likes',async(_0x32e1b1,_0x90e618,_0x3f0005,_0x253217,_0x5661a0,_0x1bd28e)=>{isStopping=![];const _0x34750e=await getBrowserPage();return fetch_likers_from_post(_0x32e1b1,_0x34750e,_0x90e618,_0x3f0005,_0x253217,_0x5661a0,_0x1bd28e);}),ipcMain['handle']('fetch_comments',async(_0x364fe1,_0x3c8304,_0x18b4e4,_0x58e3c0,_0x216bd8,_0x2ccad4)=>{isStopping=![];const _0x3c6a67=await getBrowserPage();return fetch_comments_from_post(_0x364fe1,_0x3c6a67,_0x3c8304,_0x18b4e4,_0x58e3c0,_0x216bd8,_0x2ccad4);});async function updateAppSilent(){const {spawn:_0x5e2096}=require('child_process'),_0x2cfab8=require('path'),_0x3cfad8=require('electron-log');return _0x3cfad8['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x283551,_0x27e0aa)=>{const {updateElectronApp:_0x525ac2,UpdateSourceType:_0x5cb11b}=require('update-electron-app');_0x525ac2({'updateSource':{'type':_0x5cb11b['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x3cfad8}),_0x283551('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x1564bc,_0xbbb45b)=>{doFullElectronUpdateSilent(),_0x1564bc('Update\x20erfolgreich\x20abgeschlossen.');});}async function updateApp(){const {spawn:_0x3d4183}=require('child_process'),_0x5e03c2=require('path'),_0x26399f=require('electron-log');return _0x26399f['transports']['console']['level']='debug',process['platform']==='darwin'?new Promise((_0x42bd79,_0x5b5c57)=>{const {updateElectronApp:_0x3456b6,UpdateSourceType:_0x38e2ef}=require('update-electron-app');_0x3456b6({'updateSource':{'type':_0x38e2ef['ElectronPublicUpdateService'],'repo':'derminer007/Instabot_app_updater'},'updateInterval':'10\x20minutes','logger':_0x26399f}),_0x42bd79('Update\x20erfolgreich\x20abgeschlossen.');}):new Promise((_0x201775,_0x2951cc)=>{doFullElectronUpdate(),_0x201775('Update\x20erfolgreich\x20abgeschlossen.');});}async function customUpdateMacApp(){return new Promise((_0x365997,_0x52fe42)=>{if(process['defaultApp'])console['log']('Update\x20übersprungen\x20im\x20Testmodus.'),_0x365997('Update\x20übersprungen');else{if(process['platform']==='darwin'){const _0x5bdb24=path['join'](__dirname,'mac-updater-intern.sh'),_0x1dcf7f=spawn('/bin/bash',[_0x5bdb24],{'detached':!![],'stdio':'ignore'});_0x1dcf7f['unref'](),setTimeout(()=>{_0x365997('Update-Prozess\x20im\x20detached\x20Modus\x20gestartet.');},0x1388);}else{if(process['platform']==='win32'){}else _0x52fe42(new Error('Update\x20nicht\x20für\x20diese\x20Plattform\x20unterstützt.'));}}});}ipcMain['handle']('get-os-system',async _0x31100f=>{return{'platform':process['platform'],'arch':process['arch']};}),ipcMain['handle']('update-app',async(_0x49086f,_0x5d8cc1)=>{console['log']('Update\x20Silent:\x20'+_0x5d8cc1);if(_0x5d8cc1){if(!(process['platform']==='darwin'))await updateAppSilent(),console['log']('Autoupdate\x20für\x20Mac\x20ausgeschaltet');else return await customUpdateMacApp();}else{if(!(process['platform']==='darwin'))await updateApp();else return await customUpdateMacApp();}});function getRnd(_0x4b9412,_0x215c1a){return Math['random']()*(_0x215c1a-_0x4b9412+0x1)+_0x4b9412;}function delay(_0x42165a,_0x1f93bc){let _0x214d33=getRnd(_0x42165a,_0x1f93bc);return new Promise(function(_0x567eef){setTimeout(_0x567eef,_0x214d33);});}async function scroll(_0x2ee40d,_0xdd95ee,_0x586435=0x2,_0x34e3cf){const _0xd06595=await _0x2ee40d['waitForSelector'](_0xdd95ee);for(let _0x1f4852=0x0;_0x1f4852<_0x586435;_0x1f4852++){console['log']('Scrolling\x20'+_0x1f4852),await _0x2ee40d['evaluate'](_0x47c7e9=>{const _0x48b82b=document['querySelector'](_0x47c7e9);_0x48b82b&&_0x48b82b['scrollBy'](0x0,0x190);},_0xdd95ee),await delay(0x320,0x5dc),_0x34e3cf();}}async function saveCookies(_0x196c55){let _0x1f75f6=await _0x196c55['cookies']();await fs['writeFile']('public/cookies.json',JSON['stringify'](_0x1f75f6,null,0x2));}async function notificationClear(_0x296356){console['log']('Suche\x20nach\x20Notification-Button');try{await delay(0xfa0,0x1388),await _0x296356['waitForSelector']('button._a9--._ap36._a9_1',{'visible':!![]}),await _0x296356['click']('button._a9--._ap36._a9_1'),console['log']('Notification-Button\x20gefunden');}catch(_0x36c542){console['log']('Notification-Feld\x20übersprungen:\x20'+_0x36c542);}}async function getTargetProfiles(_0x280dd2){return new Promise((_0x881c61,_0x7827b8)=>{db['all']('SELECT\x20*\x20FROM\x20'+_0x280dd2,(_0x144c6d,_0x204dc8)=>{_0x144c6d?_0x7827b8(_0x144c6d):_0x881c61(_0x204dc8);});});}async function login_legacy(_0x3ca478,_0x12c076,_0x1d8767){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x3ca478,_0x12c076),await createUserIfNotExists(_0x12c076,_0x1d8767);}catch(_0x172121){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x172121);}try{await _0x3ca478['goto']('https://www.instagram.com/accounts/login/');try{await delay(0x7d0,0x1388),await _0x3ca478['waitForSelector']('button._a9--._ap36._a9_0',{'visible':!![]}),await _0x3ca478['click']('button._a9--._ap36._a9_0');}catch(_0x4c1ccb){console['log']('Cookie\x20Fenster\x20überspringen');}await delay(0xfa0,0x1d4c);try{await _0x3ca478['waitForSelector']('input[name=\x27username\x27]'),console['log']('Benutzername-Feld\x20gefunden'),await _0x3ca478['type']('input[name=\x27username\x27]',_0x12c076,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x3ca478['waitForSelector']('input[name=\x27password\x27]'),console['log']('Passwort-Feld\x20gefunden'),await _0x3ca478['type']('input[name=\x27password\x27]',_0x1d8767,{'delay':getRnd(0x50,0x78)}),await delay(0xfa0,0x1d4c),await _0x3ca478['waitForSelector']('button[type=\x27submit\x27]'),console['log']('Login-Button\x20gefunden'),await _0x3ca478['click']('button[type=\x27submit\x27]');}catch(_0xf531bf){console['log']('Anmeldeformular\x20nicht\x20gefunden');}await notificationClear(_0x3ca478),await delay(0x1388,0x1b58);try{await saveCookiesForUser(_0x3ca478,_0x12c076);}catch(_0x4ed4fd){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x4ed4fd);}}catch(_0x2dcbe0){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x2dcbe0);}}async function login(_0x4bb84b,_0x1d5649){console['log']('Starte\x20Login\x20Prozess');try{await setCookiesForUser(_0x4bb84b,_0x1d5649),await createUserIfNotExists(_0x1d5649);}catch(_0x446093){console['log']('Cookies\x20konnten\x20nicht\x20hinzuefügt\x20werden:'+_0x446093);}try{await _0x4bb84b['goto']('https://www.instagram.com/accounts/login/');}catch(_0x52a3a4){console['log']('Login\x20nicht\x20durgeführt:\x20'+_0x52a3a4);}}async function set_login_cookies(_0x37a827,_0xe5a2bb){try{await saveCookiesForUser(_0x37a827,_0xe5a2bb);}catch(_0x30327e){console['log']('Fehler\x20bei\x20Cookie\x20speichern:\x20'+_0x30327e);}}async function waitForXPath(_0x4680d6,_0x35ba24,_0x390d39={}){return await _0x4680d6['waitForFunction'](_0x2c40fb=>{return document['evaluate'](_0x2c40fb,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue']!==null;},_0x390d39,_0x35ba24),_0x4680d6['evaluateHandle'](_0x1eadc1=>document['evaluate'](_0x1eadc1,document,null,XPathResult['FIRST_ORDERED_NODE_TYPE'],null)['singleNodeValue'],_0x35ba24);}async function waitForSelectorWithFallbacks(_0x182ba9,_0x374733,_0x418039={}){!Array['isArray'](_0x374733)&&(_0x374733=[_0x374733]);for(let _0x5079cf=0x0;_0x5079cf<_0x374733['length'];_0x5079cf++){const _0x141bee=_0x374733[_0x5079cf],_0x1a10be=_0x141bee['startsWith']('//')||_0x141bee['startsWith']('(//');try{console['log']('Versuche\x20'+(_0x1a10be?'XPath':'Selector')+'\x20'+(_0x5079cf+0x1)+'/'+_0x374733['length']+':\x20'+_0x141bee['substring'](0x0,0x32)+'...');const _0xd48be3=_0x5079cf===0x0?_0x418039['timeout']||0x1388:0x7d0;let _0x4311f4;if(_0x1a10be){const _0x739b03=await waitForXPath(_0x182ba9,_0x141bee,{..._0x418039,'timeout':_0xd48be3});if(!_0x739b03)throw new Error('XPath-Element\x20nicht\x20gefunden');_0x4311f4=_0x739b03;}else _0x4311f4=await _0x182ba9['waitForSelector'](_0x141bee,{..._0x418039,'timeout':_0xd48be3});return console['log']((_0x1a10be?'XPath':'Selector')+'\x20'+(_0x5079cf+0x1)+'\x20gefunden!'),_0x4311f4;}catch(_0x1a31f9){console['log']((_0x1a10be?'XPath':'Selector')+'\x20'+(_0x5079cf+0x1)+'\x20nicht\x20gefunden:\x20'+_0x1a31f9['message']);if(_0x5079cf===_0x374733['length']-0x1)throw new Error('Keiner\x20der\x20'+_0x374733['length']+'\x20Selektoren/XPath\x20konnte\x20gefunden\x20werden:\x20'+_0x1a31f9['message']);}}throw new Error('Keine\x20Selektoren/XPath\x20angegeben');}async function waitForXPathAll(_0x4cbb0d,_0x26277f,_0x2d5e06={}){return await _0x4cbb0d['waitForFunction'](_0x1010f8=>{return document['evaluate'](_0x1010f8,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null)['snapshotLength']>0x0;},_0x2d5e06,_0x26277f),_0x4cbb0d['evaluateHandle'](_0x7f3614=>{const _0x5e081e=document['evaluate'](_0x7f3614,document,null,XPathResult['ORDERED_NODE_SNAPSHOT_TYPE'],null),_0x53ec8d=[];for(let _0x43a768=0x0;_0x43a768<_0x5e081e['snapshotLength'];_0x43a768++){_0x53ec8d['push'](_0x5e081e['snapshotItem'](_0x43a768));}return _0x53ec8d;},_0x26277f)['then'](_0x460a4c=>_0x460a4c['getProperties']());}async function checkLoginStatus(_0x3c9947){const _0x9529c3=['[type=\x22password\x22]','//a[normalize-space(text())=\x27Log\x20In\x27]','//div[@role=\x27button\x27\x20and\x20normalize-space(.)=\x27Log\x20in\x27]','//h3[normalize-space(text())=\x27Something\x20went\x20wrong\x27]'];let _0x4ffc3f=null;try{_0x4ffc3f=await waitForSelectorWithFallbacks(_0x3c9947,_0x9529c3,{'timeout':0x7d0});}catch(_0x3361a3){return console['log']('Eingeloggt,\x20kein\x20Login\x20notwendig:\x20'+_0x3361a3),!![];}if(_0x4ffc3f){console['log']('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return![];}else return console['log']('Eingeloggt,\x20führe\x20keine\x20Login\x20durch'),!![];}async function checkPageExists(_0x26f299){const _0x174227=['//span[contains(normalize-space(.),\x22Sorry,\x20this\x20page\x20isn\x27t\x20available\x22)]'];let _0x1d6322=null;try{_0x1d6322=await waitForSelectorWithFallbacks(_0x26f299,_0x174227,{'timeout':0x7d0});}catch(_0x163275){return console['log']('Seite\x20existiert:\x20'+_0x163275),!![];}if(_0x1d6322){console['log']('Angegbene\x20Seite\x20existiert\x20nicht');throw new Error('Angegbene\x20Seite\x20existiert\x20nicht');return![];}else return console['log']('Seite\x20existiert'),!![];}async function send_message(_0x352a96,_0x18c88a,_0x1d6a89,_0x1b545c,_0x54f7d8,_0x2168ea,_0xb597b9,_0x3d8834,_0x3fff4b){return new Promise(async(_0x3e32bc,_0x1e0dce)=>{_0x2168ea=_0x2168ea['split'](';'),console['log'](_0x2168ea[0x0]),console['log']('Anfang'),console['log']('Counter:\x20'+_0x54f7d8);try{await setCookiesForUser(_0x352a96,_0x2168ea[0x0]);}catch(_0x5d7a2a){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x5d7a2a),_0x3e32bc({'status':0x190,'message':'Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5d7a2a});return;}await delay(0x6a4,0x7d0);try{await _0x352a96['goto']('https://www.instagram.com/'+_0x18c88a+'/'),await delay(0x1b58,0x1d4c),await notificationClear(_0x352a96);}catch(_0xf85f8a){_0x3e32bc({'status':0x1f5,'message':'Fehler\x20beim\x20Aufruf\x20der\x20Seite:\x20'+_0xf85f8a});return;}try{await checkLoginStatus(_0x352a96);}catch(_0x34636f){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x34636f),_0x1e0dce('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');return;}console['log']('UserSkip:\x20'+_0xb597b9);if(_0xb597b9==0x1)try{const _0x4fbc77=await _0x352a96['$eval']('._ap3a._aaco._aacw._aad6._aade',_0x4b4d5f=>_0x4b4d5f['textContent']['trim']());console['log'](_0x4fbc77);if(_0x4fbc77==='Following'||_0x4fbc77==='Folge\x20ich')return _0x3e32bc({'status':0x199,'message':'Überspringe\x20User:\x20Bereits\x20gefolgt\x20→\x20überspringen'});}catch(_0x5ddb5b){}try{const _0x1ab158=await waitForSelectorWithFallbacks(_0x352a96,K_DIRECT_MSG_BUTTON);await _0x1ab158['click']();}catch(_0x3ec316){console['log']('1.\x20MsgButton\x20nicht\x20gefunden.\x20Teste\x202.\x20Button'+_0x3ec316);try{await delay(0x6a4,0x7d0);try{const _0x1424db=await waitForSelectorWithFallbacks(_0x352a96,K_OPTIONS_BUTTON);await _0x1424db['click']();}catch(_0x1e3bd6){console['log']('Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1e3bd6),_0x3e32bc({'status':0x1f6,'message':'Options-Button\x20nicht\x20gefunden.\x20Nutzer\x20überspringen:\x20'+_0x1e3bd6});return;}await delay(0x3e8,0x44c);const _0x60161b=await waitForXPath(_0x352a96,'//button[contains(text(),\x27Send\x20message\x27)]');await _0x60161b['click']();}catch(_0x57aac3){console['log']('2.\x20MsgButton\x20nicht\x20gefunden.\x20Nutzer\x20überspringen'+_0x57aac3),_0x3e32bc({'status':0x194,'message':'UserSkip:\x20Nicht\x20anschreibbaren\x20Nutzer\x20überspringen'});return;}}try{await delay(0x320,0x3e8),await notificationClear(_0x352a96);}catch(_0x213050){console['log']('NotificationClear\x20fehlerhaft:\x20'+_0x213050);}try{const _0x384cd8=await waitForSelectorWithFallbacks(_0x352a96,K_CHAT_INPUT_FIELD);if(_0x3d8834){const _0x263d18=await _0x352a96['$'](K_ALREADY_CHATTED);if(_0x263d18)return console['log']('Already\x20chatted\x20with\x20this\x20user,\x20skipping:',_0x18c88a),_0x3e32bc({'status':0x19a,'message':'Überspringe\x20User:\x20Bereits\x20gechattet\x20→\x20überspringen'});}const _0x4ba2a7=await _0x352a96['evaluate'](()=>{return document['querySelector']('h2\x20>\x20span\x20>\x20span')['textContent'];});console['log']('Extrahierter\x20Clearname:\x20'+_0x4ba2a7),_0x1b545c=_0x1b545c['replace']('{USERNAME}',_0x18c88a);let _0x154e17;if(_0x1b545c['includes']('{NAME}')||_0x1b545c['includes']('{name}'))try{const _0x112e4d=await extractFirstName(_0x4ba2a7,_0x3fff4b);console['log']('Response\x20Clearname\x20valid:\x20'+_0x112e4d['valid']),_0x112e4d['valid']?(_0x1b545c=_0x1b545c['replaceAll'](/{NAME}|{name}/g,_0x112e4d['name']),console['log']('Response\x20Clearname\x20name:\x20'+_0x112e4d['name']),_0x154e17=_0x112e4d['name']):(_0x1b545c=_0x1b545c['replaceAll'](/ ?({NAME}|{name})/g,''),_0x154e17='UNKNOWN_NAME');}catch(_0x5adb9a){console['log'](_0x5adb9a['message']),_0x154e17=_0x5adb9a['message'];let _0x533ea3=_0x4ba2a7['replace'](/[^\p{L}\s]/gu,''),_0x22f59e=_0x533ea3['split']('\x20')[0x0];_0x22f59e['length']>0x2&&!_0x22f59e['includes']('Instagram')?_0x1b545c=_0x1b545c['replaceAll'](/{NAME}|{name}/g,_0x22f59e):_0x1b545c=_0x1b545c['replaceAll'](/ ?({NAME}|{name})/g,'');}console['log']('Nachricht\x20vor\x20dem\x20Senden:\x20'+_0x1b545c);const _0x5b69c7=_0x1b545c['split']('\x0a');await _0x384cd8['type'](_0x5b69c7[0x0],{'delay':getRnd(0x50,0x78)});for(let _0x1b23e4=0x1;_0x1b23e4<_0x5b69c7['length'];_0x1b23e4++){await _0x352a96['keyboard']['down']('Shift'),await _0x352a96['keyboard']['press']('Enter'),await _0x352a96['keyboard']['up']('Shift'),await delay(0x64,0xc8),_0x5b69c7[_0x1b23e4]['length']>0x0&&await _0x384cd8['type'](_0x5b69c7[_0x1b23e4],{'delay':getRnd(0x50,0x78)});}console['log']('Nachricht\x20mit\x20Zeilenumbrüchen\x20gesendet'),await delay(0x320,0x3e8);try{const _0x527abf=await waitForSelectorWithFallbacks(_0x352a96,K_SEND_MSG_BUTTON);await _0x527abf['click']();}catch(_0x58f7a5){console['error']('Nicht\x20anschreibbaren\x20Nutzer\x20überspringen:\x20'+_0x58f7a5),_0x3e32bc({'status':0x195,'message':'Send\x20nicht\x20gefunden.\x20Nicht\x20anschreibbaren\x20Nutzer:\x20'+_0x18c88a+'\x20überspringen.','error':_0x58f7a5['message']});}await delay(0x320,0x3e8),_0x3e32bc({'status':0xc8,'message':'Nachricht\x20erfolgreich\x20gesendet!','clearname':_0x4ba2a7,'extracted_clearname':_0x154e17});}catch(_0x308a7c){let _0x1dbb68=_0x308a7c;console['log']('Fehler\x20beim\x20Senden\x20der\x20Nachricht:\x20'+_0x1dbb68),_0x3e32bc({'status':0x1f4,'message':'Error\x20500:\x20'+_0x1dbb68});}});}function handle_fail(_0x22127a){if(isStopping)return new Promise(_0x237571=>{_0x237571('Scraper\x20gestoppt.');});else{let _0x243a2a='';switch(_0x22127a){case 0x0:_0x243a2a='Fehler\x20beim\x20Follower\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x1:_0x243a2a='Fehler\x20beim\x20Liker\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;case 0x2:_0x243a2a='Fehler\x20beim\x20Comments\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;default:_0x243a2a='Fehler\x20beim\x20Scraper.\x20Bitte\x20lade\x20die\x20neuste\x20Version\x20herunter.';break;}return new Promise((_0x25408c,_0x66ce3e)=>{_0x66ce3e(_0x243a2a);});}}async function fetch_account_details(_0x45fbe3,_0xd782da,_0xc0113b,_0x882c45){try{await setCookiesForUser(_0x45fbe3,_0xc0113b['username']);}catch(_0x5b3d34){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5b3d34);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x5b3d34);return handle_fail(0x0);}_0x45fbe3['setDefaultNavigationTimeout'](0x7530),await _0x45fbe3['goto']('https://www.instagram.com/'+_0xd782da+'/',{'waitUntil':'networkidle2','timeout':0x7530}),await notificationClear(_0x45fbe3);const _0x2d5955=await _0x45fbe3['evaluate'](()=>{const _0x5c1a5d=document['querySelector']('meta[property=\x22og:image\x22]');return _0x5c1a5d?_0x5c1a5d['getAttribute']('content'):null;});await _0x45fbe3['waitForSelector']('meta[name=\x22description\x22]',{'timeout':0x3a98});const _0x297d16=await _0x45fbe3['evaluate'](()=>{const _0xef8a50=document['querySelector']('meta[name=\x22description\x22]');if(!_0xef8a50)return console['log']('Meta-Tag\x20nicht\x20gefunden'),null;let _0x384980=_0xef8a50['getAttribute']('content');if(!_0x384980)return console['log']('Meta-Content\x20ist\x20leer'),null;console['log']('Meta\x20content:',_0x384980);const _0x4c552c=/\s*[–-]\s*/,_0x62ac9f=_0x384980['split'](_0x4c552c);if(_0x62ac9f['length']<0x2)return console['log']('Kein\x20gültiger\x20Separator\x20gefunden'),null;const _0xa3b2bb=_0x62ac9f[0x0],_0x218aa1=_0x62ac9f[0x1],_0x352416=_0xa3b2bb['split'](',\x20');if(_0x352416['length']<0x3)return console['log']('Nicht\x20genügend\x20Zählwerte\x20gefunden'),null;const _0x4d9166=_0x352416[0x0]['split']('\x20')[0x0],_0x4fd463=_0x352416[0x1]['split']('\x20')[0x0],_0x49ef50=_0x352416[0x2]['split']('\x20')[0x0];let _0x872f26='',_0x401935='';const _0x45e100='\x20on\x20Instagram:\x20',_0x5a32b8=_0x218aa1['split'](_0x45e100);return _0x872f26=_0x5a32b8[0x0]['trim'](),_0x872f26=_0x872f26['replace'](/\s*\(?@[\w_]+\)?/g,'')['trim'](),_0x5a32b8['length']>0x1&&(_0x401935=_0x5a32b8[0x1]['trim'](),_0x401935['startsWith']('\x22')&&_0x401935['endsWith']('\x22')&&(_0x401935=_0x401935['substring'](0x1,_0x401935['length']-0x1)['trim']()),_0x401935=_0x401935['replace'](/&quot;/g,'')['trim']()),{'followers':_0x4d9166,'following':_0x4fd463,'posts':_0x49ef50,'nameText':_0x872f26,'bio':_0x401935};});console['log']('Extracted\x20profile\x20data:',_0x297d16);const _0x5071ff=_0x297d16['nameText'],_0x3204e8=_0x2d5955,_0x49ce5f=_0x297d16['bio'],_0x39485e=_0x297d16['followers'],_0x5ea8d2=_0x297d16['following'],_0x5d187a=_0x297d16['posts'],_0x3b7eca=![],_0x31cfe3=![],_0x3665b2=![],_0x1cd14f='\x0a\x20\x20INSERT\x20INTO\x20'+_0x882c45+'\x20(\x0a\x20\x20\x20\x20username,\x20clearname,\x20ProfilePic,\x20Bio,\x20\x0a\x20\x20\x20\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20\x0a\x20\x20\x20\x20Isverified,\x20Isprivat,\x20IsBusiness\x0a\x20\x20)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20ON\x20CONFLICT(username)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20clearname\x20=\x20excluded.clearname,\x0a\x20\x20\x20\x20ProfilePic\x20=\x20excluded.ProfilePic,\x0a\x20\x20\x20\x20Bio\x20=\x20excluded.Bio,\x0a\x20\x20\x20\x20Follower_Count\x20=\x20excluded.Follower_Count,\x0a\x20\x20\x20\x20Following_Count\x20=\x20excluded.Following_Count,\x0a\x20\x20\x20\x20Post_Count\x20=\x20excluded.Post_Count,\x0a\x20\x20\x20\x20Isverified\x20=\x20excluded.Isverified,\x0a\x20\x20\x20\x20Isprivat\x20=\x20excluded.Isprivat,\x0a\x20\x20\x20\x20IsBusiness\x20=\x20excluded.IsBusiness;\x0a';db['run'](_0x1cd14f,[_0xd782da,_0x5071ff,_0x3204e8,_0x49ce5f,_0x39485e,_0x5ea8d2,_0x5d187a,_0x3b7eca,_0x31cfe3,_0x3665b2],function(_0x159ea2){_0x159ea2?console['error']('Fehler\x20beim\x20Upsert\x20in\x20die\x20Datenbank:\x20'+_0x159ea2['message']):console['log']('Eintrag\x20erfolgreich\x20upserted.\x20Letzte\x20ID:\x20'+this['lastID']);});}async function fetch_followers_from_account(_0x3f7bc4,_0x381a50,_0x400c8f,_0x3dc4bf,_0x24ef40,_0x2928c9,_0x1ec05c){let _0x175609=0x4,_0x2146d3=0x0,_0x53b73e=0x0;try{await setCookiesForUser(_0x381a50,_0x2928c9['username']);}catch(_0x28df35){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x28df35);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x28df35);return handle_fail(0x0);}let _0x4d6a71=0x0;try{await _0x381a50['goto']('https://www.instagram.com/'+_0x400c8f+'/'),await notificationClear(_0x381a50);try{await checkLoginStatus(_0x381a50);}catch(_0x5e01df){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x5e01df);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x381a50);}catch(_0x3e5f3e){console['log']('Username\x20nicht\x20gefunden:\x20'+_0x3e5f3e);throw new Error('Username\x20nicht\x20gefunden.\x20Existiert\x20der\x20Account?');}try{if(_0x3dc4bf<=0x0){const _0x1923d1=await _0x381a50['waitForSelector'](ANZAHL_FOLLOWER_BUTTON);await delay(0x12c,0x320);const _0x5ba376=await _0x381a50['evaluate'](_0xf4c2a2=>_0xf4c2a2['innerHTML'],_0x1923d1);_0x4d6a71=Math['ceil'](_0x5ba376/0x4);}else _0x4d6a71=Math['ceil'](_0x3dc4bf/0x4);_0x175609+=_0x4d6a71,_0x53b73e=Math['round'](++_0x2146d3/_0x175609*0x64),_0x3f7bc4['sender']['send']('fetch-progress',_0x53b73e,!![]);let _0x3049a6=await _0x381a50['waitForSelector']('a[href=\x22/'+_0x400c8f+'/followers/\x22]');await delay(0xbb8,0x1388),await _0x3049a6['click'](),console['log']('Follower\x20Liste\x20von\x20'+_0x400c8f+'\x20gesichtet'),_0x53b73e=Math['round'](++_0x2146d3/_0x175609*0x64),_0x3f7bc4['sender']['send']('fetch-progress',_0x53b73e,!![]);}catch(_0x5c438a){console['log']('Follower\x20Liste\x20von\x20'+_0x400c8f+'\x20nicht\x20gefunden:'+_0x5c438a);throw new Error('Follower\x20Liste\x20von\x20'+_0x400c8f+'\x20nicht\x20gefunden:'+_0x5c438a);return handle_fail(0x0);}}catch(_0x4216a9){console['log']('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x4216a9);throw new Error('User\x20besuchen\x20fehlgeschlagen:\x20'+_0x4216a9);return handle_fail(0x0);}try{await delay(0xbb8,0x1388),console['log']('Auto-scrolls:\x20'+_0x4d6a71),await scroll(_0x381a50,FOLLOWER_FENSTER,_0x4d6a71,_0xb3b18c=>{_0x53b73e=Math['round'](++_0x2146d3/_0x175609*0x64),_0x3f7bc4['sender']['send']('fetch-progress',_0x53b73e,!![]);}),await _0x381a50['waitForSelector'](FOLLOWER_USERNAME_SPALTEN_ARRAY);const _0x3fd90c=await _0x381a50['$$'](FOLLOWER_USERNAME_SPALTEN_ARRAY),_0x119c9b=await _0x381a50['$$'](FOLLOWER_CLEARNAME_SPALTEN_ARRAY);_0x53b73e=Math['round'](++_0x2146d3/_0x175609*0x64),_0x3f7bc4['sender']['send']('fetch-progress',_0x53b73e,!![]);_0x3dc4bf<=0x0&&(_0x3dc4bf=_0x3fd90c['length']);let _0x531099=[];for(let _0x5c0c4e=0x0;_0x5c0c4e<_0x3fd90c['length']&&_0x5c0c4e<_0x3dc4bf;_0x5c0c4e++){_0x531099['push'](await _0x3fd90c[_0x5c0c4e]['evaluate'](_0x13cc1c=>_0x13cc1c['textContent']));const _0x5295ac='INSERT\x20INTO\x20'+_0x24ef40+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x5295ac,[await _0x3fd90c[_0x5c0c4e]['evaluate'](_0x4b6e66=>_0x4b6e66['textContent']),await _0x119c9b[_0x5c0c4e]['evaluate'](_0x1afc8c=>_0x1afc8c['textContent'])],function(_0x8bbfc0){_0x8bbfc0?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x24ef40+'\x27:',_0x8bbfc0['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}return _0x53b73e=Math['round'](++_0x2146d3/_0x175609*0x64),_0x3f7bc4['sender']['send']('fetch-progress',_0x53b73e,!![]),_0x1ec05c&&(_0x3f7bc4['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x3f7bc4,_0x381a50,_0x2928c9,_0x24ef40,_0x531099)),new Promise(_0x3eb6aa=>{_0x3eb6aa('Scraping\x20finished!');});}catch(_0x16c157){if(_0x1ec05c)throw new Error(_0x16c157);else throw new Error('Fehler\x20bei\x20der\x20Followerliste\x20von\x20'+_0x400c8f+'\x20nicht\x20gefunden:\x20'+_0x16c157);return handle_fail(0x0);}}async function fetch_details_from_list(_0x75f766,_0x3a4bd4,_0x2290c8,_0x5b94f0,_0x1d5791){let _0x3b7981=0x0,_0x3ad077=0x0;for(let _0x478adb=0x0;_0x478adb<_0x1d5791['length'];_0x478adb++){console['log']('Processing\x20profile:',_0x1d5791[_0x478adb]);try{await fetch_account_details(_0x3a4bd4,_0x1d5791[_0x478adb],_0x2290c8,_0x5b94f0);}catch(_0x386daa){console['error']('Detailed\x20Scraping\x20von:\x20',_0x1d5791[_0x478adb],_0x386daa);throw new Error('Detailed\x20Scraping\x20von:\x20'+_0x1d5791[_0x478adb]+'\x20'+_0x386daa);}_0x3ad077=Math['round'](++_0x3b7981/_0x1d5791['length']*0x64),_0x75f766['sender']['send']('fetch-progress',_0x3ad077,!![],!![]);}}async function fetch_likers_from_post(_0x49fac6,_0x4baa2f,_0x54be88,_0x2cd119,_0x4595a0,_0x36b4e7,_0x4a3496){let _0x42d8bb=0x4,_0x391435=0x0,_0x28ea7c=0x0;try{await setCookiesForUser(_0x4baa2f,_0x36b4e7['username']);}catch(_0x286008){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x286008);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x286008);return handle_fail(0x1);return;}_0x28ea7c=Math['round'](++_0x391435/_0x42d8bb*0x64),_0x49fac6['sender']['send']('fetch-progress',_0x28ea7c,!![]);try{let _0x1e91c9=_0x54be88['substring'](0x0,_0x54be88['lastIndexOf']('/'));_0x1e91c9['includes']('/reel/')&&(_0x1e91c9=_0x1e91c9['replace']('/reel/','/p/'));let _0xcec243=_0x1e91c9+'/liked_by';console['log'](_0xcec243),await _0x4baa2f['goto'](_0xcec243),await delay(0x7d0,0xfa0),await notificationClear(_0x4baa2f),await delay(0xc8,0x1f4);try{await checkLoginStatus(_0x4baa2f);}catch(_0x398bf1){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x398bf1);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x4baa2f);}catch(_0x19bf99){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0x19bf99);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}_0x28ea7c=Math['round'](++_0x391435/_0x42d8bb*0x64),_0x49fac6['sender']['send']('fetch-progress',_0x28ea7c,!![]),await _0x4baa2f['waitForSelector'](LIKERS_USERNAME_SPALTEN_ARRAY),await delay(0x1f4,0x320);const _0x130d7e=await _0x4baa2f['$$'](LIKERS_USERNAME_SPALTEN_ARRAY),_0x4e0ff9=await _0x4baa2f['$$'](LIKERS_CLEARNAME_SPALTEN_ARRAY);await delay(0x1f4,0x320),console['log'](_0x130d7e['length']);let _0x50aae9=path['join'](__dirname,'/likers.csv');_0x28ea7c=Math['round'](++_0x391435/_0x42d8bb*0x64),_0x49fac6['sender']['send']('fetch-progress',_0x28ea7c,!![]);_0x2cd119<=0x0&&(_0x2cd119=_0x130d7e['length']);try{let _0x19b1d3=[];for(let _0x316160=0x0;_0x316160<_0x130d7e['length']&&_0x316160<_0x2cd119;_0x316160++){_0x19b1d3['push'](await _0x130d7e[_0x316160]['evaluate'](_0x1ed7f5=>_0x1ed7f5['textContent']));try{const _0x563438='INSERT\x20INTO\x20'+_0x4595a0+'\x20(username,\x20clearname)\x20VALUES\x20(?,\x20?)';db['run'](_0x563438,[await _0x130d7e[_0x316160]['evaluate'](_0x32f2d3=>_0x32f2d3['textContent']),await _0x4e0ff9[_0x316160]['evaluate'](_0x480e9e=>_0x480e9e['textContent'])],function(_0x5ba6a8){_0x5ba6a8?console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27'+_0x4595a0+'\x27:',_0x5ba6a8['message']):console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']);});}catch(_0x5cc607){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x316160+'\x20:\x20'+_0x5cc607);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x316160+'\x20:\x20'+_0x5cc607);return handle_fail(0x1);}}return _0x28ea7c=Math['round'](++_0x391435/_0x42d8bb*0x64),_0x49fac6['sender']['send']('fetch-progress',_0x28ea7c,!![]),_0x4a3496&&(_0x49fac6['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x49fac6,_0x4baa2f,_0x36b4e7,_0x4595a0,_0x19b1d3)),new Promise(_0xe2796d=>{_0xe2796d('Scraping\x20finished!');});}catch(_0xa89505){console['log']('Nicht\x20in\x20Likers\x20Datei\x20geschrieben');throw new Error(_0xa89505);return handle_fail(0x1);}}catch(_0x4b3007){console['log']('Like-Seite\x20nicht\x20geöffnet'+_0x4b3007);throw new Error('Like-Seite\x20nicht\x20geöffnet:\x20'+_0x4b3007);return handle_fail(0x1);}}async function fetch_comments_from_post(_0x347e43,_0x3a187a,_0x3f6fa7,_0x5af3dd,_0x116ec0,_0x576a04,_0x5bd8fe){let _0x15c3c1=0x3,_0x11ceda=0x0,_0x41491e=0x0;try{await setCookiesForUser(_0x3a187a,_0x576a04['username']);}catch(_0x599b61){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x599b61);throw new Error('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:'+_0x599b61);return handle_fail(0x2);}try{console['log'](_0x3f6fa7),await _0x3a187a['goto'](_0x3f6fa7),await delay(0x7d0,0xfa0),await notificationClear(_0x3a187a),await delay(0xc8,0x1f4);const _0x49606f=COM_COMMENTS_BOX_BODY_DIV;try{await checkLoginStatus(_0x3a187a);}catch(_0x1001cf){console['log']('Login-Status\x20nicht\x20ok:\x20'+_0x1001cf);throw new Error('Nicht\x20eingeloggt,\x20bitte\x20neu\x20bei\x20Instagram\x20anmelden');}try{await checkPageExists(_0x3a187a);}catch(_0xf525f9){console['log']('Beitrags-Link\x20nicht\x20gefunden:\x20'+_0xf525f9);throw new Error('Beitrags-Link\x20nicht\x20gefunden.\x20Existiert\x20der\x20Beitrag?');}let _0x3af5d1;const _0xbf8087=await _0x3a187a['waitForSelector'](COM_ANZAHL_LIKERS_SPAN);await delay(0x12c,0x320);let _0x16a563=await _0x3a187a['evaluate'](_0x83560b=>_0x83560b['innerHTML'],_0xbf8087),_0x59e0f8=String(_0x16a563)['replace'](/[^0-9]/g,''),_0x126f2b=Number(_0x59e0f8)/0x14;_0x5af3dd<=0x0?_0x3af5d1=Math['ceil'](_0x126f2b/0x3):_0x3af5d1=Math['ceil'](_0x5af3dd/0x3);_0x15c3c1+=_0x3af5d1,_0x41491e=Math['round'](++_0x11ceda/_0x15c3c1*0x64),_0x347e43['sender']['send']('fetch-progress',_0x41491e,!![]),console['log']('Auto-scrolls:\x20'+_0x3af5d1),await scroll(_0x3a187a,_0x49606f,_0x3af5d1,_0x24543c=>{_0x41491e=Math['round'](++_0x11ceda/_0x15c3c1*0x64),_0x347e43['sender']['send']('fetch-progress',_0x41491e,!![]);});try{const _0x28d42b=COM_REPLY_BUTTON_SPAN,_0x55567a=await waitForXPathAll(_0x3a187a,_0x28d42b);console['log']('Reply-Buttons\x20gefunden:\x20ANZAHL:\x20'+_0x55567a['size']),await delay(0x1f4,0x320);let _0x515956=_0x55567a['size'],_0x1af640=[];for(const [_0xc885a1,_0x2f06a1]of _0x55567a){_0x1af640['push'](_0x2f06a1);}console['log']('Alle\x20Reply-Buttons:',_0x1af640['length']);try{for(let _0x10dfe0=0x0;_0x10dfe0<_0x515956;_0x10dfe0++){await _0x1af640[_0x10dfe0]['click'](),await delay(0x320,0x5dc);}}catch(_0x3b1c90){console['log']('Nicht\x20auf\x20Replies\x20geklickt\x20'+_0x3b1c90);throw new Error('Nicht\x20auf\x20Replies\x20geklickt:\x20'+_0x3b1c90);return handle_fail(0x2);}}catch(_0x51de8a){console['log']('Kein\x20Reply-Button\x20gefunden.\x20Überspringe\x20Schritt');}const _0x5cba04=COM_COMMENTS_USERNAME_ARRAY_SPAN;await _0x3a187a['waitForSelector'](_0x5cba04),await delay(0x1f4,0x320),_0x41491e=Math['round'](++_0x11ceda/_0x15c3c1*0x64),_0x347e43['sender']['send']('fetch-progress',_0x41491e,!![]);const _0x4da116=await _0x3a187a['$$'](_0x5cba04);let _0x4b8d1e=path['join'](__dirname,'/comments.csv');_0x5af3dd<=0x0&&(_0x5af3dd=_0x4da116['length']);console['log']('fetch_limit:\x20'+_0x5af3dd),console['log']('comments_len:\x20'+_0x4da116['length']),_0x5af3dd++;try{let _0x385118=[];for(let _0x1a81b2=0x1;_0x1a81b2<_0x4da116['length']&&_0x1a81b2<_0x5af3dd;_0x1a81b2++){try{_0x385118['push'](await _0x4da116[_0x1a81b2]['evaluate'](_0x4ad583=>_0x4ad583['textContent']));const _0x553266=await db['prepare']('INSERT\x20INTO\x20'+_0x116ec0+'\x20(username)\x20VALUES\x20(?)');await _0x553266['run'](await _0x4da116[_0x1a81b2]['evaluate'](_0x251cd6=>_0x251cd6['textContent']),function(_0x5e9e45){_0x5e9e45&&console['log']('error\x20in\x20add-user:'+_0x5e9e45);}),await _0x553266['finalize']();}catch(_0x5ba548){console['log']('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1a81b2+'\x20:\x20'+_0x5ba548);throw new Error('Fehler\x20innerhalb\x20des\x20Fetchen\x20bei\x20i='+_0x1a81b2+'\x20:\x20'+_0x5ba548);return handle_fail(0x2);}}return await delay(0x4b0,0x7d0),_0x41491e=Math['round'](++_0x11ceda/_0x15c3c1*0x64),_0x347e43['sender']['send']('fetch-progress',_0x41491e,!![]),_0x347e43['sender']['send']('fetch-progress',0x64,!![]),_0x5bd8fe&&(_0x347e43['sender']['send']('fetch-progress',0x0,!![],!![]),await fetch_details_from_list(_0x347e43,_0x3a187a,_0x576a04,_0x116ec0,_0x385118)),_0x347e43['sender']['send']('fetch-progress',0x64,![]),new Promise(_0x3699ff=>{_0x3699ff('Scraping\x20finished!');});}catch(_0x53d7c8){console['log']('Nicht\x20in\x20Comments\x20Datei\x20geschrieben');throw new Error(_0x53d7c8);return handle_fail(0x2);}}catch(_0x3cb076){console['log']('Comments-Seite\x20nicht\x20geöffnet'+_0x3cb076);throw new Error('Comments-Seite\x20nicht\x20geöffnet:\x20'+_0x3cb076);return handle_fail(0x2);}}async function set_clearname_from_username(_0x3311c9,_0x57fd41,_0x7470aa=null){try{let _0x2083e9,_0x1a6d90;const _0x32d66a='SELECT\x20username\x20FROM\x20'+_0x57fd41+'\x20WHERE\x20clearname\x20IS\x20NULL';db['all'](_0x32d66a,[],(_0x4fcf45,_0x12b296)=>{_0x4fcf45&&console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten:',_0x4fcf45['message']),_0x12b296['length']===0x0&&(_0x1a6d90=_0x12b296['length']),_0x2083e9=_0x12b296['map'](_0x523ef3=>_0x523ef3['username']);}),await delay(0x4b0,0x7d0),console['log']('USERNAME:\x20'+_0x1a6d90);if(_0x1a6d90===0x0){console['log']('Leave');return;}const _0xff9130=await _0x3311c9['waitForSelector'](IG_SEARCH_BUTTON);await _0xff9130['click'](),await delay(0x4b0,0x7d0);for(let _0x429843 of _0x2083e9){const _0x57d71e=await _0x3311c9['waitForSelector'](IG_SEARCH_INPUT);await _0x57d71e['click']({'clickCount':0x3}),await delay(0x320,0x3e8),await _0x3311c9['type'](IG_SEARCH_INPUT,_0x429843,{'delay':getRnd(0x50,0x78)}),await delay(0x4b0,0x7d0);let _0x36e533=0x1;while(_0x36e533!=0x14){console['log']('Schleife');try{let _0x3d6eba=IG_NAME_SPAN_PART1+_0x36e533+IG_USERNAME_SPAN_PART2;const _0x579dc6=await _0x3311c9['waitForSelector'](_0x3d6eba),_0xa33a6e=await _0x3311c9['evaluate'](_0x57f23f=>_0x57f23f['innerHTML'],_0x579dc6);await delay(0xc8,0x1f4);if(_0xa33a6e==_0x429843){let _0x493b19=IG_NAME_SPAN_PART1+_0x36e533+IG_CLEARNAME_SPAN_PART2;console['log']('Username\x20gefunden');const _0x52b33a=await _0x3311c9['waitForSelector'](_0x493b19);let _0x3fe41f=await _0x3311c9['evaluate'](_0x4a9c34=>_0x4a9c34['innerHTML'],_0x52b33a);const _0x2ec2d1=/^(.*?)(?:\s*•\s*)(\d+[,.]?\d*\s*(Tsd\.|Mio\.|Mrd\.)?\s*Follower)$/,_0x2cb771=_0x3fe41f['match'](_0x2ec2d1);_0x2cb771?_0x3fe41f=_0x2cb771[0x1]['trim']():_0x3fe41f=_0x3fe41f['trim']();_0x3fe41f['includes']('•')&&(_0x3fe41f=_0x3fe41f['substring'](0x0,_0x3fe41f['indexOf']('•')-0x1));const _0x528e6b='UPDATE\x20'+_0x57fd41+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0x528e6b,[_0x3fe41f,_0xa33a6e],function(_0x16e058){_0x16e058&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x16e058['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');});break;}_0x36e533++;}catch(_0x368721){const _0xbfcc50='UPDATE\x20'+_0x57fd41+'\x20SET\x20clearname\x20=\x20?\x20WHERE\x20username\x20=\x20?';db['run'](_0xbfcc50,['',_0x429843],function(_0x2fe32a){_0x2fe32a&&console['error']('Fehler\x20beim\x20Aktualisieren\x20von\x20clearname:',_0x2fe32a['message']),this['changes']===0x0&&console['log']('Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20konnte.'),console['log']('Eintrag\x20erfolgreich\x20aktualisiert.');}),console['log']('User\x20nicht\x20gefunden:'+_0x368721);break;}}_0x7470aa&&_0x7470aa();}await _0xff9130['click']();}catch(_0xb7b7c5){console['log']('Keine\x20Usernames\x20mit\x20NULL-Clearnames\x20gefunden.\x20Überspringen.'),console['log']('Info:\x20'+_0xb7b7c5);}}const campaignPath=path['join'](SqlDataDirectory,'/campaign.db'),campaignDB=new sqlite3['Database'](campaignPath);campaignDB['serialize'](()=>{campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20message\x20(message_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_text\x20TEXT)'),campaignDB['run']('\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20campaign\x20(\x0a\x20\x20\x20\x20\x20\x20campaign_name\x20\x20\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20list_id\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20zeitabstand\x20\x20\x20\x20\x20REAL,\x0a\x20\x20\x20\x20\x20\x20message_id\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20account\x20\x20\x20\x20\x20\x20\x20\x20\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20skipFollowing\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20skipChatted\x20\x20\x20\x20\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(message_id)\x20REFERENCES\x20messages(message_id)\x0a\x20\x20\x20\x20)\x0a\x20\x20'),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipFollowing\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('ALTER\x20TABLE\x20campaign\x20ADD\x20COLUMN\x20skipChatted\x20INTEGER\x20DEFAULT\x200',()=>{}),campaignDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20dm\x20(dm_id\x20INTEGER\x20PRIMARY\x20KEY,\x20message_id\x20INTEGER,\x20account\x20TEXT,\x20username\x20TEXT,\x20list_id\x20TEXT,\x20date\x20TIMESTAMP\x20DEFAULT\x20CURRENT_TIMESTAMP,\x20FOREIGN\x20KEY\x20(message_id)\x20REFERENCES\x20messages\x20(message_id))');}),ipcMain['handle']('get-campaigns',async()=>{return new Promise((_0x44b919,_0x46b9ab)=>{const _0x3b64f4='SELECT\x20campaign_name\x20FROM\x20campaign';campaignDB['all'](_0x3b64f4,[],(_0x3fb3df,_0x4dcb64)=>{_0x3fb3df?_0x46b9ab(_0x3fb3df):_0x44b919(_0x4dcb64);});});}),ipcMain['handle']('get-campaign-details',async()=>{return new Promise((_0x12ce7d,_0x249f33)=>{const _0x234bd1='SELECT\x20campaign_name,\x20list_id\x20FROM\x20campaign';campaignDB['all'](_0x234bd1,[],async(_0x3405c0,_0x3fb23d)=>{if(_0x3405c0)console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnen:',_0x3405c0['message']),_0x249f33({'status':'error','message':_0x3405c0['message']});else try{const _0x56c7c5=await Promise['all'](_0x3fb23d['map'](_0x5c74df=>{return new Promise(_0xfc4b32=>{if(!_0x5c74df['list_id']){console['warn']('Fehlende\x20list_id\x20für\x20Kampagne:\x20'+_0x5c74df['campaign_name']),_0xfc4b32({'campaign_name':_0x5c74df['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'});return;}const _0x3bfcb1='SELECT\x20COUNT(*)\x20as\x20lead_count\x20FROM\x20'+_0x5c74df['list_id'],_0x37d74a='SELECT\x20COUNT(*)\x20as\x20contacted_count\x20FROM\x20campaign\x20LEFT\x20JOIN\x20dm\x20ON\x20campaign.list_id\x20=\x20dm.list_id\x20WHERE\x20dm.list_id\x20=\x20\x22'+_0x5c74df['list_id']+'\x22';db['get'](_0x3bfcb1,[],(_0x216162,_0x9e1dc3)=>{_0x216162?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Leads\x20für\x20'+_0x5c74df['campaign_name']+':',_0x216162['message']),_0xfc4b32({'campaign_name':_0x5c74df['campaign_name'],'lead_count':'N/A','contacted_count':'N/A'})):campaignDB['get'](_0x37d74a,[],(_0x2c25b9,_0xa76e93)=>{_0x2c25b9?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20kontaktierten\x20Nutzer\x20für\x20'+_0x5c74df['campaign_name']+':',_0x2c25b9['message']),_0xfc4b32({'campaign_name':_0x5c74df['campaign_name'],'lead_count':_0x9e1dc3?_0x9e1dc3['lead_count']:0x0,'contacted_count':'N/A'})):_0xfc4b32({'campaign_name':_0x5c74df['campaign_name'],'lead_count':_0x9e1dc3?_0x9e1dc3['lead_count']:0x0,'contacted_count':_0xa76e93?_0xa76e93['contacted_count']:0x0});});});});}));_0x12ce7d({'status':'success','campaigns':_0x56c7c5});}catch(_0x36b86f){console['error']('Fehler\x20bei\x20der\x20Verarbeitung\x20der\x20Kampagnendetails:',_0x36b86f),_0x249f33({'status':'error','message':_0x36b86f['message']});}});});}),ipcMain['handle']('get-campaign-writer-information',async(_0x3b23e3,_0x5be4bd)=>{return new Promise((_0x38d847,_0x53afd1)=>{const _0x358953='SELECT\x20campaign.list_id,\x20message.message_text,\x20message.message_id,\x20campaign.zeitabstand,\x20campaign.account,\x20skipFollowing,\x20skipChatted\x20FROM\x20campaign\x20LEFT\x20JOIN\x20message\x20ON\x20campaign.message_id\x20=\x20message.message_id\x20WHERE\x20campaign.campaign_name\x20=\x20?;';campaignDB['all'](_0x358953,[_0x5be4bd],(_0x18f566,_0x2bafb1)=>{_0x18f566?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Kampagnendetails:',_0x18f566),_0x53afd1(_0x18f566)):(console['log']('ROWS'),console['log'](_0x2bafb1),debugDatabaseContents(),_0x38d847(_0x2bafb1));});});});const showTableContents=_0x4eedb6=>{return new Promise((_0x183c6a,_0x29256a)=>{const _0x2a942e='SELECT\x20*\x20FROM\x20'+_0x4eedb6+';';campaignDB['all'](_0x2a942e,(_0x115950,_0x431dd9)=>{_0x115950?(console['error']('Fehler\x20beim\x20Abrufen\x20der\x20Daten\x20aus\x20'+_0x4eedb6+':',_0x115950),_0x29256a(_0x115950)):(console['log']('Inhalt\x20der\x20Tabelle\x20'+_0x4eedb6+':',_0x431dd9),_0x183c6a({'status':'success','message':_0x431dd9}));});});};async function debugDatabaseContents(){try{console['log']('Inhalt\x20der\x20Tabelle\x20\x27campaign\x27:'),await showTableContents('campaign'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27message\x27:'),await showTableContents('message'),console['log']('Inhalt\x20der\x20Tabelle\x20\x27dm\x27:'),await showTableContents('dm');}catch(_0x606bfb){console['error']('Fehler\x20beim\x20Debuggen\x20der\x20Tabelleninhalte:',_0x606bfb);}}ipcMain['handle']('create-campaign',async(_0x29e9d1,_0x29ff5c)=>{return new Promise((_0x52c427,_0x58878a)=>{const _0x386cb5='INSERT\x20INTO\x20campaign\x20(campaign_name)\x20VALUES\x20(?)';campaignDB['run'](_0x386cb5,[String(_0x29ff5c)],function(_0x5686d8){_0x5686d8?_0x58878a(_0x5686d8):_0x52c427({'status':'success','message':'Campaign\x20created\x20successfully'});});});}),ipcMain['handle']('delete-campaign',async(_0x5d7fad,_0x42c2f6)=>{return new Promise((_0x239a8e,_0x411253)=>{const _0x54c12b='DELETE\x20FROM\x20campaign\x20WHERE\x20campaign_name\x20=\x20?';campaignDB['run'](_0x54c12b,[_0x42c2f6],function(_0x177523){_0x177523?_0x411253(_0x177523):_0x239a8e({'status':'success','message':'Campaign\x20deleted\x20successfully'});});});}),ipcMain['handle']('update-campaign',async(_0x51504e,_0x323ce8,_0x16b214,_0x4caec7,_0x36bd11,_0x120627,_0x274260,_0x54dd04)=>{const _0x45685e=await createMessageID(_0x36bd11);return new Promise((_0x3df49b,_0x48b8f6)=>{console['log']('ZEITABSTAND:\x20'+_0x4caec7);if(!_0x323ce8||!_0x16b214||_0x4caec7===undefined||_0x4caec7===null||_0x4caec7===''||!_0x45685e||!_0x120627)return _0x48b8f6({'status':'error','message':'Fehlende\x20Eingabe,\x20bitte\x20prüfen!'});console['log']('Message-ID:\x20'+_0x45685e);const _0x1ab358='\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20campaign\x20\x0a\x20\x20\x20\x20\x20\x20SET\x20list_id\x20=\x20?,\x20zeitabstand\x20=\x20?,\x20message_id\x20=\x20?,\x20account\x20=\x20?,\x20skipFollowing\x20=\x20?,\x20skipChatted\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20campaign_name\x20=\x20?\x0a\x20\x20\x20\x20';campaignDB['run'](_0x1ab358,[_0x16b214,_0x4caec7,_0x45685e,_0x120627,_0x274260,_0x54dd04,_0x323ce8],function(_0xeaf055){if(_0xeaf055)_0x48b8f6({'status':'error','message':_0xeaf055['message']});else this['changes']===0x0?_0x48b8f6({'status':'error','message':'Kein\x20Eintrag\x20gefunden,\x20der\x20aktualisiert\x20werden\x20kann.'}):_0x3df49b({'status':'success','message':'Kampagne\x20erfolgreich\x20aktualisiert!'});});});}),ipcMain['handle']('update-dm',(_0x41b8bf,_0x56a5be,_0x27ac6b,_0x1c99ae,_0x3c21fb)=>{return new Promise((_0x26eb20,_0x20dc4a)=>{const _0x3b8635='INSERT\x20INTO\x20dm\x20(message_id,\x20account,\x20username,\x20list_id)\x20VALUES\x20(?,\x20?,\x20?,\x20?)';campaignDB['run'](_0x3b8635,[_0x56a5be,_0x27ac6b,_0x1c99ae,_0x3c21fb],function(_0x5e9f5e){return _0x5e9f5e?(console['error']('Fehler\x20beim\x20Einfügen\x20in\x20die\x20Tabelle\x20\x27dm\x27:',_0x5e9f5e['message']),_0x20dc4a('insert-dm-response',{'success':![],'message':_0x5e9f5e['message']})):(console['log']('Eintrag\x20erfolgreich\x20hinzugefügt:',this['lastID']),_0x26eb20('insert-dm-response',{'success':!![],'message':'Eintrag\x20erfolgreich\x20hinzugefügt'}));});});});const createMessageID=_0x339804=>{return new Promise((_0x524bf4,_0x3648b6)=>{const _0x2179e3='SELECT\x20message_id\x20FROM\x20message\x20WHERE\x20message_text\x20=\x20?';campaignDB['get'](_0x2179e3,[_0x339804],(_0x5d548e,_0x461bbd)=>{if(_0x5d548e)_0x3648b6({'status':'error','message':_0x5d548e['message']});else{if(_0x461bbd)_0x524bf4(_0x461bbd['message_id']);else{const _0x271d2b='INSERT\x20INTO\x20message\x20(message_text)\x20VALUES\x20(?)';campaignDB['run'](_0x271d2b,[_0x339804],function(_0x2c2965){_0x2c2965?_0x3648b6({'status':'error','message':_0x2c2965['message']}):_0x524bf4(this['lastID']);});}}});});};ipcMain['handle']('get-lead_count',async(_0x60ce01,_0xbfb015)=>{return new Promise((_0x115fec,_0x2ead14)=>{const _0x1a5419='SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20'+_0xbfb015;db['get'](_0x1a5419,(_0x38e903,_0x593597)=>{_0x38e903?_0x2ead14({'status':'error','message':_0x38e903['message']}):_0x115fec({'status':'success','count':_0x593597['count']});});});});const dbPath=path['join'](SqlDataDirectory,'/crm.db'),db=new sqlite3['Database'](dbPath);db['serialize'](()=>{db['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20leads\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)');});const igaccountsPath=path['join'](SqlDataDirectory,'/igaccounts.db');console['log']('igaccountsPath:\x20'+igaccountsPath);const igaccountsDB=new sqlite3['Database'](igaccountsPath);igaccountsDB['serialize'](()=>{igaccountsDB['run']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20accounts\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20cookie\x20TEXT)');});async function setCookiesForUser(_0xf7fbec,_0x1a1062){try{const _0x386856=await new Promise((_0x49a183,_0x443c5f)=>{igaccountsDB['all']('SELECT\x20cookie\x20FROM\x20accounts\x20WHERE\x20username=?',[_0x1a1062],(_0x48bca4,_0xbe655e)=>{if(_0x48bca4)_0x443c5f(_0x48bca4);else{if(_0xbe655e['length']>0x0){let _0x552c47=JSON['parse'](_0xbe655e[0x0]['cookie']);console['log'](_0x552c47),_0x49a183(_0x552c47);}else _0x443c5f(new Error('User\x20with\x20username\x20'+_0x1a1062+'\x20does\x20not\x20exist.'));}});});await _0xf7fbec['setCookie'](..._0x386856),console['log']('Cookies\x20were\x20successfully\x20added.');}catch(_0x2316a8){console['log']('Cookies\x20konnten\x20nicht\x20hinzugefügt\x20werden:\x20'+_0x2316a8);}}async function saveCookiesForUser(_0x35c128,_0x16fb45){try{const _0x3a2d3c=await _0x35c128['cookies']();if(!_0x3a2d3c||_0x3a2d3c['length']===0x0)throw new Error('Keine\x20gültigen\x20Cookies\x20gefunden\x20für\x20'+_0x16fb45);const _0x711a74=JSON['stringify'](_0x3a2d3c);if(_0x711a74['trim']()==='[]')throw new Error('Cookies\x20sind\x20leer\x20für\x20'+_0x16fb45);return new Promise((_0xb7055e,_0x10dc7e)=>{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x16fb45],(_0x36e6d2,_0x21e14d)=>{if(_0x36e6d2)return console['error']('Error\x20checking\x20user\x20existence:',_0x36e6d2),_0x10dc7e(_0x36e6d2);if(_0x21e14d){const _0x5ebff6=igaccountsDB['prepare']('UPDATE\x20accounts\x20SET\x20cookie\x20=\x20?\x20WHERE\x20username\x20=\x20?');_0x5ebff6['run'](_0x711a74,_0x16fb45,function(_0x3b01f3){return _0x3b01f3?(console['error']('Error\x20updating\x20cookies:',_0x3b01f3),_0x10dc7e(_0x3b01f3)):(console['log']('Cookies\x20updated\x20for\x20user:',_0x16fb45),_0xb7055e());});}else{const _0x4446f0=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username,\x20cookie)\x20VALUES\x20(?,\x20?)');_0x4446f0['run'](_0x16fb45,_0x711a74,function(_0x44d118){return _0x44d118?(console['error']('Error\x20inserting\x20new\x20user\x20and\x20cookies:',_0x44d118),_0x10dc7e(_0x44d118)):(console['log']('New\x20user\x20created\x20and\x20cookies\x20saved\x20for\x20user:',_0x16fb45),_0xb7055e());});}});});}catch(_0x96ebd4){console['error']('Error\x20fetching\x20cookies:',_0x96ebd4);throw _0x96ebd4;}}async function createUserIfNotExists(_0x1fc7fc){try{igaccountsDB['get']('SELECT\x20username\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?',[_0x1fc7fc],(_0x355787,_0x319ce3)=>{if(_0x355787){console['error']('Error\x20checking\x20user\x20existence:',_0x355787);throw _0x355787;}else{if(!_0x319ce3){const _0x305006=igaccountsDB['prepare']('INSERT\x20INTO\x20accounts\x20(username)\x20VALUES\x20(?)');_0x305006['run'](_0x1fc7fc,function(_0x584ce3){_0x584ce3?console['error']('Error\x20inserting\x20new\x20user:',_0x584ce3):console['log']('New\x20user\x20created:',_0x1fc7fc);});}else console['log']('User\x20already\x20exists:',_0x1fc7fc);}});}catch(_0x89fd54){console['error']('Error\x20creating\x20user:',_0x89fd54);throw _0x89fd54;}}ipcMain['handle']('create-relation',async(_0x4538ca,_0x5bd1c8)=>{return new Promise((_0xd98b4f,_0x151528)=>{const _0x556366='CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x5bd1c8+'\x20(username\x20TEXT\x20PRIMARY\x20KEY,\x20clearname\x20TEXT,\x20ProfilePic\x20TEXT,\x20Bio\x20TEXT,\x20Follower_Count\x20Integer,\x20Following_Count\x20Integer,\x20Post_Count\x20Integer,\x20Isverified\x20Boolean,\x20Isprivat\x20Boolean,\x20IsBusiness\x20Boolean)';db['run'](_0x556366,function(_0x19ee7c){_0x19ee7c?_0x151528(_0x19ee7c):_0xd98b4f({'status':'success'});});});}),ipcMain['handle']('delete-relation',async(_0x2fd644,_0x42bd2d)=>{return console['log']('droping\x20table'+_0x42bd2d),new Promise((_0x535ec3,_0x5a9709)=>{const _0x4b155f='DROP\x20TABLE\x20IF\x20EXISTS\x20'+_0x42bd2d;console['log']('droping\x20table'+_0x42bd2d),db['run'](_0x4b155f,function(_0x47e071){_0x47e071?_0x5a9709(_0x47e071):_0x535ec3({'status':'success'});});});}),ipcMain['handle']('get-relations',async _0x44fcad=>{return new Promise((_0x48719f,_0x337318)=>{const _0x39167b='SELECT\x20name\x20FROM\x20sqlite_master\x20WHERE\x20type=\x27table\x27';db['all'](_0x39167b,[],(_0x13bee6,_0x470ae2)=>{_0x13bee6?_0x337318(_0x13bee6):_0x48719f(_0x470ae2['map'](_0x356f22=>_0x356f22['name']));});});}),ipcMain['handle']('add-user',async(_0x303b7f,_0x542bf8,_0x5d8345)=>{return new Promise(_0x1c8309=>{const _0x4bedfb=db['prepare']('INSERT\x20INTO\x20'+_0x5d8345+'\x20(username)\x20VALUES\x20(?)');_0x4bedfb['run'](_0x542bf8,function(_0x2d47f0){_0x2d47f0?console['log']('error\x20in\x20add-user:'+_0x2d47f0):_0x1c8309({'status':'success','id':this['lastID']});}),_0x4bedfb['finalize']();});}),ipcMain['handle']('get-users',async()=>{return new Promise((_0x34afe3,_0x467456)=>{db['all']('SELECT\x20*\x20FROM\x20leads',(_0x99d2de,_0x2b9162)=>{if(_0x99d2de)_0x467456(_0x99d2de);else{_0x34afe3({'status':'success','users':_0x2b9162});for(_0x2b9162 of _0x2b9162){console['log'](_0x2b9162['username']);}}});});}),ipcMain['handle']('get-data',async(_0x2ecc1f,_0x300956)=>{return new Promise((_0x20b5d1,_0x4fe008)=>{const _0xa30599='SELECT\x20*\x20FROM\x20'+_0x300956;console['log'](_0xa30599),db['all'](_0xa30599,[],(_0x4fda66,_0x5d143f)=>{_0x4fda66?_0x4fe008(_0x4fda66):_0x20b5d1(_0x5d143f);});});}),ipcMain['handle']('get-accounts',async _0x4e1d60=>{return new Promise((_0x18e035,_0x59ee7b)=>{const _0x9ca9f8='SELECT\x20*\x20FROM\x20accounts';console['log'](_0x9ca9f8),igaccountsDB['all'](_0x9ca9f8,[],(_0x1d980c,_0x20b235)=>{_0x1d980c?_0x59ee7b(_0x1d980c):_0x18e035(_0x20b235);});});}),ipcMain['handle']('get-targets',async(_0x4a6761,_0x16eab1)=>{return getTargetProfiles(_0x16eab1);}),ipcMain['handle']('delete-user',async(_0x3e54d8,_0x52ec18,_0x258844)=>{return new Promise((_0x53df60,_0x4b5463)=>{const _0x3497a1=db['prepare']('DELETE\x20FROM\x20'+_0x258844+'\x20WHERE\x20username\x20=\x20?');_0x3497a1['run'](_0x52ec18,function(_0x34c551){_0x34c551?_0x4b5463(_0x34c551):_0x53df60({'status':'success','changes':this['changes']});}),_0x3497a1['finalize']();});}),ipcMain['handle']('delete-account',async(_0x2f85bb,_0x2a6cd7)=>{const _0x751ae=igaccountsDB['prepare']('DELETE\x20FROM\x20accounts\x20WHERE\x20username\x20=\x20?');_0x751ae['run'](_0x2a6cd7,function(_0x388fc3){_0x388fc3&&console['log'](_0x388fc3);}),_0x751ae['finalize']();}),ipcMain['handle']('get-contacted-count-this-month',async()=>{return new Promise((_0x425ec5,_0x233436)=>{const _0xb91dcd='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20strftime(\x27%Y-%m\x27,\x20date)\x20=\x20strftime(\x27%Y-%m\x27,\x20\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0xb91dcd,[],(_0x284435,_0x4af135)=>{_0x284435?_0x233436({'status':'error','message':_0x284435['message']}):_0x425ec5({'status':'success','contactedCount':_0x4af135['contactedCount']});});});}),ipcMain['handle']('get-contacted-count-today',async()=>{return new Promise((_0x1d8d9c,_0x259753)=>{const _0x28dc2e='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20COUNT(*)\x20as\x20contactedCount\x0a\x20\x20\x20\x20\x20\x20FROM\x20dm\x0a\x20\x20\x20\x20\x20\x20WHERE\x20date(date)\x20=\x20date(\x27now\x27)\x0a\x20\x20\x20\x20';campaignDB['get'](_0x28dc2e,[],(_0x5d9551,_0xcbdbd8)=>{_0x5d9551?_0x259753({'status':'error','message':_0x5d9551['message']}):_0x1d8d9c({'status':'success','contactedCount':_0xcbdbd8['contactedCount']});});});});function exportDatabase(_0x4f09e2){return new Promise((_0x2732d8,_0x1a7baf)=>{const _0x2feeaf='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20username,\x20Follower_Count,\x20Following_Count,\x20Post_Count,\x20clearname,\x20Bio\x0a\x20\x20\x20\x20\x20\x20FROM\x20'+_0x4f09e2+'\x0a\x20\x20\x20\x20';db['all'](_0x2feeaf,[],async(_0xff4eb,_0x3a9733)=>{if(_0xff4eb){console['error']('Fehler\x20bei\x20der\x20Abfrage:',_0xff4eb['message']),_0x1a7baf(_0xff4eb);return;}if(!_0x3a9733||_0x3a9733['length']===0x0){console['log']('Keine\x20Daten\x20gefunden.'),_0x2732d8();return;}const _0x29a7c7=XLSX['utils']['json_to_sheet'](_0x3a9733),_0x2a8aa5=XLSX['utils']['sheet_to_csv'](_0x29a7c7);try{const {canceled:_0x15035b,filePath:_0x28b761}=await dialog['showSaveDialog']({'title':'CSV-Datei\x20exportieren','defaultPath':path['join'](app['getPath']('documents'),_0x4f09e2+'.csv'),'buttonLabel':'Speichern','filters':[{'name':'CSV\x20Files','extensions':['csv']},{'name':'All\x20Files','extensions':['*']}]});if(_0x15035b||!_0x28b761){console['log']('Speichern\x20abgebrochen.'),_0x2732d8();return;}fs['writeFile'](_0x28b761,_0x2a8aa5,'utf8',_0x1eca58=>{_0x1eca58?(console['error']('Fehler\x20beim\x20Schreiben\x20der\x20Datei:',_0x1eca58['message']),_0x1a7baf(_0x1eca58)):(console['log']('CSV-Datei\x20erfolgreich\x20exportiert:',_0x28b761),_0x2732d8());});}catch(_0x3f896f){console['error']('Fehler\x20im\x20Speicherdialog:',_0x3f896f),_0x1a7baf(_0x3f896f);}});});}ipcMain['handle']('start-stripe-checkout',async(_0x5d2539,_0x3f83db)=>{shell['openExternal'](_0x3f83db);});